"use strict";var qne=Object.defineProperty,Wne=Object.defineProperties,Zne=Object.getOwnPropertyDescriptors,Eq=Object.getOwnPropertySymbols,Kne=Object.prototype.hasOwnProperty,Yne=Object.prototype.propertyIsEnumerable,Dq=(et,ve,F)=>ve in et?qne(et,ve,{enumerable:!0,configurable:!0,writable:!0,value:F}):et[ve]=F,Sq=(et,ve)=>{for(var F in ve||(ve={}))Kne.call(ve,F)&&Dq(et,F,ve[F]);if(Eq)for(var F of Eq(ve))Yne.call(ve,F)&&Dq(et,F,ve[F]);return et},Tq=(et,ve)=>Wne(et,Zne(ve));(self.webpackChunktrade_in=self.webpackChunktrade_in||[]).push([[179],{2011:(et,ve,F)=>{F.d(ve,{hO:()=>Ze,xv:()=>ue,Dh:()=>le,GT:()=>_e,cc:()=>xe,on:()=>G,pX:()=>ae});var u=F(5e3),ne=F(127),B=F(6351);et=F.hmd(et);const he=["ngOnDestroy"],ae=(Te,Ye,tt,Ie={})=>new Proxy(Te,{get:(Ee,Se)=>tt.runOutsideAngular(()=>{var ze;if(Te[Se])return(null===(ze=null==Ie?void 0:Ie.spy)||void 0===ze?void 0:ze.get)&&Ie.spy.get(Se,Te[Se]),Te[Se];if(he.indexOf(Se)>-1)return()=>{};const $e=Ye.toPromise().then(W=>{const De=W&&W[Se];return"function"==typeof De?De.bind(W):De&&De.then?De.then(X=>tt.run(()=>X)):tt.run(()=>De)});return new Proxy(()=>{},{get:(W,De)=>$e[De],apply:(W,De,X)=>$e.then(ce=>{var se;const ye=ce&&ce(...X);return(null===(se=null==Ie?void 0:Ie.spy)||void 0===se?void 0:se.apply)&&Ie.spy.apply(Se,X,ye),ye})})})}),_e=(Te,Ye)=>{Ye.forEach(tt=>{Object.getOwnPropertyNames(tt.prototype||tt).forEach(Ie=>{Object.defineProperty(Te.prototype,Ie,Object.getOwnPropertyDescriptor(tt.prototype||tt,Ie))})})};class ie{constructor(Ye){return Ye}}const le=new u.OlP("angularfire2.app.options"),ue=new u.OlP("angularfire2.app.name");function G(Te,Ye,tt){const Ee="object"==typeof tt&&tt||{};Ee.name=Ee.name||"string"==typeof tt&&tt||"[DEFAULT]";const ze=ne.Z.apps.filter($e=>$e&&$e.name===Ee.name)[0]||Ye.runOutsideAngular(()=>ne.Z.initializeApp(Te,Ee));try{JSON.stringify(Te)!==JSON.stringify(ze.options)&&q("error",`${ze.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new ie(ze)}const q=(Te,...Ye)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[Te](...Ye)},oe={provide:ie,useFactory:G,deps:[le,u.R0b,[new u.FiY,ue]]};let Ze=(()=>{class Te{constructor(tt){ne.Z.registerVersion("angularfire",B.q4.full,"core"),ne.Z.registerVersion("angularfire",B.q4.full,"app-compat"),ne.Z.registerVersion("angular",u.q4F.full,tt.toString())}static initializeApp(tt,Ie){return{ngModule:Te,providers:[{provide:le,useValue:tt},{provide:ue,useValue:Ie}]}}}return Te.\u0275fac=function(tt){return new(tt||Te)(u.LFG(u.Lbi))},Te.\u0275mod=u.oAB({type:Te}),Te.\u0275inj=u.cJS({providers:[oe]}),Te})();function xe(Te,Ye,tt,Ie,Ee){const[,Se,ze]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===Te)||[];if(Se)return function Pe(Te,Ye){try{return Te.toString()===Ye.toString()}catch(tt){return Te===Ye}}(Ee,ze)||(me("error",`${Ye} was already initialized on the ${tt} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:Ee,was:ze})),Se;{const $e=Ie();return globalThis.\u0275AngularfireInstanceCache.push([Te,$e,Ee]),$e}}const je=!!et.hot,me=(Te,...Ye)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[Te](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(et,ve,F)=>{F.d(ve,{q4:()=>xl,iC:()=>ea,fc:()=>qg,HU:()=>Sc,vb:()=>xu,JM:()=>Ud});var u=F(5e3),ne=F(5867),B=F(5861),he=F(9681),ae=F(2090),_e=F(4859),ie=F(1877),le=F(8766);const ue="@firebase/installations",G="0.5.12",oe=`w:${G}`,Ze="FIS_v2",Ye=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function tt(T){return T instanceof ae.ZR&&T.code.includes("request-failed")}function Ie({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Ee(T){return{token:T.token,requestStatus:2,expiresIn:ce(T.expiresIn),creationTime:Date.now()}}function Se(T,I){return ze.apply(this,arguments)}function ze(){return(ze=(0,B.Z)(function*(T,I){const U=(yield I.json()).error;return Ye.create("request-failed",{requestName:T,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function $e({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function W(T,{refreshToken:I}){const k=$e(T);return k.append("Authorization",function se(T){return`${Ze} ${T}`}(I)),k}function De(T){return X.apply(this,arguments)}function X(){return(X=(0,B.Z)(function*(T){const I=yield T();return I.status>=500&&I.status<600?T():I})).apply(this,arguments)}function ce(T){return Number(T.replace("s","000"))}function ye(T,I){return fe.apply(this,arguments)}function fe(){return(fe=(0,B.Z)(function*({appConfig:T,heartbeatServiceProvider:I},{fid:k}){const U=Ie(T),J=$e(T),ee=I.getImmediate({optional:!0});if(ee){const St=yield ee.getHeartbeatsHeader();St&&J.append("x-firebase-client",St)}const qe={method:"POST",headers:J,body:JSON.stringify({fid:k,authVersion:Ze,appId:T.appId,sdkVersion:oe})},ot=yield De(()=>fetch(U,qe));if(ot.ok){const St=yield ot.json();return{fid:St.fid||k,registrationStatus:2,refreshToken:St.refreshToken,authToken:Ee(St.authToken)}}throw yield Se("Create Installation",ot)})).apply(this,arguments)}function Ne(T){return new Promise(I=>{setTimeout(I,T)})}const $t=/^[cdef][\w-]{21}$/;function nt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const k=function on(T){return function ft(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return $t.test(k)?k:""}catch(T){return""}}function Un(T){return`${T.appName}!${T.appId}`}const un=new Map;function en(T,I){const k=Un(T);Ut(k,I),function ns(T,I){const k=function Ri(){return!hr&&"BroadcastChannel"in self&&(hr=new BroadcastChannel("[Firebase] FID Change"),hr.onmessage=T=>{Ut(T.data.key,T.data.fid)}),hr}();k&&k.postMessage({key:T,fid:I}),function nr(){0===un.size&&hr&&(hr.close(),hr=null)}()}(k,I)}function Ut(T,I){const k=un.get(T);if(k)for(const U of k)U(I)}let hr=null;const ir="firebase-installations-store";let jr=null;function vt(){return jr||(jr=(0,le.X3)("firebase-installations-database",1,{upgrade:(T,I)=>{0===I&&T.createObjectStore(ir)}})),jr}function rr(T,I){return jn.apply(this,arguments)}function jn(){return(jn=(0,B.Z)(function*(T,I){const k=Un(T),J=(yield vt()).transaction(ir,"readwrite"),ee=J.objectStore(ir),be=yield ee.get(k);return yield ee.put(I,k),yield J.done,(!be||be.fid!==I.fid)&&en(T,I.fid),I})).apply(this,arguments)}function ti(T){return rs.apply(this,arguments)}function rs(){return(rs=(0,B.Z)(function*(T){const I=Un(T),U=(yield vt()).transaction(ir,"readwrite");yield U.objectStore(ir).delete(I),yield U.done})).apply(this,arguments)}function ss(T,I){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,B.Z)(function*(T,I){const k=Un(T),J=(yield vt()).transaction(ir,"readwrite"),ee=J.objectStore(ir),be=yield ee.get(k),qe=I(be);return void 0===qe?yield ee.delete(k):yield ee.put(qe,k),yield J.done,qe&&(!be||be.fid!==qe.fid)&&en(T,qe.fid),qe})).apply(this,arguments)}function Zn(T){return fr.apply(this,arguments)}function fr(){return(fr=(0,B.Z)(function*(T){let I;const k=yield ss(T.appConfig,U=>{const J=Lo(U),ee=qt(T,J);return I=ee.registrationPromise,ee.installationEntry});return""===k.fid?{installationEntry:yield I}:{installationEntry:k,registrationPromise:I}})).apply(this,arguments)}function Lo(T){return ao(T||{fid:nt(),registrationStatus:0})}function qt(T,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(Ye.create("app-offline"))};const k={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},U=function ct(T,I){return Ct.apply(this,arguments)}(T,k);return{installationEntry:k,registrationPromise:U}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:ki(T)}:{installationEntry:I}}function Ct(){return(Ct=(0,B.Z)(function*(T,I){try{const k=yield ye(T,I);return rr(T.appConfig,k)}catch(k){throw tt(k)&&409===k.customData.serverCode?yield ti(T.appConfig):yield rr(T.appConfig,{fid:I.fid,registrationStatus:0}),k}})).apply(this,arguments)}function ki(T){return pr.apply(this,arguments)}function pr(){return(pr=(0,B.Z)(function*(T){let I=yield Ht(T.appConfig);for(;1===I.registrationStatus;)yield Ne(100),I=yield Ht(T.appConfig);if(0===I.registrationStatus){const{installationEntry:k,registrationPromise:U}=yield Zn(T);return U||k}return I})).apply(this,arguments)}function Ht(T){return ss(T,I=>{if(!I)throw Ye.create("installation-not-found");return ao(I)})}function ao(T){return function Oi(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function zi(T,I){return pt.apply(this,arguments)}function pt(){return(pt=(0,B.Z)(function*({appConfig:T,heartbeatServiceProvider:I},k){const U=lo(T,k),J=W(T,k),ee=I.getImmediate({optional:!0});if(ee){const St=yield ee.getHeartbeatsHeader();St&&J.append("x-firebase-client",St)}const qe={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:oe,appId:T.appId}})},ot=yield De(()=>fetch(U,qe));if(ot.ok)return Ee(yield ot.json());throw yield Se("Generate Auth Token",ot)})).apply(this,arguments)}function lo(T,{fid:I}){return`${Ie(T)}/${I}/authTokens:generate`}function H(T){return Z.apply(this,arguments)}function Z(){return(Z=(0,B.Z)(function*(T,I=!1){let k;const U=yield ss(T.appConfig,ee=>{if(!dt(ee))throw Ye.create("not-registered");const be=ee.authToken;if(!I&&dn(be))return ee;if(1===be.requestStatus)return k=j(T,I),ee;{if(!navigator.onLine)throw Ye.create("app-offline");const qe=di(ee);return k=Re(T,qe),qe}});return k?yield k:U.authToken})).apply(this,arguments)}function j(T,I){return $.apply(this,arguments)}function $(){return($=(0,B.Z)(function*(T,I){let k=yield K(T.appConfig);for(;1===k.authToken.requestStatus;)yield Ne(100),k=yield K(T.appConfig);const U=k.authToken;return 0===U.requestStatus?H(T,I):U})).apply(this,arguments)}function K(T){return ss(T,I=>{if(!dt(I))throw Ye.create("not-registered");return function Ft(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function Re(T,I){return He.apply(this,arguments)}function He(){return(He=(0,B.Z)(function*(T,I){try{const k=yield zi(T,I),U=Object.assign(Object.assign({},I),{authToken:k});return yield rr(T.appConfig,U),k}catch(k){if(!tt(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const U=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield rr(T.appConfig,U)}else yield ti(T.appConfig);throw k}})).apply(this,arguments)}function dt(T){return void 0!==T&&2===T.registrationStatus}function dn(T){return 2===T.requestStatus&&!function Qt(T){const I=Date.now();return I<T.creationTime||T.creationTime+T.expiresIn<I+36e5}(T)}function di(T){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:I})}function os(){return(os=(0,B.Z)(function*(T){const I=T,{installationEntry:k,registrationPromise:U}=yield Zn(I);return U?U.catch(console.error):H(I).catch(console.error),k.fid})).apply(this,arguments)}function ol(){return(ol=(0,B.Z)(function*(T,I=!1){const k=T;return yield ni(k),(yield H(k,I)).token})).apply(this,arguments)}function ni(T){return $i.apply(this,arguments)}function $i(){return($i=(0,B.Z)(function*(T){const{registrationPromise:I}=yield Zn(T);I&&(yield I)})).apply(this,arguments)}function Sa(T){return Ye.create("missing-app-config-values",{valueName:T})}const or="installations",ht=T=>{const I=T.getProvider("app").getImmediate(),k=function bi(T){if(!T||!T.options)throw Sa("App Configuration");if(!T.name)throw Sa("App Name");const I=["projectId","apiKey","appId"];for(const k of I)if(!T.options[k])throw Sa(k);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(I);return{app:I,appConfig:k,heartbeatServiceProvider:(0,he._getProvider)(I,"heartbeat"),_delete:()=>Promise.resolve()}},hn=T=>{const I=T.getProvider("app").getImmediate(),k=(0,he._getProvider)(I,or).getImmediate();return{getId:()=>function gr(T){return os.apply(this,arguments)}(k),getToken:J=>function Da(T){return ol.apply(this,arguments)}(k,J)}};(function ar(){(0,he._registerComponent)(new _e.wA(or,ht,"PUBLIC")),(0,he._registerComponent)(new _e.wA("installations-internal",hn,"PRIVATE"))})(),(0,he.registerVersion)(ue,G),(0,he.registerVersion)(ue,G,"esm2017");const as="@firebase/remote-config",Hn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ng{constructor(I,k,U,J){this.client=I,this.storage=k,this.storageCache=U,this.logger=J}isCachedDataFresh(I,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-k,J=U<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${J}.`),J}fetch(I){var k=this;return(0,B.Z)(function*(){const[U,J]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(J&&k.isCachedDataFresh(I.cacheMaxAgeMillis,U))return J;I.eTag=J&&J.eTag;const ee=yield k.client.fetch(I),be=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&be.push(k.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(be),ee})()}}function Cd(T=navigator){return T.languages&&T.languages[0]||T.language}class Ni{constructor(I,k,U,J,ee,be){this.firebaseInstallations=I,this.sdkVersion=k,this.namespace=U,this.projectId=J,this.apiKey=ee,this.appId=be}fetch(I){var k=this;return(0,B.Z)(function*(){var U,J,ee;const[be,qe]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),St=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},gt={sdk_version:k.sdkVersion,app_instance_id:be,app_instance_id_token:qe,app_id:k.appId,language_code:Cd()},Si={method:"POST",headers:Tt,body:JSON.stringify(gt)},si=fetch(St,Si),Ki=new Promise((qr,Wr)=>{I.signal.addEventListener(()=>{const ku=new Error("The operation was aborted.");ku.name="AbortError",Wr(ku)})});let Er;try{yield Promise.race([si,Ki]),Er=yield si}catch(qr){let Wr="fetch-client-network";throw"AbortError"===(null===(U=qr)||void 0===U?void 0:U.name)&&(Wr="fetch-timeout"),Hn.create(Wr,{originalErrorMessage:null===(J=qr)||void 0===J?void 0:J.message})}let $r=Er.status;const na=Er.headers.get("ETag")||void 0;let Pl,bs;if(200===Er.status){let qr;try{qr=yield Er.json()}catch(Wr){throw Hn.create("fetch-client-parse",{originalErrorMessage:null===(ee=Wr)||void 0===ee?void 0:ee.message})}Pl=qr.entries,bs=qr.state}if("INSTANCE_STATE_UNSPECIFIED"===bs?$r=500:"NO_CHANGE"===bs?$r=304:("NO_TEMPLATE"===bs||"EMPTY_CONFIG"===bs)&&(Pl={}),304!==$r&&200!==$r)throw Hn.create("fetch-status",{httpStatus:$r});return{status:$r,eTag:na,config:Pl}})()}}class Fg{constructor(I,k){this.client=I,this.storage=k}fetch(I){var k=this;return(0,B.Z)(function*(){const U=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(I,U)})()}attemptFetch(I,{throttleEndTimeMillis:k,backoffCount:U}){var J=this;return(0,B.Z)(function*(){yield function fo(T,I){return new Promise((k,U)=>{const J=Math.max(I-Date.now(),0),ee=setTimeout(k,J);T.addEventListener(()=>{clearTimeout(ee),U(Hn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,k);try{const ee=yield J.client.fetch(I);return yield J.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function Ed(T){if(!(T instanceof ae.ZR&&T.customData))return!1;const I=Number(T.customData.httpStatus);return 429===I||500===I||503===I||504===I}(ee))throw ee;const be={throttleEndTimeMillis:Date.now()+(0,ae.$s)(U),backoffCount:U+1};return yield J.storage.setThrottleMetadata(be),J.attemptFetch(I,be)}})()}}class Dd{constructor(I,k,U,J,ee){this.app=I,this._client=k,this._storageCache=U,this._storage=J,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function du(T,I){var k;const U=T.target.error||void 0;return Hn.create(I,{originalErrorMessage:U&&(null===(k=U)||void 0===k?void 0:k.message)})}const po="app_namespace_store";class Ug{constructor(I,k,U,J=function Vg(){return new Promise((T,I)=>{var k;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=J=>{I(du(J,"storage-open"))},U.onsuccess=J=>{T(J.target.result)},U.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(po,{keyPath:"compositeKey"})}}catch(U){I(Hn.create("storage-open",{originalErrorMessage:null===(k=U)||void 0===k?void 0:k.message}))}})}()){this.appId=I,this.appName=k,this.namespace=U,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var k=this;return(0,B.Z)(function*(){const U=yield k.openDbPromise;return new Promise((J,ee)=>{var be;const ot=U.transaction([po],"readonly").objectStore(po),St=k.createCompositeKey(I);try{const Tt=ot.get(St);Tt.onerror=gt=>{ee(du(gt,"storage-get"))},Tt.onsuccess=gt=>{const Si=gt.target.result;J(Si?Si.value:void 0)}}catch(Tt){ee(Hn.create("storage-get",{originalErrorMessage:null===(be=Tt)||void 0===be?void 0:be.message}))}})})()}set(I,k){var U=this;return(0,B.Z)(function*(){const J=yield U.openDbPromise;return new Promise((ee,be)=>{var qe;const St=J.transaction([po],"readwrite").objectStore(po),Tt=U.createCompositeKey(I);try{const gt=St.put({compositeKey:Tt,value:k});gt.onerror=Si=>{be(du(Si,"storage-set"))},gt.onsuccess=()=>{ee()}}catch(gt){be(Hn.create("storage-set",{originalErrorMessage:null===(qe=gt)||void 0===qe?void 0:qe.message}))}})})()}delete(I){var k=this;return(0,B.Z)(function*(){const U=yield k.openDbPromise;return new Promise((J,ee)=>{var be;const ot=U.transaction([po],"readwrite").objectStore(po),St=k.createCompositeKey(I);try{const Tt=ot.delete(St);Tt.onerror=gt=>{ee(du(gt,"storage-delete"))},Tt.onsuccess=()=>{J()}}catch(Tt){ee(Hn.create("storage-delete",{originalErrorMessage:null===(be=Tt)||void 0===be?void 0:be.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class Td{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,B.Z)(function*(){const k=I.storage.getLastFetchStatus(),U=I.storage.getLastSuccessfulFetchTimestampMillis(),J=I.storage.getActiveConfig(),ee=yield k;ee&&(I.lastFetchStatus=ee);const be=yield U;be&&(I.lastSuccessfulFetchTimestampMillis=be);const qe=yield J;qe&&(I.activeConfig=qe)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function uc(){return Id.apply(this,arguments)}function Id(){return(Id=(0,B.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(T){return!1}})).apply(this,arguments)}!function Ia(){(0,he._registerComponent)(new _e.wA("remote-config",function T(I,{instanceIdentifier:k}){const U=I.getProvider("app").getImmediate(),J=I.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Hn.create("registration-window");if(!(0,ae.hl)())throw Hn.create("indexed-db-unavailable");const{projectId:ee,apiKey:be,appId:qe}=U.options;if(!ee)throw Hn.create("registration-project-id");if(!be)throw Hn.create("registration-api-key");if(!qe)throw Hn.create("registration-app-id");const ot=new Ug(qe,U.name,k=k||"firebase"),St=new Td(ot),Tt=new ie.Yd(as);Tt.logLevel=ie.in.ERROR;const gt=new Ni(J,he.SDK_VERSION,k,ee,be,qe),Si=new Fg(gt,ot),si=new Ng(Si,ot,St,Tt),Ki=new Dd(U,si,St,ot,Tt);return function mn(T){const I=(0,ae.m9)(T);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(Ki),Ki},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(as,"0.3.11"),(0,he.registerVersion)(as,"0.3.11","esm2017")}();const Ad="/firebase-messaging-sw.js",Fi="/firebase-cloud-messaging-push-scope",Uo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Aa="google.c.a.c_id",Md="google.c.a.c_l",tf="google.c.a.ts",go="google.c.a.e";var Ma=(()=>{return(T=Ma||(Ma={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",Ma;var T})();function qi(T){const I=new Uint8Array(T);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xd(T){const k=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(k),J=new Uint8Array(U.length);for(let ee=0;ee<U.length;++ee)J[ee]=U.charCodeAt(ee);return J}const Li="fcm_token_details_db",_r="fcm_token_object_Store";function hu(T){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,B.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(Li))return null;let I=null;return(yield(0,le.X3)(Li,5,{upgrade:(U=(0,B.Z)(function*(J,ee,be,qe){var ot;if(ee<2||!J.objectStoreNames.contains(_r))return;const St=qe.objectStore(_r),Tt=yield St.index("fcmSenderId").get(T);if(yield St.clear(),Tt)if(2===ee){const gt=Tt;if(!gt.auth||!gt.p256dh||!gt.endpoint)return;I={token:gt.fcmToken,createTime:null!==(ot=gt.createTime)&&void 0!==ot?ot:Date.now(),subscriptionOptions:{auth:gt.auth,p256dh:gt.p256dh,endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:"string"==typeof gt.vapidKey?gt.vapidKey:qi(gt.vapidKey)}}}else if(3===ee){const gt=Tt;I={token:gt.fcmToken,createTime:gt.createTime,subscriptionOptions:{auth:qi(gt.auth),p256dh:qi(gt.p256dh),endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:qi(gt.vapidKey)}}}else if(4===ee){const gt=Tt;I={token:gt.fcmToken,createTime:gt.createTime,subscriptionOptions:{auth:qi(gt.auth),p256dh:qi(gt.p256dh),endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:qi(gt.vapidKey)}}}}),function(ee,be,qe,ot){return U.apply(this,arguments)})})).close(),yield(0,le.Lj)(Li),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),fu(I)?I:null;var U}),Rd.apply(this,arguments)}function fu(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:I}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const hs="firebase-messaging-store";let nf=null;function fn(){return nf||(nf=(0,le.X3)("firebase-messaging-database",1,{upgrade:(T,I)=>{0===I&&T.createObjectStore(hs)}})),nf}function dl(T){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,B.Z)(function*(T){const I=Ci(T),U=yield(yield fn()).transaction(hs).objectStore(hs).get(I);if(U)return U;{const J=yield hu(T.appConfig.senderId);if(J)return yield rn(T,J),J}})).apply(this,arguments)}function rn(T,I){return hl.apply(this,arguments)}function hl(){return(hl=(0,B.Z)(function*(T,I){const k=Ci(T),J=(yield fn()).transaction(hs,"readwrite");return yield J.objectStore(hs).put(I,k),yield J.done,I})).apply(this,arguments)}function dc(T){return mo.apply(this,arguments)}function mo(){return(mo=(0,B.Z)(function*(T){const I=Ci(T),U=(yield fn()).transaction(hs,"readwrite");yield U.objectStore(hs).delete(I),yield U.done})).apply(this,arguments)}function Ci({appConfig:T}){return T.appId}const Rn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function fs(T,I){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,B.Z)(function*(T,I){var k;const U=yield ka(T),J=Oa(I),ee={method:"POST",headers:U,body:JSON.stringify(J)};let be;try{be=yield(yield fetch(ps(T.appConfig),ee)).json()}catch(qe){throw Rn.create("token-subscribe-failed",{errorInfo:null===(k=qe)||void 0===k?void 0:k.toString()})}if(be.error)throw Rn.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw Rn.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function Go(T,I){return ks.apply(this,arguments)}function ks(){return(ks=(0,B.Z)(function*(T,I){var k;const U=yield ka(T),J=Oa(I.subscriptionOptions),ee={method:"PATCH",headers:U,body:JSON.stringify(J)};let be;try{be=yield(yield fetch(`${ps(T.appConfig)}/${I.token}`,ee)).json()}catch(qe){throw Rn.create("token-update-failed",{errorInfo:null===(k=qe)||void 0===k?void 0:k.toString()})}if(be.error)throw Rn.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw Rn.create("token-update-no-token");return be.token})).apply(this,arguments)}function fl(T,I){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,B.Z)(function*(T,I){var k;const J={method:"DELETE",headers:yield ka(T)};try{const be=yield(yield fetch(`${ps(T.appConfig)}/${I}`,J)).json();if(be.error)throw Rn.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(ee){throw Rn.create("token-unsubscribe-failed",{errorInfo:null===(k=ee)||void 0===k?void 0:k.toString()})}})).apply(this,arguments)}function ps({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function ka(T){return yt.apply(this,arguments)}function yt(){return(yt=(0,B.Z)(function*({appConfig:T,installations:I}){const k=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Oa({p256dh:T,auth:I,endpoint:k,vapidKey:U}){const J={web:{endpoint:k,auth:I,p256dh:T}};return U!==Uo&&(J.web.applicationPubKey=U),J}const hc=6048e5;function pl(T){return mu.apply(this,arguments)}function mu(){return(mu=(0,B.Z)(function*(T){const I=yield Sn(T.swRegistration,T.vapidKey),k={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:I.endpoint,auth:qi(I.getKey("auth")),p256dh:qi(I.getKey("p256dh"))},U=yield dl(T.firebaseDependencies);if(U){if(zo(U.subscriptionOptions,k))return Date.now()>=U.createTime+hc?yu(T,{token:U.token,createTime:Date.now(),subscriptionOptions:k}):U.token;try{yield fl(T.firebaseDependencies,U.token)}catch(J){console.warn(J)}return Lt(T.firebaseDependencies,k)}return Lt(T.firebaseDependencies,k)})).apply(this,arguments)}function gl(T){return _u.apply(this,arguments)}function _u(){return(_u=(0,B.Z)(function*(T){const I=yield dl(T.firebaseDependencies);I&&(yield fl(T.firebaseDependencies,I.token),yield dc(T.firebaseDependencies));const k=yield T.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function yu(T,I){return Me.apply(this,arguments)}function Me(){return(Me=(0,B.Z)(function*(T,I){try{const k=yield Go(T.firebaseDependencies,I),U=Object.assign(Object.assign({},I),{token:k,createTime:Date.now()});return yield rn(T.firebaseDependencies,U),k}catch(k){throw yield gl(T),k}})).apply(this,arguments)}function Lt(T,I){return fc.apply(this,arguments)}function fc(){return(fc=(0,B.Z)(function*(T,I){const U={token:yield fs(T,I),createTime:Date.now(),subscriptionOptions:I};return yield rn(T,U),U.token})).apply(this,arguments)}function Sn(T,I){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,B.Z)(function*(T,I){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:xd(I)})})).apply(this,arguments)}function zo(T,I){return I.vapidKey===T.vapidKey&&I.endpoint===T.endpoint&&I.auth===T.auth&&I.p256dh===T.p256dh}function yr(T){const I={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function ml(T,I){if(!I.notification)return;T.notification={};const k=I.notification.title;k&&(T.notification.title=k);const U=I.notification.body;U&&(T.notification.body=U);const J=I.notification.image;J&&(T.notification.image=J)}(I,T),function vu(T,I){!I.data||(T.data=I.data)}(I,T),function jg(T,I){var k,U,J,ee,be;if(!I.fcmOptions&&!(null===(k=I.notification)||void 0===k?void 0:k.click_action))return;T.fcmOptions={};const qe=null!==(J=null===(U=I.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==J?J:null===(ee=I.notification)||void 0===ee?void 0:ee.click_action;qe&&(T.fcmOptions.link=qe);const ot=null===(be=I.fcmOptions)||void 0===be?void 0:be.analytics_label;ot&&(T.fcmOptions.analyticsLabel=ot)}(I,T),I}function pc(T){return"object"==typeof T&&!!T&&Aa in T}function _l(T,I){const k=[];for(let U=0;U<T.length;U++)k.push(T.charAt(U)),U<I.length&&k.push(I.charAt(U));return k.join("")}function Gn(T){return Rn.create("missing-app-config-values",{valueName:T})}_l("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),_l("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Os{constructor(I,k,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function gc(T){if(!T||!T.options)throw Gn("App Configuration Object");if(!T.name)throw Gn("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:k}=T;for(const U of I)if(!k[U])throw Gn(U);return{appName:T.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:J,installations:k,analyticsProvider:U}}_delete(){return Promise.resolve()}}function yl(T){return _o.apply(this,arguments)}function _o(){return(_o=(0,B.Z)(function*(T){var I;try{T.swRegistration=yield navigator.serviceWorker.register(Ad,{scope:Fi}),T.swRegistration.update().catch(()=>{})}catch(k){throw Rn.create("failed-service-worker-registration",{browserErrorMessage:null===(I=k)||void 0===I?void 0:I.message})}})).apply(this,arguments)}function zr(T,I){return bu.apply(this,arguments)}function bu(){return(bu=(0,B.Z)(function*(T,I){if(!I&&!T.swRegistration&&(yield yl(T)),I||!T.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw Rn.create("invalid-sw-registration");T.swRegistration=I}})).apply(this,arguments)}function mc(T,I){return wu.apply(this,arguments)}function wu(){return(wu=(0,B.Z)(function*(T,I){I?T.vapidKey=I:T.vapidKey||(T.vapidKey=Uo)})).apply(this,arguments)}function vl(){return(vl=(0,B.Z)(function*(T,I){if(!navigator)throw Rn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Rn.create("permission-blocked");return yield mc(T,null==I?void 0:I.vapidKey),yield zr(T,null==I?void 0:I.serviceWorkerRegistration),pl(T)})).apply(this,arguments)}function Na(T,I,k){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,B.Z)(function*(T,I,k){const U=bl(I);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:k[Aa],message_name:k[Md],message_time:k[tf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function bl(T){switch(T){case Ma.NOTIFICATION_CLICKED:return"notification_open";case Ma.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Eu(){return(Eu=(0,B.Z)(function*(T,I){const k=I.data;if(!k.isFirebaseMessaging)return;T.onMessageHandler&&k.messageType===Ma.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(yr(k)):T.onMessageHandler.next(yr(k)));const U=k.data;pc(U)&&"1"===U[go]&&(yield Na(T,k.messageType,U))})).apply(this,arguments)}const Fa="@firebase/messaging",kd=T=>{const I=new Os(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function Hg(T,I){return Eu.apply(this,arguments)}(I,k)),I},La=T=>{const I=T.getProvider("messaging").getImmediate();return{getToken:U=>function _c(T,I){return vl.apply(this,arguments)}(I,U)}};function Ba(){return gs.apply(this,arguments)}function gs(){return(gs=(0,B.Z)(function*(){try{yield(0,ae.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Od(){(0,he._registerComponent)(new _e.wA("messaging",kd,"PUBLIC")),(0,he._registerComponent)(new _e.wA("messaging-internal",La,"PRIVATE")),(0,he.registerVersion)(Fa,"0.9.16"),(0,he.registerVersion)(Fa,"0.9.16","esm2017")}();const Pd="analytics",Gg="firebase_id",Ps="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Va="https://www.googletagmanager.com/gtag/js",fi=new ie.Yd("@firebase/analytics");function af(T){return Promise.all(T.map(I=>I.catch(k=>k)))}function $o(T,I){const k=document.createElement("script");k.src=`${Va}?l=${T}&id=${I}`,k.async=!0,document.head.appendChild(k)}function Fd(T,I,k,U,J,ee){return vc.apply(this,arguments)}function vc(){return(vc=(0,B.Z)(function*(T,I,k,U,J,ee){const be=U[J];try{if(be)yield I[be];else{const ot=(yield af(k)).find(St=>St.measurementId===J);ot&&(yield I[ot.appId])}}catch(qe){fi.error(qe)}T("config",J,ee)})).apply(this,arguments)}function qo(T,I,k,U,J){return yo.apply(this,arguments)}function yo(){return(yo=(0,B.Z)(function*(T,I,k,U,J){try{let ee=[];if(J&&J.send_to){let be=J.send_to;Array.isArray(be)||(be=[be]);const qe=yield af(k);for(const ot of be){const St=qe.find(gt=>gt.measurementId===ot),Tt=St&&I[St.appId];if(!Tt){ee=[];break}ee.push(Tt)}}0===ee.length&&(ee=Object.values(I)),yield Promise.all(ee),T("event",U,J||{})}catch(ee){fi.error(ee)}})).apply(this,arguments)}function _n(){const T=window.document.getElementsByTagName("script");for(const I of Object.values(T))if(I.src&&I.src.includes(Va))return I;return null}const Ke=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Su=new class tn{constructor(I={},k=1e3){this.throttleMetadata=I,this.intervalMillis=k}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,k){this.throttleMetadata[I]=k}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function Ld(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function _s(T){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,B.Z)(function*(T){var I;const{appId:k,apiKey:U}=T,J={method:"GET",headers:Ld(U)},ee=Ps.replace("{app-id}",k),be=yield fetch(ee,J);if(200!==be.status&&304!==be.status){let qe="";try{const ot=yield be.json();(null===(I=ot.error)||void 0===I?void 0:I.message)&&(qe=ot.error.message)}catch(ot){}throw Ke.create("config-fetch-failed",{httpStatus:be.status,responseMessage:qe})}return be.json()})).apply(this,arguments)}function wn(T){return El.apply(this,arguments)}function El(){return(El=(0,B.Z)(function*(T,I=Su,k){const{appId:U,apiKey:J,measurementId:ee}=T.options;if(!U)throw Ke.create("no-app-id");if(!J){if(ee)return{measurementId:ee,appId:U};throw Ke.create("no-api-key")}const be=I.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new Iu;return setTimeout((0,B.Z)(function*(){qe.abort()}),void 0!==k?k:6e4),vr({appId:U,apiKey:J,measurementId:ee},be,qe,I)})).apply(this,arguments)}function vr(T,I,k){return st.apply(this,arguments)}function st(){return(st=(0,B.Z)(function*(T,{throttleEndTimeMillis:I,backoffCount:k},U,J=Su){var ee,be;const{appId:qe,measurementId:ot}=T;try{yield bc(U,I)}catch(St){if(ot)return fi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ot} provided in the "measurementId" field in the local Firebase config. [${null===(ee=St)||void 0===ee?void 0:ee.message}]`),{appId:qe,measurementId:ot};throw St}try{const St=yield _s(T);return J.deleteThrottleMetadata(qe),St}catch(St){const Tt=St;if(!Bd(Tt)){if(J.deleteThrottleMetadata(qe),ot)return fi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ot} provided in the "measurementId" field in the local Firebase config. [${null==Tt?void 0:Tt.message}]`),{appId:qe,measurementId:ot};throw St}const gt=503===Number(null===(be=null==Tt?void 0:Tt.customData)||void 0===be?void 0:be.httpStatus)?(0,ae.$s)(k,J.intervalMillis,30):(0,ae.$s)(k,J.intervalMillis),Si={throttleEndTimeMillis:Date.now()+gt,backoffCount:k+1};return J.setThrottleMetadata(qe,Si),fi.debug(`Calling attemptFetch again in ${gt} millis`),vr(T,Si,U,J)}})).apply(this,arguments)}function bc(T,I){return new Promise((k,U)=>{const J=Math.max(I-Date.now(),0),ee=setTimeout(k,J);T.addEventListener(()=>{clearTimeout(ee),U(Ke.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function Bd(T){if(!(T instanceof ae.ZR&&T.customData))return!1;const I=Number(T.customData.httpStatus);return 429===I||500===I||503===I||504===I}class Iu{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}let Dl,Tl;function vo(){return(vo=(0,B.Z)(function*(T,I,k,U,J){if(J&&J.global)T("event",k,U);else{const ee=yield I;T("event",k,Object.assign(Object.assign({},U),{send_to:ee}))}})).apply(this,arguments)}function Il(T){Tl=T}function br(T){Dl=T}function Co(){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,B.Z)(function*(){var T;if(!(0,ae.hl)())return fi.warn(Ke.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(I){return fi.warn(Ke.create("indexeddb-unavailable",{errorInfo:null===(T=I)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function kn(){return(kn=(0,B.Z)(function*(T,I,k,U,J,ee,be){var qe;const ot=wn(T);ot.then(si=>{k[si.measurementId]=si.appId,T.options.measurementId&&si.measurementId!==T.options.measurementId&&fi.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${si.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(si=>fi.error(si)),I.push(ot);const St=Co().then(si=>{if(si)return U.getId()}),[Tt,gt]=yield Promise.all([ot,St]);_n()||$o(ee,Tt.measurementId),Tl&&(J("consent","default",Tl),Il(void 0)),J("js",new Date);const Si=null!==(qe=null==be?void 0:be.config)&&void 0!==qe?qe:{};return Si.origin="firebase",Si.update=!0,null!=gt&&(Si[Gg]=gt),J("config",Tt.measurementId,Si),Dl&&(J("set",Dl),br(void 0)),Tt.measurementId})).apply(this,arguments)}class Ko{constructor(I){this.app=I}_delete(){return delete vs[this.app.options.appId],Promise.resolve()}}let vs={},Cn=[];const ri={};let Zi,an,Qn="dataLayer",Di=!1;function Au(T,I,k){!function Al(){const T=[];if((0,ae.ru)()&&T.push("This is a browser extension environment."),(0,ae.zI)()||T.push("Cookies are not available."),T.length>0){const I=T.map((U,J)=>`(${J+1}) ${U}`).join(" "),k=Ke.create("invalid-analytics-context",{errorInfo:I});fi.warn(k.message)}}();const U=T.options.appId;if(!U)throw Ke.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Ke.create("no-api-key");fi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=vs[U])throw Ke.create("already-exists",{id:U});if(!Di){!function yc(T){let I=[];Array.isArray(window[T])?I=window[T]:window[T]=I}(Qn);const{wrappedGtag:ee,gtagCore:be}=function zg(T,I,k,U,J){let ee=function(...be){window[U].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ee=window[J]),window[J]=function Du(T,I,k,U){function ee(){return(ee=(0,B.Z)(function*(be,qe,ot){try{"event"===be?yield qo(T,I,k,qe,ot):"config"===be?yield Fd(T,I,k,U,qe,ot):"consent"===be?T("consent","update",ot):T("set",qe)}catch(St){fi.error(St)}})).apply(this,arguments)}return function J(be,qe,ot){return ee.apply(this,arguments)}}(ee,T,I,k),{gtagCore:ee,wrappedGtag:window[J]}}(vs,Cn,ri,Qn,"gtag");an=ee,Zi=be,Di=!0}return vs[U]=function gi(T,I,k,U,J,ee,be){return kn.apply(this,arguments)}(T,Cn,ri,I,Zi,Qn,k),new Ko(T)}function cf(){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,B.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(T){return!1}})).apply(this,arguments)}const Ec="@firebase/analytics";!function $g(){(0,he._registerComponent)(new _e.wA(Pd,(I,{options:k})=>Au(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,he._registerComponent)(new _e.wA("analytics-internal",function T(I){try{const k=I.getProvider(Pd).getImmediate();return{logEvent:(U,J,ee)=>function Cc(T,I,k,U){T=(0,ae.m9)(T),function yn(T,I,k,U,J){return vo.apply(this,arguments)}(an,vs[T.app.options.appId],I,k,U).catch(J=>fi.error(J))}(k,U,J,ee)}}catch(k){throw Ke.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,he.registerVersion)(Ec,"0.8.0"),(0,he.registerVersion)(Ec,"0.8.0","esm2017")}();var Mu=F(233),wr=F(4986),Cr=F(8505),Qo=F(5363),Xo=F(9468);const xl=new u.GfV("7.4.1"),Ha="__angularfire_symbol__analyticsIsSupportedValue",Jo="__angularfire_symbol__analyticsIsSupported",Ns="__angularfire_symbol__remoteConfigIsSupportedValue",Rl="__angularfire_symbol__remoteConfigIsSupported",Pt="__angularfire_symbol__messagingIsSupportedValue",Dc="__angularfire_symbol__messagingIsSupported";function Ud(T,I,k){if(I){if(1===I.length)return I[0];const ee=I.filter(be=>be.app===k);if(1===ee.length)return ee[0]}return k.container.getProvider(T).getImmediate({optional:!0})}globalThis[Jo]||(globalThis[Jo]=cf().then(T=>globalThis[Ha]=T).catch(()=>globalThis[Ha]=!1)),globalThis[Dc]||(globalThis[Dc]=Ba().then(T=>globalThis[Pt]=T).catch(()=>globalThis[Pt]=!1)),globalThis[Rl]||(globalThis[Rl]=uc().then(T=>globalThis[Ns]=T).catch(()=>globalThis[Ns]=!1));const xu=(T,I)=>{const k=I?[I]:(0,ne.C6)(),U=[];return k.forEach(J=>{J.container.getProvider(T).instances.forEach(be=>{U.includes(be)||U.push(be)})}),U};function Vi(){}class Ol{constructor(I,k=Mu.N){this.zone=I,this.delegate=k}now(){return this.delegate.now()}schedule(I,k,U){const J=this.zone;return this.delegate.schedule(function(be){J.runGuarded(()=>{I.apply(this,[be])})},k,U)}}class jd{constructor(I){this.zone=I,this.task=null}call(I,k){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vi,{},Vi,Vi)),k.pipe((0,Cr.b)({next:U,complete:U,error:U})).subscribe(I).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Sc=(()=>{class T{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Ol(Zone.current)),this.insideAngular=k.run(()=>new Ol(Zone.current,wr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(k){return new(k||T)(u.LFG(u.R0b))},T.\u0275prov=u.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Fs(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function qg(T){return T.pipe((0,Qo.Q)(Fs().outsideAngular))}function ea(T){return Fs(),function ta(T){return function(k){return(k=k.lift(new jd(T.ngZone))).pipe((0,Xo.R)(T.outsideAngular),(0,Qo.Q)(T.insideAngular))}}(Fs())(T)}},2090:(et,ve,F)=>{F.d(ve,{BH:()=>Ze,LL:()=>fe,ZR:()=>ye,gQ:()=>jr,zI:()=>X,hu:()=>ne,g5:()=>B,US:()=>_e,tV:()=>ue,h$:()=>ie,L:()=>le,$s:()=>Oi,r3:()=>Gi,Sg:()=>xe,ne:()=>vt,p$:()=>G,vZ:()=>hr,ZB:()=>q,gK:()=>Pn,pd:()=>ir,m9:()=>lo,z$:()=>Pe,GJ:()=>en,jU:()=>Te,ru:()=>Ye,d:()=>Ie,xb:()=>Ut,w1:()=>Ee,hl:()=>W,uI:()=>je,UG:()=>me,Yr:()=>ze,b$:()=>tt,G6:()=>$e,Mn:()=>Se,w9:()=>un,cI:()=>$t,UI:()=>ns,xO:()=>is,zd:()=>oo,DV:()=>Yt,ug:()=>ct,dS:()=>qt,Pz:()=>Vt,Dv:()=>ss,Wj:()=>fr,lb:()=>Lo,eu:()=>De});const ne=function(H,Z){if(!H)throw B(Z)},B=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},he=function(H){const Z=[];let j=0;for(let $=0;$<H.length;$++){let K=H.charCodeAt($);K<128?Z[j++]=K:K<2048?(Z[j++]=K>>6|192,Z[j++]=63&K|128):55296==(64512&K)&&$+1<H.length&&56320==(64512&H.charCodeAt($+1))?(K=65536+((1023&K)<<10)+(1023&H.charCodeAt(++$)),Z[j++]=K>>18|240,Z[j++]=K>>12&63|128,Z[j++]=K>>6&63|128,Z[j++]=63&K|128):(Z[j++]=K>>12|224,Z[j++]=K>>6&63|128,Z[j++]=63&K|128)}return Z},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,Z){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=Z?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let K=0;K<H.length;K+=3){const Re=H[K],He=K+1<H.length,dt=He?H[K+1]:0,dn=K+2<H.length,Qt=dn?H[K+2]:0;let gr=(15&dt)<<2|Qt>>6,os=63&Qt;dn||(os=64,He||(gr=64)),$.push(j[Re>>2],j[(3&Re)<<4|dt>>4],j[gr],j[os])}return $.join("")},encodeString(H,Z){return this.HAS_NATIVE_SUPPORT&&!Z?btoa(H):this.encodeByteArray(he(H),Z)},decodeString(H,Z){return this.HAS_NATIVE_SUPPORT&&!Z?atob(H):function(H){const Z=[];let j=0,$=0;for(;j<H.length;){const K=H[j++];if(K<128)Z[$++]=String.fromCharCode(K);else if(K>191&&K<224){const Re=H[j++];Z[$++]=String.fromCharCode((31&K)<<6|63&Re)}else if(K>239&&K<365){const dn=((7&K)<<18|(63&H[j++])<<12|(63&H[j++])<<6|63&H[j++])-65536;Z[$++]=String.fromCharCode(55296+(dn>>10)),Z[$++]=String.fromCharCode(56320+(1023&dn))}else{const Re=H[j++],He=H[j++];Z[$++]=String.fromCharCode((15&K)<<12|(63&Re)<<6|63&He)}}return Z.join("")}(this.decodeStringToByteArray(H,Z))},decodeStringToByteArray(H,Z){this.init_();const j=Z?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let K=0;K<H.length;){const Re=j[H.charAt(K++)],dt=K<H.length?j[H.charAt(K)]:0;++K;const Qt=K<H.length?j[H.charAt(K)]:64;++K;const Ft=K<H.length?j[H.charAt(K)]:64;if(++K,null==Re||null==dt||null==Qt||null==Ft)throw Error();$.push(Re<<2|dt>>4),64!==Qt&&($.push(dt<<4&240|Qt>>2),64!==Ft&&$.push(Qt<<6&192|Ft))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},ie=function(H){const Z=he(H);return _e.encodeByteArray(Z,!0)},le=function(H){return ie(H).replace(/\./g,"")},ue=function(H){try{return _e.decodeString(H,!0)}catch(Z){console.error("base64Decode failed: ",Z)}return null};function G(H){return q(void 0,H)}function q(H,Z){if(!(Z instanceof Object))return Z;switch(Z.constructor){case Date:return new Date(Z.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return Z}for(const j in Z)!Z.hasOwnProperty(j)||!oe(j)||(H[j]=q(H[j],Z[j]));return H}function oe(H){return"__proto__"!==H}class Ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Z,j)=>{this.resolve=Z,this.reject=j})}wrapCallback(Z){return(j,$)=>{j?this.reject(j):this.resolve($),"function"==typeof Z&&(this.promise.catch(()=>{}),1===Z.length?Z(j):Z(j,$))}}}function xe(H,Z){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=Z||"demo-project",K=H.iat||0,Re=H.sub||H.user_id;if(!Re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const He=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:K,exp:K+3600,auth_time:K,sub:Re,user_id:Re,firebase:{sign_in_provider:"custom",identities:{}}},H);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(He)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function je(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function Te(){return"object"==typeof self&&self.self===self}function Ye(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function tt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ie(){return Pe().indexOf("Electron/")>=0}function Ee(){const H=Pe();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Se(){return Pe().indexOf("MSAppHost/")>=0}function ze(){return!1}function $e(){return!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W(){return"object"==typeof indexedDB}function De(){return new Promise((H,Z)=>{try{let j=!0;const $="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open($);K.onsuccess=()=>{K.result.close(),j||self.indexedDB.deleteDatabase($),H(!0)},K.onupgradeneeded=()=>{j=!1},K.onerror=()=>{var Re;Z((null===(Re=K.error)||void 0===Re?void 0:Re.message)||"")}}catch(j){Z(j)}})}function X(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ye extends Error{constructor(Z,j,$){super(j),this.code=Z,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fe.prototype.create)}}class fe{constructor(Z,j,$){this.service=Z,this.serviceName=j,this.errors=$}create(Z,...j){const $=j[0]||{},K=`${this.service}/${Z}`,Re=this.errors[Z],He=Re?function Ne(H,Z){return H.replace(ft,(j,$)=>{const K=Z[$];return null!=K?String(K):`<${$}?>`})}(Re,$):"Error";return new ye(K,`${this.serviceName}: ${He} (${K}).`,$)}}const ft=/\{\$([^}]+)}/g;function $t(H){return JSON.parse(H)}function Vt(H){return JSON.stringify(H)}const nt=function(H){let Z={},j={},$={},K="";try{const Re=H.split(".");Z=$t(ue(Re[0])||""),j=$t(ue(Re[1])||""),K=Re[2],$=j.d||{},delete j.d}catch(Re){}return{header:Z,claims:j,data:$,signature:K}},un=function(H){const j=nt(H).claims;return!!j&&"object"==typeof j&&j.hasOwnProperty("iat")},en=function(H){const Z=nt(H).claims;return"object"==typeof Z&&!0===Z.admin};function Gi(H,Z){return Object.prototype.hasOwnProperty.call(H,Z)}function Yt(H,Z){if(Object.prototype.hasOwnProperty.call(H,Z))return H[Z]}function Ut(H){for(const Z in H)if(Object.prototype.hasOwnProperty.call(H,Z))return!1;return!0}function ns(H,Z,j){const $={};for(const K in H)Object.prototype.hasOwnProperty.call(H,K)&&($[K]=Z.call(j,H[K],K,H));return $}function hr(H,Z){if(H===Z)return!0;const j=Object.keys(H),$=Object.keys(Z);for(const K of j){if(!$.includes(K))return!1;const Re=H[K],He=Z[K];if(Ri(Re)&&Ri(He)){if(!hr(Re,He))return!1}else if(Re!==He)return!1}for(const K of $)if(!j.includes(K))return!1;return!0}function Ri(H){return null!==H&&"object"==typeof H}function is(H){const Z=[];for(const[j,$]of Object.entries(H))Array.isArray($)?$.forEach(K=>{Z.push(encodeURIComponent(j)+"="+encodeURIComponent(K))}):Z.push(encodeURIComponent(j)+"="+encodeURIComponent($));return Z.length?"&"+Z.join("&"):""}function oo(H){const Z={};return H.replace(/^\?/,"").split("&").forEach($=>{if($){const[K,Re]=$.split("=");Z[decodeURIComponent(K)]=decodeURIComponent(Re)}}),Z}function ir(H){const Z=H.indexOf("?");if(!Z)return"";const j=H.indexOf("#",Z);return H.substring(Z,j>0?j:void 0)}class jr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Z=1;Z<this.blockSize;++Z)this.pad_[Z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Z,j){j||(j=0);const $=this.W_;if("string"==typeof Z)for(let Ft=0;Ft<16;Ft++)$[Ft]=Z.charCodeAt(j)<<24|Z.charCodeAt(j+1)<<16|Z.charCodeAt(j+2)<<8|Z.charCodeAt(j+3),j+=4;else for(let Ft=0;Ft<16;Ft++)$[Ft]=Z[j]<<24|Z[j+1]<<16|Z[j+2]<<8|Z[j+3],j+=4;for(let Ft=16;Ft<80;Ft++){const gr=$[Ft-3]^$[Ft-8]^$[Ft-14]^$[Ft-16];$[Ft]=4294967295&(gr<<1|gr>>>31)}let Qt,di,K=this.chain_[0],Re=this.chain_[1],He=this.chain_[2],dt=this.chain_[3],dn=this.chain_[4];for(let Ft=0;Ft<80;Ft++){Ft<40?Ft<20?(Qt=dt^Re&(He^dt),di=1518500249):(Qt=Re^He^dt,di=1859775393):Ft<60?(Qt=Re&He|dt&(Re|He),di=2400959708):(Qt=Re^He^dt,di=3395469782);const gr=(K<<5|K>>>27)+Qt+dn+di+$[Ft]&4294967295;dn=dt,dt=He,He=4294967295&(Re<<30|Re>>>2),Re=K,K=gr}this.chain_[0]=this.chain_[0]+K&4294967295,this.chain_[1]=this.chain_[1]+Re&4294967295,this.chain_[2]=this.chain_[2]+He&4294967295,this.chain_[3]=this.chain_[3]+dt&4294967295,this.chain_[4]=this.chain_[4]+dn&4294967295}update(Z,j){if(null==Z)return;void 0===j&&(j=Z.length);const $=j-this.blockSize;let K=0;const Re=this.buf_;let He=this.inbuf_;for(;K<j;){if(0===He)for(;K<=$;)this.compress_(Z,K),K+=this.blockSize;if("string"==typeof Z){for(;K<j;)if(Re[He]=Z.charCodeAt(K),++He,++K,He===this.blockSize){this.compress_(Re),He=0;break}}else for(;K<j;)if(Re[He]=Z[K],++He,++K,He===this.blockSize){this.compress_(Re),He=0;break}}this.inbuf_=He,this.total_+=j}digest(){const Z=[];let j=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let K=this.blockSize-1;K>=56;K--)this.buf_[K]=255&j,j/=256;this.compress_(this.buf_);let $=0;for(let K=0;K<5;K++)for(let Re=24;Re>=0;Re-=8)Z[$]=this.chain_[K]>>Re&255,++$;return Z}}function vt(H,Z){const j=new rr(H,Z);return j.subscribe.bind(j)}class rr{constructor(Z,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{Z(this)}).catch($=>{this.error($)})}next(Z){this.forEachObserver(j=>{j.next(Z)})}error(Z){this.forEachObserver(j=>{j.error(Z)}),this.close(Z)}complete(){this.forEachObserver(Z=>{Z.complete()}),this.close()}subscribe(Z,j,$){let K;if(void 0===Z&&void 0===j&&void 0===$)throw new Error("Missing Observer.");K=function ti(H,Z){if("object"!=typeof H||null===H)return!1;for(const j of Z)if(j in H&&"function"==typeof H[j])return!0;return!1}(Z,["next","error","complete"])?Z:{next:Z,error:j,complete:$},void 0===K.next&&(K.next=rs),void 0===K.error&&(K.error=rs),void 0===K.complete&&(K.complete=rs);const Re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch(He){}}),this.observers.push(K),Re}unsubscribeOne(Z){void 0===this.observers||void 0===this.observers[Z]||(delete this.observers[Z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Z){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,Z)}sendOne(Z,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Z])try{j(this.observers[Z])}catch($){"undefined"!=typeof console&&console.error&&console.error($)}})}close(Z){this.finalized||(this.finalized=!0,void 0!==Z&&(this.finalError=Z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rs(){}const ss=function(H,Z,j,$){let K;if($<Z?K="at least "+Z:$>j&&(K=0===j?"none":"no more than "+j),K)throw new Error(H+" failed: Was called with "+$+(1===$?" argument.":" arguments.")+" Expects "+K+".")};function Pn(H,Z){return`${H} failed: ${Z} argument `}function fr(H,Z,j,$){if((!$||j)&&"function"!=typeof j)throw new Error(Pn(H,Z)+"must be a valid function.")}function Lo(H,Z,j,$){if((!$||j)&&("object"!=typeof j||null===j))throw new Error(Pn(H,Z)+"must be a valid context object.")}const qt=function(H){const Z=[];let j=0;for(let $=0;$<H.length;$++){let K=H.charCodeAt($);if(K>=55296&&K<=56319){const Re=K-55296;$++,ne($<H.length,"Surrogate pair missing trail surrogate."),K=65536+(Re<<10)+(H.charCodeAt($)-56320)}K<128?Z[j++]=K:K<2048?(Z[j++]=K>>6|192,Z[j++]=63&K|128):K<65536?(Z[j++]=K>>12|224,Z[j++]=K>>6&63|128,Z[j++]=63&K|128):(Z[j++]=K>>18|240,Z[j++]=K>>12&63|128,Z[j++]=K>>6&63|128,Z[j++]=63&K|128)}return Z},ct=function(H){let Z=0;for(let j=0;j<H.length;j++){const $=H.charCodeAt(j);$<128?Z++:$<2048?Z+=2:$>=55296&&$<=56319?(Z+=4,j++):Z+=3}return Z};function Oi(H,Z=1e3,j=2){const $=Z*Math.pow(j,H),K=Math.round(.5*$*(Math.random()-.5)*2);return Math.min(144e5,$+K)}function lo(H){return H&&H._delegate?H._delegate:H}},7015:(et,ve,F)=>{var u=F(5e3);let ne=null;function B(){return ne}const ie=new u.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function ue(){return(0,u.LFG)(q)}()},providedIn:"platform"}),n})();const G=new u.OlP("Location Initialized");let q=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(t){const i=B().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=B().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){oe()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){oe()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ze(){return new q((0,u.LFG)(ie))}()},providedIn:"platform"}),n})();function oe(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Pe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Te(n){const e=(0,u.LFG)(ie).location;return new tt((0,u.LFG)(le),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ye=new u.OlP("appBaseHref");let tt=(()=>{class n extends me{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+je(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const l=this.prepareExternalUrl(r+je(s));this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,s){const l=this.prepareExternalUrl(r+je(s));this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le),u.LFG(Ye,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n extends me{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=xe(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let l=this.prepareExternalUrl(r+je(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,s){let l=this.prepareExternalUrl(r+je(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le),u.LFG(Ye,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,i){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Pe($e(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+je(i))}normalize(t){return n.stripTrailingSlash(function ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=je,n.joinWithSlash=xe,n.stripTrailingSlash=Pe,n.\u0275fac=function(t){return new(t||n)(u.LFG(me),u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Se(){return new Ee((0,u.LFG)(me),(0,u.LFG)(le))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}function Ta(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let xs=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})(),Yn=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new mn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){cc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){cc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class mn{constructor(){this.$implicit=null,this.ngIf=null}}function cc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class ll{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Pi=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),mr=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new ll(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(Pi,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),cl=(()=>{class n{constructor(t,i,r){r._addDefault(new ll(t,i))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(Pi,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchDefault",""]]}),n})(),go=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const jo="browser";function xa(n){return"server"===n}let fu=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Ra((0,u.LFG)(ie),window)}),n})();class Ra{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function hs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=pu(this.window.history)||pu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function pu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class fn{}class Ho extends class dl extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ae(n){ne||(ne=n)}(new Ho)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function hl(){return rn=rn||document.querySelector("base"),rn?rn.getAttribute("href"):null}();return null==t?null:function mo(n){dc=dc||document.createElement("a"),dc.setAttribute("href",n);const e=dc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ta(document.cookie,e)}}let dc,rn=null;const Ci=new u.OlP("TRANSITION_ID"),Rn=[{provide:u.ip1,useFactory:function gu(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const i=B(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Ci,ie,u.zs3],multi:!0}];class fs{static init(){(0,u.VLi)(new fs)}addToWindow(e){u.dqk.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(i=>{const r=u.dqk.getAllAngularTestabilities();let s=r.length,l=!1;const d=function(p){l=l||p,s--,0==s&&i(l)};r.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?B().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ei=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Go=new u.OlP("EventManagerPlugins");let ks=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const l=r[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Go),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class fl{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=B().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Gr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),ps=(()=>{class n extends Gr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,r.push(i.appendChild(l))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(ka),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ka))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function ka(n){B().remove(n)}const yt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Oa=/%COMP%/g;function Me(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Me(n,r,t):(r=r.replace(Oa,n),t.push(r))}return t}function Lt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Sn=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Pa(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case u.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new ml(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case u.ifc.ShadowDom:return new vu(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=Me(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ks),u.LFG(ps),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Pa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(yt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=yt[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=yt[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,i,r&u.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Lt(i)):this.eventManager.addEventListener(e,t,Lt(i))}}class ml extends Pa{constructor(e,t,i,r){super(e),this.component=i;const s=Me(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function _u(n){return"_ngcontent-%COMP%".replace(Oa,n)}(r+"-"+i.id),this.hostAttr=function yu(n){return"_nghost-%COMP%".replace(Oa,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class vu extends Pa{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Me(r.id,r.styles,[]);for(let l=0;l<s.length;l++){const d=document.createElement("style");d.textContent=s[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let jg=(()=>{class n extends fl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const pc=["alt","control","meta","shift"],gc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Os={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let yl=(()=>{class n extends fl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),l=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>B().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let l="";if(pc.forEach(p=>{const y=i.indexOf(p);y>-1&&(i.splice(y,1),l+=p+".")}),l+=s,0!=i.length||0===s.length)return null;const d={};return d.domEventName=r,d.fullKey=l,d}static getEventFullKey(t){let i="",r=function _o(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Gn.hasOwnProperty(e)&&(e=Gn[e]))}return gc[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),pc.forEach(s=>{s!=r&&Os[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const _c=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:jo},{provide:u.g9A,useValue:function zr(){Ho.makeCurrent(),fs.init()},multi:!0},{provide:ie,useFactory:function mc(){return(0,u.RDi)(document),document},deps:[]}]),vl=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function bu(){return new u.qLn},deps:[]},{provide:Go,useClass:jg,multi:!0,deps:[ie,u.R0b,u.Lbi]},{provide:Go,useClass:yl,multi:!0,deps:[ie]},{provide:Sn,useClass:Sn,deps:[ks,ps,u.AFp]},{provide:u.FYo,useExisting:Sn},{provide:Gr,useExisting:ps},{provide:ps,useClass:ps,deps:[ie]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:ks,useClass:ks,deps:[Go,u.R0b]},{provide:fn,useClass:Ei,deps:[]}];let Na=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:Ci,useExisting:u.AFp},Rn]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:vl,imports:[go,u.hGG]}),n})();"undefined"!=typeof window&&window;let qo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new(t||n):u.LFG(Du),i},providedIn:"root"}),n})(),Du=(()=>{class n extends qo{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case u.q3G.NONE:return i;case u.q3G.HTML:return(0,u.qzn)(i,"HTML")?(0,u.z3N)(i):(0,u.EiD)(this._doc,String(i)).toString();case u.q3G.STYLE:return(0,u.qzn)(i,"Style")?(0,u.z3N)(i):i;case u.q3G.SCRIPT:if((0,u.qzn)(i,"Script"))return(0,u.z3N)(i);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.yhl)(i),(0,u.qzn)(i,"URL")?(0,u.z3N)(i):(0,u.mCW)(String(i));case u.q3G.RESOURCE_URL:if((0,u.qzn)(i,"ResourceURL"))return(0,u.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,u.JVY)(t)}bypassSecurityTrustStyle(t){return(0,u.L6k)(t)}bypassSecurityTrustScript(t){return(0,u.eBb)(t)}bypassSecurityTrustUrl(t){return(0,u.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,u.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function yo(n){return new Du(n.get(ie))}(u.LFG(u.zs3)),i},providedIn:"root"}),n})();var _n=F(8996),Ua=F(3269);function Ke(...n){const e=(0,Ua.yG)(n);return(0,_n.D)(n,e)}var It=F(7579);class pi extends It.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}var tn=F(8306);const{isArray:Su}=Array,{getPrototypeOf:Ld,prototype:_s,keys:Tu}=Object;function wn(n){if(1===n.length){const e=n[0];if(Su(e))return{args:e,keys:null};if(function El(n){return n&&"object"==typeof n&&Ld(n)===_s}(e)){const t=Tu(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var vr=F(4671),st=F(4004);const{isArray:bc}=Array;function Iu(n){return(0,st.U)(e=>function Bd(n,e){return bc(e)?n(...e):n(e)}(n,e))}function Dl(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}var yn=F(5403),vo=F(9672);function bo(n,e,t){n?(0,vo.f)(t,n,e):e()}var Wi=F(576);function wo(n,e){const t=(0,Wi.m)(n)?n:()=>n,i=r=>r.error(t());return new tn.y(e?r=>e.schedule(i,0,r):i)}const Wo=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Zo=F(8189);function Il(...n){return function Tl(){return(0,Zo.J)(1)}()((0,_n.D)(n,(0,Ua.yG)(n)))}var br=F(8421);function Co(n){return new tn.y(e=>{(0,br.Xf)(n()).subscribe(e)})}var Eo=F(515),gi=F(727),kn=F(4482);function Ko(){return(0,kn.e)((n,e)=>{let t=null;n._refCount++;const i=(0,yn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class vs extends tn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,kn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new gi.w0;const t=this.getSubject();e.add(this.source.subscribe((0,yn.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=gi.w0.EMPTY)}return e}refCount(){return Ko()(this)}}function Cn(n,e){return(0,kn.e)((t,i)=>{let r=null,s=0,l=!1;const d=()=>l&&!r&&i.complete();t.subscribe((0,yn.x)(i,p=>{null==r||r.unsubscribe();let y=0;const w=s++;(0,br.Xf)(n(p,w)).subscribe(r=(0,yn.x)(i,D=>i.next(e?e(p,D,w,y++):D),()=>{r=null,d()}))},()=>{l=!0,d()}))})}var ri=F(5698);function Qn(...n){const e=(0,Ua.yG)(n);return(0,kn.e)((t,i)=>{(e?Il(n,t,e):Il(n,t)).subscribe(i)})}function Do(n,e,t,i,r){return(s,l)=>{let d=t,p=e,y=0;s.subscribe((0,yn.x)(l,w=>{const D=y++;p=d?n(p,w,D):(d=!0,w),i&&l.next(p)},r&&(()=>{d&&l.next(p),l.complete()})))}}function Zi(n,e){return(0,kn.e)(Do(n,e,arguments.length>=2,!0))}function an(n,e){return(0,kn.e)((t,i)=>{let r=0;t.subscribe((0,yn.x)(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Di(n){return(0,kn.e)((e,t)=>{let s,i=null,r=!1;i=e.subscribe((0,yn.x)(t,void 0,void 0,l=>{s=(0,br.Xf)(n(l,Di(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}var Fn=F(5577);function Al(n,e){return(0,Wi.m)(e)?(0,Fn.z)(n,e,1):(0,Fn.z)(n,1)}function Au(n){return n<=0?()=>Eo.E:(0,kn.e)((e,t)=>{let i=[];e.subscribe((0,yn.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Mn(n=lf){return(0,kn.e)((e,t)=>{let i=!1;e.subscribe((0,yn.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function lf(){return new Wo}function cf(n){return(0,kn.e)((e,t)=>{let i=!1;e.subscribe((0,yn.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Ml(n,e){const t=arguments.length>=2;return i=>i.pipe(n?an((r,s)=>n(r,s,i)):vr.y,(0,ri.q)(1),t?cf(e):Mn(()=>new Wo))}var Bi=F(8505);function uf(n){return(0,kn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class Yo{constructor(e,t){this.id=e,this.url=t}}class ja extends Yo{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Cc extends Yo{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ln extends Yo{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ec extends Yo{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class So extends Yo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $g extends Yo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mu extends Yo{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wr extends Yo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cr extends Yo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qo{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Xo{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xl{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ha{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jo{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ns{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rl{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pt="primary";class Dc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function zn(n){return new Dc(n)}const kl="ngNavigationCancelingError";function To(n){const e=Error("NavigationCancelingError: "+n);return e[kl]=!0,e}function Ud(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const l=i[s],d=n[s];if(l.startsWith(":"))r[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Vi(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Ol(n[r],e[r]))return!1;return!0}function Ol(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function jd(n){return Array.prototype.concat.apply([],n)}function Sc(n){return n.length>0?n[n.length-1]:null}function Xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function xn(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,_n.D)(Promise.resolve(n)):Ke(n)}const Tc={exact:function df(n,e,t){if(!ot(n.segments,e.segments)||!U(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!df(n.children[i],e.children[i],t))return!1;return!0},subset:I},ea={exact:function Ru(n,e){return Vi(n,e)},subset:function T(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ol(n[t],e[t]))},ignored:()=>!0};function ta(n,e,t){return Tc[t.paths](n.root,e.root,t.matrixParams)&&ea[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function I(n,e,t){return k(n,e,e.segments,t)}function k(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!ot(r,t)||e.hasChildren()||!U(r,t,i))}if(n.segments.length===t.length){if(!ot(n.segments,t)||!U(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ot(n.segments,r)&&U(n.segments,r,i)&&n.children[Pt])&&k(n.children[Pt],e,s,i)}}function U(n,e,t){return e.every((i,r)=>ea[t](n[r].parameters,i.parameters))}class J{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zn(this.queryParams)),this._queryParamMap}toString(){return Si.serialize(this)}}class ee{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xn(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return si(this)}}class be{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=zn(this.parameters)),this._parameterMap}toString(){return Wr(this)}}function ot(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class Tt{}class gt{parse(e){const t=new My(e);return new J(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ki(e.root,!0)}`,i=function Wg(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${$r(t)}=${$r(r)}`).join("&"):`${$r(t)}=${$r(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function na(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Si=new gt;function si(n){return n.segments.map(e=>Wr(e)).join("/")}function Ki(n,e){if(!n.hasChildren())return si(n);if(e){const t=n.children[Pt]?Ki(n.children[Pt],!1):"",i=[];return Xn(n.children,(r,s)=>{s!==Pt&&i.push(`${s}:${Ki(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function St(n,e){let t=[];return Xn(n.children,(i,r)=>{r===Pt&&(t=t.concat(e(i,r)))}),Xn(n.children,(i,r)=>{r!==Pt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===Pt?[Ki(n.children[Pt],!1)]:[`${r}:${Ki(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Pt]?`${si(n)}/${t[0]}`:`${si(n)}/(${t.join("//")})`}}function Er(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $r(n){return Er(n).replace(/%3B/gi,";")}function Pl(n){return Er(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bs(n){return decodeURIComponent(n)}function qr(n){return bs(n.replace(/\+/g,"%20"))}function Wr(n){return`${Pl(n.path)}${function ku(n){return Object.keys(n).map(e=>`;${Pl(e)}=${Pl(n[e])}`).join("")}(n.parameters)}`}const hf=/^[^\/()?;=#]+/;function ia(n){const e=n.match(hf);return e?e[0]:""}const Ou=/^[^=?&#]+/,Zg=/^[^&#]+/;class My{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ee([],{}):new ee([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Pt]=new ee(e,t)),i}parseSegment(){const e=ia(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new be(bs(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ia(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=ia(this.remaining);r&&(i=r,this.capture(i))}e[bs(t)]=bs(i)}parseQueryParam(e){const t=function Ay(n){const e=n.match(Ou);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const l=function Kg(n){const e=n.match(Zg);return e?e[0]:""}(this.remaining);l&&(i=l,this.capture(i))}const r=qr(t),s=qr(i);if(e.hasOwnProperty(r)){let l=e[r];Array.isArray(l)||(l=[l],e[r]=l),l.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=ia(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Pt);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[Pt]:new ee([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Yg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ff(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=ff(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ic(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Ic(e,this._root).map(t=>t.value)}}function ff(n,e){if(n===e.value)return e;for(const t of e.children){const i=ff(n,t);if(i)return i}return null}function Ic(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Ic(n,t);if(i.length)return i.unshift(e),i}return[]}class ra{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function sa(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Hd extends Yg{constructor(e,t){super(e),this.snapshot=t,zd(this,e)}toString(){return this.snapshot.toString()}}function Nl(n,e){const t=function xy(n,e){const l=new Ga([],{},{},"",{},Pt,e,null,n.root,-1,{});return new pf("",new ra(l,[]))}(n,e),i=new pi([new be("",{})]),r=new pi({}),s=new pi({}),l=new pi({}),d=new pi(""),p=new Ac(i,r,l,d,s,Pt,e,t.root);return p.snapshot=t.root,new Hd(new ra(p,[]),t)}class Ac{constructor(e,t,i,r,s,l,d,p){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=d,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,st.U)(e=>zn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,st.U)(e=>zn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ry(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Gd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Ga{constructor(e,t,i,r,s,l,d,p,y,w,D){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=d,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=w,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class pf extends Yg{constructor(e,t){super(t),this.url=e,zd(this,t)}toString(){return gf(this._root)}}function zd(n,e){e.value._routerState=n,e.children.forEach(t=>zd(n,t))}function gf(n){const e=n.children.length>0?` { ${n.children.map(gf).join(", ")} } `:"";return`${n.value}${e}`}function oa(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Vi(e.params,t.params)||n.params.next(t.params),function xu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Vi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function mf(n,e){const t=Vi(n.params,e.params)&&function qe(n,e){return ot(n,e)&&n.every((t,i)=>Vi(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||mf(n.parent,e.parent))}function Pu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function ky(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Pu(n,i,r);return Pu(n,i)})}(n,e,t);return new ra(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>Pu(n,d)),l}}const i=function Oy(n){return new Ac(new pi(n.url),new pi(n.params),new pi(n.queryParams),new pi(n.fragment),new pi(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Pu(n,s));return new ra(i,r)}}function Ls(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Mc(n){return"object"==typeof n&&null!=n&&n.outlets}function Nu(n,e,t,i,r){let s={};if(i&&Xn(i,(d,p)=>{s[p]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),n===e)return new J(t,s,r);const l=Xg(n,e,t);return new J(l,s,r)}function Xg(n,e,t){const i={};return Xn(n.children,(r,s)=>{i[s]=r===e?t:Xg(r,e,t)}),new ee(n.segments,i)}class _f{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Ls(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Mc);if(r&&r!==Sc(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fu{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function nm(n,e,t){if(n||(n=new ee([],{})),0===n.segments.length&&n.hasChildren())return $d(n,e,t);const i=function uC(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const l=n.segments[r],d=t[i];if(Mc(d))break;const p=`${d}`,y=i<t.length-1?t[i+1]:null;if(r>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!Vs(p,y,l))return s;i+=2}else{if(!Vs(p,{},l))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new ee(n.segments.slice(0,i.pathIndex),{});return s.children[Pt]=new ee(n.segments.slice(i.pathIndex),n.children),$d(s,0,r)}return i.match&&0===r.length?new ee(n.segments,{}):i.match&&!n.hasChildren()?im(n,e,t):i.match?$d(n,0,r):im(n,e,t)}function $d(n,e,t){if(0===t.length)return new ee(n.segments,{});{const i=function tm(n){return Mc(n[0])?n[0].outlets:{[Pt]:n}}(t),r={};return Xn(i,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[l]=nm(n.children[l],e,s))}),Xn(n.children,(s,l)=>{void 0===i[l]&&(r[l]=s)}),new ee(n.segments,r)}}function im(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Mc(s)){const p=Bs(s.outlets);return new ee(i,p)}if(0===r&&Ls(t[0])){i.push(new be(n.segments[e].path,yf(t[0]))),r++;continue}const l=Mc(s)?s.outlets[Pt]:`${s}`,d=r<t.length-1?t[r+1]:null;l&&d&&Ls(d)?(i.push(new be(l,yf(d))),r+=2):(i.push(new be(l,{})),r++)}return new ee(i,{})}function Bs(n){const e={};return Xn(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=im(new ee([],{}),0,t))}),e}function yf(n){const e={};return Xn(n,(t,i)=>e[i]=`${t}`),e}function Vs(n,e,t){return n==t.path&&Vi(e,t.parameters)}class rm{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),oa(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=sa(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,r[l],i),delete r[l]}),Xn(r,(s,l)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const l=i.getContext(r.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=sa(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);if(i&&i.outlet){const l=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=sa(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=sa(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Ns(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Ha(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(oa(r),r===s)if(r.component){const l=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const l=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),oa(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=function qd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),p=d?d.module.componentFactoryResolver:null;l.attachRef=null,l.route=r,l.resolver=p,l.outlet&&l.outlet.activateWith(r,p),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,i)}}class Wd{constructor(e,t){this.routes=e,this.module=t}}function Ll(n){return"function"==typeof n}function xc(n){return n instanceof J}const Zd=Symbol("INITIAL_VALUE");function Rc(){return Cn(n=>function wc(...n){const e=(0,Ua.yG)(n),t=(0,Ua.jO)(n),{args:i,keys:r}=wn(n);if(0===i.length)return(0,_n.D)([],e);const s=new tn.y(function ys(n,e,t=vr.y){return i=>{bo(e,()=>{const{length:r}=n,s=new Array(r);let l=r,d=r;for(let p=0;p<r;p++)bo(e,()=>{const y=(0,_n.D)(n[p],e);let w=!1;y.subscribe((0,yn.x)(i,D=>{s[p]=D,w||(w=!0,d--),d||i.next(t(s.slice()))},()=>{--l||i.complete()}))},i)},i)}}(i,e,r?l=>Dl(r,l):vr.y));return t?s.pipe(Iu(t)):s}(n.map(e=>e.pipe((0,ri.q)(1),Qn(Zd)))).pipe(Zi((e,t)=>{let i=!1;return t.reduce((r,s,l)=>r!==Zd?r:(s===Zd&&(i=!0),i||!1!==s&&l!==t.length-1&&!xc(s)?r:s),e)},Zd),an(e=>e!==Zd),(0,st.U)(e=>xc(e)?e:!0===e),(0,ri.q)(1)))}class Ny{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new kc,this.attachRef=null}}class kc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ny,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Bu=(()=>{class n{constructor(t,i,r,s,l){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=s||Pt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,p=new Fy(t,d,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(kc),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Fy{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Ac?this.route:e===kc?this.childContexts:this.parent.get(e,t)}}let wf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&u._UZ(0,"router-outlet")},directives:[Bu],encapsulation:2}),n})();function Bl(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];Kd(i,Cf(e,i))}}function Kd(n,e){n.children&&Bl(n.children,e)}function Cf(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ef(n){const e=n.children&&n.children.map(Ef),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pt&&(t.component=wf),t}function Wt(n){return n.outlet||Pt}function om(n,e){const t=n.filter(i=>Wt(i)===e);return t.push(...n.filter(i=>Wt(i)!==e)),t}const am={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Oc(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},am):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Ud)(t,n,e);if(!s)return Object.assign({},am);const l={};Xn(s.posParams,(p,y)=>{l[y]=p.path});const d=s.consumed.length>0?Object.assign(Object.assign({},l),s.consumed[s.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:d,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function Pc(n,e,t,i,r="corrected"){if(t.length>0&&function Vy(n,e,t){return t.some(i=>za(n,e,i)&&Wt(i)!==Pt)}(n,t,i)){const l=new ee(e,function By(n,e,t,i){const r={};r[Pt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Wt(s)!==Pt){const l=new ee([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,r[Wt(s)]=l}return r}(n,e,i,new ee(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function Uy(n,e,t){return t.some(i=>za(n,e,i))}(n,t,i)){const l=new ee(n.segments,function Ly(n,e,t,i,r,s){const l={};for(const d of i)if(za(n,t,d)&&!r[Wt(d)]){const p=new ee([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,l[Wt(d)]=p}return Object.assign(Object.assign({},r),l)}(n,e,t,i,n.children,r));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const s=new ee(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function za(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function jy(n,e,t,i){return!!(Wt(n)===i||i!==Pt&&za(e,t,n))&&("**"===n.path||Oc(e,n,t).matched)}function lm(n,e,t){return 0===e.length&&!n.children[t]}class $a{constructor(e){this.segmentGroup=e||null}}class Yi{constructor(e){this.urlTree=e}}function Vl(n){return wo(new $a(n))}function Df(n){return wo(new Yi(n))}class Yd{constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=Pc(this.urlTree.root,[],[],this.config).segmentGroup,t=new ee(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Pt).pipe((0,st.U)(s=>this.createUrlTree(Vu(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Di(s=>{if(s instanceof Yi)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof $a?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Pt).pipe((0,st.U)(r=>this.createUrlTree(Vu(r),e.queryParams,e.fragment))).pipe(Di(r=>{throw r instanceof $a?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new ee([],{[Pt]:e}):e;return new J(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,st.U)(s=>new ee([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,_n.D)(r).pipe(Al(s=>{const l=i.children[s],d=om(t,s);return this.expandSegmentGroup(e,d,l,s).pipe((0,st.U)(p=>({segment:p,outlet:s})))}),Zi((s,l)=>(s[l.outlet]=l.segment,s),{}),function Vd(n,e){const t=arguments.length>=2;return i=>i.pipe(n?an((r,s)=>n(r,s,i)):vr.y,Au(1),t?cf(e):Mn(()=>new Wo))}())}expandSegment(e,t,i,r,s,l){return(0,_n.D)(i).pipe(Al(d=>this.expandSegmentAgainstRoute(e,t,i,d,r,s,l).pipe(Di(y=>{if(y instanceof $a)return Ke(null);throw y}))),Ml(d=>!!d),Di((d,p)=>{if(d instanceof Wo||"EmptyError"===d.name)return lm(t,r,s)?Ke(new ee([],{})):Vl(t);throw d}))}expandSegmentAgainstRoute(e,t,i,r,s,l,d){return jy(r,t,s,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l):Vl(t):Vl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Df(s):this.lineralizeSegments(i,s).pipe((0,Fn.z)(l=>{const d=new ee(l,{});return this.expandSegment(e,d,t,l,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l){const{matched:d,consumedSegments:p,remainingSegments:y,positionalParamSegments:w}=Oc(t,r,s);if(!d)return Vl(t);const D=this.applyRedirectCommands(p,r.redirectTo,w);return r.redirectTo.startsWith("/")?Df(D):this.lineralizeSegments(r,D).pipe((0,Fn.z)(x=>this.expandSegment(e,t,i,x.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Ke(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe((0,st.U)(D=>(i._loadedConfig=D,new ee(r,{})))):Ke(new ee(r,{}));const{matched:l,consumedSegments:d,remainingSegments:p}=Oc(t,i,r);return l?this.getChildConfig(e,i,r).pipe((0,Fn.z)(w=>{const D=w.module,x=w.routes,{segmentGroup:O,slicedSegments:L}=Pc(t,d,p,x),Y=new ee(O.segments,O.children);if(0===L.length&&Y.hasChildren())return this.expandChildren(D,x,Y).pipe((0,st.U)(Ve=>new ee(d,Ve)));if(0===x.length&&0===L.length)return Ke(new ee(d,{}));const re=Wt(i)===s;return this.expandSegment(D,Y,x,L,re?Pt:s,!0).pipe((0,st.U)(Ue=>new ee(d.concat(Ue.segments),Ue.children)))})):Vl(t)}getChildConfig(e,t,i){return t.children?Ke(new Wd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Ke(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe((0,Fn.z)(r=>r?this.configLoader.load(e.injector,t).pipe((0,st.U)(s=>(t._loadedConfig=s,s))):function Ti(n){return wo(To(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Ke(new Wd([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;return r&&0!==r.length?Ke(r.map(l=>{const d=e.get(l);let p;if(function vf(n){return n&&Ll(n.canLoad)}(d))p=d.canLoad(t,i);else{if(!Ll(d))throw new Error("Invalid CanLoad guard");p=d(t,i)}return xn(p)})).pipe(Rc(),(0,Bi.b)(l=>{if(!xc(l))return;const d=To(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw d.url=l,d}),(0,st.U)(l=>!0===l)):Ke(!0)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ke(i);if(r.numberOfChildren>1||!r.children[Pt])return wo(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));r=r.children[Pt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new J(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Xn(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=t[d]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let l={};return Xn(t.children,(d,p)=>{l[p]=this.createSegmentGroup(e,d,i,r)}),new ee(s,l)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function Vu(n){const e={};for(const i of Object.keys(n.children)){const s=Vu(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function Hy(n){if(1===n.numberOfChildren&&n.children[Pt]){const e=n.children[Pt];return new ee(n.segments.concat(e.segments),e.children)}return n}(new ee(n.segments,e))}class Dr{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class la{constructor(e,t){this.component=e,this.route=t}}function um(n,e,t){const i=n._root;return jl(i,e?e._root:null,t,[i.value])}function Nc(n,e,t){const i=function Tf(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function jl(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=sa(e);return n.children.forEach(l=>{(function hm(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const p=function Gy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ot(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ot(n.url,e.url)||!Vi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mf(n,e)||!Vi(n.queryParams,e.queryParams);default:return!mf(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new Dr(i)):(s.data=l.data,s._resolvedData=l._resolvedData),jl(n,e,s.component?d?d.children:null:t,i,r),p&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new la(d.outlet.component,l))}else l&&Sr(e,d,r),r.canActivateChecks.push(new Dr(i)),jl(n,null,s.component?d?d.children:null:t,i,r)})(l,s[l.value.outlet],t,i.concat([l.value]),r),delete s[l.value.outlet]}),Xn(s,(l,d)=>Sr(l,t.getContext(d),r)),r}function Sr(n,e,t){const i=sa(n),r=n.value;Xn(i,(s,l)=>{Sr(s,r.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new la(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class gm{}function Io(n){return new tn.y(e=>e.error(n))}class mm{constructor(e,t,i,r,s,l){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=l}recognize(){const e=Pc(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Pt);if(null===t)return null;const i=new Ga([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ra(i,t),s=new pf(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=Ry(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const l=t.children[s],d=om(e,s),p=this.processSegmentGroup(d,l,s);if(null===p)return null;i.push(...p)}const r=ym(i);return function _m(n){n.sort((e,t)=>e.value.outlet===Pt?-1:t.value.outlet===Pt?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const l=this.processSegmentAgainstRoute(s,t,i,r);if(null!==l)return l}return lm(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!jy(e,t,i,r))return null;let s,l=[],d=[];if("**"===e.path){const O=i.length>0?Sc(i).parameters:{};s=new Ga(i,O,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Wt(e),e.component,e,Hl(t),Us(t)+i.length,g(e))}else{const O=Oc(t,e,i);if(!O.matched)return null;l=O.consumedSegments,d=O.remainingSegments,s=new Ga(l,O.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Wt(e),e.component,e,Hl(t),Us(t)+l.length,g(e))}const p=function qy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:w}=Pc(t,l,d,p.filter(O=>void 0===O.redirectTo),this.relativeLinkResolution);if(0===w.length&&y.hasChildren()){const O=this.processChildren(p,y);return null===O?null:[new ra(s,O)]}if(0===p.length&&0===w.length)return[new ra(s,[])];const D=Wt(e)===r,x=this.processSegment(p,y,w,D?Pt:r);return null===x?null:[new ra(s,x)]}}function Mf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ym(n){const e=[],t=new Set;for(const i of n){if(!Mf(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=ym(i.children);e.push(new ra(i.value,r))}return e.filter(i=>!t.has(i))}function Hl(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Us(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function v(n){return n.data||{}}function g(n){return n.resolve||{}}function Q(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Le(n){return Cn(e=>{const t=n(e);return t?(0,_n.D)(t).pipe((0,st.U)(()=>e)):Ke(e)})}class mt extends class bt{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Bn=new u.OlP("ROUTES");class Ir{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe((0,st.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=s.create(e);return new Wd(jd(l.injector.get(Bn,void 0,u.XFs.Self|u.XFs.Optional)).map(Ef),l)}),Di(s=>{throw t._loader$=void 0,s}));return t._loader$=new vs(r,()=>new It.x).pipe(Ko()),t._loader$}loadModuleFactory(e){return xn(e()).pipe((0,Fn.z)(t=>t instanceof u.YKP?Ke(t):(0,_n.D)(this.compiler.compileModuleAsync(t))))}}class Wy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function qa(n){throw n}function Xd(n,e,t){return e.parse("/")}function Jd(n,e){return Ke(null)}const xf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eh={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ii=(()=>{class n{constructor(t,i,r,s,l,d,p){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new It.x,this.errorHandler=qa,this.malformedUriErrorHandler=Xd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Jd,afterPreactivation:Jd},this.urlHandlingStrategy=new Wy,this.routeReuseStrategy=new mt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(u.h0i),this.console=l.get(u.c2e);const D=l.get(u.R0b);this.isNgZoneEnabled=D instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function qg(){return new J(new ee([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ir(l,d,x=>this.triggerEvent(new Qo(x)),x=>this.triggerEvent(new Xo(x))),this.routerState=Nl(this.currentUrlTree,this.rootComponentType),this.transitions=new pi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(an(r=>0!==r.id),(0,st.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Cn(r=>{let s=!1,l=!1;return Ke(r).pipe((0,Bi.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Cn(d=>{const p=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return kf(d.source)&&(this.browserUrlTree=d.extractedUrl),Ke(d).pipe(Cn(D=>{const x=this.transitions.getValue();return i.next(new ja(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),x!==this.transitions.getValue()?Eo.E:Promise.resolve(D)}),function cm(n,e,t,i){return Cn(r=>function Ul(n,e,t,i,r){return new Yd(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe((0,st.U)(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Bi.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function _(n,e,t,i,r){return(0,Fn.z)(s=>function Uu(n,e,t,i,r="emptyOnly",s="legacy"){try{const l=new mm(n,e,t,i,r,s).recognize();return null===l?Io(new gm):Ke(l)}catch(l){return Io(l)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe((0,st.U)(l=>Object.assign(Object.assign({},s),{targetSnapshot:l}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Bi.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(O,D)}this.browserUrlTree=D.urlAfterRedirects}const x=new So(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);i.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:O,source:L,restoredState:Y,extras:re}=d,Oe=new ja(x,this.serializeUrl(O),L,Y);i.next(Oe);const Ue=Nl(O,this.rootComponentType).snapshot;return Ke(Object.assign(Object.assign({},d),{targetSnapshot:Ue,urlAfterRedirects:O,extras:Object.assign(Object.assign({},re),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),Eo.E}),Le(d=>{const{targetSnapshot:p,id:y,extractedUrl:w,rawUrl:D,extras:{skipLocationChange:x,replaceUrl:O}}=d;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:w,rawUrlTree:D,skipLocationChange:!!x,replaceUrl:!!O})}),(0,Bi.b)(d=>{const p=new $g(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,st.U)(d=>Object.assign(Object.assign({},d),{guards:um(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function fm(n,e){return(0,Fn.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?Ke(Object.assign(Object.assign({},t),{guardsResult:!0})):function zy(n,e,t,i){return(0,_n.D)(n).pipe((0,Fn.z)(r=>function Af(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ke(s.map(d=>{const p=Nc(d,e,r);let y;if(function dC(n){return n&&Ll(n.canDeactivate)}(p))y=xn(p.canDeactivate(n,e,t,i));else{if(!Ll(p))throw new Error("Invalid CanDeactivate guard");y=xn(p(n,e,t,i))}return y.pipe(Ml())})).pipe(Rc()):Ke(!0)}(r.component,r.route,t,e,i)),Ml(r=>!0!==r,!0))}(l,i,r,n).pipe((0,Fn.z)(d=>d&&function sm(n){return"boolean"==typeof n}(d)?function Qd(n,e,t,i){return(0,_n.D)(e).pipe(Al(r=>Il(function pm(n,e){return null!==n&&e&&e(new xl(n)),Ke(!0)}(r.route.parent,i),function $y(n,e){return null!==n&&e&&e(new Jo(n)),Ke(!0)}(r.route,i),function If(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function dm(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Co(()=>Ke(l.guards.map(p=>{const y=Nc(p,l.node,t);let w;if(function bf(n){return n&&Ll(n.canActivateChild)}(y))w=xn(y.canActivateChild(i,n));else{if(!Ll(y))throw new Error("Invalid CanActivateChild guard");w=xn(y(i,n))}return w.pipe(Ml())})).pipe(Rc())));return Ke(s).pipe(Rc())}(n,r.path,t),function Tr(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Ke(!0);const r=i.map(s=>Co(()=>{const l=Nc(s,e,t);let d;if(function Lu(n){return n&&Ll(n.canActivate)}(l))d=xn(l.canActivate(e,n));else{if(!Ll(l))throw new Error("Invalid CanActivate guard");d=xn(l(e,n))}return d.pipe(Ml())}));return Ke(r).pipe(Rc())}(n,r.route,t))),Ml(r=>!0!==r,!0))}(i,s,n,e):Ke(d)),(0,st.U)(d=>Object.assign(Object.assign({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Bi.b)(d=>{if(xc(d.guardsResult)){const y=To(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw y.url=d.guardsResult,y}const p=new Mu(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),an(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),Le(d=>{if(d.guards.canActivateChecks.length)return Ke(d).pipe((0,Bi.b)(p=>{const y=new wr(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),Cn(p=>{let y=!1;return Ke(p).pipe(function C(n,e){return(0,Fn.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ke(t);let s=0;return(0,_n.D)(r).pipe(Al(l=>function A(n,e,t,i){return function P(n,e,t,i){const r=Q(n);if(0===r.length)return Ke({});const s={};return(0,_n.D)(r).pipe((0,Fn.z)(l=>function pe(n,e,t,i){const r=Nc(n,e,i);return xn(r.resolve?r.resolve(e,t):r(e,t))}(n[l],e,t,i).pipe((0,Bi.b)(d=>{s[l]=d}))),Au(1),(0,Fn.z)(()=>Q(s).length===r.length?Ke(s):Eo.E))}(n._resolve,n,e,i).pipe((0,st.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),Ry(n,t).resolve),null)))}(l.route,i,n,e)),(0,Bi.b)(()=>s++),Au(1),(0,Fn.z)(l=>s===r.length?Ke(t):Eo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Bi.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,Bi.b)(p=>{const y=new Cr(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),Le(d=>{const{targetSnapshot:p,id:y,extractedUrl:w,rawUrl:D,extras:{skipLocationChange:x,replaceUrl:O}}=d;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:w,rawUrlTree:D,skipLocationChange:!!x,replaceUrl:!!O})}),(0,st.U)(d=>{const p=function Qg(n,e,t){const i=Pu(n,e._root,t?t._root:void 0);return new Hd(i,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:p})}),(0,Bi.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,st.U)(i=>(new rm(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Bi.b)({next(){s=!0},complete(){s=!0}}),uf(()=>{var d;s||l||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===r.id&&(this.currentNavigation=null)}),Di(d=>{if(l=!0,function Iy(n){return n&&n[kl]}(d)){const p=xc(d.url);p||(this.navigated=!0,this.restoreHistory(r,!0));const y=new Ln(r.id,this.serializeUrl(r.extractedUrl),d.message);i.next(y),p?setTimeout(()=>{const w=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||kf(r.source)};this.scheduleNavigation(w,"imperative",null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new Ec(r.id,this.serializeUrl(r.extractedUrl),d);i.next(p);try{r.resolve(this.errorHandler(d))}catch(y){r.reject(y)}}return Eo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},l=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(l){const p=Object.assign({},l);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,i,l,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Bl(t),this.config=t.map(Ef),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:l,queryParamsHandling:d,preserveFragment:p}=i,y=r||this.routerState.root,w=p?this.currentUrlTree.fragment:l;let D=null;switch(d){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),function aa(n,e,t,i,r){if(0===t.length)return Nu(e.root,e.root,e.root,i,r);const s=function Py(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new _f(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Xn(s.outlets,(p,y)=>{d[y]="string"==typeof p?p.split("/"):p}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===l?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new _f(t,e,i)}(t);if(s.toRoot())return Nu(e.root,e.root,new ee([],{}),i,r);const l=function Jg(n,e,t){if(n.isAbsolute)return new Fu(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new Fu(s,s===e.root,0)}const i=Ls(n.commands[0])?0:1;return function em(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new Fu(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),d=l.processChildren?$d(l.segmentGroup,l.index,s.commands):nm(l.segmentGroup,l.index,s.commands);return Nu(e.root,l.segmentGroup,d,i,r)}(y,this.currentUrlTree,t,D,null!=w?w:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=xc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function Rf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},xf):!1===i?Object.assign({},eh):i,xc(t))return ta(this.currentUrlTree,t,r);const s=this.parseUrl(t);return ta(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Cc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,l){var d,p;if(this.disposed)return Promise.resolve(!1);let y,w,D;l?(y=l.resolve,w=l.reject,D=l.promise):D=new Promise((L,Y)=>{y=L,w=Y});const x=++this.navigationId;let O;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),O=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):O=0,this.setTransition({id:x,targetPageId:O,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:y,reject:w,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(L=>Promise.reject(L))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===l?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new Ln(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function kf(n){return"imperative"!==n}let Fc=(()=>{class n{constructor(t,i,r){this.router=t,this.route=i,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new It.x,this.subscription=t.events.subscribe(s=>{s instanceof Cc&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,i,r,s,l){if(0!==t||i||r||s||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const d={skipLocationChange:Lc(this.skipLocationChange),replaceUrl:Lc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,d),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Lc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ii),u.Y36(Ac),u.Y36(me))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,i){1&t&&u.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&u.uIk("target",i.target)("href",i.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})();function Lc(n){return""===n||!!n}class Ky{}class pC{preload(e,t){return Ke(null)}}let gC=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new Ir(r,i,p=>t.triggerEvent(new Qo(p)),p=>t.triggerEvent(new Xo(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(an(t=>t instanceof Cc),Al(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const l=s._loadedConfig;r.push(this.processRoutes(l.module,l.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return(0,_n.D)(r).pipe((0,Zo.J)(),(0,st.U)(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Ke(i._loadedConfig):this.loader.load(t.injector,i)).pipe((0,Fn.z)(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ii),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(Ky))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),vm=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ja?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Cc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Rl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new Rl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const js=new u.OlP("ROUTER_CONFIGURATION"),Qy=new u.OlP("ROUTER_FORROOT_GUARD"),mC=[Ee,{provide:Tt,useClass:gt},{provide:Ii,useFactory:function Jy(n,e,t,i,r,s,l={},d,p){const y=new Ii(null,n,e,t,i,r,jd(s));return d&&(y.urlHandlingStrategy=d),p&&(y.routeReuseStrategy=p),function vC(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,y),l.enableTracing&&y.events.subscribe(w=>{var D,x;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${w.constructor.name}`),console.log(w.toString()),console.log(w),null===(x=console.groupEnd)||void 0===x||x.call(console)}),y},deps:[Tt,kc,Ee,u.zs3,u.Sil,Bn,js,[class ju{},new u.FiY],[class Je{},new u.FiY]]},kc,{provide:Ac,useFactory:function bm(n){return n.routerState.root},deps:[Ii]},gC,pC,class Yy{preload(e,t){return t().pipe(Di(()=>Ke(null)))}},{provide:js,useValue:{enableTracing:!1}}];function aA(){return new u.PXZ("Router",Ii)}let Pf=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[mC,Xy(t),{provide:Qy,useFactory:yC,deps:[[Ii,new u.FiY,new u.tp0]]},{provide:js,useValue:i||{}},{provide:me,useFactory:_C,deps:[le,[new u.tBr(Ye),new u.FiY],js]},{provide:vm,useFactory:lA,deps:[Ii,fu,js]},{provide:Ky,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:pC},{provide:u.PXZ,multi:!0,useFactory:aA},[th,{provide:u.ip1,multi:!0,useFactory:bC,deps:[th]},{provide:tv,useFactory:ev,deps:[th]},{provide:u.tb,multi:!0,useExisting:tv}]]}}static forChild(t){return{ngModule:n,providers:[Xy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Qy,8),u.LFG(Ii,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function lA(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new vm(n,e,t)}function _C(n,e,t={}){return t.useHash?new Ie(n,e):new tt(n,e)}function yC(n){return"guarded"}function Xy(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:Bn,multi:!0,useValue:n}]}let th=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new It.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(d=>i=d),s=this.injector.get(Ii),l=this.injector.get(js);return"disabled"===l.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Ke(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(js),r=this.injector.get(gC),s=this.injector.get(vm),l=this.injector.get(Ii),d=this.injector.get(u.z2F);t===d.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&l.initialNavigation(),r.setUpPreloading(),s.init(),l.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function bC(n){return n.appInitializer.bind(n)}function ev(n){return n.bootstrapListener.bind(n)}const tv=new u.OlP("Router Initializer");var cA=F(233),nh=F(5363),wC=F(5032);function CC(...n){const e=(0,Ua.jO)(n);return(0,kn.e)((t,i)=>{const r=n.length,s=new Array(r);let l=n.map(()=>!1),d=!1;for(let p=0;p<r;p++)(0,br.Xf)(n[p]).subscribe((0,yn.x)(i,y=>{s[p]=y,!d&&!l[p]&&(l[p]=!0,(d=l.every(vr.y))&&(l=null))},wC.Z));t.subscribe((0,yn.x)(i,p=>{if(d){const y=[p,...s];i.next(e?e(...y):y)}}))})}function Hu(n,e=vr.y){return n=null!=n?n:DC,(0,kn.e)((t,i)=>{let r,s=!0;t.subscribe((0,yn.x)(i,l=>{const d=e(l);(s||!n(r,d))&&(s=!1,r=d,i.next(l))}))})}function DC(n,e){return n===e}const Cm={},TC="@ngrx/store/init";let ih=(()=>{class n extends pi{constructor(){super({type:TC})}next(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===t)throw new TypeError("Actions must be objects");if(void 0===t.type)throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const IC=[ih],AC=new u.OlP("@ngrx/store Internal Root Guard"),MC=new u.OlP("@ngrx/store Internal Initial State"),rv=new u.OlP("@ngrx/store Initial State"),Ot=new u.OlP("@ngrx/store Reducer Factory"),sv=new u.OlP("@ngrx/store Internal Reducer Factory Provider"),ov=new u.OlP("@ngrx/store Initial Reducers"),Em=new u.OlP("@ngrx/store Internal Initial Reducers"),Nf=new u.OlP("@ngrx/store Store Features"),Ao=new u.OlP("@ngrx/store Internal Store Reducers"),Dm=new u.OlP("@ngrx/store Internal Feature Reducers"),xC=new u.OlP("@ngrx/store Internal Feature Configs"),Sm=new u.OlP("@ngrx/store Internal Store Features"),Wa=new u.OlP("@ngrx/store Internal Feature Reducers Token"),Tm=new u.OlP("@ngrx/store Feature Reducers"),av=new u.OlP("@ngrx/store User Provided Meta Reducers"),rh=new u.OlP("@ngrx/store Meta Reducers"),gA=new u.OlP("@ngrx/store Internal Resolved Meta Reducers"),lv=new u.OlP("@ngrx/store User Runtime Checks Config"),mA=new u.OlP("@ngrx/store Internal User Runtime Checks Config"),Bc=new u.OlP("@ngrx/store Internal Runtime Checks"),sh=new u.OlP("@ngrx/store Check if Action types are unique");function Ff(n,e={}){const t=Object.keys(n),i={};for(let s=0;s<t.length;s++){const l=t[s];"function"==typeof n[l]&&(i[l]=n[l])}const r=Object.keys(i);return function(l,d){l=void 0===l?e:l;let p=!1;const y={};for(let w=0;w<r.length;w++){const D=r[w],O=l[D],L=(0,i[D])(O,d);y[D]=L,p=p||L!==O}return p?y:l}}function Im(...n){return function(e){if(0===n.length)return e;const t=n[n.length-1];return n.slice(0,-1).reduceRight((r,s)=>s(r),t(e))}}function _A(n,e){return Array.isArray(e)&&e.length>0&&(n=Im.apply(null,[...e,n])),(t,i)=>{const r=n(t);return(s,l)=>r(s=void 0===s?i:s,l)}}class uv extends tn.y{}class RC extends ih{}let Lf=(()=>{class n extends pi{constructor(t,i,r,s){super(s(r,i)),this.dispatcher=t,this.initialState=i,this.reducers=r,this.reducerFactory=s}get currentReducers(){return this.reducers}addFeature(t){this.addFeatures([t])}addFeatures(t){const i=t.reduce((r,{reducers:s,reducerFactory:l,metaReducers:d,initialState:p,key:y})=>{const w="function"==typeof s?function yA(n){const e=Array.isArray(n)&&n.length>0?Im(...n):t=>t;return(t,i)=>(t=e(t),(r,s)=>t(r=void 0===r?i:r,s))}(d)(s,p):_A(l,d)(s,p);return r[y]=w,r},{});this.addReducers(i)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(i=>i.key))}addReducer(t,i){this.addReducers({[t]:i})}addReducers(t){this.reducers=Object.assign(Object.assign({},this.reducers),t),this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(i=>{this.reducers=function cv(n,e){return Object.keys(n).filter(t=>t!==e).reduce((t,i)=>Object.assign(t,{[i]:n[i]}),{})}(this.reducers,i)}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:t})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(RC),u.LFG(rv),u.LFG(ov),u.LFG(Ot))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const E1=[Lf,{provide:uv,useExisting:Lf},{provide:RC,useExisting:ih}];let dv=(()=>{class n extends It.x{ngOnDestroy(){this.complete()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const D1=[dv];class hv extends tn.y{}let fv=(()=>{class n extends pi{constructor(t,i,r,s){super(s);const y=t.pipe((0,nh.Q)(cA.N)).pipe(CC(i)).pipe(Zi(bA,{state:s}));this.stateSubscription=y.subscribe(({state:w,action:D})=>{this.next(w),r.next(D)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return n.INIT=TC,n.\u0275fac=function(t){return new(t||n)(u.LFG(ih),u.LFG(uv),u.LFG(dv),u.LFG(rv))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function bA(n={state:void 0},[e,t]){const{state:i}=n;return{state:t(i,e),action:e}}const pv=[fv,{provide:hv,useExisting:fv}];let gv=(()=>{class n extends tn.y{constructor(t,i,r){super(),this.actionsObserver=i,this.reducerManager=r,this.source=t}select(t,...i){return wA.call(null,t,...i)(this)}lift(t){const i=new n(this,this.actionsObserver,this.reducerManager);return i.operator=t,i}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,i){this.reducerManager.addReducer(t,i)}removeReducer(t){this.reducerManager.removeReducer(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(hv),u.LFG(ih),u.LFG(Lf))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const S1=[gv];function wA(n,e,...t){return function(r){let s;if("string"==typeof n){const l=[e,...t].filter(Boolean);s=r.pipe(function EC(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return(0,st.U)(t=>{let i=t;for(let r=0;r<e;r++){const s=null==i?void 0:i[n[r]];if(void 0===s)return;i=s}return i})}(n,...l))}else{if("function"!=typeof n)throw new TypeError(`Unexpected type '${typeof n}' in select operator, expected 'string' or 'function'`);s=r.pipe((0,st.U)(l=>n(l,e)))}return s.pipe(Hu())}}const kC="https://ngrx.io/guide/store/configuration/runtime-checks";function CA(n){return void 0===n}function EA(n){return null===n}function DA(n){return Array.isArray(n)}function Gl(n){return"object"==typeof n&&null!==n}function Am(n){return"function"==typeof n}function Uc(n){Object.freeze(n);const e=Am(n);return Object.getOwnPropertyNames(n).forEach(t=>{if(!t.startsWith("\u0275")&&function PC(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(n,t)&&(!e||"caller"!==t&&"callee"!==t&&"arguments"!==t)){const i=n[t];(Gl(i)||Am(i))&&!Object.isFrozen(i)&&Uc(i)}}),n}function Rm(n,e=[]){return(CA(n)||EA(n))&&0===e.length?{path:["root"],value:n}:Object.keys(n).reduce((i,r)=>{if(i)return i;const s=n[r];return function _v(n){return Am(n)&&n.hasOwnProperty("\u0275cmp")}(s)?i:!(CA(s)||EA(s)||function A1(n){return"number"==typeof n}(s)||function I1(n){return"boolean"==typeof n}(s)||function T1(n){return"string"==typeof n}(s)||DA(s))&&(function OC(n){if(!function mv(n){return Gl(n)&&!DA(n)}(n))return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||null===e}(s)?Rm(s,[...e,r]):{path:[...e,r],value:s})},!1)}function wv(n,e){if(!1===n)return;const t=n.path.join("."),i=new Error(`Detected unserializable ${e} at "${t}". ${kC}#strict${e}serializability`);throw i.value=n.value,i.unserializablePath=t,i}function Ev(n){return(0,u.X6Q)()?Object.assign({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},n):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function FC({strictActionSerializability:n,strictStateSerializability:e}){return t=>n||e?function AA(n,e){return function(t,i){e.action(i)&&wv(Rm(i),"action");const r=n(t,i);return e.state()&&wv(Rm(r),"state"),r}}(t,{action:i=>n&&!Dv(i),state:()=>e}):t}function km({strictActionImmutability:n,strictStateImmutability:e}){return t=>n||e?function Uf(n,e){return function(t,i){const r=e.action(i)?Uc(i):i,s=n(t,r);return e.state()?Uc(s):s}}(t,{action:i=>n&&!Dv(i),state:()=>e}):t}function Dv(n){return n.type.startsWith("@ngrx")}function LC({strictActionWithinNgZone:n}){return e=>n?function Cv(n,e){return function(t,i){if(e.action(i)&&!u.R0b.isInAngularZone())throw new Error(`Action '${i.type}' running outside NgZone. ${kC}#strictactionwithinngzone`);return n(t,i)}}(e,{action:t=>n&&!Dv(t)}):e}function x1(n){return[{provide:mA,useValue:n},{provide:lv,useFactory:BC,deps:[mA]},{provide:Bc,deps:[lv],useFactory:Ev},{provide:rh,multi:!0,deps:[Bc],useFactory:km},{provide:rh,multi:!0,deps:[Bc],useFactory:FC},{provide:rh,multi:!0,deps:[Bc],useFactory:LC}]}function Sv(){return[{provide:sh,multi:!0,deps:[Bc],useFactory:MA}]}function BC(n){return n}function MA(n){if(!n.strictActionTypeUniqueness)return;const e=Object.entries(Cm).filter(([,t])=>t>1).map(([t])=>t);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(t=>`"${t}"`).join(", ")}. ${kC}#strictactiontypeuniqueness`)}let Tv=(()=>{class n{constructor(t,i,r,s,l,d){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ih),u.LFG(uv),u.LFG(dv),u.LFG(gv),u.LFG(AC,8),u.LFG(sh,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),xA=(()=>{class n{constructor(t,i,r,s,l){this.features=t,this.featureReducers=i,this.reducerManager=r;const d=t.map((p,y)=>{const D=i.shift()[y];return Object.assign(Object.assign({},p),{reducers:D,initialState:PA(p.initialState)})});r.addFeatures(d)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Sm),u.LFG(Tm),u.LFG(Lf),u.LFG(Tv),u.LFG(sh,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),RA=(()=>{class n{static forRoot(t,i={}){return{ngModule:Tv,providers:[{provide:AC,useFactory:VC,deps:[[gv,new u.FiY,new u.tp0]]},{provide:MC,useValue:i.initialState},{provide:rv,useFactory:PA,deps:[MC]},{provide:Em,useValue:t},{provide:Ao,useExisting:t instanceof u.OlP?t:Em},{provide:ov,deps:[u.zs3,Em,[new u.tBr(Ao)]],useFactory:Gs},{provide:av,useValue:i.metaReducers?i.metaReducers:[]},{provide:gA,deps:[rh,av],useFactory:R1},{provide:sv,useValue:i.reducerFactory?i.reducerFactory:Ff},{provide:Ot,deps:[sv,gA],useFactory:_A},IC,E1,D1,pv,S1,x1(i.runtimeChecks),Sv()]}}static forFeature(t,i,r={}){return{ngModule:xA,providers:[{provide:xC,multi:!0,useValue:t instanceof Object?{}:r},{provide:Nf,multi:!0,useValue:{key:t instanceof Object?t.name:t,reducerFactory:r instanceof u.OlP||!r.reducerFactory?Ff:r.reducerFactory,metaReducers:r instanceof u.OlP||!r.metaReducers?[]:r.metaReducers,initialState:r instanceof u.OlP||!r.initialState?void 0:r.initialState}},{provide:Sm,deps:[u.zs3,xC,Nf],useFactory:kA},{provide:Dm,multi:!0,useValue:t instanceof Object?t.reducer:i},{provide:Wa,multi:!0,useExisting:i instanceof u.OlP?i:Dm},{provide:Tm,multi:!0,deps:[u.zs3,Dm,[new u.tBr(Wa)]],useFactory:OA},Sv()]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function Gs(n,e){return e instanceof u.OlP?n.get(e):e}function kA(n,e,t){return t.map((i,r)=>{if(e[r]instanceof u.OlP){const s=n.get(e[r]);return{key:i.key,reducerFactory:s.reducerFactory?s.reducerFactory:Ff,metaReducers:s.metaReducers?s.metaReducers:[],initialState:s.initialState}}return i})}function OA(n,e){return e.map(i=>i instanceof u.OlP?n.get(i):i)}function PA(n){return"function"==typeof n?n():n}function R1(n,e){return n.concat(e)}function VC(n){if(n)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}var lr=(()=>{return(n=lr||(lr={})).addFullTradeInData="addFullTradeInData",n.addTradeInUserData="addTradeInUserData",n.addTradeInProductData="addTradeInProductData",n.deleteFullTradeInData="deleteFullTradeInData",n.deleteTradeInUserData="deleteTradeInUserData",n.deleteTradeInProductData="deleteTradeInProductData",lr;var n})();class Gu{}class NA extends Gu{constructor(){super(),super.type=lr.addFullTradeInData,super.payload=null!=localStorage.tradeInData?JSON.parse(localStorage.tradeInData):null}}class FA extends Gu{constructor(e){super(),super.type=lr.addTradeInUserData,super.payload=e}}class LA extends Gu{constructor(e){super(),super.type=lr.addTradeInProductData,super.payload=e}}class UC extends Gu{constructor(e){super(),super.type=lr.deleteFullTradeInData,super.payload=e}}class BA extends Gu{constructor(e){super(),super.type=lr.deleteTradeInUserData,super.payload=e}}class jC extends Gu{constructor(e){super(),super.type=lr.deleteTradeInProductData,super.payload=e}}let Iv=(()=>{class n{constructor(t){this.store=t,this.store.dispatch(new NA)}getFullTradeInData(){return this.store.pipe(wA("tradein"))}addTradeInUserData(t){this.store.dispatch(new FA(t))}addTradeInProductData(t){this.store.dispatch(new LA(t))}deleteFullTradeInData(){this.store.dispatch(new UC({}))}deleteTradeInUserData(){this.store.dispatch(new BA(null))}deleteTradeInProductData(){this.store.dispatch(new jC(null))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(gv))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Tn(n){return null!=n&&"false"!=`${n}`}function Om(n,e=0){return function HC(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function GC(n){return Array.isArray(n)?n:[n]}function En(n){return null==n?"":"string"==typeof n?n:`${n}px`}function ca(n){return n instanceof u.SBq?n.nativeElement:n}var jf=F(4986);function zC(n,e=jf.z){return(0,kn.e)((t,i)=>{let r=null,s=null,l=null;const d=()=>{if(r){r.unsubscribe(),r=null;const y=s;s=null,i.next(y)}};function p(){const y=l+n,w=e.now();if(w<y)return r=this.schedule(void 0,y-w),void i.add(r);d()}t.subscribe((0,yn.x)(i,y=>{s=y,l=e.now(),r||(r=e.schedule(p,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}let Av=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VA=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=ca(t);return new tn.y(r=>{const l=this._observeElement(i).subscribe(r);return()=>{l.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new It.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Av))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$C=(()=>{class n{constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new u.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Tn(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Om(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(zC(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(VA),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Mv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Av]}),n})();const xv=new u.OlP("cdk-dir-doc",{providedIn:"root",factory:function UA(){return(0,u.f3M)(ie)}}),jA=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Fm,zl=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new u.vpe,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function Pm(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?jA.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xv,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();try{Fm="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){Fm=!1}let jc,ws=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Li(n){return n===jo}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Fm)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HA=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function qC(){if(jc)return jc;if("object"!=typeof document||!document)return jc=new Set(HA),jc;let n=document.createElement("input");return jc=new Set(HA.filter(e=>(n.setAttribute("type",e),n.type===e))),jc}let ah,Hc,kv;function lh(n){return function WC(){if(null==ah&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ah=!0}))}finally{ah=ah||!1}return ah}()?n:!!n.capture}function $l(){if(null==Hc){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Hc=!1,Hc;if("scrollBehavior"in document.documentElement.style)Hc=!0;else{const n=Element.prototype.scrollTo;Hc=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Hc}function Gf(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Gc(n){return n.composedPath?n.composedPath()[0]:n.target}function zf(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function dh(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function mi(n){return(0,kn.e)((e,t)=>{(0,br.Xf)(n).subscribe((0,yn.x)(t,()=>t.complete(),wC.Z)),!t.closed&&e.subscribe(t)})}class yL extends class Uv{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new It.x,this._typeaheadSubscription=gi.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new It.x,this.change=new It.x,e instanceof u.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Bi.b)(t=>this._pressedLetters.push(t)),zC(e),an(()=>this._pressedLetters.length>0),(0,st.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,l=i[s];if(!this._skipPredicateFn(l)&&0===l.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||dh(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e),r=t[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof u.n_E?this._items.toArray():this._items}}{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}let TM=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function fE(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function ip(n){try{return n.frameElement}catch(e){return null}}(function zm(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===AM(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=AM(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function MM(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function Gm(n){return!function Hv(n){return function Um(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function jv(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function IM(n){return function jm(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||Hm(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ws))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Hm(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function AM(n){if(!Hm(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Gv{constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return null==i||i.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,ri.q)(1)).subscribe(e)}}let pE=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new Gv(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(TM),u.LFG(u.R0b),u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zv(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function $v(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const qv=new u.OlP("cdk-input-modality-detector-options"),yE={ignoreKeys:[18,17,224,91,16]},$u=lh({passive:!0,capture:!0});let bE=(()=>{class n{constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new pi(null),this._lastTouchMs=0,this._onKeydown=l=>{var d,p;(null===(p=null===(d=this._options)||void 0===d?void 0:d.ignoreKeys)||void 0===p?void 0:p.some(y=>y===l.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Gc(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(zv(l)?"keyboard":"mouse"),this._mostRecentTarget=Gc(l))},this._onTouchstart=l=>{$v(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Gc(l))},this._options=Object.assign(Object.assign({},yE),s),this.modalityDetected=this._modality.pipe(function lE(n){return an((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(Hu()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,$u),r.addEventListener("mousedown",this._onMousedown,$u),r.addEventListener("touchstart",this._onTouchstart,$u)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,$u),document.removeEventListener("mousedown",this._onMousedown,$u),document.removeEventListener("touchstart",this._onTouchstart,$u))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ws),u.LFG(u.R0b),u.LFG(ie),u.LFG(qv,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wE=new u.OlP("liveAnnouncerElement",{providedIn:"root",factory:function Wv(){return null}}),CE=new u.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let EE=(()=>{class n{constructor(t,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...i){const r=this._defaultOptions;let s,l;return 1===i.length&&"number"==typeof i[0]?l=i[0]:[s,l]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==l&&r&&(l=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(d=>this._currentResolve=d)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof l&&(this._previousTimeout=setTimeout(()=>this.clear(),l)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var t,i;clearTimeout(this._previousTimeout),null===(t=this._liveElement)||void 0===t||t.remove(),this._liveElement=null,null===(i=this._currentResolve)||void 0===i||i.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wE,8),u.LFG(u.R0b),u.LFG(ie),u.LFG(CE,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const DE=new u.OlP("cdk-focus-monitor-default-options"),rp=lh({passive:!0,capture:!0});let sp=(()=>{class n{constructor(t,i,r,s,l){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new It.x,this._rootNodeFocusAndBlurListener=d=>{const p=Gc(d),y="focus"===d.type?this._onFocus:this._onBlur;for(let w=p;w;w=w.parentElement)y.call(this,d,w)},this._document=s,this._detectionMode=(null==l?void 0:l.detectionMode)||0}monitor(t,i=!1){const r=ca(t);if(!this._platform.isBrowser||1!==r.nodeType)return Ke(null);const s=function F1(n){if(function GA(){if(null==kv){const n="undefined"!=typeof document?document.head:null;kv=!(!n||!n.createShadowRoot&&!n.attachShadow)}return kv}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),l=this._elementInfo.get(r);if(l)return i&&(l.checkChildren=!0),l.subject;const d={checkChildren:i,subject:new It.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){const i=ca(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=ca(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,p])=>this._originChanged(d,i,p)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Gc(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(t,i){this._ngZone.run(()=>t.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,rp),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,rp)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(mi(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,rp),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,rp),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(ws),u.LFG(bE),u.LFG(ie,8),u.LFG(DE,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Zv="cdk-high-contrast-black-on-white",PM="cdk-high-contrast-white-on-black",Kv="cdk-high-contrast-active";let SE=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Kv),t.remove(Zv),t.remove(PM),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(Kv),t.add(Zv)):2===i&&(t.add(Kv),t.add(PM))}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ws),u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TE=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(SE))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Mv]]}),n})();class IE{}const Ya="*";function hh(n,e){return{type:7,name:n,definitions:e,options:{}}}function Wl(n,e=null){return{type:4,styles:e,timings:n}}function Yv(n,e=null){return{type:3,steps:n,options:e}}function AE(n,e=null){return{type:2,steps:n,options:e}}function oi(n){return{type:6,styles:n,offset:null}}function da(n,e,t){return{type:0,name:n,styles:e,options:t}}function Qa(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function $m(n=null){return{type:9,options:n}}function qm(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function Wm(n){Promise.resolve(null).then(n)}class qu{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Wm(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class ha{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?Wm(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++i==s&&this._onDestroy()}),l.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const Xt=!1;function Mo(n){return new u.vHH(3e3,Xt)}function ZM(){return"undefined"!=typeof window&&void 0!==window.document}function eb(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function $c(n){switch(n.length){case 0:return new qu;case 1:return n[0];default:return new ha(n)}}function zE(n,e,t,i,r={},s={}){const l=[],d=[];let p=-1,y=null;if(i.forEach(w=>{const D=w.offset,x=D==p,O=x&&y||{};Object.keys(w).forEach(L=>{let Y=L,re=w[L];if("offset"!==L)switch(Y=e.normalizePropertyName(Y,l),re){case"!":re=r[L];break;case Ya:re=s[L];break;default:re=e.normalizeStyleValue(L,Y,re,l)}O[Y]=re}),x||d.push(O),y=O,p=D}),l.length)throw function BE(n){return new u.vHH(3502,Xt)}();return d}function tb(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&nb(t,"start",n)));break;case"done":n.onDone(()=>i(t&&nb(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&nb(t,"destroy",n)))}}function nb(n,e,t){const i=t.totalTime,s=ib(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),l=n._data;return null!=l&&(s._data=l),s}function ib(n,e,t,i,r="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!l}}function $s(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function $E(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let rb=(n,e)=>!1,qE=(n,e,t)=>[],sb=null;function Ym(n){const e=n.parentNode||n.host;return e===sb?null:e}(eb()||"undefined"!=typeof Element)&&(ZM()?(sb=(()=>document.documentElement)(),rb=(n,e)=>{for(;e;){if(e===n)return!0;e=Ym(e)}return!1}):rb=(n,e)=>n.contains(e),qE=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let qc=null,ob=!1;function ab(n){qc||(qc=function ZE(){return"undefined"!=typeof document?document.body:null}()||{},ob=!!qc.style&&"WebkitAppearance"in qc.style);let e=!0;return qc.style&&!function WE(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in qc.style,!e&&ob&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in qc.style)),e}const lb=rb,Qm=qE;let Wc=(()=>{class n{validateStyleProperty(t){return ab(t)}matchesElement(t,i){return!1}containsElement(t,i){return lb(t,i)}getParentElement(t){return Ym(t)}query(t,i,r){return Qm(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,l,d=[],p){return new qu(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),cb=(()=>{class n{}return n.NOOP=new Wc,n})();const ap="ng-enter",ub="ng-leave",lp="ng-trigger",cp=".ng-trigger",QM="ng-animating",wt=".ng-animating";function Zu(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:db(parseFloat(e[1]),e[2])}function db(n,e){return"s"===e?1e3*n:n}function Xm(n,e,t){return n.hasOwnProperty("duration")?n:function Jm(n,e,t){let r,s=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(Mo()),{duration:0,delay:0,easing:""};r=db(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=db(parseFloat(p),d[4]));const y=d[5];y&&(l=y)}else r=n;if(!t){let d=!1,p=e.length;r<0&&(e.push(function fa(){return new u.vHH(3100,Xt)}()),d=!0),s<0&&(e.push(function ME(){return new u.vHH(3101,Xt)}()),d=!0),d&&e.splice(p,0,Mo())}return{duration:r,delay:s,easing:l}}(n,e,t)}function ph(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function pa(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else ph(n,t);return t}function Jn(n,e,t){return t?e+":"+t+";":""}function XM(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=Jn(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Jn(0,fp(t),n.style[t]));n.setAttribute("style",e)}function ga(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=fb(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),eb()&&XM(n))}function Ku(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=fb(t);n.style[i]=""}),eb()&&XM(n))}function dp(n){return Array.isArray(n)?1==n.length?n[0]:AE(n):n}const e_=new RegExp("{{\\s*(.+?)\\s*}}","g");function hb(n){let e=[];if("string"==typeof n){let t;for(;t=e_.exec(n);)e.push(t[1]);e_.lastIndex=0}return e}function hp(n,e,t){const i=n.toString(),r=i.replace(e_,(s,l)=>{let d=e[l];return e.hasOwnProperty(l)||(t.push(function NM(n){return new u.vHH(3003,Xt)}()),d=""),d.toString()});return r==i?n:r}function t_(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const JM=/-+([a-z0-9])/g;function fb(n){return n.replace(JM,(...e)=>e[1].toUpperCase())}function fp(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function qs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function FM(n){return new u.vHH(3004,Xt)}()}}function pp(n,e){return window.getComputedStyle(n)[e]}function ix(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function XE(n,e,t){if(":"==n[0]){const p=function JE(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Km(n){return new u.vHH(3016,Xt)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Jv(n){return new u.vHH(3015,Xt)}()),e;const r=i[1],s=i[2],l=i[3];e.push(pb(r,l));"<"==s[0]&&!("*"==r&&"*"==l)&&e.push(pb(l,r))}(i,t,e)):t.push(n),t}const yp=new Set(["true","1"]),r_=new Set(["false","0"]);function pb(n,e){const t=yp.has(n)||r_.has(n),i=yp.has(e)||r_.has(e);return(r,s)=>{let l="*"==n||n==r,d="*"==e||e==s;return!l&&t&&"boolean"==typeof r&&(l=r?yp.has(n):r_.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?yp.has(e):r_.has(e)),l&&d}}const rx=new RegExp("s*:selfs*,?","g");function tD(n,e,t,i){return new TL(n).build(e,t,i)}class TL{constructor(e){this._driver=e}build(e,t,i){const r=new s_(t);this._resetContextStyleTimingState(r);const s=qs(this,dp(e),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function BM(){return new u.vHH(3006,Xt)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const p=d,y=p.name;y.toString().split(/\s*,\s*/).forEach(w=>{p.name=w,s.push(this.visitState(p,t))}),p.name=y}else if(1==d.type){const p=this.visitTransition(d,t);i+=p.queryCount,r+=p.depCount,l.push(p)}else t.errors.push(function Xv(){return new u.vHH(3007,Xt)}())}),{type:7,name:e.name,states:s,transitions:l,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,l=r||{};i.styles.forEach(d=>{if(o_(d)){const p=d;Object.keys(p).forEach(y=>{hb(p[y]).forEach(w=>{l.hasOwnProperty(w)||s.add(w)})})}}),s.size&&(t_(s.values()),t.errors.push(function op(n,e){return new u.vHH(3008,Xt)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=qs(this,dp(e.animation),t);return{type:1,matchers:ix(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:ma(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>qs(this,i,t)),options:ma(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(l=>{t.currentTime=i;const d=qs(this,l,t);return r=Math.max(r,t.currentTime),d});return t.currentTime=r,{type:3,steps:s,options:ma(e.options)}}visitAnimate(e,t){const i=function iD(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return gb(Xm(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=gb(0,0,"");return s.dynamic=!0,s.strValue=i,s}return t=t||Xm(i,e),gb(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:oi({});if(5==s.type)r=this.visitKeyframes(s,t);else{let l=e.styles,d=!1;if(!l){d=!0;const y={};i.easing&&(y.easing=i.easing),l=oi(y)}t.currentTime+=i.duration+i.delay;const p=this.visitStyle(l,t);p.isEmptyStep=d,r=p}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(l=>{"string"==typeof l?l==Ya?i.push(l):t.errors.push(function VM(n){return new u.vHH(3002,Xt)}()):i.push(l)}):i.push(e.styles);let r=!1,s=null;return i.forEach(l=>{if(o_(l)){const d=l,p=d.easing;if(p&&(s=p,delete d.easing),!r)for(let y in d)if(d[y].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(l=>{"string"!=typeof l&&Object.keys(l).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete l[d],void t.unsupportedCSSPropertiesFound.add(d);const p=t.collectedStyles[t.currentQuerySelector],y=p[d];let w=!0;y&&(s!=r&&s>=y.startTime&&r<=y.endTime&&(t.errors.push(function jM(n,e,t,i,r){return new u.vHH(3010,Xt)}()),w=!1),s=y.startTime),w&&(p[d]={startTime:s,endTime:r}),t.options&&function YE(n,e,t){const i=e.params||{},r=hb(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function xE(n){return new u.vHH(3001,Xt)}())})}(l[d],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function RE(){return new u.vHH(3011,Xt)}()),i;let s=0;const l=[];let d=!1,p=!1,y=0;const w=e.steps.map(Oe=>{const Ue=this._makeStyleAst(Oe,t);let Ve=null!=Ue.offset?Ue.offset:function ox(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(o_(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(o_(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Ue.styles),Ge=0;return null!=Ve&&(s++,Ge=Ue.offset=Ve),p=p||Ge<0||Ge>1,d=d||Ge<y,y=Ge,l.push(Ge),Ue});p&&t.errors.push(function kE(){return new u.vHH(3012,Xt)}()),d&&t.errors.push(function Zm(){return new u.vHH(3200,Xt)}());const D=e.steps.length;let x=0;s>0&&s<D?t.errors.push(function HM(){return new u.vHH(3202,Xt)}()):0==s&&(x=1/(D-1));const O=D-1,L=t.currentTime,Y=t.currentAnimateTimings,re=Y.duration;return w.forEach((Oe,Ue)=>{const Ve=x>0?Ue==O?1:x*Ue:l[Ue],Ge=Ve*re;t.currentTime=L+Y.delay+Ge,Y.duration=Ge,this._validateStyleAst(Oe,t),Oe.offset=Ve,i.styles.push(Oe)}),i}visitReference(e,t){return{type:8,animation:qs(this,dp(e.animation),t),options:ma(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ma(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ma(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function IL(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(rx,"")),n=n.replace(/@\*/g,cp).replace(/@\w+/g,t=>cp+"-"+t.substr(1)).replace(/:animating/g,wt),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,$s(t.collectedStyles,t.currentQuerySelector,{});const d=qs(this,dp(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:ma(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function OE(){return new u.vHH(3013,Xt)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:Xm(e.timings,t.errors,!0);return{type:12,animation:qs(this,dp(e.animation),t),timings:i,options:null}}}class s_{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function o_(n){return!Array.isArray(n)&&"object"==typeof n}function ma(n){return n?(n=ph(n)).params&&(n.params=function nD(n){return n?ph(n):null}(n.params)):n={},n}function gb(n,e,t){return{duration:n,delay:e,easing:t}}function mb(n,e,t,i,r,s,l=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:l,subTimeline:d}}class a_{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const rD=new RegExp(":enter","g"),ux=new RegExp(":leave","g");function Zc(n,e,t,i,r,s={},l={},d,p,y=[]){return(new dx).buildKeyframes(n,e,t,i,r,s,l,d,p,y)}class dx{buildKeyframes(e,t,i,r,s,l,d,p,y,w=[]){y=y||new a_;const D=new _b(e,t,y,r,s,w,[]);D.options=p,D.currentTimeline.setStyles([l],null,D.errors,p),qs(this,i,D);const x=D.timelines.filter(O=>O.containsAnimation());if(Object.keys(d).length){let O;for(let L=x.length-1;L>=0;L--){const Y=x[L];if(Y.element===t){O=Y;break}}O&&!O.allowOnlyTimelineStyles()&&O.setStyles([d],null,D.errors,p)}return x.length?x.map(O=>O.buildKeyframes()):[mb(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(i,r,r.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const l=null!=i.duration?Zu(i.duration):null,d=null!=i.delay?Zu(i.delay):null;return 0!==l&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,l,d);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),qs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=vp);const l=Zu(s.delay);r.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>qs(this,l,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Zu(e.options.delay):0;e.steps.forEach(l=>{const d=t.createSubContext(e.options);s&&d.delayNextStep(s),qs(this,l,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return Xm(t.params?hp(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,d=t.createSubContext().currentTimeline;d.easing=i.easing,e.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Zu(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=vp);let l=i;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=d.length;let p=null;d.forEach((y,w)=>{t.currentQueryIndex=w;const D=t.createSubContext(e.options,y);s&&D.delayNextStep(s),y===t.element&&(p=D.currentTimeline),qs(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),d=l*(t.currentQueryTotal-1);let p=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=i.currentStaggerTime}const w=t.currentTimeline;p&&w.delayNextStep(p);const D=w.currentTime;qs(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-D+(r.startTime-i.currentTimeline.startTime)}}const vp={};class _b{constructor(e,t,i,r,s,l,d,p){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vp,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new bp(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Zu(i.duration)),null!=i.delay&&(r.delay=Zu(i.delay));const s=i.params;if(s){let l=r.params;l||(l=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!l.hasOwnProperty(d))&&(l[d]=hp(s[d],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new _b(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=vp,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new hx(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,l){let d=[];if(r&&d.push(this.element),e.length>0){e=(e=e.replace(rD,"."+this._enterClassName)).replace(ux,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),d.push(...y)}return!s&&0==d.length&&l.push(function PE(n){return new u.vHH(3014,Xt)}()),d}}class bp{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new bp(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Ya,this._currentKeyframe[t]=Ya}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},l=function fx(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=Ya})):pa(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(l).forEach(d=>{const p=hp(l[d],s,i);this._pendingStyles[d]=p,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:Ya),this._updateStyle(d,p)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,p)=>{const y=pa(d,!0);Object.keys(y).forEach(w=>{const D=y[w];"!"==D?e.add(w):D==Ya&&t.add(w)}),i||(y.offset=p/this.duration),r.push(y)});const s=e.size?t_(e.values()):[],l=t.size?t_(t.values()):[];if(i){const d=r[0],p=ph(d);d.offset=0,p.offset=1,r=[d,p]}return mb(this.element,r,s,l,this.duration,this.startTime,this.easing,!1)}}class hx extends bp{constructor(e,t,i,r,s,l,d=!1){super(e,t,l.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=i+t,d=t/l,p=pa(e[0],!1);p.offset=0,s.push(p);const y=pa(e[0],!1);y.offset=yb(d),s.push(y);const w=e.length-1;for(let D=1;D<=w;D++){let x=pa(e[D],!1);x.offset=yb((t+x.offset*i)/l),s.push(x)}i=l,t=0,r="",e=s}return mb(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function yb(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class vb{}class oD extends vb{normalizePropertyName(e,t){return fb(e)}normalizeStyleValue(e,t,i,r){let s="";const l=i.toString().trim();if(gx[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function LM(n,e){return new u.vHH(3005,Xt)}())}return l+s}}const gx=(()=>function mx(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function aD(n,e,t,i,r,s,l,d,p,y,w,D,x){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:l,timelines:d,queriedElements:p,preStyleProps:y,postStyleProps:w,totalTime:D,errors:x}}const wp={};class lD{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function cD(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],l=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):l}build(e,t,i,r,s,l,d,p,y,w){const D=[],x=this.ast.options&&this.ast.options.params||wp,L=this.buildStyles(i,d&&d.params||wp,D),Y=p&&p.params||wp,re=this.buildStyles(r,Y,D),Oe=new Set,Ue=new Map,Ve=new Map,Ge="void"===r,Dt={params:Object.assign(Object.assign({},x),Y)},Mt=w?[]:Zc(e,t,this.ast.animation,s,l,L,re,Dt,y,D);let nn=0;if(Mt.forEach(Ca=>{nn=Math.max(Ca.duration+Ca.delay,nn)}),D.length)return aD(t,this._triggerName,i,r,Ge,L,re,[],[],Ue,Ve,nn,D);Mt.forEach(Ca=>{const vd=Ca.element,vq=$s(Ue,vd,{});Ca.preStyleProps.forEach(kg=>vq[kg]=!0);const aC=$s(Ve,vd,{});Ca.postStyleProps.forEach(kg=>aC[kg]=!0),vd!==t&&Oe.add(vd)});const Hi=t_(Oe.values());return aD(t,this._triggerName,i,r,Ge,L,re,Mt,Hi,Ue,Ve,nn)}}class _x{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=ph(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!=l&&(r[s]=l)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const l=s;Object.keys(l).forEach(d=>{let p=l[d];p.length>1&&(p=hp(p,r,t));const y=this.normalizer.normalizePropertyName(d,t);p=this.normalizer.normalizeStyleValue(d,y,p,t),i[y]=p})}}),i}}class vx{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new _x(r.style,r.options&&r.options.params||{},i)}),uD(this.states,"true","1"),uD(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new lD(e,r,this.states))}),this.fallbackTransition=function bx(n,e,t){return new lD(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(l=>l.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function uD(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const wx=new a_;class Cx{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],s=tD(this._driver,t,i,[]);if(i.length)throw function VE(n){return new u.vHH(3503,Xt)}();this._animations[e]=s}_buildPlayer(e,t,i){const r=e.element,s=zE(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let l;const d=new Map;if(s?(l=Zc(this._driver,t,s,ap,ub,{},{},i,wx,r),l.forEach(w=>{const D=$s(d,w.element,{});w.postStyleProps.forEach(x=>D[x]=null)})):(r.push(function UE(){return new u.vHH(3300,Xt)}()),l=[]),r.length)throw function jE(n){return new u.vHH(3504,Xt)}();d.forEach((w,D)=>{Object.keys(w).forEach(x=>{w[x]=this._driver.computeStyle(D,x,Ya)})});const y=$c(l.map(w=>{const D=d.get(w.element);return this._buildPlayer(w,{},D)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function HE(n){return new u.vHH(3301,Xt)}();return t}listen(e,t,i,r){const s=ib(t,"","","");return tb(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const dD="ng-animate-queued",l_="ng-animate-disabled",Sx=[],pD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Tx={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Cs="__ng_removed";class Cp{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function gD(n){return null!=n?n:null}(i?e.value:e),i){const s=ph(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const gh="void",Ep=new Cp(gh);class Ix{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,xo(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw function GE(n,e){return new u.vHH(3302,Xt)}();if(null==i||0==i.length)throw function GM(n){return new u.vHH(3303,Xt)}();if(!function mD(n){return"start"==n||"done"==n}(i))throw function zM(n,e){return new u.vHH(3400,Xt)}();const s=$s(this._elementListeners,e,[]),l={name:t,phase:i,callback:r};s.push(l);const d=$s(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(xo(e,lp),xo(e,lp+"-"+t),d[t]=Ep),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(l);p>=0&&s.splice(p,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function $M(n){return new u.vHH(3401,Xt)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),l=new Dp(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(xo(e,lp),xo(e,lp+"-"+t),this._engine.statesByElement.set(e,d={}));let p=d[t];const y=new Cp(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),d[t]=y,p||(p=Ep),y.value!==gh&&p.value===y.value){if(!function kx(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const Y=[],re=s.matchStyles(p.value,p.params,Y),Oe=s.matchStyles(y.value,y.params,Y);Y.length?this._engine.reportError(Y):this._engine.afterFlush(()=>{Ku(e,re),ga(e,Oe)})}return}const x=$s(this._engine.playersByElement,e,[]);x.forEach(Y=>{Y.namespaceId==this.id&&Y.triggerName==t&&Y.queued&&Y.destroy()});let O=s.matchTransition(p.value,y.value,e,y.params),L=!1;if(!O){if(!r)return;O=s.fallbackTransition,L=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:O,fromState:p,toState:y,player:l,isFallbackTransition:L}),L||(xo(e,dD),l.onStart(()=>{Zl(e,dD)})),l.onDone(()=>{let Y=this.players.indexOf(l);Y>=0&&this.players.splice(Y,1);const re=this._engine.playersByElement.get(e);if(re){let Oe=re.indexOf(l);Oe>=0&&re.splice(Oe,1)}}),this.players.push(l),x.push(l),l}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,cp,!0);i.forEach(r=>{if(r[Cs])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(l=>l.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),l=new Map;if(s){const d=[];if(Object.keys(s).forEach(p=>{if(l.set(p,s[p].value),this._triggers[p]){const y=this.trigger(e,p,gh,r);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),i&&$c(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const l=s.name;if(r.has(l))return;r.add(l);const p=this._triggers[l].fallbackTransition,y=i[l]||Ep,w=new Cp(gh),D=new Dp(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:p,fromState:y,toState:w,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let l=e;for(;l=l.parentNode;)if(i.statesByElement.get(l)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Cs];(!s||s===pD)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){xo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,l=this._elementListeners.get(s);l&&l.forEach(d=>{if(d.name==i.triggerName){const p=ib(s,i.triggerName,i.fromState.value,i.toState.value);p._data=e,tb(i.player,d.phase,p,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,l=r.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class Ax{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Ix(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let l=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(t);for(;d;){const p=r.get(d);if(p){const y=i.indexOf(p);i.splice(y+1,0,e),l=!0;break}d=this.driver.getParentElement(d)}}else for(let d=s;d>=0;d--)if(this.driver.containsElement(i[d].hostElement,t)){i.splice(d+1,0,e),l=!0;break}l||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const l=i[r[s]].namespaceId;if(l){const d=this._fetchNamespace(l);d&&t.add(d)}}}return t}trigger(e,t,i,r){if(c_(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!c_(t))return;const s=t[Cs];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),xo(e,l_)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Zl(e,l_))}removeNode(e,t,i,r){if(c_(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Cs]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return c_(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,cp,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,wt,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return $c(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[Cs];if(i&&i.setForRemoval){if(e[Cs]=pD,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(l_))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)xo(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?$c(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function qM(n){return new u.vHH(3402,Xt)}()}_flushAnimations(e,t){const i=new a_,r=[],s=new Map,l=[],d=new Map,p=new Map,y=new Map,w=new Set;this.disabledNodes.forEach(ut=>{w.add(ut);const Et=this.driver.query(ut,".ng-animate-queued",!0);for(let kt=0;kt<Et.length;kt++)w.add(Et[kt])});const D=this.bodyNode,x=Array.from(this.statesByElement.keys()),O=xx(x,this.collectedEnterElements),L=new Map;let Y=0;O.forEach((ut,Et)=>{const kt=ap+Y++;L.set(Et,kt),ut.forEach(gn=>xo(gn,kt))});const re=[],Oe=new Set,Ue=new Set;for(let ut=0;ut<this.collectedLeaveElements.length;ut++){const Et=this.collectedLeaveElements[ut],kt=Et[Cs];kt&&kt.setForRemoval&&(re.push(Et),Oe.add(Et),kt.hasAnimation?this.driver.query(Et,".ng-star-inserted",!0).forEach(gn=>Oe.add(gn)):Ue.add(Et))}const Ve=new Map,Ge=xx(x,Array.from(Oe));Ge.forEach((ut,Et)=>{const kt=ub+Y++;Ve.set(Et,kt),ut.forEach(gn=>xo(gn,kt))}),e.push(()=>{O.forEach((ut,Et)=>{const kt=L.get(Et);ut.forEach(gn=>Zl(gn,kt))}),Ge.forEach((ut,Et)=>{const kt=Ve.get(Et);ut.forEach(gn=>Zl(gn,kt))}),re.forEach(ut=>{this.processLeaveNode(ut)})});const Dt=[],Mt=[];for(let ut=this._namespaceList.length-1;ut>=0;ut--)this._namespaceList[ut].drainQueuedTransitions(t).forEach(kt=>{const gn=kt.player,Ur=kt.element;if(Dt.push(gn),this.collectedEnterElements.length){const so=Ur[Cs];if(so&&so.setForMove){if(so.previousTriggersValues&&so.previousTriggersValues.has(kt.triggerName)){const Og=so.previousTriggersValues.get(kt.triggerName),Jh=this.statesByElement.get(kt.element);Jh&&Jh[kt.triggerName]&&(Jh[kt.triggerName].value=Og)}return void gn.destroy()}}const cu=!D||!this.driver.containsElement(D,Ur),Ea=Ve.get(Ur),Xh=L.get(Ur),vi=this._buildInstruction(kt,i,Xh,Ea,cu);if(vi.errors&&vi.errors.length)return void Mt.push(vi);if(cu)return gn.onStart(()=>Ku(Ur,vi.fromStyles)),gn.onDestroy(()=>ga(Ur,vi.toStyles)),void r.push(gn);if(kt.isFallbackTransition)return gn.onStart(()=>Ku(Ur,vi.fromStyles)),gn.onDestroy(()=>ga(Ur,vi.toStyles)),void r.push(gn);const Cq=[];vi.timelines.forEach(so=>{so.stretchStartingKeyframe=!0,this.disabledNodes.has(so.element)||Cq.push(so)}),vi.timelines=Cq,i.append(Ur,vi.timelines),l.push({instruction:vi,player:gn,element:Ur}),vi.queriedElements.forEach(so=>$s(d,so,[]).push(gn)),vi.preStyleProps.forEach((so,Og)=>{const Jh=Object.keys(so);if(Jh.length){let Pg=p.get(Og);Pg||p.set(Og,Pg=new Set),Jh.forEach(b1=>Pg.add(b1))}}),vi.postStyleProps.forEach((so,Og)=>{const Jh=Object.keys(so);let Pg=y.get(Og);Pg||y.set(Og,Pg=new Set),Jh.forEach(b1=>Pg.add(b1))})});if(Mt.length){const ut=[];Mt.forEach(Et=>{ut.push(function WM(n,e){return new u.vHH(3505,Xt)}())}),Dt.forEach(Et=>Et.destroy()),this.reportError(ut)}const nn=new Map,Hi=new Map;l.forEach(ut=>{const Et=ut.element;i.has(Et)&&(Hi.set(Et,Et),this._beforeAnimationBuild(ut.player.namespaceId,ut.instruction,nn))}),r.forEach(ut=>{const Et=ut.element;this._getPreviousPlayers(Et,!1,ut.namespaceId,ut.triggerName,null).forEach(gn=>{$s(nn,Et,[]).push(gn),gn.destroy()})});const Ca=re.filter(ut=>Ox(ut,p,y)),vd=new Map;bb(vd,this.driver,Ue,y,Ya).forEach(ut=>{Ox(ut,p,y)&&Ca.push(ut)});const aC=new Map;O.forEach((ut,Et)=>{bb(aC,this.driver,new Set(ut),p,"!")}),Ca.forEach(ut=>{const Et=vd.get(ut),kt=aC.get(ut);vd.set(ut,Object.assign(Object.assign({},Et),kt))});const kg=[],bq=[],wq={};l.forEach(ut=>{const{element:Et,player:kt,instruction:gn}=ut;if(i.has(Et)){if(w.has(Et))return kt.onDestroy(()=>ga(Et,gn.toStyles)),kt.disabled=!0,kt.overrideTotalTime(gn.totalTime),void r.push(kt);let Ur=wq;if(Hi.size>1){let Ea=Et;const Xh=[];for(;Ea=Ea.parentNode;){const vi=Hi.get(Ea);if(vi){Ur=vi;break}Xh.push(Ea)}Xh.forEach(vi=>Hi.set(vi,Ur))}const cu=this._buildAnimation(kt.namespaceId,gn,nn,s,aC,vd);if(kt.setRealPlayer(cu),Ur===wq)kg.push(kt);else{const Ea=this.playersByElement.get(Ur);Ea&&Ea.length&&(kt.parentPlayer=$c(Ea)),r.push(kt)}}else Ku(Et,gn.fromStyles),kt.onDestroy(()=>ga(Et,gn.toStyles)),bq.push(kt),w.has(Et)&&r.push(kt)}),bq.forEach(ut=>{const Et=s.get(ut.element);if(Et&&Et.length){const kt=$c(Et);ut.setRealPlayer(kt)}}),r.forEach(ut=>{ut.parentPlayer?ut.syncPlayerEvents(ut.parentPlayer):ut.destroy()});for(let ut=0;ut<re.length;ut++){const Et=re[ut],kt=Et[Cs];if(Zl(Et,ub),kt&&kt.hasAnimation)continue;let gn=[];if(d.size){let cu=d.get(Et);cu&&cu.length&&gn.push(...cu);let Ea=this.driver.query(Et,wt,!0);for(let Xh=0;Xh<Ea.length;Xh++){let vi=d.get(Ea[Xh]);vi&&vi.length&&gn.push(...vi)}}const Ur=gn.filter(cu=>!cu.destroyed);Ur.length?Rx(this,Et,Ur):this.processLeaveNode(Et)}return re.length=0,kg.forEach(ut=>{this.players.push(ut),ut.onDone(()=>{ut.destroy();const Et=this.players.indexOf(ut);this.players.splice(Et,1)}),ut.play()}),kg}elementContainsData(e,t){let i=!1;const r=t[Cs];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let l=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(l=d)}else{const d=this.playersByElement.get(e);if(d){const p=!s||s==gh;d.forEach(y=>{y.queued||!p&&y.triggerName!=r||l.push(y)})}}return(i||r)&&(l=l.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),l}_beforeAnimationBuild(e,t,i){const s=t.element,l=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,w=y!==s,D=$s(i,y,[]);this._getPreviousPlayers(y,w,l,d,t.toState).forEach(O=>{const L=O.getRealPlayer();L.beforeDestroy&&L.beforeDestroy(),O.destroy(),D.push(O)})}Ku(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,l){const d=t.triggerName,p=t.element,y=[],w=new Set,D=new Set,x=t.timelines.map(L=>{const Y=L.element;w.add(Y);const re=Y[Cs];if(re&&re.removedBeforeQueried)return new qu(L.duration,L.delay);const Oe=Y!==p,Ue=function mh(n){const e=[];return _h(n,e),e}((i.get(Y)||Sx).map(nn=>nn.getRealPlayer())).filter(nn=>!!nn.element&&nn.element===Y),Ve=s.get(Y),Ge=l.get(Y),Dt=zE(0,this._normalizer,0,L.keyframes,Ve,Ge),Mt=this._buildPlayer(L,Dt,Ue);if(L.subTimeline&&r&&D.add(Y),Oe){const nn=new Dp(e,d,Y);nn.setRealPlayer(Mt),y.push(nn)}return Mt});y.forEach(L=>{$s(this.playersByQueriedElement,L.element,[]).push(L),L.onDone(()=>function Mx(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,L.element,L))}),w.forEach(L=>xo(L,QM));const O=$c(x);return O.onDestroy(()=>{w.forEach(L=>Zl(L,QM)),ga(p,t.toStyles)}),D.forEach(L=>{$s(r,L,[]).push(O)}),O}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new qu(e.duration,e.delay)}}class Dp{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new qu,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>tb(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){$s(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function c_(n){return n&&1===n.nodeType}function _D(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function bb(n,e,t,i,r){const s=[];t.forEach(p=>s.push(_D(p)));const l=[];i.forEach((p,y)=>{const w={};p.forEach(D=>{const x=w[D]=e.computeStyle(y,D,r);(!x||0==x.length)&&(y[Cs]=Tx,l.push(y))}),n.set(y,w)});let d=0;return t.forEach(p=>_D(p,s[d++])),l}function xx(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const r=new Set(e),s=new Map;function l(d){if(!d)return 1;let p=s.get(d);if(p)return p;const y=d.parentNode;return p=t.has(y)?y:r.has(y)?1:l(y),s.set(d,p),p}return e.forEach(d=>{const p=l(d);1!==p&&t.get(p).push(d)}),t}function xo(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Zl(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function Rx(n,e,t){$c(t).onDone(()=>n.processLeaveNode(e))}function _h(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof ha?_h(i.players,e):e.push(i)}}function Ox(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class Sp{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Ax(e,t,i),this._timelineEngine=new Cx(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const l=e+"-"+r;let d=this._triggerCache[l];if(!d){const p=[],w=tD(this._driver,s,p,[]);if(p.length)throw function LE(n,e){return new u.vHH(3404,Xt)}();d=function yx(n,e,t){return new vx(n,e,t)}(r,w,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(t,r,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,l]=$E(i);this._timelineEngine.command(s,t,l,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[l,d]=$E(i);return this._timelineEngine.listen(l,t,d,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Nx=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ga(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ga(this._element,this._initialStyles),this._endStyles&&(ga(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ku(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ku(this._element,this._endStyles),this._endStyles=null),ga(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function wb(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];Fx(r)&&(e=e||{},e[r]=n[r])}return e}function Fx(n){return"display"===n||"position"===n}class Cb{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:pp(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class yD{validateStyleProperty(e){return ab(e)}matchesElement(e,t){return!1}containsElement(e,t){return lb(e,t)}getParentElement(e){return Ym(e)}query(e,t,i){return Qm(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,l=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const y={},w=l.filter(x=>x instanceof Cb);(function ex(n,e){return 0===n||0===e})(i,r)&&w.forEach(x=>{let O=x.currentSnapshot;Object.keys(O).forEach(L=>y[L]=O[L])}),t=function tx(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],l=[];if(i.forEach(d=>{s.hasOwnProperty(d)||l.push(d),s[d]=t[d]}),l.length)for(var r=1;r<e.length;r++){let d=e[r];l.forEach(function(p){d[p]=pp(n,p)})}}return e}(e,t=t.map(x=>pa(x,!1)),y);const D=function Px(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=wb(e[0]),e.length>1&&(i=wb(e[e.length-1]))):e&&(t=wb(e)),t||i?new Nx(n,t,i):null}(e,t);return new Cb(e,t,p,D)}}let Eb=(()=>{class n extends IE{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?AE(t):t;return vD(this._renderer,null,i,"register",[r]),new u_(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class u_ extends class Ui{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Tp(this._id,e,t||{},this._renderer)}}class Tp{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return vD(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function vD(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const Db="@.disabled";let Lx=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,l)=>{const d=null==l?void 0:l.parentNode(s);d&&l.removeChild(d,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let w=this._rendererCache.get(s);return w||(w=new bD("",s,this.engine),this._rendererCache.set(s,w)),w}const l=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const p=w=>{Array.isArray(w)?w.forEach(p):this.engine.registerTrigger(l,d,t,w.name,w)};return i.data.animation.forEach(p),new Sb(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,d]=s;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(Sp),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class bD{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==Db?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Sb extends bD{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Db?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function Bx(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),l="";return"@"!=s.charAt(0)&&([s,l]=function AL(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(e,t,i)}}let Vx=(()=>{class n extends Sp{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie),u.LFG(cb),u.LFG(vb))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Kl=new u.OlP("AnimationModuleType"),Yu=[{provide:IE,useClass:Eb},{provide:vb,useFactory:function Ux(){return new oD}},{provide:Sp,useClass:Vx},{provide:u.FYo,useFactory:function yh(n,e,t){return new Lx(n,e,t)},deps:[Sn,Sp,u.R0b]}],jx=[{provide:cb,useFactory:()=>new yD},{provide:Kl,useValue:"BrowserAnimations"},...Yu],wD=[{provide:cb,useClass:Wc},{provide:Kl,useValue:"NoopAnimations"},...Yu];let Hx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?wD:jx}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:jx,imports:[Na]}),n})();function CD(n,e){if(1&n&&u._UZ(0,"mat-pseudo-checkbox",4),2&n){const t=u.oxw();u.Q6J("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function Tb(n,e){if(1&n&&(u.TgZ(0,"span",5),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.hij("(",t.group.label,")")}}const zx=["*"],qx=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function $x(){return!0}});let In=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!zf()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(SE),u.LFG(qx,8),u.LFG(ie))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[zu],zu]}),n})();function Qu(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Tn(e)}}}function Ap(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function Mp(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Tn(e)}}}function Ab(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Om(t):this.defaultTabIndex}}}function Mb(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new It.x,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let xb=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Kx{constructor(e,t,i){this._renderer=e,this.element=t,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Rp={enterDuration:225,exitDuration:150},kb=lh({passive:!0}),DD=["mousedown","touchstart"],Ob=["mouseup","mouseleave","touchend","touchcancel"];class SD{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ca(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},Rp),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const l=i.radius||function TD(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),d=e-r.left,p=t-r.top,y=s.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=d-l+"px",w.style.top=p-l+"px",w.style.height=2*l+"px",w.style.width=2*l+"px",null!=i.color&&(w.style.backgroundColor=i.color),w.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(w),function Pb(n){window.getComputedStyle(n).getPropertyValue("opacity")}(w),w.style.transform="scale(1)";const D=new Kx(this,w,i);return D.state=0,this._activeRipples.add(D),i.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const x=D===this._mostRecentTransientRipple;D.state=1,!i.persistent&&(!x||!this._isPointerDown)&&D.fadeOut()},y),D}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const i=e.element,r=Object.assign(Object.assign({},Rp),e.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=ca(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(DD))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Ob),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=zv(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!$v(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,kb)})})}_removeTriggerEvents(){this._triggerElement&&(DD.forEach(e=>{this._triggerElement.removeEventListener(e,this,kb)}),this._pointerUpEventsRegistered&&Ob.forEach(e=>{this._triggerElement.removeEventListener(e,this,kb)}))}}const Yx=new u.OlP("mat-ripple-global-options");let kp=(()=>{class n{constructor(t,i,r,s,l){this._elementRef=t,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new SD(this,i,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(ws),u.Y36(Yx,8),u.Y36(Kl,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Nb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[In],In]}),n})(),Fb=(()=>{class n{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Kl,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,i){2&t&&u.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,i){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),Lb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[In]]}),n})();const Bb=new u.OlP("MAT_OPTION_PARENT_COMPONENT"),MD=new u.OlP("MatOptgroup");let Qx=0;class xD{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let Vb=(()=>{class n{constructor(t,i,r,s){this._element=t,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Qx++,this.onSelectionChange=new u.vpe,this._stateChanges=new It.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=Tn(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!dh(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new xD(this,t))}}return n.\u0275fac=function(t){u.$Z()},n.\u0275dir=u.lG2({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),Ub=(()=>{class n extends Vb{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(Bb,8),u.Y36(MD,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,i){1&t&&u.NdJ("click",function(){return i._selectViaInteraction()})("keydown",function(s){return i._handleKeydown(s)}),2&t&&(u.Ikx("id",i.id),u.uIk("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),u.ekj("mat-selected",i.selected)("mat-option-multiple",i.multiple)("mat-active",i.active)("mat-option-disabled",i.disabled))},exportAs:["matOption"],features:[u.qOj],ngContentSelectors:zx,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,i){1&t&&(u.F$t(),u.YNc(0,CD,1,2,"mat-pseudo-checkbox",0),u.TgZ(1,"span",1),u.Hsn(2),u.qZA(),u.YNc(3,Tb,2,1,"span",2),u._UZ(4,"div",3)),2&t&&(u.Q6J("ngIf",i.multiple),u.xp6(3),u.Q6J("ngIf",i.group&&i.group._inert),u.xp6(1),u.Q6J("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},directives:[Fb,Yn,kp],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})();function jb(n,e,t){if(t.length){let i=e.toArray(),r=t.toArray(),s=0;for(let l=0;l<n+1;l++)i[l].group&&i[l].group===r[s]&&s++;return s}return 0}let Op=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Nb,go,In,Lb]]}),n})();var Kc=F(6451),kD=F(1144);const OD=["addListener","removeListener"],Xx=["addEventListener","removeEventListener"],PD=["on","off"];function p_(n,e,t,i){if((0,Wi.m)(t)&&(i=t,t=void 0),i)return p_(n,e,t).pipe(Iu(i));const[r,s]=function eR(n){return(0,Wi.m)(n.addEventListener)&&(0,Wi.m)(n.removeEventListener)}(n)?Xx.map(l=>d=>n[l](e,d,t)):function vh(n){return(0,Wi.m)(n.addListener)&&(0,Wi.m)(n.removeListener)}(n)?OD.map(Ar(n,e)):function Jx(n){return(0,Wi.m)(n.on)&&(0,Wi.m)(n.off)}(n)?PD.map(Ar(n,e)):[];if(!r&&(0,kD.z)(n))return(0,Fn.z)(l=>p_(l,e,t))((0,br.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new tn.y(l=>{const d=(...p)=>l.next(1<p.length?p:p[0]);return r(d),()=>s(d)})}function Ar(n,e){return t=>i=>n[t](e,i)}const zL=["connectionContainer"],Pp=["inputContainer"],tR=["label"];function Hb(n,e){1&n&&(u.ynx(0),u.TgZ(1,"div",14),u._UZ(2,"div",15)(3,"div",16)(4,"div",17),u.qZA(),u.TgZ(5,"div",18),u._UZ(6,"div",15)(7,"div",16)(8,"div",17),u.qZA(),u.BQk())}function nR(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",19),u.NdJ("cdkObserveContent",function(){return u.CHM(t),u.oxw().updateOutlineGap()}),u.Hsn(1,1),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function ND(n,e){if(1&n&&(u.ynx(0),u.Hsn(1,2),u.TgZ(2,"span"),u._uU(3),u.qZA(),u.BQk()),2&n){const t=u.oxw(2);u.xp6(3),u.Oqu(t._control.placeholder)}}function iR(n,e){1&n&&u.Hsn(0,3,["*ngSwitchCase","true"])}function rR(n,e){1&n&&(u.TgZ(0,"span",23),u._uU(1," *"),u.qZA())}function Gb(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"label",20,21),u.NdJ("cdkObserveContent",function(){return u.CHM(t),u.oxw().updateOutlineGap()}),u.YNc(2,ND,4,1,"ng-container",12),u.YNc(3,iR,1,0,"ng-content",12),u.YNc(4,rR,2,0,"span",22),u.qZA()}if(2&n){const t=u.oxw();u.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),u.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),u.uIk("for",t._control.id)("aria-owns",t._control.id),u.xp6(2),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function FD(n,e){1&n&&(u.TgZ(0,"div",24),u.Hsn(1,4),u.qZA())}function LD(n,e){if(1&n&&(u.TgZ(0,"div",25),u._UZ(1,"span",26),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function g_(n,e){if(1&n&&(u.TgZ(0,"div"),u.Hsn(1,5),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState)}}function zb(n,e){if(1&n&&(u.TgZ(0,"div",30),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("id",t._hintLabelId),u.xp6(1),u.Oqu(t.hintLabel)}}function $L(n,e){if(1&n&&(u.TgZ(0,"div",27),u.YNc(1,zb,2,2,"div",28),u.Hsn(2,6),u._UZ(3,"div",29),u.Hsn(4,7),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",t.hintLabel)}}const BD=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],sR=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],m_=new u.OlP("MatError"),lR={transitionMessages:hh("transitionMessages",[da("enter",oi({opacity:1,transform:"translateY(0%)"})),Qa("void => enter",[oi({opacity:0,transform:"translateY(-5px)"}),Wl("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let bh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n}),n})();const UD=new u.OlP("MatHint");let __=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-label"]]}),n})(),jD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const HD=new u.OlP("MatPrefix"),GD=new u.OlP("MatSuffix");let zD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","matSuffix",""]],features:[u._Bn([{provide:GD,useExisting:n}])]}),n})(),$D=0;const WD=Ap(class{constructor(n){this._elementRef=n}},"primary"),ZD=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),qb=new u.OlP("MatFormField");let KD=(()=>{class n extends WD{constructor(t,i,r,s,l,d,p){super(t),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=l,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new It.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+$D++,this._labelId="mat-form-field-label-"+$D++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Tn(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Qn(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(mi(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(mi(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Kc.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Qn(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Qn(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(mi(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,p_(this._label.nativeElement,"transitionend").pipe((0,ri.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const w=i.querySelectorAll(`${r}, ${s}`);for(let D=0;D<w.length;D++)w[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let l=0,d=0;const p=i.querySelectorAll(r),y=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const w=i.getBoundingClientRect();if(0===w.width&&0===w.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(w),x=t.children,O=this._getStartEnd(x[0].getBoundingClientRect());let L=0;for(let Y=0;Y<x.length;Y++)L+=x[Y].offsetWidth;l=Math.abs(O-D)-5,d=L>0?.75*L+10:0}for(let w=0;w<p.length;w++)p[w].style.width=`${l}px`;for(let w=0;w<y.length;w++)y[w].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(zl,8),u.Y36(ZD,8),u.Y36(ws),u.Y36(u.R0b),u.Y36(Kl,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,bh,5),u.Suo(r,bh,7),u.Suo(r,__,5),u.Suo(r,__,7),u.Suo(r,jD,5),u.Suo(r,m_,5),u.Suo(r,UD,5),u.Suo(r,HD,5),u.Suo(r,GD,5)),2&t){let s;u.iGM(s=u.CRH())&&(i._controlNonStatic=s.first),u.iGM(s=u.CRH())&&(i._controlStatic=s.first),u.iGM(s=u.CRH())&&(i._labelChildNonStatic=s.first),u.iGM(s=u.CRH())&&(i._labelChildStatic=s.first),u.iGM(s=u.CRH())&&(i._placeholderChild=s.first),u.iGM(s=u.CRH())&&(i._errorChildren=s),u.iGM(s=u.CRH())&&(i._hintChildren=s),u.iGM(s=u.CRH())&&(i._prefixChildren=s),u.iGM(s=u.CRH())&&(i._suffixChildren=s)}},viewQuery:function(t,i){if(1&t&&(u.Gf(zL,7),u.Gf(Pp,5),u.Gf(tR,5)),2&t){let r;u.iGM(r=u.CRH())&&(i._connectionContainerRef=r.first),u.iGM(r=u.CRH())&&(i._inputContainerRef=r.first),u.iGM(r=u.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,i){2&t&&u.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:qb,useExisting:n}]),u.qOj],ngContentSelectors:sR,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,i){1&t&&(u.F$t(BD),u.TgZ(0,"div",0)(1,"div",1,2),u.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),u.YNc(3,Hb,9,0,"ng-container",3),u.YNc(4,nR,2,1,"div",4),u.TgZ(5,"div",5,6),u.Hsn(7),u.TgZ(8,"span",7),u.YNc(9,Gb,5,16,"label",8),u.qZA()(),u.YNc(10,FD,2,0,"div",9),u.qZA(),u.YNc(11,LD,2,4,"div",10),u.TgZ(12,"div",11),u.YNc(13,g_,2,1,"div",12),u.YNc(14,$L,5,2,"div",13),u.qZA()()),2&t&&(u.xp6(3),u.Q6J("ngIf","outline"==i.appearance),u.xp6(1),u.Q6J("ngIf",i._prefixChildren.length),u.xp6(5),u.Q6J("ngIf",i._hasFloatingLabel()),u.xp6(1),u.Q6J("ngIf",i._suffixChildren.length),u.xp6(1),u.Q6J("ngIf","outline"!=i.appearance),u.xp6(1),u.Q6J("ngSwitch",i._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},directives:[Yn,$C,Pi,mr],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[lR.transitionMessages]},changeDetection:0}),n})(),y_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[go,In,Mv],In]}),n})();var Wb=F(4408);const v_={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=v_;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new gi.w0(()=>null==t?void 0:t(r))},requestAnimationFrame(...n){const{delegate:e}=v_;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=v_;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var uR=F(7565);new class YL extends uR.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class KL extends Wb.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=v_.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(v_.cancelAnimationFrame(t),e._scheduled=void 0)}});let YD,XL=1;const Xu={};function dR(n){return n in Xu&&(delete Xu[n],!0)}const QD={setImmediate(n){const e=XL++;return Xu[e]=!0,YD||(YD=Promise.resolve()),YD.then(()=>dR(e)&&n()),e},clearImmediate(n){dR(n)}},{setImmediate:JD,clearImmediate:eS}=QD,Zb={setImmediate(...n){const{delegate:e}=Zb;return((null==e?void 0:e.setImmediate)||JD)(...n)},clearImmediate(n){const{delegate:e}=Zb;return((null==e?void 0:e.clearImmediate)||eS)(n)},delegate:void 0};new class tS extends uR.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Kb extends Wb.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Zb.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(e,t,i);e.actions.some(r=>r.id===t)||(Zb.clearImmediate(t),e._scheduled=void 0)}});var iS=F(3532);function rS(n,e=jf.z){return function JL(n){return(0,kn.e)((e,t)=>{let i=!1,r=null,s=null,l=!1;const d=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const y=r;r=null,t.next(y)}l&&t.complete()},p=()=>{s=null,l&&t.complete()};e.subscribe((0,yn.x)(t,y=>{i=!0,r=y,s||(0,br.Xf)(n(y)).subscribe(s=(0,yn.x)(t,d,p))},()=>{l=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>function Yb(n=0,e,t=jf.P){let i=-1;return null!=e&&((0,iS.K)(e)?t=e:i=e),new tn.y(r=>{let s=function fR(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(n,e))}let pR=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new It.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new tn.y(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(rS(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ke()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(an(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=ca(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>p_(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(ws),u.LFG(ie,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Es=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new It.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(rS(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ws),u.LFG(u.R0b),u.LFG(ie,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Np=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),b_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[zu,Np],zu,Np]}),n})();class Ws{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Qb extends Ws{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class cS extends Ws{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class yR extends Ws{constructor(e){super(),this.element=e instanceof u.SBq?e.nativeElement:e}}class w_{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Qb?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof cS?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof yR?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class vR extends w_{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=l=>{const d=l.element,p=this._document.createComment("dom-portal");d.parentNode.insertBefore(p,d),this.outletElement.appendChild(d),this._attachedPortal=l,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||u.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Xb=(()=>{class n extends w_{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new u.vpe,this.attachDomPortal=s=>{const l=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),l.parentNode.insertBefore(d,l),this._getRootNode().appendChild(l),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(l,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),l=i.createComponent(s,i.length,t.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=t,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u._Vd),u.Y36(u.s_b),u.Y36(ie))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[u.qOj]}),n})(),Jb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const C_=$l();class ew{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=En(-this._previousScrollPosition.left),e.style.top=En(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",l=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),C_&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),C_&&(i.scrollBehavior=s,r.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class ER{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class tw{enable(){}disable(){}attach(){}}function E_(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function dS(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class DR{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();E_(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let fB=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new tw,this.close=l=>new ER(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new ew(this._viewportRuler,this._document),this.reposition=l=>new DR(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pR),u.LFG(Es),u.LFG(u.R0b),u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hS{constructor(e){if(this.scrollStrategy=new tw,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class TR{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class mB{constructor(e,t,i,r,s,l,d,p,y){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=l,this._document=d,this._location=p,this._outsideClickDispatcher=y,this._backdropElement=null,this._backdropClick=new It.x,this._attachments=new It.x,this._detachments=new It.x,this._locationChanges=gi.w0.EMPTY,this._backdropClickHandler=w=>this._backdropClick.next(w),this._backdropTransitionendHandler=w=>{this._disposeBackdrop(w.target)},this._keydownEvents=new It.x,this._outsidePointerEvents=new It.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,ri.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=En(this._config.width),e.height=En(this._config.height),e.minWidth=En(this._config.minWidth),e.minHeight=En(this._config.minHeight),e.maxWidth=En(this._config.maxWidth),e.maxHeight=En(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,i){const r=GC(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(mi((0,Kc.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let fS=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||zf()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),zf()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie),u.LFG(ws))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const IR="cdk-overlay-connected-position-bounding-box",_B=/([A-Za-z%]+)$/;class AR{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new It.x,this._resizeSubscription=gi.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(IR),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let l;for(let d of this._preferredPositions){let p=this._getOriginPoint(e,r,d),y=this._getOverlayPoint(p,t,d),w=this._getOverlayFit(y,t,i,d);if(w.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(w,y,i)?s.push({position:d,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!l||l.overlayFit.visibleArea<w.visibleArea)&&(l={overlayFit:w,overlayPoint:y,originPoint:p,position:d,overlayRect:t})}if(s.length){let d=null,p=-1;for(const y of s){const w=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);w>p&&(p=w,d=y)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Xa(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(IR),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const l=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;r="start"==i.originX?l:d}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=gS(t);let{x:l,y:d}=e,p=this._getOffset(r,"x"),y=this._getOffset(r,"y");p&&(l+=p),y&&(d+=y);let x=0-d,O=d+s.height-i.height,L=this._subtractOverflows(s.width,0-l,l+s.width-i.width),Y=this._subtractOverflows(s.height,x,O),re=L*Y;return{visibleArea:re,isCompletelyWithinViewport:s.width*s.height===re,fitsInViewportVertically:Y===s.height,fitsInViewportHorizontally:L==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,l=pS(this._overlayRef.getConfig().minHeight),d=pS(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=d&&d<=s;return(e.fitsInViewportVertically||null!=l&&l<=r)&&y}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=gS(t),s=this._viewportRect,l=Math.max(e.x+r.width-s.width,0),d=Math.max(e.y+r.height-s.height,0),p=Math.max(s.top-i.top-e.y,0),y=Math.max(s.left-i.left-e.x,0);let w=0,D=0;return w=r.width<=s.width?y||-l:e.x<this._viewportMargin?s.left-i.left-e.x:0,D=r.height<=s.height?p||-d:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:w,y:D},{x:e.x+w,y:e.y+D}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new TR(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,l,d,w,D,x;if("top"===t.overlayY)l=e.y,s=i.height-l+this._viewportMargin;else if("bottom"===t.overlayY)d=i.height-e.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const O=Math.min(i.bottom-e.y+i.top,e.y),L=this._lastBoundingBoxSize.height;s=2*O,l=e.y-O,s>L&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.y-L/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)x=i.width-e.x+this._viewportMargin,w=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)D=e.x,w=i.right-e.x;else{const O=Math.min(i.right-e.x+i.left,e.x),L=this._lastBoundingBoxSize.width;w=2*O,D=e.x-O,w>L&&!this._isInitialRender&&!this._growAfterOpen&&(D=e.x-L/2)}return{top:l,left:D,bottom:d,right:x,width:w,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;r.height=En(i.height),r.top=En(i.top),r.bottom=En(i.bottom),r.width=En(i.width),r.left=En(i.left),r.right=En(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=En(s)),l&&(r.maxWidth=En(l))}this._lastBoundingBoxSize=i,Xa(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Xa(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Xa(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(r){const w=this._viewportRuler.getViewportScrollPosition();Xa(i,this._getExactOverlayY(t,e,w)),Xa(i,this._getExactOverlayX(t,e,w))}else i.position="static";let d="",p=this._getOffset(t,"x"),y=this._getOffset(t,"y");p&&(d+=`translateX(${p}px) `),y&&(d+=`translateY(${y}px)`),i.transform=d.trim(),l.maxHeight&&(r?i.maxHeight=En(l.maxHeight):s&&(i.maxHeight="")),l.maxWidth&&(r?i.maxWidth=En(l.maxWidth):s&&(i.maxWidth="")),Xa(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=En(s.y),r}_getExactOverlayX(e,t,i){let l,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),l=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===l?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=En(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:dS(e,i),isOriginOutsideView:E_(e,i),isOverlayClipped:dS(t,i),isOverlayOutsideView:E_(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&GC(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof u.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Xa(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function pS(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(_B);return t&&"px"!==t?null:parseFloat(e)}return n||null}function gS(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const nw="cdk-global-overlay-wrapper";class Ju{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(nw),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:l,maxHeight:d}=i,p=!("100%"!==r&&"100vw"!==r||l&&"100%"!==l&&"100vw"!==l),y=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d);e.position=this._cssPosition,e.marginLeft=p?"0":this._leftOffset,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,p?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(nw),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let mS=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new Ju}flexibleConnectedTo(t){return new AR(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Es),u.LFG(ie),u.LFG(ws),u.LFG(fS))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),D_=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iw=(()=>{class n extends D_{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){const d=s[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MR=(()=>{class n extends D_{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Gc(s)},this._clickListener=s=>{const l=Gc(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const w=p[y];if(w._outsidePointerEvents.observers.length<1||!w.hasAttached())continue;if(w.overlayElement.contains(l)||w.overlayElement.contains(d))break;const D=w._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(s)):D.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie),u.LFG(ws),u.LFG(u.R0b,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rw=0,Ql=(()=>{class n{constructor(t,i,r,s,l,d,p,y,w,D,x){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=l,this._injector=d,this._ngZone=p,this._document=y,this._directionality=w,this._location=D,this._outsideClickDispatcher=x}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),l=new hS(t);return l.direction=l.direction||this._directionality.value,new mB(s,i,r,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+rw++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(u.z2F)),new vR(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fB),u.LFG(fS),u.LFG(u._Vd),u.LFG(mS),u.LFG(iw),u.LFG(u.zs3),u.LFG(u.R0b),u.LFG(ie),u.LFG(zl),u.LFG(Ee),u.LFG(MR))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const S_=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],xR=new u.OlP("cdk-connected-overlay-scroll-strategy");let RR=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),kR=(()=>{class n{constructor(t,i,r,s,l){this._overlay=t,this._dir=l,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=gi.w0.EMPTY,this._attachSubscription=gi.w0.EMPTY,this._detachSubscription=gi.w0.EMPTY,this._positionSubscription=gi.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new u.vpe,this.positionChange=new u.vpe,this.attach=new u.vpe,this.detach=new u.vpe,this.overlayKeydown=new u.vpe,this.overlayOutsideClick=new u.vpe,this._templatePortal=new cS(i,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Tn(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=Tn(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=Tn(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=Tn(t)}get push(){return this._push}set push(t){this._push=Tn(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=S_);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!dh(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),i=new hS({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(t){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof RR?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function uS(n,e=!1){return(0,kn.e)((t,i)=>{let r=0;t.subscribe((0,yn.x)(i,s=>{const l=n(s,r++);(l||e)&&i.next(s),!l&&i.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ql),u.Y36(u.Rgc),u.Y36(u.s_b),u.Y36(xR),u.Y36(zl,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[u.TTD]}),n})();const _S={provide:xR,deps:[Ql],useFactory:function yB(n){return()=>n.scrollStrategies.reposition()}};let T_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Ql,_S],imports:[[zu,Jb,b_],b_]}),n})();class yS{constructor(e=!1,t,i=!0){this._multiple=e,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new It.x,t&&t.length&&(e?t.forEach(r=>this._markSelected(r)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...e){this._verifyValueAssignment(e),e.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(e){this.isSelected(e)?this.deselect(e):this.select(e)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(e){return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}}function NR(...n){const e=(0,Ua.jO)(n),{args:t,keys:i}=wn(n),r=new tn.y(s=>{const{length:l}=t;if(!l)return void s.complete();const d=new Array(l);let p=l,y=l;for(let w=0;w<l;w++){let D=!1;(0,br.Xf)(t[w]).subscribe((0,yn.x)(s,x=>{D||(D=!0,y--),d[w]=x},()=>p--,void 0,()=>{(!p||!D)&&(y||s.next(i?Dl(i,d):d),s.complete())}))}});return e?r.pipe(Iu(e)):r}let lw=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),Xl=(()=>{class n extends lw{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Ro=new u.OlP("NgValueAccessor"),CB={provide:Ro,useExisting:(0,u.Gpc)(()=>Fp),multi:!0},BR=new u.OlP("CompositionEventMode");let Fp=(()=>{class n extends lw{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function EB(){const n=B()?B().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(BR,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&u.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[u._Bn([CB]),u.qOj]}),n})();function td(n){return null==n||0===n.length}function VR(n){return null!=n&&"number"==typeof n.length}const Mr=new u.OlP("NgValidators"),nd=new u.OlP("NgAsyncValidators"),DB=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class vS{static min(e){return function UR(n){return e=>{if(td(e.value)||td(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function jR(n){return e=>{if(td(e.value)||td(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return HR(e)}static requiredTrue(e){return function GR(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function o(n){return td(n.value)||DB.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function a(n){return e=>td(e.value)||!VR(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function c(n){return e=>VR(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function h(n){if(!n)return f;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(td(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return V(e)}static composeAsync(e){return te(e)}}function HR(n){return td(n.value)?{required:!0}:null}function f(n){return null}function m(n){return null!=n}function b(n){const e=(0,u.QGY)(n)?(0,_n.D)(n):n;return(0,u.CqO)(e),e}function E(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function S(n,e){return e.map(t=>t(n))}function R(n){return n.map(e=>function M(n){return!n.validate}(e)?e:t=>e.validate(t))}function V(n){if(!n)return null;const e=n.filter(m);return 0==e.length?null:function(t){return E(S(t,e))}}function z(n){return null!=n?V(R(n)):null}function te(n){if(!n)return null;const e=n.filter(m);return 0==e.length?null:function(t){return NR(S(t,e).map(b)).pipe((0,st.U)(E))}}function we(n){return null!=n?te(R(n)):null}function Be(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function We(n){return n._rawValidators}function rt(n){return n._rawAsyncValidators}function Ae(n){return n?Array.isArray(n)?n:[n]:[]}function _t(n,e){return Array.isArray(n)?n.includes(e):n===e}function zt(n,e){const t=Ae(e);return Ae(n).forEach(r=>{_t(t,r)||t.push(r)}),t}function pn(n,e){return Ae(e).filter(t=>!_t(n,t))}class Ds{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=z(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=we(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class xr extends Ds{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class cr extends Ds{get formDirective(){return null}get path(){return null}}class I_{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[e])}}let Lp=(()=>{class n extends I_{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xr,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&u.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[u.qOj]}),n})(),Bp=(()=>{class n extends I_{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(cr,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&u.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[u.qOj]}),n})();function uw(n,e){$R(n,e),e.valueAccessor.writeValue(n.value),function n6(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&TB(n,e)})}(n,e),function s6(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function r6(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&TB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function t6(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ES(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),SS(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function DS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function $R(n,e){const t=We(n);null!==e.validator?n.setValidators(Be(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=rt(n);null!==e.asyncValidator?n.setAsyncValidators(Be(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();DS(e._rawValidators,r),DS(e._rawAsyncValidators,r)}function SS(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=We(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=rt(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return DS(e._rawValidators,i),DS(e._rawAsyncValidators,i),t}function TB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function IB(n,e){$R(n,e)}function MB(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function ZR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const dw="VALID",TS="INVALID",A_="PENDING",hw="DISABLED";function YR(n){return(IS(n)?n.validators:n)||null}function xB(n){return Array.isArray(n)?z(n):n||null}function QR(n,e){return(IS(e)?e.asyncValidators:n)||null}function RB(n){return Array.isArray(n)?we(n):n||null}function IS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const kB=n=>n instanceof FB,XR=n=>n instanceof ek;function OB(n){return kB(n)?n.value:n.getRawValue()}function PB(n,e){const t=XR(n),i=n.controls;if(!(t?Object.keys(i):i).length)throw new u.vHH(1e3,"");if(!i[e])throw new u.vHH(1001,"")}function NB(n,e){XR(n),n._forEachChild((i,r)=>{if(void 0===e[r])throw new u.vHH(1002,"")})}class JR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=xB(this._rawValidators),this._composedAsyncValidatorFn=RB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===dw}get invalid(){return this.status===TS}get pending(){return this.status==A_}get disabled(){return this.status===hw}get enabled(){return this.status!==hw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=xB(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=RB(e)}addValidators(e){this.setValidators(zt(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(zt(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(pn(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(pn(e,this._rawAsyncValidators))}hasValidator(e){return _t(this._rawValidators,e)}hasAsyncValidator(e){return _t(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=A_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=hw,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dw,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dw||this.status===A_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hw:dw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=A_,this._hasOwnPendingAsyncValidator=!0;const t=b(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function c6(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=XR(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof d6)(i)&&i.at(r)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?hw:this.errors?TS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(A_)?A_:this._anyControlsHaveStatus(TS)?TS:dw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){IS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class FB extends JR{constructor(e=null,t,i){super(YR(t),QR(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),IS(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ZR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ZR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class ek extends JR{constructor(e,t,i){super(YR(t),QR(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){NB(this,e),Object.keys(e).forEach(i=>{PB(this,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=OB(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class d6 extends JR{constructor(e,t,i){super(YR(t),QR(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){NB(this,e),e.forEach((i,r)=>{PB(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>OB(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const h6={provide:cr,useExisting:(0,u.Gpc)(()=>Up)},fw=(()=>Promise.resolve(null))();let Up=(()=>{class n extends cr{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new ek({},z(t),we(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){fw.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),uw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){fw.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){fw.then(()=>{const i=this._findContainer(t.path),r=new ek({});IB(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){fw.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){fw.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,MB(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Mr,10),u.Y36(nd,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&u.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([h6]),u.qOj]}),n})();const p6={provide:xr,useExisting:(0,u.Gpc)(()=>AS)},VB=(()=>Promise.resolve(null))();let AS=(()=>{class n extends xr{constructor(t,i,r,s,l){super(),this._changeDetectorRef=l,this.control=new FB,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function WR(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Fp?t=s:function l6(n){return Object.getPrototypeOf(n.constructor)===Xl}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function qR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){uw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){VB.then(()=>{var i;this.control.setValue(t,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=""===i||i&&"false"!==i;VB.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(t){return this._parent?function CS(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(cr,9),u.Y36(Mr,10),u.Y36(nd,10),u.Y36(Ro,10),u.Y36(u.sBO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([p6]),u.qOj,u.TTD]}),n})(),tk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const g6={provide:Ro,useExisting:(0,u.Gpc)(()=>nk),multi:!0};let nk=(()=>{class n extends Xl{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){1&t&&u.NdJ("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[u._Bn([g6]),u.qOj]}),n})(),UB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const ik=new u.OlP("NgModelWithFormControlWarning"),b6={provide:cr,useExisting:(0,u.Gpc)(()=>pw)};let pw=(()=>{class n extends cr{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(SS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return uw(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){ES(t.control||null,t,!1),ZR(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,MB(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(ES(i||null,t),kB(r)&&(uw(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);IB(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function o6(n,e){return SS(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$R(this.form,this),this._oldForm&&SS(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Mr,10),u.Y36(nd,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&u.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([b6]),u.qOj,u.TTD]}),n})(),jp=(()=>{class n{constructor(){this._validator=f}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):f,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();const O6={provide:Mr,useExisting:(0,u.Gpc)(()=>MS),multi:!0};let MS=(()=>{class n extends jp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function x6(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>HR}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,i){2&t&&u.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[u._Bn([O6]),u.qOj]}),n})(),nV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[UB]]}),n})(),V6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[nV]}),n})(),U6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ik,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[nV]}),n})();const j6=["trigger"],H6=["panel"];function G6(n,e){if(1&n&&(u.TgZ(0,"span",8),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.placeholder)}}function z6(n,e){if(1&n&&(u.TgZ(0,"span",12),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Oqu(t.triggerValue)}}function $6(n,e){1&n&&u.Hsn(0,0,["*ngSwitchCase","true"])}function q6(n,e){if(1&n&&(u.TgZ(0,"span",9),u.YNc(1,z6,2,1,"span",10),u.YNc(2,$6,1,0,"ng-content",11),u.qZA()),2&n){const t=u.oxw();u.Q6J("ngSwitch",!!t.customTrigger),u.xp6(2),u.Q6J("ngSwitchCase",!0)}}function W6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",13)(1,"div",14,15),u.NdJ("@transformPanel.done",function(r){return u.CHM(t),u.oxw()._panelDoneAnimatingStream.next(r.toState)})("keydown",function(r){return u.CHM(t),u.oxw()._handleKeydown(r)}),u.Hsn(3,1),u.qZA()()}if(2&n){const t=u.oxw();u.Q6J("@transformPanelWrap",void 0),u.xp6(1),u.Gre("mat-select-panel ",t._getPanelTheme(),""),u.Udp("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),u.Q6J("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),u.uIk("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const Z6=[[["mat-select-trigger"]],"*"],K6=["mat-select-trigger","*"],iV={transformPanelWrap:hh("transformPanelWrap",[Qa("* => void",qm("@transformPanel",[$m()],{optional:!0}))]),transformPanel:hh("transformPanel",[da("void",oi({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),da("showing",oi({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),da("showing-multiple",oi({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Qa("void => *",Wl("120ms cubic-bezier(0, 0, 0.2, 1)")),Qa("* => void",Wl("100ms 25ms linear",oi({opacity:0})))])};let rV=0;const oV=new u.OlP("mat-select-scroll-strategy"),J6=new u.OlP("MAT_SELECT_CONFIG"),eW={provide:oV,deps:[Ql],useFactory:function X6(n){return()=>n.scrollStrategies.reposition()}};class tW{constructor(e,t){this.source=e,this.value=t}}const nW=Mp(Ab(Qu(Mb(class{constructor(n,e,t,i,r){this._elementRef=n,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=i,this.ngControl=r}})))),iW=new u.OlP("MatSelectTrigger");let rW=(()=>{class n extends nW{constructor(t,i,r,s,l,d,p,y,w,D,x,O,L,Y){var re,Oe,Ue;super(l,s,p,y,D),this._viewportRuler=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=d,this._parentFormField=w,this._liveAnnouncer=L,this._defaultOptions=Y,this._panelOpen=!1,this._compareWith=(Ve,Ge)=>Ve===Ge,this._uid="mat-select-"+rV++,this._triggerAriaLabelledBy=null,this._destroy=new It.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+rV++,this._panelDoneAnimatingStream=new It.x,this._overlayPanelClass=(null===(re=this._defaultOptions)||void 0===re?void 0:re.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!==(Ue=null===(Oe=this._defaultOptions)||void 0===Oe?void 0:Oe.disableOptionCentering)&&void 0!==Ue&&Ue,this.ariaLabel="",this.optionSelectionChanges=Co(()=>{const Ve=this.options;return Ve?Ve.changes.pipe(Qn(Ve),Cn(()=>(0,Kc.T)(...Ve.map(Ge=>Ge.onSelectionChange)))):this._ngZone.onStable.pipe((0,ri.q)(1),Cn(()=>this.optionSelectionChanges))}),this.openedChange=new u.vpe,this._openedStream=this.openedChange.pipe(an(Ve=>Ve),(0,st.U)(()=>{})),this._closedStream=this.openedChange.pipe(an(Ve=>!Ve),(0,st.U)(()=>{})),this.selectionChange=new u.vpe,this.valueChange=new u.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==Y?void 0:Y.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=Y.typeaheadDebounceInterval),this._scrollStrategyFactory=O,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(x)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){var t,i,r,s;return null!==(s=null!==(t=this._required)&&void 0!==t?t:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(vS.required))&&void 0!==s&&s}set required(t){this._required=Tn(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=Tn(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=Tn(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=Om(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new yS(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Hu(),mi(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(mi(this._destroy)).subscribe(t=>{t.added.forEach(i=>i.select()),t.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Qn(null),mi(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),i=this.ngControl;if(t!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?r.setAttribute("aria-labelledby",t):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(t){t.disabled&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var t,i;return this.multiple?(null===(t=this._selectionModel)||void 0===t?void 0:t.selected)||[]:null===(i=this._selectionModel)||void 0===i?void 0:i.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const i=t.keyCode,r=40===i||38===i||37===i||39===i,s=13===i||32===i,l=this._keyManager;if(!l.isTyping()&&s&&!dh(t)||(this.multiple||t.altKey)&&r)t.preventDefault(),this.open();else if(!this.multiple){const d=this.selected;l.onKeydown(t);const p=this.selected;p&&d!==p&&this._liveAnnouncer.announce(p.viewValue,1e4)}}_handleOpenKeydown(t){const i=this._keyManager,r=t.keyCode,s=40===r||38===r,l=i.isTyping();if(s&&t.altKey)t.preventDefault(),this.close();else if(l||13!==r&&32!==r||!i.activeItem||dh(t))if(!l&&this._multiple&&65===r&&t.ctrlKey){t.preventDefault();const d=this.options.some(p=>!p.disabled&&!p.selected);this.options.forEach(p=>{p.disabled||(d?p.select():p.deselect())})}else{const d=i.activeItemIndex;i.onKeydown(t),this._multiple&&s&&t.shiftKey&&i.activeItem&&i.activeItemIndex!==d&&i.activeItem._selectViaInteraction()}else t.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,ri.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(t);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,t)}catch(s){return!1}});return i&&this._selectionModel.select(i),i}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new yL(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(mi(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(mi(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=(0,Kc.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(mi(t)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Kc.T)(...this.options.map(i=>i._stateChanges)).pipe(mi(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,i){const r=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(r!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),i&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),i&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),r!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,t):t.indexOf(i)-t.indexOf(r)),this.stateChanges.next()}}_propagateChanges(t){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:t,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var t;return!this._panelOpen&&!this.disabled&&(null===(t=this.options)||void 0===t?void 0:t.length)>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){var t;if(this.ariaLabel)return null;const i=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();return this.ariaLabelledby?(i?i+" ":"")+this.ariaLabelledby:i}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var t;if(this.ariaLabel)return null;const i=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();let r=(i?i+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Es),u.Y36(u.sBO),u.Y36(u.R0b),u.Y36(xb),u.Y36(u.SBq),u.Y36(zl,8),u.Y36(Up,8),u.Y36(pw,8),u.Y36(qb,8),u.Y36(xr,10),u.$8M("tabindex"),u.Y36(oV),u.Y36(EE),u.Y36(J6,8))},n.\u0275dir=u.lG2({type:n,viewQuery:function(t,i){if(1&t&&(u.Gf(j6,5),u.Gf(H6,5),u.Gf(kR,5)),2&t){let r;u.iGM(r=u.CRH())&&(i.trigger=r.first),u.iGM(r=u.CRH())&&(i.panel=r.first),u.iGM(r=u.CRH())&&(i._overlayDir=r.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[u.qOj,u.TTD]}),n})(),sW=(()=>{class n extends rW{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,i,r){const s=this._getItemHeight();return Math.min(Math.max(0,s*t-i+s/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(mi(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,ri.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const i=jb(t,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===i?0:function RD(n,e,t,i){return n<t?n:n+e>t+i?Math.max(0,n-i+e):t}((t+i)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new tW(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),i=this._viewportRuler.getViewportSize(),r=this._isRtl(),s=this.multiple?56:32;let l;if(this.multiple)l=40;else if(this.disableOptionCentering)l=16;else{let y=this._selectionModel.selected[0]||this.options.first;l=y&&y.group?32:16}r||(l*=-1);const d=0-(t.left+l-(r?s:0)),p=t.right+l-i.width+(r?0:s);d>0?l+=d+8:p>0&&(l-=p+8),this._overlayDir.offsetX=Math.round(l),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,i,r){const s=this._getItemHeight(),l=(s-this._triggerRect.height)/2,d=Math.floor(256/s);let p;return this.disableOptionCentering?0:(p=0===this._scrollTop?t*s:this._scrollTop===r?(t-(this._getItemCount()-d))*s+(s-(this._getItemCount()*s-256)%s):i-s/2,Math.round(-1*p-l))}_checkOverlayWithinViewport(t){const i=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,l=r.height-this._triggerRect.bottom-8,d=Math.abs(this._offsetY),y=Math.min(this._getItemCount()*i,256)-d-this._triggerRect.height;y>l?this._adjustPanelUp(y,l):d>s?this._adjustPanelDown(d,s,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,i){const r=Math.round(t-i);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,i,r){const s=Math.round(t-i);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),i=this._getItemCount(),r=Math.min(i*t,256),l=i*t-r;let d;d=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),d+=jb(d,this.options,this.optionGroups);const p=r/2;this._scrollTop=this._calculateOverlayScroll(d,p,l),this._offsetY=this._calculateOverlayOffsetY(d,p,l),this._checkOverlayWithinViewport(l)}_getOriginBasedOnOption(){const t=this._getItemHeight(),i=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-i+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-select"]],contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,iW,5),u.Suo(r,Ub,5),u.Suo(r,MD,5)),2&t){let s;u.iGM(s=u.CRH())&&(i.customTrigger=s.first),u.iGM(s=u.CRH())&&(i.options=s),u.iGM(s=u.CRH())&&(i.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(t,i){1&t&&u.NdJ("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&t&&(u.uIk("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-describedby",i._ariaDescribedby||null)("aria-activedescendant",i._getAriaActiveDescendant()),u.ekj("mat-select-disabled",i.disabled)("mat-select-invalid",i.errorState)("mat-select-required",i.required)("mat-select-empty",i.empty)("mat-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[u._Bn([{provide:bh,useExisting:n},{provide:Bb,useExisting:n}]),u.qOj],ngContentSelectors:K6,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,i){if(1&t&&(u.F$t(Z6),u.TgZ(0,"div",0,1),u.NdJ("click",function(){return i.toggle()}),u.TgZ(3,"div",2),u.YNc(4,G6,2,1,"span",3),u.YNc(5,q6,3,2,"span",4),u.qZA(),u.TgZ(6,"div",5),u._UZ(7,"div",6),u.qZA()(),u.YNc(8,W6,4,14,"ng-template",7),u.NdJ("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&t){const r=u.MAs(1);u.uIk("aria-owns",i.panelOpen?i.id+"-panel":null),u.xp6(3),u.Q6J("ngSwitch",i.empty),u.uIk("id",i._valueId),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngSwitchCase",!1),u.xp6(3),u.Q6J("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayMinWidth",null==i._triggerRect?null:i._triggerRect.width)("cdkConnectedOverlayOffsetY",i._offsetY)}},directives:[RR,Pi,mr,cl,kR,xs],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}\n'],encapsulation:2,data:{animation:[iV.transformPanelWrap,iV.transformPanel]},changeDetection:0}),n})(),ck=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[eW],imports:[[go,T_,Op,In],Np,y_,Op,In]}),n})();const aV=lh({passive:!0});let oW=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Eo.E;const i=ca(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new It.x,l="cdk-text-field-autofilled",d=p=>{"cdk-text-field-autofill-start"!==p.animationName||i.classList.contains(l)?"cdk-text-field-autofill-end"===p.animationName&&i.classList.contains(l)&&(i.classList.remove(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(i.classList.add(l),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",d,aV),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",d,aV)}}),s}stopMonitoring(t){const i=ca(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ws),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const aW=new u.OlP("MAT_INPUT_VALUE_ACCESSOR"),lW=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let cW=0;const uW=Mb(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i}});let cV=(()=>{class n extends uW{constructor(t,i,r,s,l,d,p,y,w,D){super(d,s,l,r),this._elementRef=t,this._platform=i,this._autofillMonitor=y,this._formField=D,this._uid="mat-input-"+cW++,this.focused=!1,this.stateChanges=new It.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(L=>qC().has(L)),this._iOSKeyupListener=L=>{const Y=L.target;!Y.value&&0===Y.selectionStart&&0===Y.selectionEnd&&(Y.setSelectionRange(1,1),Y.setSelectionRange(0,0))};const x=this._elementRef.nativeElement,O=x.nodeName.toLowerCase();this._inputValueAccessor=p||x,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&w.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===O,this._isTextarea="textarea"===O,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=x.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Tn(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,i,r,s;return null!==(s=null!==(t=this._required)&&void 0!==t?t:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(vS.required))&&void 0!==s&&s}set required(t){this._required=Tn(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&qC().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Tn(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,i;const r=(null===(i=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===i?void 0:i.call(t))?null:this.placeholder;if(r!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=r,r?s.setAttribute("placeholder",r):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){lW.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(ws),u.Y36(xr,10),u.Y36(Up,8),u.Y36(pw,8),u.Y36(xb),u.Y36(aW,10),u.Y36(oW),u.Y36(u.R0b),u.Y36(qb,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,i){1&t&&u.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(u.Ikx("disabled",i.disabled)("required",i.required),u.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),u.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[u._Bn([{provide:bh,useExisting:n}]),u.qOj,u.TTD]}),n})(),uV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[xb],imports:[[lV,y_,In],lV,y_]}),n})();const dW=["mat-button",""],hW=["*"],pW=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],gW=Ap(Qu(Mp(class{constructor(n){this._elementRef=n}})));let RS=(()=>{class n extends gW{constructor(t,i,r){super(t),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of pW)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,i){t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(sp),u.Y36(Kl,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,i){if(1&t&&u.Gf(kp,5),2&t){let r;u.iGM(r=u.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,i){2&t&&(u.uIk("disabled",i.disabled||null),u.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[u.qOj],attrs:dW,ngContentSelectors:hW,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,i){1&t&&(u.F$t(),u.TgZ(0,"span",0),u.Hsn(1),u.qZA(),u._UZ(2,"span",1)(3,"span",2)),2&t&&(u.xp6(2),u.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),u.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[kp],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),kS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Nb,In],In]}),n})();function mW(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"form",5,6),u.NdJ("ngSubmit",function(){u.CHM(t);const r=u.MAs(1);return u.oxw().onCarFormSubmit(r.value)}),u.TgZ(2,"div",7)(3,"mat-form-field",8)(4,"mat-label"),u._uU(5,"Mark"),u.qZA(),u._UZ(6,"input",9),u.qZA(),u.TgZ(7,"mat-form-field",8)(8,"mat-label"),u._uU(9,"Model"),u.qZA(),u._UZ(10,"input",10),u.qZA()(),u.TgZ(11,"div",7)(12,"mat-form-field",8),u._UZ(13,"mat-label")(14,"input",11),u.qZA(),u.TgZ(15,"mat-form-field",8)(16,"mat-label"),u._uU(17,"VinCode"),u.qZA(),u._UZ(18,"input",12),u.qZA()(),u.TgZ(19,"div",7)(20,"mat-form-field",8)(21,"mat-label"),u._uU(22,"Run"),u.qZA(),u._UZ(23,"input",13),u.qZA(),u.TgZ(24,"mat-form-field",8)(25,"mat-label"),u._uU(26,"Gas Type"),u.qZA(),u._UZ(27,"input",14),u.qZA()(),u.TgZ(28,"div",15)(29,"button",16),u.NdJ("click",function(){return u.CHM(t),u.oxw().onCancelBtnClick()}),u._uU(30,"Cancel"),u.qZA(),u.TgZ(31,"button",17),u._uU(32,"Submit"),u.qZA()()()}if(2&n){const t=u.MAs(1);u.xp6(31),u.Q6J("disabled",t.invalid)}}function _W(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"form",5,6),u.NdJ("ngSubmit",function(){u.CHM(t);const r=u.MAs(1);return u.oxw().onTechFormSubmit(r.value)}),u.TgZ(2,"div",7)(3,"mat-form-field",8)(4,"mat-label"),u._uU(5,"Brand"),u.qZA(),u._UZ(6,"input",18),u.qZA(),u.TgZ(7,"mat-form-field",8)(8,"mat-label"),u._uU(9,"Model"),u.qZA(),u._UZ(10,"input",10),u.qZA()(),u.TgZ(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),u._uU(14,"Year"),u.qZA(),u._UZ(15,"input",11),u.qZA(),u.TgZ(16,"mat-form-field",8)(17,"mat-label"),u._uU(18,"Previous Price"),u.qZA(),u._UZ(19,"input",19),u.qZA()(),u.TgZ(20,"div",15)(21,"button",16),u.NdJ("click",function(){return u.CHM(t),u.oxw().onCancelBtnClick()}),u._uU(22,"Cancel"),u.qZA(),u.TgZ(23,"button",17),u._uU(24,"Submit"),u.qZA()()()}if(2&n){const t=u.MAs(1);u.xp6(23),u.Q6J("disabled",t.invalid)}}let yW=(()=>{class n{constructor(t,i){this.stateM=t,this.router=i,this.carFormShow=!1,this.techFormShow=!1}ngOnInit(){this.checkPageDataValidity()}checkPageDataValidity(){this.stateM.getFullTradeInData().subscribe(t=>{if(null!=t.product)this.router.navigate(["info-submit"]);else{if(null!=t.user)return;this.router.navigate(["/"])}})}onProductTypeChange(t){let i=t.value;this.productType=i,"car"==i?(this.carFormShow=!0,this.techFormShow=!1):"tech"==i&&(this.techFormShow=!0,this.carFormShow=!1)}onCarFormSubmit(t){t.productType=this.productType,this.stateM.addTradeInProductData(t),this.router.navigate(["info-submit"])}onTechFormSubmit(t){t.productType=this.productType,this.stateM.addTradeInProductData(t),this.router.navigate(["info-submit"])}onCancelBtnClick(){this.stateM.deleteTradeInUserData(),this.router.navigate(["/"])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Iv),u.Y36(Ii))},n.\u0275cmp=u.Xpm({type:n,selectors:[["product-registration-pg"]],decls:11,vars:2,consts:[["appearance","fill"],["matNativeControl","",3,"selectionChange"],["value","car"],["value","tech"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],["form","ngForm"],[1,"form-group"],["appearance","fill",1,"example-full-width"],["required","","ngModel","","name","mark","matInput","","placeholder","Enter here"],["required","","ngModel","","name","model","matInput","","placeholder","Enter here"],["type","number","required","","ngModel","","name","year","matInput","","placeholder","Enter here"],["required","","ngModel","","name","vincode","matInput","","placeholder","Enter here"],["type","number","required","","ngModel","","name","run","matInput","","placeholder","Enter here"],["required","","ngModel","","name","gasType","matInput","","placeholder","Enter here"],[1,"button-group"],["mat-raised-button","","color","warn",1,"mb-3",3,"click"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["required","","ngModel","","name","brand","matInput","","placeholder","Enter here"],["type","number","required","","ngModel","","name","prePrice","matInput","","placeholder","Enter here"]],template:function(t,i){1&t&&(u.TgZ(0,"article")(1,"mat-form-field",0)(2,"mat-label"),u._uU(3,"Product Type"),u.qZA(),u.TgZ(4,"mat-select",1),u.NdJ("selectionChange",function(s){return i.onProductTypeChange(s)}),u.TgZ(5,"mat-option",2),u._uU(6,"Car"),u.qZA(),u.TgZ(7,"mat-option",3),u._uU(8,"Tech"),u.qZA()()(),u.YNc(9,mW,33,1,"form",4),u.YNc(10,_W,25,1,"form",4),u.qZA()),2&t&&(u.xp6(9),u.Q6J("ngIf",i.carFormShow),u.xp6(1),u.Q6J("ngIf",i.techFormShow))},directives:[KD,__,sW,Ub,Yn,tk,Bp,Up,Fp,cV,MS,Lp,AS,nk,RS],styles:["article[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}form[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}mat-form-field[_ngcontent-%COMP%]{margin:1%}.form-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1%}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-around}"]}),n})();var uk=F(3099),vn=F(6351),ur=F(2011),dk=(F(1451),F(3942)),Jl=F(4859),Ce=F(5861),Zs=F(9681),N=F(2090),ec=F(1877);const dV="@firebase/database";let hk="";function fV(n){hk=n}class bW{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,N.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,N.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class wW{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,N.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const pV=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bW(e)}}catch(e){}return new wW},Hp=pV("localStorage"),fk=pV("sessionStorage"),x_=new ec.Yd("@firebase/database"),gV=function(){let n=1;return function(){return n++}}(),mV=function(n){const e=(0,N.dS)(n),t=new N.gQ;t.update(e);const i=t.digest();return N.US.encodeByteArray(i)},mw=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=mw.apply(null,i):e+="object"==typeof i?(0,N.Pz)(i):i,e+=" "}return e};let Gp=null,_V=!0;const yV=function(n,e){(0,N.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(x_.logLevel=ec.in.VERBOSE,Gp=x_.log.bind(x_),e&&fk.set("logging_enabled",!0)):"function"==typeof n?Gp=n:(Gp=null,fk.remove("logging_enabled"))},Rr=function(...n){if(!0===_V&&(_V=!1,null===Gp&&!0===fk.get("logging_enabled")&&yV(!0)),Gp){const e=mw.apply(null,n);Gp(e)}},_w=function(n){return function(...e){Rr(n,...e)}},pk=function(...n){const e="FIREBASE INTERNAL ERROR: "+mw(...n);x_.error(e)},Yc=function(...n){const e=`FIREBASE FATAL ERROR: ${mw(...n)}`;throw x_.error(e),new Error(e)},Ss=function(...n){const e="FIREBASE WARNING: "+mw(...n);x_.warn(e)},OS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},id="[MIN_NAME]",Qc="[MAX_NAME]",zp=function(n,e){if(n===e)return 0;if(n===id||e===Qc)return-1;if(e===id||n===Qc)return 1;{const t=PS(n),i=PS(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},DW=function(n,e){return n===e?0:n<e?-1:1},yw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,N.Pz)(e))},gk=function(n){if("object"!=typeof n||null===n)return(0,N.Pz)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,N.Pz)(e[i]),t+=":",t+=gk(n[e[i]]);return t+="}",t},vV=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function kr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const bV=function(n){(0,N.hu)(!OS(n),"Invalid JSON number");const i=1023;let r,s,l,d,p;0===n?(s=0,l=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(r?1:0),y.reverse();const w=y.join("");let D="";for(p=0;p<64;p+=8){let x=parseInt(w.substr(p,8),2).toString(16);1===x.length&&(x="0"+x),D+=x}return D.toLowerCase()},AW=new RegExp("^-?(0*)\\d{1,10}$"),wV=-2147483648,mk=2147483647,PS=function(n){if(AW.test(n)){const e=Number(n);if(e>=wV&&e<=mk)return e}return null},R_=function(n){try{n()}catch(e){setTimeout(()=>{throw Ss("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},vw=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class xW{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Ss(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class RW{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Rr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ss(e)}}let bw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const TV=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,MV="websocket",xV="long_polling";class yk{constructor(e,t,i,r,s=!1,l="",d=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function RV(n,e,t){let i;if((0,N.hu)("string"==typeof e,"typeof type must == string"),(0,N.hu)("object"==typeof t,"typeof params must == object"),e===MV)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==xV)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function kW(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return kr(t,(s,l)=>{r.push(s+"="+l)}),i+r.join("&")}class OW{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,N.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,N.p$)(this.counters_)}}const vk={},bk={};function wk(n){const e=n.toString();return vk[e]||(vk[e]=new OW),vk[e]}class NW{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&R_(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ch{constructor(e,t,i,r,s,l,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_w(e),this.stats_=wk(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),RV(t,xV,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new NW(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,N.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ck((...s)=>{const[l,d,p,y,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&TV.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ch.forceAllow_=!0}static forceDisallow(){Ch.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!Ch.forceAllow_&&(Ch.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,N.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,N.h$)(t),r=vV(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,N.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ck{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=gV(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ck.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){Rr("frame writing exception"),d.stack&&Rr(d.stack),Rr(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Rr("No IE domain setting required")}catch(t){const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const l=this.pendingSegs.shift();i=i+"&seg"+r+"="+l.seg+"&ts"+r+"="+l.ts+"&d"+r+"="+l.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,N.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Rr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let FS=null;"undefined"!=typeof MozWebSocket?FS=MozWebSocket:"undefined"!=typeof WebSocket&&(FS=WebSocket);let k_=(()=>{class n{constructor(t,i,r,s,l,d,p){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_w(this.connId),this.stats_=wk(i),this.connURL=n.connectionURL_(i,d,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,l){const d={v:"5"};return!(0,N.Yr)()&&"undefined"!=typeof location&&location.hostname&&TV.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),l&&(d.p=l),RV(t,MV,d)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hp.set("previous_websocket_failure",!0);try{let r;if((0,N.Yr)()){r={headers:{"User-Agent":`Firebase/5/${hk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new FS(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==FS&&!n.forceDisallow_}static previouslyFailed(){return Hp.isInMemoryStorage||!0===Hp.get("previous_websocket_failure")}markConnectionHealthy(){Hp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,N.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,N.Pz)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=vV(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),BV=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ch,k_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=k_&&k_.isAvailable();let r=i&&!k_.previouslyFailed();if(t.webSocketOnly&&(i||Ss("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[k_];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class $V{constructor(e,t,i,r,s,l,d,p,y,w){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_w("c:"+this.id+":"),this.transportManager_=new BV(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=vw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=yw("t",e),i=yw("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=yw("t",e),i=yw("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=yw("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?pk("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):pk("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&Ss("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),vw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class qV{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class WV{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,N.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,N.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class LS extends WV{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new LS}getInitialEvent(e){return(0,N.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class An{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function bn(){return new An("")}function Zt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Eh(n){return n.pieces_.length-n.pieceNum_}function Vn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new An(n.pieces_,e)}function Dk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ww(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function YV(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new An(e,0)}function ai(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof An)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new An(t,0)}function Kt(n){return n.pieceNum_>=n.pieces_.length}function Ks(n,e){const t=Zt(n),i=Zt(e);if(null===t)return e;if(t===i)return Ks(Vn(n),Vn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function r4(n,e){const t=ww(n,0),i=ww(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=zp(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function Sk(n,e){if(Eh(n)!==Eh(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Ja(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Eh(n)>Eh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class s4{constructor(e,t){this.errorPrefix_=t,this.parts_=ww(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,N.ug)(this.parts_[i]);QV(this)}}function QV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+$p(n))}function $p(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Tk extends WV{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Tk}getInitialEvent(e){return(0,N.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Cw=1e3;let VS,qp=(()=>{class n extends qV{constructor(t,i,r,s,l,d,p,y){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=_w("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Cw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Tk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&LS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,l={r:s,a:t,b:i};this.log_((0,N.Pz)(l)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new N.BH,r={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:d=>{const p=d.d;"ok"===d.s?i.resolve(p):i.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(d).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const l={p:r};t.tag&&(l.q=i._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const y=p.d,w=p.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",p),"ok"!==w&&this.removeListen_(r,s),t.onComplete&&t.onComplete(w,y))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,N.r3)(t,"w")){const r=(0,N.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',l=i._path.toString();Ss(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,N.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,N.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const l=s.s,d=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,N.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const l={p:t};s&&(l.q=r,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const l={p:i,d:r};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,l){this.initConnection_();const d={p:i,d:r};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,l=>{this.log_(i+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,N.Pz)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):pk("Unrecognized action received from server: "+(0,N.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Cw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Cw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Cw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let p=!1,y=null;const w=function(){y?y.close():(p=!0,s())};t.realtime_={close:w,sendRequest:function(O){(0,N.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(O)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,L]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);p?Rr("getToken() completed but was canceled"):(Rr("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=L&&L.token,y=new $V(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,Y=>{Ss(Y+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(O){t.log_("Failed to get token: "+O),p||(t.repoInfo_.nodeAdmin&&Ss(O),w())}}})()}interrupt(t){Rr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Rr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Cw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(l=>gk(l)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new An(t).toString();let s;if(this.listens.has(r)){const l=this.listens.get(r);s=l.get(i),l.delete(i),0===l.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){Rr("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Rr("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,N.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+hk.replace(/\./g,"-")]=1,(0,N.uI)()?t["framework.cordova"]=1:(0,N.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=LS.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Jt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Jt(e,t)}}class BS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Jt(id,e),r=new Jt(id,t);return 0!==this.compare(i,r)}minPost(){return Jt.MIN}}class eU extends BS{static get __EMPTY_NODE(){return VS}static set __EMPTY_NODE(e){VS=e}compare(e,t){return zp(e.name,t.name)}isDefinedOn(e){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Jt.MIN}maxPost(){return new Jt(Qc,VS)}makePost(e,t){return(0,N.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Jt(e,VS)}toString(){return".key"}}const Xc=new eU;class US{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?i(e.key,t):1,r&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Ak,tc=(()=>{class n{constructor(t,i,r,s,l){this.key=t,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:ko.EMPTY_NODE,this.right=null!=l?l:ko.EMPTY_NODE}copy(t,i,r,s,l){return new n(null!=t?t:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const l=r(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===l?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ko.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return ko.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ko{constructor(e,t=ko.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ko(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,tc.BLACK,null,null))}remove(e){return new ko(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,tc.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new US(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new US(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new US(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new US(this.root_,null,this.comparator_,!0,e)}}function f4(n,e){return zp(n.name,e.name)}function Ik(n,e){return zp(n,e)}ko.EMPTY_NODE=new class h4{copy(e,t,i,r,s){return this}insert(e,t,i){return new tc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const tU=function(n){return"number"==typeof n?"number:"+bV(n):"string:"+n},nU=function(n){if(n.isLeafNode()){const e=n.val();(0,N.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,N.r3)(e,".sv"),"Priority must be a string or number.")}else(0,N.hu)(n===Ak||n.isEmpty(),"priority of unexpected type.");(0,N.hu)(n===Ak||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let iU,rU,sU,O_=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),nU(this.priorityNode_)}static set __childrenNodeConstructor(t){iU=t}static get __childrenNodeConstructor(){return iU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Kt(t)?this:".priority"===Zt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Zt(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,N.hu)(".priority"!==r||1===Eh(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Vn(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+tU(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?bV(this.value_):this.value_,this.lazyHash_=mV(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,N.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),l=n.VALUE_TYPE_ORDER.indexOf(r);return(0,N.hu)(s>=0,"Unknown leaf type: "+i),(0,N.hu)(l>=0,"Unknown leaf type: "+r),s===l?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const $n=new class _4 extends BS{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?zp(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Jt.MIN}maxPost(){return new Jt(Qc,new O_("[PRIORITY-POST]",sU))}makePost(e,t){const i=rU(e);return new Jt(t,new O_("[PRIORITY-POST]",i))}toString(){return".priority"}},y4=Math.log(2);class v4{constructor(e){this.count=parseInt(Math.log(e+1)/y4,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const jS=function(n,e,t,i){n.sort(e);const r=function(p,y){const w=y-p;let D,x;if(0===w)return null;if(1===w)return D=n[p],x=t?t(D):D,new tc(x,D.node,tc.BLACK,null,null);{const O=parseInt(w/2,10)+p,L=r(p,O),Y=r(O+1,y);return D=n[O],x=t?t(D):D,new tc(x,D.node,tc.BLACK,L,Y)}},d=function(p){let y=null,w=null,D=n.length;const x=function(L,Y){const re=D-L,Oe=D;D-=L;const Ue=r(re+1,Oe),Ve=n[re],Ge=t?t(Ve):Ve;O(new tc(Ge,Ve.node,Y,null,Ue))},O=function(L){y?(y.left=L,y=L):(w=L,y=L)};for(let L=0;L<p.count;++L){const Y=p.nextBitIsOne(),re=Math.pow(2,p.count-(L+1));Y?x(re,tc.BLACK):(x(re,tc.BLACK),x(re,tc.RED))}return w}(new v4(n.length));return new ko(i||e,d)};let Mk;const P_={};class rd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,N.hu)(P_&&$n,"ChildrenNode.ts has not been loaded"),Mk=Mk||new rd({".priority":P_},{".priority":$n}),Mk}get(e){const t=(0,N.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ko?t:null}hasIndex(e){return(0,N.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,N.hu)(e!==Xc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(Jt.Wrap);let d,l=s.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=s.getNext();d=r?jS(i,e.getCompare()):P_;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const w=Object.assign({},this.indexes_);return w[p]=d,new rd(w,y)}addToIndexes(e,t){const i=(0,N.UI)(this.indexes_,(r,s)=>{const l=(0,N.DV)(this.indexSet_,s);if((0,N.hu)(l,"Missing index implementation for "+s),r===P_){if(l.isDefinedOn(e.node)){const d=[],p=t.getIterator(Jt.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&d.push(y),y=p.getNext();return d.push(e),jS(d,l.getCompare())}return P_}{const d=t.get(e.name);let p=r;return d&&(p=p.remove(new Jt(e.name,d))),p.insert(e,e.node)}});return new rd(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,N.UI)(this.indexes_,r=>{if(r===P_)return r;{const s=t.get(e.name);return s?r.remove(new Jt(e.name,s)):r}});return new rd(i,this.indexSet_)}}let Ew,Bt=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&nU(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ew||(Ew=new n(new ko(Ik),null,rd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ew}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?Ew:i}}getChild(t){const i=Zt(t);return null===i?this:this.getImmediateChild(i).getChild(Vn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,N.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Jt(t,i);let s,l;i.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),l=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?Ew:this.priorityNode_;return new n(s,d,l)}}updateChild(t,i){const r=Zt(t);if(null===r)return i;{(0,N.hu)(".priority"!==Zt(t)||1===Eh(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Vn(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,l=!0;if(this.forEachChild($n,(d,p)=>{i[d]=p.val(t),r++,l&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):l=!1}),!t&&l&&s<2*r){const d=[];for(const p in i)d[p]=i[p];return d}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+tU(this.getPriority().val())+":"),this.forEachChild($n,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":mV(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const l=s.getPredecessorKey(new Jt(t,i));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Jt(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Jt(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Jt.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Jt.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Dw?-1:0}withIndex(t){if(t===Xc||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Xc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator($n),s=i.getIterator($n);let l=r.getNext(),d=s.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=r.getNext(),d=s.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===Xc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Dw=new class b4 extends Bt{constructor(){super(new ko(Ik),Bt.EMPTY_NODE,rd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Bt.EMPTY_NODE}isEmpty(){return!1}};function _i(n,e=null){if(null===n)return Bt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,N.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new O_(n,_i(e));if(n instanceof Array){let t=Bt.EMPTY_NODE;return kr(n,(i,r)=>{if((0,N.r3)(n,i)&&"."!==i.substring(0,1)){const s=_i(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(_i(e))}{const t=[];let i=!1;if(kr(n,(l,d)=>{if("."!==l.substring(0,1)){const p=_i(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),t.push(new Jt(l,p)))}}),0===t.length)return Bt.EMPTY_NODE;const s=jS(t,f4,l=>l.name,Ik);if(i){const l=jS(t,$n.getCompare());return new Bt(s,_i(e),new rd({".priority":l},{".priority":$n}))}return new Bt(s,_i(e),rd.Default)}}Object.defineProperties(Jt,{MIN:{value:new Jt(id,Bt.EMPTY_NODE)},MAX:{value:new Jt(Qc,Dw)}}),eU.__EMPTY_NODE=Bt.EMPTY_NODE,O_.__childrenNodeConstructor=Bt,function p4(n){Ak=n}(Dw),function m4(n){sU=n}(Dw),function g4(n){rU=n}(_i);class xk extends BS{constructor(e){super(),this.indexPath_=e,(0,N.hu)(!Kt(e)&&".priority"!==Zt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?zp(e.name,t.name):s}makePost(e,t){const i=_i(e),r=Bt.EMPTY_NODE.updateChild(this.indexPath_,i);return new Jt(t,r)}maxPost(){const e=Bt.EMPTY_NODE.updateChild(this.indexPath_,Dw);return new Jt(Qc,e)}toString(){return ww(this.indexPath_,0).join("/")}}const Rk=new class C4 extends BS{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?zp(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Jt.MIN}maxPost(){return Jt.MAX}makePost(e,t){const i=_i(e);return new Jt(t,i)}toString(){return".value"}},N_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",E4=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=N_.charAt(t%64),t=Math.floor(t/64);(0,N.hu)(0===t,"Cannot push at time == 0");let l=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)l+=N_.charAt(e[r]);return(0,N.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),lU=function(n){if(n===""+mk)return"-";const e=PS(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let i=t.length-1;for(;i>=0&&"z"===t[i];)i--;if(-1===i)return Qc;const s=N_.charAt(N_.indexOf(t[i])+1);return t[i]=s,t.slice(0,i+1).join("")},cU=function(n){if(n===""+wV)return id;const e=PS(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let i=0;i<t.length;i++)t[i]=n.charAt(i);return"-"===t[t.length-1]?1===t.length?""+mk:(delete t[t.length-1],t.join("")):(t[t.length-1]=N_.charAt(N_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function uU(n){return{type:"value",snapshotNode:n}}function F_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Sw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Tw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Ok{constructor(e){this.index_=e}updateChild(e,t,i,r,s,l){(0,N.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=l&&(i.isEmpty()?e.hasChild(t)?l.trackChildChange(Sw(t,d)):(0,N.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(F_(t,i)):l.trackChildChange(Tw(t,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild($n,(r,s)=>{t.hasChild(r)||i.trackChildChange(Sw(r,s))}),t.isLeafNode()||t.forEachChild($n,(r,s)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(s)||i.trackChildChange(Tw(r,s,l))}else i.trackChildChange(F_(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Bt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Iw{constructor(e){this.indexedFilter_=new Ok(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Iw.getStartPost_(e),this.endPost_=Iw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,s,l){return this.matches(new Jt(t,i))||(i=Bt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,l)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Bt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Bt.EMPTY_NODE);const s=this;return t.forEachChild($n,(l,d)=>{s.matches(new Jt(l,d))||(r=r.updateImmediateChild(l,Bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class S4{constructor(e){this.rangedFilter_=new Iw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,s,l){return this.rangedFilter_.matches(new Jt(t,i))||(i=Bt.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,l):this.fullLimitUpdateChild_(e,t,i,s,l)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=Bt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=Bt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const d=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(d.name,d.node),l++}}else{let s,l,d,p;if(r=t.withIndex(this.index_),r=r.updatePriority(Bt.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(x,O)=>D(O,x)}else p=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,w=!1;for(;p.hasNext();){const D=p.getNext();!w&&d(s,D)<=0&&(w=!0),w&&y<this.limit_&&d(D,l)<=0?y++:r=r.updateImmediateChild(D.name,Bt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let l;if(this.reverse_){const D=this.index_.getCompare();l=(x,O)=>D(O,x)}else l=this.index_.getCompare();const d=e;(0,N.hu)(d.numChildren()===this.limit_,"");const p=new Jt(t,i),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),w=this.rangedFilter_.matches(p);if(d.hasChild(t)){const D=d.getImmediateChild(t);let x=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=x&&(x.name===t||d.hasChild(x.name));)x=r.getChildAfterChild(this.index_,x,this.reverse_);const O=null==x?1:l(x,p);if(w&&!i.isEmpty()&&O>=0)return null!=s&&s.trackChildChange(Tw(t,i,D)),d.updateImmediateChild(t,i);{null!=s&&s.trackChildChange(Sw(t,D));const Y=d.updateImmediateChild(t,Bt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(null!=s&&s.trackChildChange(F_(x.name,x.node)),Y.updateImmediateChild(x.name,x.node)):Y}}return i.isEmpty()?e:w&&l(y,p)>=0?(null!=s&&(s.trackChildChange(Sw(y.name,y.node)),s.trackChildChange(F_(t,i))),d.updateImmediateChild(t,i).updateImmediateChild(y.name,Bt.EMPTY_NODE)):e}}class HS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$n}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:id}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$n}copy(){const e=new HS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Pk(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function Nk(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function GS(n,e){const t=n.copy();return t.index_=e,t}function dU(n){const e={};if(n.isDefault())return e;let t;return n.index_===$n?t="$priority":n.index_===Rk?t="$value":n.index_===Xc?t="$key":((0,N.hu)(n.index_ instanceof xk,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,N.Pz)(t),n.startSet_&&(e.startAt=(0,N.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,N.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,N.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,N.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function hU(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==$n&&(e.i=n.index_.toString()),e}class zS extends qV{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=_w("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,N.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=zS.getListenId_(e,i),d={};this.listens_[l]=d;const p=dU(e._queryParams);this.restRequest_(s+".json",p,(y,w)=>{let D=w;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(s,D,!1,i),(0,N.DV)(this.listens_,l)===d){let x;x=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(x,null)}})}unlisten(e,t){const i=zS.getListenId_(e,t);delete this.listens_[i]}get(e){const t=dU(e._queryParams),i=e._path.toString(),r=new N.BH;return this.restRequest_(i+".json",t,(s,l)=>{let d=l;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,N.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,N.cI)(d.responseText)}catch(y){Ss("Failed to parse JSON response for "+l+": "+d.responseText)}i(null,p)}else 401!==d.status&&404!==d.status&&Ss("Got unsuccessful REST response for "+l+" Status: "+d.status),i(d.status);i=null}},d.open("GET",l,!0),d.send()})}}class R4{constructor(){this.rootNode_=Bt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function $S(){return{value:null,children:new Map}}function L_(n,e,t){if(Kt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=Zt(e);n.children.has(i)||n.children.set(i,$S()),L_(n.children.get(i),e=Vn(e),t)}}function Fk(n,e){if(Kt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild($n,(i,r)=>{L_(n,new An(i),r)}),Fk(n,e)}}if(n.children.size>0){const t=Zt(e);return e=Vn(e),n.children.has(t)&&Fk(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Lk(n,e,t){null!==n.value?t(e,n.value):function k4(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{Lk(r,new An(e.toString()+"/"+i),t)})}class O4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&kr(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class F4{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new O4(e);const i=1e4+2e4*Math.random();vw(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;kr(e,(r,s)=>{s>0&&(0,N.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),vw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var el=(()=>{return(n=el||(el={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",el;var n})();function Uk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class qS{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=el.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Kt(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new An(e));return new qS(bn(),t,this.revert)}}return(0,N.hu)(Zt(this.path)===e,"operationForChild called for unrelated child."),new qS(Vn(this.path),this.affectedTree,this.revert)}}class Aw{constructor(e,t){this.source=e,this.path=t,this.type=el.LISTEN_COMPLETE}operationForChild(e){return Kt(this.path)?new Aw(this.source,bn()):new Aw(this.source,Vn(this.path))}}class Wp{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=el.OVERWRITE}operationForChild(e){return Kt(this.path)?new Wp(this.source,bn(),this.snap.getImmediateChild(e)):new Wp(this.source,Vn(this.path),this.snap)}}class B_{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=el.MERGE}operationForChild(e){if(Kt(this.path)){const t=this.children.subtree(new An(e));return t.isEmpty()?null:t.value?new Wp(this.source,bn(),t.value):new B_(this.source,bn(),t)}return(0,N.hu)(Zt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new B_(this.source,Vn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Dh{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Kt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Zt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class L4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Mw(n,e,t,i,r,s){const l=i.filter(d=>d.type===t);l.sort((d,p)=>function U4(n,e,t){if(null==e.childName||null==t.childName)throw(0,N.g5)("Should only compare child_ events.");const i=new Jt(e.childName,e.snapshotNode),r=new Jt(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,d,p)),l.forEach(d=>{const p=function V4(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);r.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(p,n.query_))})})}function WS(n,e){return{eventCache:n,serverCache:e}}function xw(n,e,t,i){return WS(new Dh(e,t,i),n.serverCache)}function pU(n,e,t,i){return WS(n.eventCache,new Dh(e,t,i))}function ZS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Zp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let jk;class qn{constructor(e,t=(()=>(jk||(jk=new ko(DW)),jk))()){this.value=e,this.children=t}static fromObject(e){let t=new qn(null);return kr(e,(i,r)=>{t=t.set(new An(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:bn(),value:this.value};if(Kt(e))return null;{const i=Zt(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Vn(e),t);return null!=s?{path:ai(new An(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Kt(e))return this;{const t=Zt(e),i=this.children.get(t);return null!==i?i.subtree(Vn(e)):new qn(null)}}set(e,t){if(Kt(e))return new qn(t,this.children);{const i=Zt(e),s=(this.children.get(i)||new qn(null)).set(Vn(e),t),l=this.children.insert(i,s);return new qn(this.value,l)}}remove(e){if(Kt(e))return this.children.isEmpty()?new qn(null):new qn(null,this.children);{const t=Zt(e),i=this.children.get(t);if(i){const r=i.remove(Vn(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new qn(null):new qn(this.value,s)}return this}}get(e){if(Kt(e))return this.value;{const t=Zt(e),i=this.children.get(t);return i?i.get(Vn(e)):null}}setTree(e,t){if(Kt(e))return t;{const i=Zt(e),s=(this.children.get(i)||new qn(null)).setTree(Vn(e),t);let l;return l=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new qn(this.value,l)}}fold(e){return this.fold_(bn(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(ai(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,bn(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Kt(e))return null;{const s=Zt(e),l=this.children.get(s);return l?l.findOnPath_(Vn(e),ai(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,bn(),t)}foreachOnPath_(e,t,i){if(Kt(e))return this;{this.value&&i(t,this.value);const r=Zt(e),s=this.children.get(r);return s?s.foreachOnPath_(Vn(e),ai(t,r),i):new qn(null)}}foreach(e){this.foreach_(bn(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(ai(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class nc{constructor(e){this.writeTree_=e}static empty(){return new nc(new qn(null))}}function Rw(n,e,t){if(Kt(e))return new nc(new qn(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const l=Ks(r,e);return s=s.updateChild(l,t),new nc(n.writeTree_.set(r,s))}{const r=new qn(t),s=n.writeTree_.setTree(e,r);return new nc(s)}}}function Hk(n,e,t){let i=n;return kr(t,(r,s)=>{i=Rw(i,ai(e,r),s)}),i}function gU(n,e){if(Kt(e))return nc.empty();{const t=n.writeTree_.setTree(e,new qn(null));return new nc(t)}}function Gk(n,e){return null!=Kp(n,e)}function Kp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ks(t.path,e)):null}function mU(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild($n,(i,r)=>{e.push(new Jt(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Jt(i,r.value))}),e}function Sh(n,e){if(Kt(e))return n;{const t=Kp(n,e);return new nc(null!=t?new qn(t):n.writeTree_.subtree(e))}}function zk(n){return n.writeTree_.isEmpty()}function V_(n,e){return _U(bn(),n.writeTree_,e)}function _U(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,N.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=_U(ai(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(ai(n,".priority"),i)),t}}function KS(n,e){return CU(e,n)}function q4(n,e){if(n.snap)return Ja(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ja(ai(n.path,t),e))return!0;return!1}function Z4(n){return n.visible}function yU(n,e,t){let i=nc.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const l=s.path;let d;if(s.snap)Ja(t,l)?(d=Ks(t,l),i=Rw(i,d,s.snap)):Ja(l,t)&&(d=Ks(l,t),i=Rw(i,bn(),s.snap.getChild(d)));else{if(!s.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(Ja(t,l))d=Ks(t,l),i=Hk(i,d,s.children);else if(Ja(l,t))if(d=Ks(l,t),Kt(d))i=Hk(i,bn(),s.children);else{const p=(0,N.DV)(s.children,Zt(d));if(p){const y=p.getChild(Vn(d));i=Rw(i,bn(),y)}}}}}return i}function vU(n,e,t,i,r){if(i||r){const s=Sh(n.visibleWrites,e);return!r&&zk(s)?t:r||null!=t||Gk(s,bn())?V_(yU(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(Ja(y.path,e)||Ja(e,y.path))},e),t||Bt.EMPTY_NODE):null}{const s=Kp(n.visibleWrites,e);if(null!=s)return s;{const l=Sh(n.visibleWrites,e);return zk(l)?t:null!=t||Gk(l,bn())?V_(l,t||Bt.EMPTY_NODE):null}}}function YS(n,e,t,i){return vU(n.writeTree,n.treePath,e,t,i)}function $k(n,e){return function K4(n,e,t){let i=Bt.EMPTY_NODE;const r=Kp(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild($n,(s,l)=>{i=i.updateImmediateChild(s,l)}),i;if(t){const s=Sh(n.visibleWrites,e);return t.forEachChild($n,(l,d)=>{const p=V_(Sh(s,new An(l)),d);i=i.updateImmediateChild(l,p)}),mU(s).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}return mU(Sh(n.visibleWrites,e)).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}(n.writeTree,n.treePath,e)}function bU(n,e,t,i){return function Y4(n,e,t,i,r){(0,N.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=ai(e,t);if(Gk(n.visibleWrites,s))return null;{const l=Sh(n.visibleWrites,s);return zk(l)?r.getChild(t):V_(l,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function QS(n,e){return function X4(n,e){return Kp(n.visibleWrites,e)}(n.writeTree,ai(n.treePath,e))}function qk(n,e,t){return function Q4(n,e,t,i){const r=ai(e,t),s=Kp(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?V_(Sh(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function wU(n,e){return CU(ai(n.treePath,e),n.writeTree)}function CU(n,e){return{treePath:n,writeTree:e}}class n8{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,N.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,Tw(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,Sw(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,F_(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,N.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,Tw(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const EU=new class i8{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class Wk{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Dh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return qk(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Zp(this.viewCache_),s=function t8(n,e,t,i,r,s){return function J4(n,e,t,i,r,s,l){let d;const p=Sh(n.visibleWrites,e),y=Kp(p,bn());if(null!=y)d=y;else{if(null==t)return[];d=V_(p,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const w=[],D=l.getCompare(),x=s?d.getReverseIteratorFrom(i,l):d.getIteratorFrom(i,l);let O=x.getNext();for(;O&&w.length<r;)0!==D(O,i)&&w.push(O),O=x.getNext();return w}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function DU(n,e,t,i,r,s){const l=e.eventCache;if(null!=QS(i,t))return e;{let d,p;if(Kt(t))if((0,N.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Zp(e),D=$k(i,y instanceof Bt?y:Bt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,s)}else{const y=YS(i,Zp(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=Zt(t);if(".priority"===y){(0,N.hu)(1===Eh(t),"Can't have a priority with additional path components");const w=l.getNode();p=e.serverCache.getNode();const D=bU(i,t,w,p);d=null!=D?n.filter.updatePriority(w,D):l.getNode()}else{const w=Vn(t);let D;if(l.isCompleteForChild(y)){p=e.serverCache.getNode();const x=bU(i,t,l.getNode(),p);D=null!=x?l.getNode().getImmediateChild(y).updateChild(w,x):l.getNode().getImmediateChild(y)}else D=qk(i,y,e.serverCache);d=null!=D?n.filter.updateChild(l.getNode(),y,D,w,r,s):l.getNode()}}return xw(e,d,l.isFullyInitialized()||Kt(t),n.filter.filtersNodes())}}function XS(n,e,t,i,r,s,l,d){const p=e.serverCache;let y;const w=l?n.filter:n.filter.getIndexedFilter();if(Kt(t))y=w.updateFullNode(p.getNode(),i,null);else if(w.filtersNodes()&&!p.isFiltered()){const O=p.getNode().updateChild(t,i);y=w.updateFullNode(p.getNode(),O,null)}else{const O=Zt(t);if(!p.isCompleteForPath(t)&&Eh(t)>1)return e;const L=Vn(t),re=p.getNode().getImmediateChild(O).updateChild(L,i);y=".priority"===O?w.updatePriority(p.getNode(),re):w.updateChild(p.getNode(),O,re,L,EU,null)}const D=pU(e,y,p.isFullyInitialized()||Kt(t),w.filtersNodes());return DU(n,D,t,r,new Wk(r,D,s),d)}function Zk(n,e,t,i,r,s,l){const d=e.eventCache;let p,y;const w=new Wk(r,e,s);if(Kt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),i,l),p=xw(e,y,!0,n.filter.filtersNodes());else{const D=Zt(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),i),p=xw(e,y,d.isFullyInitialized(),d.isFiltered());else{const x=Vn(t),O=d.getNode().getImmediateChild(D);let L;if(Kt(x))L=i;else{const Y=w.getCompleteChild(D);L=null!=Y?".priority"===Dk(x)&&Y.getChild(YV(x)).isEmpty()?Y:Y.updateChild(x,i):Bt.EMPTY_NODE}p=O.equals(L)?e:xw(e,n.filter.updateChild(d.getNode(),D,L,x,w,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function SU(n,e){return n.eventCache.isCompleteForChild(e)}function TU(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Kk(n,e,t,i,r,s,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=Kt(t)?i:new qn(null).setTree(t,i);const w=e.serverCache.getNode();return y.children.inorderTraversal((D,x)=>{if(w.hasChild(D)){const L=TU(0,e.serverCache.getNode().getImmediateChild(D),x);p=XS(n,p,new An(D),L,r,s,l,d)}}),y.children.inorderTraversal((D,x)=>{const O=!e.serverCache.isCompleteForChild(D)&&void 0===x.value;if(!w.hasChild(D)&&!O){const Y=TU(0,e.serverCache.getNode().getImmediateChild(D),x);p=XS(n,p,new An(D),Y,r,s,l,d)}}),p}class h8{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Ok(i.getIndex()),s=function T4(n){return n.loadsAllData()?new Ok(n.getIndex()):n.hasLimit()?new S4(n):new Iw(n)}(i);this.processor_=function r8(n){return{filter:n}}(s);const l=t.serverCache,d=t.eventCache,p=r.updateFullNode(Bt.EMPTY_NODE,l.getNode(),null),y=s.updateFullNode(Bt.EMPTY_NODE,d.getNode(),null),w=new Dh(p,l.isFullyInitialized(),r.filtersNodes()),D=new Dh(y,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=WS(D,w),this.eventGenerator_=new L4(this.query_)}get query(){return this.query_}}function g8(n,e){const t=Zp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Kt(e)&&!t.getImmediateChild(Zt(e)).isEmpty())?t.getChild(e):null}function IU(n){return 0===n.eventRegistrations_.length}function AU(n,e,t){const i=[];if(t){(0,N.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(t,r);l&&i.push(l)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(l)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function MU(n,e,t,i){e.type===el.MERGE&&null!==e.source.queryId&&((0,N.hu)(Zp(n.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(ZS(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function o8(n,e,t,i,r){const s=new n8;let l,d;if(t.type===el.OVERWRITE){const y=t;y.source.fromUser?l=Zk(n,e,y.path,y.snap,i,r,s):((0,N.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!Kt(y.path),l=XS(n,e,y.path,y.snap,i,r,d,s))}else if(t.type===el.MERGE){const y=t;y.source.fromUser?l=function l8(n,e,t,i,r,s,l){let d=e;return i.foreach((p,y)=>{const w=ai(t,p);SU(e,Zt(w))&&(d=Zk(n,d,w,y,r,s,l))}),i.foreach((p,y)=>{const w=ai(t,p);SU(e,Zt(w))||(d=Zk(n,d,w,y,r,s,l))}),d}(n,e,y.path,y.children,i,r,s):((0,N.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),l=Kk(n,e,y.path,y.children,i,r,d,s))}else if(t.type===el.ACK_USER_WRITE){const y=t;l=y.revert?function d8(n,e,t,i,r,s){let l;if(null!=QS(i,t))return e;{const d=new Wk(i,e,r),p=e.eventCache.getNode();let y;if(Kt(t)||".priority"===Zt(t)){let w;if(e.serverCache.isFullyInitialized())w=YS(i,Zp(e));else{const D=e.serverCache.getNode();(0,N.hu)(D instanceof Bt,"serverChildren would be complete if leaf node"),w=$k(i,D)}w=w,y=n.filter.updateFullNode(p,w,s)}else{const w=Zt(t);let D=qk(i,w,e.serverCache);null==D&&e.serverCache.isCompleteForChild(w)&&(D=p.getImmediateChild(w)),y=null!=D?n.filter.updateChild(p,w,D,Vn(t),d,s):e.eventCache.getNode().hasChild(w)?n.filter.updateChild(p,w,Bt.EMPTY_NODE,Vn(t),d,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=YS(i,Zp(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=QS(i,bn()),xw(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,i,r,s):function c8(n,e,t,i,r,s,l){if(null!=QS(r,t))return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(null!=i.value){if(Kt(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return XS(n,e,t,p.getNode().getChild(t),r,s,d,l);if(Kt(t)){let y=new qn(null);return p.getNode().forEachChild(Xc,(w,D)=>{y=y.set(new An(w),D)}),Kk(n,e,t,y,r,s,d,l)}return e}{let y=new qn(null);return i.foreach((w,D)=>{const x=ai(t,w);p.isCompleteForPath(x)&&(y=y.set(w,p.getNode().getChild(x)))}),Kk(n,e,t,y,r,s,d,l)}}(n,e,y.path,y.affectedTree,i,r,s)}else{if(t.type!==el.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+t.type);l=function u8(n,e,t,i,r){const s=e.serverCache;return DU(n,pU(e,s.getNode(),s.isFullyInitialized()||Kt(t),s.isFiltered()),t,i,EU,r)}(n,e,t.path,i,s)}const p=s.getChanges();return function a8(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=ZS(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(uU(ZS(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,r,e,t,i);return function s8(n,e){(0,N.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,N.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,xU(n,s.changes,s.viewCache.eventCache.getNode(),null)}function xU(n,e,t,i){return function B4(n,e,t,i){const r=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function D4(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Mw(n,r,"child_removed",e,i,t),Mw(n,r,"child_added",e,i,t),Mw(n,r,"child_moved",s,i,t),Mw(n,r,"child_changed",e,i,t),Mw(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let JS,tT;class RU{constructor(){this.views=new Map}}function Yk(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,N.hu)(null!=s,"SyncTree gave us an op for an invalid query."),MU(s,e,t,i)}{let s=[];for(const l of n.views.values())s=s.concat(MU(l,e,t,i));return s}}function Qk(n,e,t,i,r){const l=n.views.get(e._queryIdentifier);if(!l){let d=YS(t,r?i:null),p=!1;d?p=!0:i instanceof Bt?(d=$k(t,i),p=!1):(d=Bt.EMPTY_NODE,p=!1);const y=WS(new Dh(d,p,!1),new Dh(i,r,!1));return new h8(e,y)}return l}function kU(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Th(n,e){let t=null;for(const i of n.views.values())t=t||g8(i,e);return t}function OU(n,e){return e._queryParams.loadsAllData()?eT(n):n.views.get(e._queryIdentifier)}function PU(n,e){return null!=OU(n,e)}function Ih(n){return null!=eT(n)}function eT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let S8=1;class NU{constructor(e){this.listenProvider_=e,this.syncPointTree_=new qn(null),this.pendingWriteTree_=function e8(){return{visibleWrites:nc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Xk(n,e,t,i,r){return function H4(n,e,t,i,r){(0,N.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Rw(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?U_(n,new Wp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Ah(n,e,t=!1){const i=function z4(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function $4(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,N.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&q4(d,i.path)?r=!1:Ja(i.path,d.path)&&(s=!0)),l--}return!!r&&(s?(function W4(n){n.visibleWrites=yU(n.allWrites,Z4,bn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=gU(n.visibleWrites,i.path):kr(i.children,p=>{n.visibleWrites=gU(n.visibleWrites,ai(i.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new qn(null);return null!=i.snap?s=s.set(bn(),!0):kr(i.children,l=>{s=s.set(new An(l),!0)}),U_(n,new qS(i.path,s,t))}return[]}function kw(n,e,t){return U_(n,new Wp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function nT(n,e,t,i){const r=e._path,s=n.syncPointTree_.get(r);let l=[];if(s&&("default"===e._queryIdentifier||PU(s,e))){const d=function C8(n,e,t,i){const r=e._queryIdentifier,s=[];let l=[];const d=Ih(n);if("default"===r)for(const[p,y]of n.views.entries())l=l.concat(AU(y,t,i)),IU(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(r);p&&(l=l.concat(AU(p,t,i)),IU(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!Ih(n)&&s.push(new(function v8(){return(0,N.hu)(JS,"Reference.ts has not been loaded"),JS}())(e._repo,e._path)),{removed:s,events:l}}(s,e,t,i);(function b8(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const p=d.removed;l=d.events;const y=-1!==p.findIndex(D=>D._queryParams.loadsAllData()),w=n.syncPointTree_.findOnPath(r,(D,x)=>Ih(x));if(y&&!w){const D=n.syncPointTree_.subtree(r);if(!D.isEmpty()){const x=function O8(n){return n.fold((e,t,i)=>{if(t&&Ih(t))return[eT(t)];{let r=[];return t&&(r=kU(t)),kr(i,(s,l)=>{r=r.concat(l)}),r}})}(D);for(let O=0;O<x.length;++O){const L=x[O],Y=L.query,re=jU(n,L);n.listenProvider_.startListening(Pw(Y),Ow(n,Y),re.hashFn,re.onComplete)}}}!w&&p.length>0&&!i&&(y?n.listenProvider_.stopListening(Pw(e),null):p.forEach(D=>{const x=n.queryToTagMap.get(rT(D));n.listenProvider_.stopListening(Pw(D),x)})),function P8(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=rT(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,p)}return l}function FU(n,e,t,i){const r=Jk(n,i);if(null!=r){const s=eO(r),l=s.path,d=s.queryId,p=Ks(l,e);return tO(n,l,new Wp(Uk(d),p,t))}return[]}function LU(n,e){const t=n._path;let i=null,r=!1;e.syncPointTree_.foreachOnPath(t,(y,w)=>{const D=Ks(y,t);i=i||Th(w,D),r=r||Ih(w)});let l,s=e.syncPointTree_.get(t);s?(r=r||Ih(s),i=i||Th(s,bn())):(s=new RU,e.syncPointTree_=e.syncPointTree_.set(t,s)),null!=i?l=!0:(l=!1,i=Bt.EMPTY_NODE,e.syncPointTree_.subtree(t).foreachChild((w,D)=>{const x=Th(D,bn());x&&(i=i.updateImmediateChild(w,x))}));const d=PU(s,n);if(!d&&!n._queryParams.loadsAllData()){const y=rT(n);(0,N.hu)(!e.queryToTagMap.has(y),"View does not exist, but we have a tag");const w=function N8(){return S8++}();e.queryToTagMap.set(y,w),e.tagToQueryMap.set(w,y)}return{syncPoint:s,writesCache:KS(e.pendingWriteTree_,t),serverCache:i,serverCacheComplete:l,foundAncestorDefaultView:r,viewAlreadyExists:d}}function BU(n,e,t){const{syncPoint:i,serverCache:r,writesCache:s,serverCacheComplete:l,viewAlreadyExists:d,foundAncestorDefaultView:p}=LU(e,n);let y=function w8(n,e,t,i,r,s){const l=Qk(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function m8(n,e){n.eventRegistrations_.push(e)}(l,t),function _8(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild($n,(s,l)=>{i.push(F_(s,l))}),t.isFullyInitialized()&&i.push(uU(t.getNode())),xU(n,i,t.getNode(),e)}(l,t)}(i,e,t,s,r,l);if(!d&&!p){const w=OU(i,e);y=y.concat(function F8(n,e,t){const i=e._path,r=Ow(n,e),s=jU(n,t),l=n.listenProvider_.startListening(Pw(e),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,N.hu)(!Ih(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((y,w,D)=>{if(!Kt(y)&&w&&Ih(w))return[eT(w).query];{let x=[];return w&&(x=x.concat(kU(w).map(O=>O.query))),kr(D,(O,L)=>{x=x.concat(L)}),x}});for(let y=0;y<p.length;++y){const w=p[y];n.listenProvider_.stopListening(Pw(w),Ow(n,w))}}return l}(n,e,w))}return y}function iT(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,d)=>{const y=Th(d,Ks(l,e));if(y)return y});return vU(r,e,s,t,!0)}function U_(n,e){return VU(e,n.syncPointTree_,null,KS(n.pendingWriteTree_,bn()))}function VU(n,e,t,i){if(Kt(n.path))return UU(n,e,t,i);{const r=e.get(bn());null==t&&null!=r&&(t=Th(r,bn()));let s=[];const l=Zt(n.path),d=n.operationForChild(l),p=e.children.get(l);if(p&&d){const y=t?t.getImmediateChild(l):null,w=wU(i,l);s=s.concat(VU(d,p,y,w))}return r&&(s=s.concat(Yk(r,n,i,t))),s}}function UU(n,e,t,i){const r=e.get(bn());null==t&&null!=r&&(t=Th(r,bn()));let s=[];return e.children.inorderTraversal((l,d)=>{const p=t?t.getImmediateChild(l):null,y=wU(i,l),w=n.operationForChild(l);w&&(s=s.concat(UU(w,d,p,y)))}),r&&(s=s.concat(Yk(r,n,i,t))),s}function jU(n,e){const t=e.query,i=Ow(n,t);return{hashFn:()=>(function f8(n){return n.viewCache_.serverCache.getNode()}(e)||Bt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function M8(n,e,t){const i=Jk(n,t);if(i){const r=eO(i),s=r.path,l=r.queryId,d=Ks(s,e);return tO(n,s,new Aw(Uk(l),d))}return[]}(n,t._path,i):function A8(n,e){return U_(n,new Aw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function IW(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return nT(n,t,null,s)}}}}function Ow(n,e){const t=rT(e);return n.queryToTagMap.get(t)}function rT(n){return n._path.toString()+"$"+n._queryIdentifier}function Jk(n,e){return n.tagToQueryMap.get(e)}function eO(n){const e=n.indexOf("$");return(0,N.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new An(n.substr(0,e))}}function tO(n,e,t){const i=n.syncPointTree_.get(e);return(0,N.hu)(i,"Missing sync point for query tag that we're tracking"),Yk(i,t,KS(n.pendingWriteTree_,e),null)}function Pw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function D8(){return(0,N.hu)(tT,"Reference.ts has not been loaded"),tT}())(n._repo,n._path):n}class nO{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new nO(t)}node(){return this.node_}}class iO{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ai(this.path_,e);return new iO(this.syncTree_,t)}node(){return iT(this.syncTree_,this.path_)}}const HU=function(n,e,t){return n&&"object"==typeof n?((0,N.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?B8(n[".sv"],e,t):"object"==typeof n[".sv"]?V8(n[".sv"],e):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},B8=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,N.hu)(!1,"Unexpected server value: "+n)},V8=function(n,e,t){n.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,N.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,N.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return"number"!=typeof l?i:l+i},GU=function(n,e,t,i){return sO(e,new iO(t,n),i)},rO=function(n,e,t){return sO(n,new nO(e),t)};function sO(n,e,t){const i=n.getPriority().val(),r=HU(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,d=HU(l.getValue(),e,t);return d!==l.getValue()||r!==l.getPriority().val()?new O_(d,_i(r)):n}{const l=n;return s=l,r!==l.getPriority().val()&&(s=s.updatePriority(new O_(r))),l.forEachChild($n,(d,p)=>{const y=sO(p,e.getImmediateChild(d),t);y!==p&&(s=s.updateImmediateChild(d,y))}),s}}class oO{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function sT(n,e){let t=e instanceof An?e:new An(e),i=n,r=Zt(t);for(;null!==r;){const s=(0,N.DV)(i.node.children,r)||{children:{},childCount:0};i=new oO(r,i,s),t=Vn(t),r=Zt(t)}return i}function Yp(n){return n.node.value}function aO(n,e){n.node.value=e,lO(n)}function zU(n){return n.node.childCount>0}function oT(n,e){kr(n.node.children,(t,i)=>{e(new oO(t,n,i))})}function $U(n,e,t,i){t&&!i&&e(n),oT(n,r=>{$U(r,e,!0,i)}),t&&i&&e(n)}function Nw(n){return new An(null===n.parent?n.name:Nw(n.parent)+"/"+n.name)}function lO(n){null!==n.parent&&function H8(n,e,t){const i=function U8(n){return void 0===Yp(n)&&!zU(n)}(t),r=(0,N.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,lO(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,lO(n))}(n.parent,n.name,n)}const G8=/[\[\].#$\/\u0000-\u001F\u007F]/,z8=/[\[\].#$\u0000-\u001F\u007F]/,cO=10485760,aT=function(n){return"string"==typeof n&&0!==n.length&&!G8.test(n)},qU=function(n){return"string"==typeof n&&0!==n.length&&!z8.test(n)},Fw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!OS(n)||n&&"object"==typeof n&&(0,N.r3)(n,".sv")},Jc=function(n,e,t,i){i&&void 0===e||Lw((0,N.gK)(n,"value"),e,t)},Lw=function(n,e,t){const i=t instanceof An?new s4(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+$p(i));if("function"==typeof e)throw new Error(n+"contains a function "+$p(i)+" with contents = "+e.toString());if(OS(e))throw new Error(n+"contains "+e.toString()+" "+$p(i));if("string"==typeof e&&e.length>cO/3&&(0,N.ug)(e)>cO)throw new Error(n+"contains a string greater than "+cO+" utf8 bytes "+$p(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(kr(e,(l,d)=>{if(".value"===l)r=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!aT(l)))throw new Error(n+" contains an invalid key ("+l+") "+$p(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function o4(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,N.ug)(e),QV(n)})(i,l),Lw(n,d,i),function a4(n){const e=n.parts_.pop();n.byteLength_-=(0,N.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+$p(i)+" in addition to actual children.")}},WU=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,N.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];kr(e,(l,d)=>{const p=new An(l);if(Lw(r,d,ai(t,p)),".priority"===Dk(p)&&!Fw(d))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=ww(i);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!aT(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(r4);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&Ja(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},uO=function(n,e,t){if(!t||void 0!==e){if(OS(e))throw new Error((0,N.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Fw(e))throw new Error((0,N.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Bw=function(n,e,t,i){if(!(i&&void 0===t||aT(t)))throw new Error((0,N.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vw=function(n,e,t,i){if(!(i&&void 0===t||qU(t)))throw new Error((0,N.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},tl=function(n,e){if(".info"===Zt(e))throw new Error(n+" failed = Can't modify data under /.info/")},ZU=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!aT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qU(n)}(t))throw new Error((0,N.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Z8{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function lT(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!Sk(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function KU(n,e,t){lT(n,t),YU(n,i=>Sk(i,e))}function nl(n,e,t){lT(n,t),YU(n,i=>Ja(i,e)||Ja(e,i))}function YU(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(K8(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function K8(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Gp&&Rr("event: "+t.toString()),R_(i)}}}const QU="repo_interrupt";class Q8{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Z8,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$S(),this.transactionQueueTree_=new oO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function XU(n){const t=n.infoData_.getNode(new An(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Uw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:XU(n)})}function JU(n,e,t,i,r){n.dataUpdateCount++;const s=new An(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(r)if(i){const p=(0,N.UI)(t,y=>_i(y));l=function R8(n,e,t,i){const r=Jk(n,i);if(r){const s=eO(r),l=s.path,d=s.queryId,p=Ks(l,e),y=qn.fromObject(t);return tO(n,l,new B_(Uk(d),p,y))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=_i(t);l=FU(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,N.UI)(t,y=>_i(y));l=function I8(n,e,t){const i=qn.fromObject(t);return U_(n,new B_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,p)}else{const p=_i(t);l=kw(n.serverSyncTree_,s,p)}let d=s;l.length>0&&(d=j_(n,s)),nl(n.eventQueue_,d,l)}function e2(n,e){dO(n,"connected",e),!1===e&&function nZ(n){Qp(n,"onDisconnectEvents");const e=Uw(n),t=$S();Lk(n.onDisconnect_,bn(),(r,s)=>{const l=GU(r,s,n.serverSyncTree_,e);L_(t,r,l)});let i=[];Lk(t,bn(),(r,s)=>{i=i.concat(kw(n.serverSyncTree_,r,s));const l=gO(n,r);j_(n,l)}),n.onDisconnect_=$S(),nl(n.eventQueue_,bn(),i)}(n)}function dO(n,e,t){const i=new An("/.info/"+e),r=_i(t);n.infoData_.updateSnapshot(i,r);const s=kw(n.infoSyncTree_,i,r);nl(n.eventQueue_,i,s)}function cT(n){return n.nextWriteId_++}function eZ(n,e){const t=function k8(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(y,w)=>{const D=Ks(y,t);i=i||Th(w,D)});let r=n.syncPointTree_.get(t);r?i=i||Th(r,bn()):(r=new RU,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,l=s?new Dh(i,!0,!1):null;return function p8(n){return ZS(n.viewCache_)}(Qk(r,e,KS(n.pendingWriteTree_,e._path),s?l.getNode():Bt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(i=>{const r=_i(i).withIndex(e._queryParams.getIndex());if(e._queryParams.loadsAllData())kw(n.serverSyncTree_,e._path,r);else{const l=function x8(n,e){const{syncPoint:t,serverCache:i,writesCache:r,serverCacheComplete:s}=LU(e,n),l=Qk(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),e._queryParams.loadsAllData()?null:Ow(n,e)}(n.serverSyncTree_,e);FU(n.serverSyncTree_,e._path,r,l)}return nT(n.serverSyncTree_,e,null).length>0&&Qp(n,"unexpected cancel events in repoGetValue"),r},i=>(Qp(n,"get for query "+(0,N.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}function hO(n,e,t,i,r){Qp(n,"set",{path:e.toString(),value:t,priority:i});const s=Uw(n),l=_i(t,i),d=iT(n.serverSyncTree_,e),p=rO(l,d,s),y=cT(n),w=Xk(n.serverSyncTree_,e,p,y,!0);lT(n.eventQueue_,w),n.server_.put(e.toString(),l.val(!0),(x,O)=>{const L="ok"===x;L||Ss("set at "+e+" failed: "+x);const Y=Ah(n.serverSyncTree_,y,!L);nl(n.eventQueue_,e,Y),Mh(0,r,x,O)});const D=gO(n,e);j_(n,D),nl(n.eventQueue_,D,[])}function iZ(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&Fk(n.onDisconnect_,e),Mh(0,t,i,r)})}function t2(n,e,t,i){const r=_i(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,l)=>{"ok"===s&&L_(n.onDisconnect_,e,r),Mh(0,i,s,l)})}function fO(n,e,t){let i;i=".info"===Zt(e._path)?nT(n.infoSyncTree_,e,t):nT(n.serverSyncTree_,e,t),KU(n.eventQueue_,e._path,i)}function n2(n){n.persistentConnection_&&n.persistentConnection_.interrupt(QU)}function Qp(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Rr(t,...e)}function Mh(n,e,t,i){e&&R_(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const l=new Error(s);l.code=r,e(l)}})}function pO(n,e,t){return iT(n.serverSyncTree_,e,t)||Bt.EMPTY_NODE}function uT(n,e=n.transactionQueueTree_){if(e||dT(n,e),Yp(e)){const t=s2(n,e);(0,N.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function cZ(n,e,t){const i=t.map(y=>y.currentWriteId),r=pO(n,e,i);let s=r;const l=r.hash();for(let y=0;y<t.length;y++){const w=t[y];(0,N.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const D=Ks(e,w.path);s=s.updateChild(D,w.currentOutputSnapshotRaw)}const d=s.val(!0),p=e;n.server_.put(p.toString(),d,y=>{Qp(n,"transaction put response",{path:p.toString(),status:y});let w=[];if("ok"===y){const D=[];for(let x=0;x<t.length;x++)t[x].status=2,w=w.concat(Ah(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&D.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();dT(n,sT(n.transactionQueueTree_,e)),uT(n,n.transactionQueueTree_),nl(n.eventQueue_,e,w);for(let x=0;x<D.length;x++)R_(D[x])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{Ss("transaction at "+p.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}j_(n,e)}},l)}(n,Nw(e),t)}else zU(e)&&oT(e,t=>{uT(n,t)})}function j_(n,e){const t=r2(n,e),i=Nw(t);return function uZ(n,e,t){if(0===e.length)return;const i=[];let r=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],y=Ks(t,p.path);let D,w=!1;if((0,N.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)w=!0,D=p.abortReason,r=r.concat(Ah(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)w=!0,D="maxretry",r=r.concat(Ah(n.serverSyncTree_,p.currentWriteId,!0));else{const x=pO(n,p.path,l);p.currentInputSnapshot=x;const O=e[d].update(x.val());if(void 0!==O){Lw("transaction failed: Data returned ",O,p.path);let L=_i(O);"object"==typeof O&&null!=O&&(0,N.r3)(O,".priority")||(L=L.updatePriority(x.getPriority()));const re=p.currentWriteId,Oe=Uw(n),Ue=rO(L,x,Oe);p.currentOutputSnapshotRaw=L,p.currentOutputSnapshotResolved=Ue,p.currentWriteId=cT(n),l.splice(l.indexOf(re),1),r=r.concat(Xk(n.serverSyncTree_,p.path,Ue,p.currentWriteId,p.applyLocally)),r=r.concat(Ah(n.serverSyncTree_,re,!0))}else w=!0,D="nodata",r=r.concat(Ah(n.serverSyncTree_,p.currentWriteId,!0))}nl(n.eventQueue_,t,r),r=[],w&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&i.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}dT(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)R_(i[d]);uT(n,n.transactionQueueTree_)}(n,s2(n,t),i),i}function r2(n,e){let t,i=n.transactionQueueTree_;for(t=Zt(e);null!==t&&void 0===Yp(i);)i=sT(i,t),t=Zt(e=Vn(e));return i}function s2(n,e){const t=[];return o2(n,e,t),t.sort((i,r)=>i.order-r.order),t}function o2(n,e,t){const i=Yp(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);oT(e,r=>{o2(n,r,t)})}function dT(n,e){const t=Yp(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,aO(e,t.length>0?t:void 0)}oT(e,i=>{dT(n,i)})}function gO(n,e){const t=Nw(r2(n,e)),i=sT(n.transactionQueueTree_,e);return function j8(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{mO(n,r)}),mO(n,i),$U(i,r=>{mO(n,r)}),t}function mO(n,e){const t=Yp(e);if(t){const i=[];let r=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,N.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,N.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),r=r.concat(Ah(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&i.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?aO(e,void 0):t.length=s+1,nl(n.eventQueue_,Nw(e),r);for(let l=0;l<i.length;l++)R_(i[l])}}const _O=function(n,e){const t=fZ(n),i=t.namespace;return"firebase.com"===t.domain&&Yc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Yc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ss("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new yk(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new An(t.pathString)}},fZ=function(n){let e="",t="",i="",r="",s="",l=!0,d="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let w=n.indexOf("/");-1===w&&(w=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(w,D)),w<D&&(r=function dZ(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}e+="/"+r}return e}(n.substring(w,D)));const x=function hZ(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ss(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(l="https"===d||"wss"===d,p=parseInt(e.substring(y+1),10)):y=e.length;const O=e.slice(0,y);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const L=e.indexOf(".");i=e.substring(0,L).toLowerCase(),t=e.substring(L+1),s=i}"ns"in x&&(s=x.ns)}return{host:e,port:p,domain:t,subdomain:i,secure:l,scheme:d,pathString:r,namespace:s}};class a2{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Pz)(this.snapshot.exportVal())}}class l2{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class c2{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class u2{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new N.BH;return iZ(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){tl("OnDisconnect.remove",this._path);const e=new N.BH;return t2(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){tl("OnDisconnect.set",this._path),Jc("OnDisconnect.set",e,this._path,!1);const t=new N.BH;return t2(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){tl("OnDisconnect.setWithPriority",this._path),Jc("OnDisconnect.setWithPriority",e,this._path,!1),uO("OnDisconnect.setWithPriority",t,!1);const i=new N.BH;return function rZ(n,e,t,i,r){const s=_i(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(l,d)=>{"ok"===l&&L_(n.onDisconnect_,e,s),Mh(0,r,l,d)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){tl("OnDisconnect.update",this._path),WU("OnDisconnect.update",e,this._path,!1);const t=new N.BH;return function sZ(n,e,t,i){if((0,N.xb)(t))return Rr("onDisconnect().update() called with empty data.  Don't do anything."),void Mh(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{"ok"===r&&kr(t,(l,d)=>{const p=_i(d);L_(n.onDisconnect_,ai(e,l),p)}),Mh(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Oo{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Kt(this._path)?null:Dk(this._path)}get ref(){return new il(this._repo,this._path)}get _queryIdentifier(){const e=hU(this._queryParams),t=gk(e);return"{}"===t?"default":t}get _queryObject(){return hU(this._queryParams)}isEqual(e){if(!((e=(0,N.m9)(e))instanceof Oo))return!1;const t=this._repo===e._repo,i=Sk(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function n4(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function hT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function xh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Xc){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==id)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Qc)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===$n){if(null!=e&&!Fw(e)||null!=t&&!Fw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(n.getIndex()instanceof xk||n.getIndex()===Rk,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function fT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class il extends Oo{constructor(e,t){super(e,t,new HS,!1)}get parent(){const e=YV(this._path);return null===e?null:new il(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Xp{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new An(e),i=Jp(this.ref,e);return new Xp(this._node.getChild(t),i,$n)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new Xp(r,Jp(this.ref,i),$n)))}hasChild(e){const t=new An(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function d2(n,e){return(n=(0,N.m9)(n))._checkNotDeleted("ref"),void 0!==e?Jp(n._root,e):n._root}function h2(n,e){(n=(0,N.m9)(n))._checkNotDeleted("refFromURL");const t=_O(e,n._repo.repoInfo_.nodeAdmin);ZU("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Yc("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),d2(n,t.path.toString())}function Jp(n,e){return null===Zt((n=(0,N.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Vw("child","path",t,!1)):Vw("child","path",e,!1),new il(n._repo,ai(n._path,e));var t}function yO(n,e){n=(0,N.m9)(n),tl("set",n._path),Jc("set",e,n._path,!1);const t=new N.BH;return hO(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function yZ(n,e){WU("update",e,n._path,!1);const t=new N.BH;return function tZ(n,e,t,i){Qp(n,"update",{path:e.toString(),value:t});let r=!0;const s=Uw(n),l={};if(kr(t,(d,p)=>{r=!1,l[d]=GU(ai(e,d),_i(p),n.serverSyncTree_,s)}),r)Rr("update() called with empty data.  Don't do anything."),Mh(0,i,"ok",void 0);else{const d=cT(n),p=function T8(n,e,t,i){!function G4(n,e,t,i){(0,N.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=Hk(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=qn.fromObject(t);return U_(n,new B_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,l,d);lT(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,w)=>{const D="ok"===y;D||Ss("update at "+e+" failed: "+y);const x=Ah(n.serverSyncTree_,d,!D),O=x.length>0?j_(n,e):e;nl(n.eventQueue_,O,x),Mh(0,i,y,w)}),kr(t,y=>{const w=gO(n,ai(e,y));j_(n,w)}),nl(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}class pT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new a2("value",this,new Xp(e.snapshotNode,new il(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new l2(this,e,t):null}matches(e){return e instanceof pT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class gT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new l2(this,e,t):null}createEvent(e,t){(0,N.hu)(null!=e.childName,"Child events should have a childName.");const i=Jp(new il(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new a2(e.type,this,new Xp(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof gT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function jw(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=t,y=(w,D)=>{fO(n._repo,n,d),p(w,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new c2(t,s||void 0),d="value"===e?new pT(l):new gT(e,l);return function oZ(n,e,t){let i;i=".info"===Zt(e._path)?BU(n.infoSyncTree_,e,t):BU(n.serverSyncTree_,e,t),KU(n.eventQueue_,e._path,i)}(n._repo,n,d),()=>fO(n._repo,n,d)}function vO(n,e,t,i){return jw(n,"value",e,t,i)}function f2(n,e,t,i){return jw(n,"child_added",e,t,i)}function p2(n,e,t,i){return jw(n,"child_changed",e,t,i)}function g2(n,e,t,i){return jw(n,"child_moved",e,t,i)}function m2(n,e,t,i){return jw(n,"child_removed",e,t,i)}function _2(n,e,t){let i=null;const r=t?new c2(t):null;"value"===e?i=new pT(r):e&&(i=new gT(e,r)),fO(n._repo,n,i)}class ic{}class y2 extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Jc("endAt",this._value,e._path,!0);const t=Nk(e._queryParams,this._value,this._key);if(fT(t),xh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Oo(e._repo,e._path,t,e._orderByCalled)}}class wZ extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Jc("endBefore",this._value,e._path,!1);const t=function x4(n,e,t){let i,r;return n.index_===Xc?("string"==typeof e&&(e=cU(e)),r=Nk(n,e,t)):(i=null==t?id:cU(t),r=Nk(n,e,i)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(fT(t),xh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Oo(e._repo,e._path,t,e._orderByCalled)}}class v2 extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Jc("startAt",this._value,e._path,!0);const t=Pk(e._queryParams,this._value,this._key);if(fT(t),xh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Oo(e._repo,e._path,t,e._orderByCalled)}}class DZ extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Jc("startAfter",this._value,e._path,!1);const t=function M4(n,e,t){let i;if(n.index_===Xc)"string"==typeof e&&(e=lU(e)),i=Pk(n,e,t);else{let r;r=null==t?Qc:lU(t),i=Pk(n,e,r)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(fT(t),xh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Oo(e._repo,e._path,t,e._orderByCalled)}}class TZ extends ic{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Oo(e._repo,e._path,function I4(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class AZ extends ic{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Oo(e._repo,e._path,function A4(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class xZ extends ic{constructor(e){super(),this._path=e}_apply(e){hT(e,"orderByChild");const t=new An(this._path);if(Kt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new xk(t),r=GS(e._queryParams,i);return xh(r),new Oo(e._repo,e._path,r,!0)}}class kZ extends ic{_apply(e){hT(e,"orderByKey");const t=GS(e._queryParams,Xc);return xh(t),new Oo(e._repo,e._path,t,!0)}}class PZ extends ic{_apply(e){hT(e,"orderByPriority");const t=GS(e._queryParams,$n);return xh(t),new Oo(e._repo,e._path,t,!0)}}class FZ extends ic{_apply(e){hT(e,"orderByValue");const t=GS(e._queryParams,Rk);return xh(t),new Oo(e._repo,e._path,t,!0)}}class BZ extends ic{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Jc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new y2(this._value,this._key)._apply(new v2(this._value,this._key)._apply(e))}}function rc(n,...e){let t=(0,N.m9)(n);for(const i of e)t=i._apply(t);return t}(function y8(n){(0,N.hu)(!JS,"__referenceConstructor has already been defined"),JS=n})(il),function E8(n){(0,N.hu)(!tT,"__referenceConstructor has already been defined"),tT=n}(il);const bO={};function w2(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Yc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Rr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,l=_O(s,r),d=l.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${d.namespace}`,l=_O(s,r),d=l.repoInfo):p=!l.repoInfo.secure;const w=r&&p?new bw(bw.OWNER):new RW(n.name,n.options,e);ZU("Invalid Firebase Database URL",l),Kt(l.path)||Yc("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function GZ(n,e,t,i){let r=bO[e.name];r||(r={},bO[e.name]=r);let s=r[n.toURLString()];return s&&Yc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Q8(n,false,t,i),r[n.toURLString()]=s,s}(d,n,w,new xW(n.name,t));return new $Z(D,n)}class $Z{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function X8(n,e,t){if(n.stats_=wk(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new zS(n.repoInfo_,(i,r,s,l)=>{JU(n,i,r,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>e2(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Pz)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new qp(n.repoInfo_,e,(i,r,s,l)=>{JU(n,i,r,s,l)},i=>{e2(n,i)},i=>{!function J8(n,e){kr(e,(t,i)=>{dO(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function PW(n,e){const t=n.toString();return bk[t]||(bk[t]=e()),bk[t]}(n.repoInfo_,()=>new F4(n.stats_,n.server_)),n.infoData_=new R4,n.infoSyncTree_=new NU({startListening:(i,r,s,l)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=kw(n.infoSyncTree_,i._path,p),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),dO(n,"connected",!1),n.serverSyncTree_=new NU({startListening:(i,r,s,l)=>(n.server_.listen(i,s,r,(d,p)=>{const y=l(d,p);nl(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new il(this._repo,bn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function HZ(n,e){const t=bO[e];(!t||t[n.key]!==n)&&Yc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),n2(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Yc("Cannot call "+e+" on a deleted database.")}}function C2(){BV.IS_TRANSPORT_INITIALIZED&&Ss("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function qZ(){C2(),Ch.forceDisallow()}function WZ(){C2(),k_.forceDisallow(),Ch.forceAllow()}function QZ(n,e){yV(n,e)}const JZ={".sv":"timestamp"};class nK{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}qp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},qp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function XZ(n){fV(Zs.SDK_VERSION),(0,Zs._registerComponent)(new Jl.wA("database",(e,{instanceIdentifier:t})=>w2(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Zs.registerVersion)(dV,"0.13.3",n),(0,Zs.registerVersion)(dV,"0.13.3","esm2017")}();const oK=new ec.Yd("@firebase/database-compat"),E2=function(n){oK.warn("FIREBASE WARNING: "+n)};class cK{constructor(e){this._delegate=e}cancel(e){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,E2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class uK{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Rh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vw("DataSnapshot.child","path",e,!1),new Rh(this._database,this._delegate.child(e))}hasChild(e){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Vw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Rh(this._database,t)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new _a(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Kr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",t,!1);const l=Kr.getCancelAndContextArgs_("Query.on",i,r),d=(y,w)=>{t.call(l.context,new Rh(this.database,y),w)};d.userCallback=t,d.context=l.context;const p=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(e){case"value":return vO(this._delegate,d,p),t;case"child_added":return f2(this._delegate,d,p),t;case"child_removed":return m2(this._delegate,d,p),t;case"child_changed":return p2(this._delegate,d,p),t;case"child_moved":return g2(this._delegate,d,p),t;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,N.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,N.Wj)("Query.off","callback",t,!0),(0,N.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,_2(this._delegate,e,r)}else _2(this._delegate,e)}get(){return function vZ(n){return eZ((n=(0,N.m9)(n))._repo,n).then(e=>new Xp(e,new il(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(e=>new Rh(this.database,e))}once(e,t,i,r){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",t,!0);const s=Kr.getCancelAndContextArgs_("Query.once",i,r),l=new N.BH,d=(y,w)=>{const D=new Rh(this.database,y);t&&t.call(s.context,D,w),l.resolve(D)};d.userCallback=t,d.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),l.reject(y)};switch(e){case"value":vO(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":f2(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":m2(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":p2(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":g2(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new Kr(this.database,rc(this._delegate,function IZ(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new TZ(n)}(e)))}limitToLast(e){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new Kr(this.database,rc(this._delegate,function MZ(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new AZ(n)}(e)))}orderByChild(e){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new Kr(this.database,rc(this._delegate,function RZ(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vw("orderByChild","path",n,!1),new xZ(n)}(e)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new Kr(this.database,rc(this._delegate,function OZ(){return new kZ}()))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new Kr(this.database,rc(this._delegate,function NZ(){return new PZ}()))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new Kr(this.database,rc(this._delegate,function LZ(){return new FZ}()))}startAt(e=null,t){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new Kr(this.database,rc(this._delegate,function EZ(n=null,e){return Bw("startAt","key",e,!0),new v2(n,e)}(e,t)))}startAfter(e=null,t){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new Kr(this.database,rc(this._delegate,function SZ(n,e){return Bw("startAfter","key",e,!0),new DZ(n,e)}(e,t)))}endAt(e=null,t){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new Kr(this.database,rc(this._delegate,function bZ(n,e){return Bw("endAt","key",e,!0),new y2(n,e)}(e,t)))}endBefore(e=null,t){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new Kr(this.database,rc(this._delegate,function CZ(n,e){return Bw("endBefore","key",e,!0),new wZ(n,e)}(e,t)))}equalTo(e,t){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new Kr(this.database,rc(this._delegate,function VZ(n,e){return Bw("equalTo","key",e,!0),new BZ(n,e)}(e,t)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Kr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,N.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,N.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,N.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new _a(this.database,new il(this._delegate._repo,this._delegate._path))}}class _a extends Kr{constructor(e,t){super(e,new Oo(t._repo,t._path,new HS,!1)),this.database=e,this._delegate=t}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new _a(this.database,Jp(this._delegate,e))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new _a(this.database,e):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new _a(this.database,this._delegate.root)}set(e,t){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",t,!0);const i=yO(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,E2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}tl("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",t,!0);const i=yZ(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function _Z(n,e,t){if(tl("setWithPriority",n._path),Jc("setWithPriority",e,n._path,!1),uO("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new N.BH;return hO(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",e,!0);const t=function gZ(n){return tl("remove",n._path),yO(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,N.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function iK(n,e,t){var i;if(n=(0,N.m9)(n),tl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==t?void 0:t.applyLocally)||void 0===i||i,s=new N.BH,d=vO(n,()=>{});return function lZ(n,e,t,i,r,s){Qp(n,"transaction on "+e);const l={path:e,update:t,onComplete:i,status:null,order:gV(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=pO(n,e,void 0);l.currentInputSnapshot=d;const p=l.update(d.val());if(void 0===p)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Lw("transaction failed: Data returned ",p,l.path),l.status=0;const y=sT(n.transactionQueueTree_,e),w=Yp(y)||[];let D;w.push(l),aO(y,w),"object"==typeof p&&null!==p&&(0,N.r3)(p,".priority")?(D=(0,N.DV)(p,".priority"),(0,N.hu)(Fw(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(iT(n.serverSyncTree_,e)||Bt.EMPTY_NODE).getPriority().val();const x=Uw(n),O=_i(p,D),L=rO(O,d,x);l.currentOutputSnapshotRaw=O,l.currentOutputSnapshotResolved=L,l.currentWriteId=cT(n);const Y=Xk(n.serverSyncTree_,e,L,l.currentWriteId,l.applyLocally);nl(n.eventQueue_,e,Y),uT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,w)=>{let D=null;p?s.reject(p):(D=new Xp(w,new il(n._repo,n._path),$n),s.resolve(new nK(y,D)))},d,r),s.promise}(this._delegate,e,{applyLocally:i}).then(s=>new uK(s.committed,new Rh(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",t,!0);const i=function mZ(n,e){n=(0,N.m9)(n),tl("setPriority",n._path),uO("setPriority",e,!1);const t=new N.BH;return hO(n._repo,ai(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",t,!0);const i=function pZ(n,e){n=(0,N.m9)(n),tl("push",n._path),Jc("push",e,n._path,!0);const t=XU(n._repo),i=E4(t),r=Jp(n,i),s=Jp(n,i);let l;return l=null!=e?yO(s,e).then(()=>s):Promise.resolve(s),r.then=l.then.bind(l),r.catch=l.then.bind(l,void 0),r}(this._delegate,e),r=i.then(l=>new _a(this.database,l));t&&r.then(()=>t(null),l=>t(l));const s=new _a(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return tl("Reference.onDisconnect",this._delegate._path),new cK(new u2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Hw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:qZ,forceLongPolling:WZ}}useEmulator(e,t,i={}){!function ZZ(n,e,t,i={}){(n=(0,N.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Yc("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Yc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new bw(bw.OWNER);else if(i.mockUserToken){const l="string"==typeof i.mockUserToken?i.mockUserToken:(0,N.Sg)(i.mockUserToken,n.app.options.projectId);s=new bw(l)}!function jZ(n,e,t,i){n.repoInfo_=new yk(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(this._delegate,e,t,i)}ref(e){if((0,N.Dv)("database.ref",0,1,arguments.length),e instanceof _a){const t=h2(this._delegate,e.toString());return new _a(this,t)}{const t=d2(this._delegate,e);return new _a(this,t)}}refFromURL(e){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const i=h2(this._delegate,e);return new _a(this,i)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function KZ(n){(n=(0,N.m9)(n))._checkNotDeleted("goOffline"),n2(n._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function YZ(n){(n=(0,N.m9)(n))._checkNotDeleted("goOnline"),function aZ(n){n.persistentConnection_&&n.persistentConnection_.resume(QU)}(n._repo)}(this._delegate)}}Hw.ServerValue={TIMESTAMP:function eK(){return JZ}(),increment:n=>function tK(n){return{".sv":{increment:n}}}(n)};var hK=Object.freeze({__proto__:null,initStandalone:function dK({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){fV(t);const l=new Jl.zt("auth-internal",new Jl.H0("database-standalone"));return l.setComponent(new Jl.wA("auth-internal",()=>i,"PRIVATE")),{instance:new Hw(w2(n,l,void 0,e,s),n),namespace:r}}});const fK=Hw.ServerValue;!function pK(n){n.INTERNAL.registerComponent(new Jl.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new Hw(r,i)},"PUBLIC").setServiceProps({Reference:_a,Query:Kr,Database:Hw,DataSnapshot:Rh,enableLogging:QZ,INTERNAL:hK,ServerValue:fK}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.3")}(dk.Z);var gK=F(6063);class mK extends It.x{constructor(e=1/0,t=1/0,i=gK.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:l}=this;t||(i.push(e),!r&&i.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let l=0;l<s.length&&!e.closed;l+=i?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const l=t.now();let d=0;for(let p=1;p<i.length&&i[p]<=l;p+=2)d=p;d&&i.splice(0,d+1)}}}function D2(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=null!=n?n:1/0,(0,uk.B)({connector:()=>new mK(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function S2(n,e){return(0,Wi.m)(e)?Cn(()=>n,e):Cn(()=>n)}var wO=F(9468);F(5867);const I2=new Map,wK={activated:!1,tokenObservers:[]},CK={initialized:!1,enabled:!1};function Or(n){return I2.get(n)||wK}function sc(n,e){I2.set(n,e)}function _T(){return CK}class IK{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new N.BH,yield function AK(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new N.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ys=new N.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function M2(n){if(!Or(n).activated)throw Ys.create("use-before-activation",{appName:n.name})}function SO(n,e){return TO.apply(this,arguments)}function TO(){return(TO=(0,Ce.Z)(function*({url:n,body:e},t){var i,r;const s={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const O=yield l.getHeartbeatsHeader();O&&(s["X-Firebase-Client"]=O)}const d={method:"POST",body:JSON.stringify(e),headers:s};let p,y;try{p=yield fetch(n,d)}catch(O){throw Ys.create("fetch-network-error",{originalErrorMessage:null===(i=O)||void 0===i?void 0:i.message})}if(200!==p.status)throw Ys.create("fetch-status-error",{httpStatus:p.status});try{y=yield p.json()}catch(O){throw Ys.create("fetch-parse-error",{originalErrorMessage:null===(r=O)||void 0===r?void 0:r.message})}const w=y.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Ys.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const D=1e3*Number(w[1]),x=Date.now();return{token:y.token,expireTimeMillis:x+D,issuedAtTimeMillis:x}})).apply(this,arguments)}function kK(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const Gw="firebase-app-check-store";let bT=null;function R2(){return bT||(bT=new Promise((n,e)=>{var t;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;e(Ys.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Gw,{keyPath:"compositeKey"})}}catch(i){e(Ys.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}}),bT)}function IO(){return(IO=(0,Ce.Z)(function*(n,e){const i=(yield R2()).transaction(Gw,"readwrite"),s=i.objectStore(Gw).put({compositeKey:n,value:e});return new Promise((l,d)=>{s.onsuccess=p=>{l()},i.onerror=p=>{var y;d(Ys.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const zw=new ec.Yd("@firebase/app-check");function N2(n,e){return(0,N.hl)()?function FK(n,e){return function k2(n,e){return IO.apply(this,arguments)}(function P2(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{zw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function F2(){return _T().enabled}function L2(){return RO.apply(this,arguments)}function RO(){return(RO=(0,Ce.Z)(function*(){const n=_T();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const HK={error:"UNKNOWN_ERROR"};function GK(n){return N.US.encodeString(JSON.stringify(n),!1)}function wT(n){return kO.apply(this,arguments)}function kO(){return(kO=(0,Ce.Z)(function*(n,e=!1){const t=n.app;M2(t);const i=Or(t);let s,r=i.token;if(!r){const p=yield i.cachedTokenPromise;p&&CT(p)&&(r=p)}if(!e&&r&&CT(r))return{token:r.token};let d,l=!1;if(F2()){i.exchangeTokenPromise||(i.exchangeTokenPromise=SO(kK(t,yield L2()),n.heartbeatServiceProvider).then(y=>(i.exchangeTokenPromise=void 0,y)),l=!0);const p=yield i.exchangeTokenPromise;return yield N2(t,p),sc(t,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(p=>(i.exchangeTokenPromise=void 0,p)),l=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?zw.warn(p.message):zw.error(p),s=p}return r?(d={token:r.token},sc(t,Object.assign(Object.assign({},i),{token:r})),yield N2(t,r)):d=$K(s),l&&V2(t,d),d})).apply(this,arguments)}function PO(n,e){const t=Or(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),sc(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function B2(n){const{app:e}=n,t=Or(e);let i=t.tokenRefresher;i||(i=function zK(n){const{app:e}=n;return new IK((0,Ce.Z)(function*(){let i;if(i=Or(e).token?yield wT(n,!0):yield wT(n),i.error)throw i.error}),()=>!0,()=>{const t=Or(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),sc(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function V2(n,e){const t=Or(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function CT(n){return n.expireTimeMillis-Date.now()>0}function $K(n){return{token:GK(HK),error:n}}class qK{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Or(this.app);for(const t of e)PO(this.app,t.next);return Promise.resolve()}}const W2="app-check-internal";!function a5(){(0,Zs._registerComponent)(new Jl.wA("app-check",n=>function WK(n,e){return new qK(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(W2).initialize()})),(0,Zs._registerComponent)(new Jl.wA(W2,n=>function ZK(n){return{getToken:e=>wT(n,e),addTokenListener:e=>function OO(n,e,t,i){const{app:r}=n,s=Or(r),l={next:t,error:i,type:e};if(sc(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,l]})),s.token&&CT(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),B2(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>B2(n))}(n,"INTERNAL",e),removeTokenListener:e=>PO(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Zs.registerVersion)("@firebase/app-check","0.5.11")}();class $w{constructor(){return(0,vn.vb)("app-check")}}"undefined"!=typeof window&&window;var DT=F(127);const VO=new u.OlP("angularfire2.auth.use-emulator"),UO=new u.OlP("angularfire2.auth.settings"),jO=new u.OlP("angularfire2.auth.tenant-id"),HO=new u.OlP("angularfire2.auth.langugage-code"),GO=new u.OlP("angularfire2.auth.use-device-language"),zO=new u.OlP("angularfire.auth.persistence"),$O=(n,e,t,i,r,s,l,d)=>(0,ur.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),l)for(const[y,w]of Object.entries(l))p.settings[y]=w;return d&&p.setPersistence(d),p},[t,i,r,s,l,d]);let ST=(()=>{class n{constructor(t,i,r,s,l,d,p,y,w,D,x,O){const L=new It.x,Y=Ke(void 0).pipe((0,nh.Q)(l.outsideAngular),Cn(()=>s.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,1451)))),(0,st.U)(()=>(0,ur.on)(t,s,i)),(0,st.U)(re=>$O(re,s,d,y,w,D,p,x)),D2({bufferSize:1,refCount:!1}));if(xa(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ke(null);else{Y.pipe(Ml()).subscribe();const Oe=Y.pipe(Cn(Ge=>Ge.getRedirectResult().then(Dt=>Dt,()=>null)),vn.iC,D2({bufferSize:1,refCount:!1})),Ue=Y.pipe(Cn(Ge=>new tn.y(Dt=>({unsubscribe:s.runOutsideAngular(()=>Ge.onAuthStateChanged(Mt=>Dt.next(Mt),Mt=>Dt.error(Mt),()=>Dt.complete()))})))),Ve=Y.pipe(Cn(Ge=>new tn.y(Dt=>({unsubscribe:s.runOutsideAngular(()=>Ge.onIdTokenChanged(Mt=>Dt.next(Mt),Mt=>Dt.error(Mt),()=>Dt.complete()))}))));this.authState=Oe.pipe(S2(Ue),(0,wO.R)(l.outsideAngular),(0,nh.Q)(l.insideAngular)),this.user=Oe.pipe(S2(Ve),(0,wO.R)(l.outsideAngular),(0,nh.Q)(l.insideAngular)),this.idToken=this.user.pipe(Cn(Ge=>Ge?(0,_n.D)(Ge.getIdToken()):Ke(null))),this.idTokenResult=this.user.pipe(Cn(Ge=>Ge?(0,_n.D)(Ge.getIdTokenResult()):Ke(null))),this.credential=(0,Kc.T)(Oe,L,this.authState.pipe(an(Ge=>!Ge))).pipe((0,st.U)(Ge=>(null==Ge?void 0:Ge.user)?Ge:null),(0,wO.R)(l.outsideAngular),(0,nh.Q)(l.insideAngular))}return(0,ur.pX)(this,Y,s,{spy:{apply:(re,Oe,Ue)=>{(re.startsWith("signIn")||re.startsWith("createUser"))&&Ue.then(Ve=>L.next(Ve))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ur.Dh),u.LFG(ur.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(vn.HU),u.LFG(VO,8),u.LFG(UO,8),u.LFG(jO,8),u.LFG(HO,8),u.LFG(GO,8),u.LFG(zO,8),u.LFG($w,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),f5=(()=>{class n{constructor(){DT.Z.registerVersion("angularfire",vn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[ST]}),n})();function K2(n){return null==n}function Y2(n){return"function"==typeof n.set}function Q2(n,e){return Y2(e)?e:n.ref(e)}function X2(n,e){if(function p5(n){return"string"==typeof n}(n))return e.stringCase();if(Y2(n))return e.firebaseCase();if(function g5(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function qw(n,e,t="on",i=jf.z){return new tn.y(r=>{let s=null;return s=n[t](e,(l,d)=>{i.schedule(()=>{r.next({snapshot:l,prevKey:d})}),"once"===t&&i.schedule(()=>r.complete())},l=>{i.schedule(()=>r.error(l))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,st.U)(r=>{const{snapshot:s,prevKey:l}=r;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:l,key:d}}),(0,uk.B)())}function J2(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function y5(n,e){const{payload:t,prevKey:i,key:r}=e,s=J2(n,r),l=function _5(n,e){if(K2(e))return 0;{const t=J2(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(p=>p.payload.key!==t.key)).splice(l,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===r?e:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function ej(n){return(K2(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function tj(n,e,t){return function m5(n,e,t){return qw(n,"value","once",t).pipe(Cn(i=>{const r=[Ke(i)];return e.forEach(s=>r.push(qw(n,s,"on",t))),(0,Kc.T)(...r).pipe(Zi(y5,[]))}),Hu())}(n,e=ej(e),t)}function nj(n,e,t){const i=(e=ej(e)).map(r=>qw(n,r,"on",t));return(0,Kc.T)(...i)}function ij(n,e){return function(i,r){return X2(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function C5(n){return function(t){return t?X2(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function rj(n,e){return function(){return qw(n,"value","on",e)}}const S5=new u.OlP("angularfire2.realtimeDatabaseURL"),T5=new u.OlP("angularfire2.database.use-emulator");let sj=(()=>{class n{constructor(t,i,r,s,l,d,p,y,w,D,x,O,L,Y,re){this.schedulers=d;const Oe=p,Ue=(0,ur.on)(t,l,i);y&&$O(Ue,l,w,x,O,L,D,Y),this.database=(0,ur.cc)(`${Ue.name}.database.${r}`,"AngularFireDatabase",Ue.name,()=>{const Ve=l.runOutsideAngular(()=>Ue.database(r||void 0));return Oe&&Ve.useEmulator(...Oe),Ve},[Oe])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>Q2(this.database,t));let s=r;return i&&(s=i(r)),function E5(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:ij(i,"update"),set:ij(i,"set"),push:r=>i.push(r),remove:C5(i),snapshotChanges:r=>tj(n,r,t).pipe(vn.iC),stateChanges:r=>nj(n,r,t).pipe(vn.iC),auditTrail:r=>function v5(n,e,t){return function w5(n,e,t){return function b5(n,e){return qw(n,"value","on",e).pipe((0,st.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(CC(e),(0,st.U)(([r,s])=>{const l=r.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:l,loadedKeys:d}}),function vW(n){return(0,kn.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,yn.x)(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,st.U)(r=>r.actions))}(n,nj(n,e).pipe(Zi((r,s)=>[...r,s],[])),t)}(n,r,t).pipe(vn.iC),valueChanges:(r,s)=>tj(n,r,t).pipe((0,st.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),vn.iC)}}(s,this)}object(t){return function D5(n,e){return{query:n,snapshotChanges:()=>rj(n,e.schedulers.outsideAngular)().pipe(vn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>rj(n,e.schedulers.outsideAngular)().pipe(vn.iC,(0,st.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Q2(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ur.Dh),u.LFG(ur.xv,8),u.LFG(S5,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(vn.HU),u.LFG(T5,8),u.LFG(ST,8),u.LFG(VO,8),u.LFG(UO,8),u.LFG(jO,8),u.LFG(HO,8),u.LFG(GO,8),u.LFG(zO,8),u.LFG($w,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),I5=(()=>{class n{constructor(){DT.Z.registerVersion("angularfire",vn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[sj]}),n})(),oj=(()=>{class n{constructor(t){this.db=t}sendTradeInDataToFireBase(t){this.db.list(`list/${t.product.productType}`).push(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(sj))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class aj{}class lj{}class sd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),l=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof sd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new sd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof sd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let l=this.headers.get(t);if(!l)return;l=l.filter(d=>-1===s.indexOf(d)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class A5{encodeKey(e){return cj(e)}encodeValue(e){return cj(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const x5=/%(\d[a-f0-9])/gi,R5={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function cj(n){return encodeURIComponent(n).replace(x5,(e,t)=>{var i;return null!==(i=R5[t])&&void 0!==i?i:e})}function uj(n){return`${n}`}class kh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new A5,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function M5(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[l,d]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],p=t.get(l)||[];p.push(d),t.set(l,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new kh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(uj(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(uj(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class k5{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function dj(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function hj(n){return"undefined"!=typeof Blob&&n instanceof Blob}function fj(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Ww{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function O5(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new sd),this.context||(this.context=new k5),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+l}}else this.params=new kh,this.urlWithParams=t}serializeBody(){return null===this.body?null:dj(this.body)||hj(this.body)||fj(this.body)||function P5(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof kh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||fj(this.body)?null:hj(this.body)?this.body.type||null:dj(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof kh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,w=e.params||this.params;const D=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((x,O)=>x.set(O,e.setHeaders[O]),y)),e.setParams&&(w=Object.keys(e.setParams).reduce((x,O)=>x.set(O,e.setParams[O]),w)),new Ww(i,r,l,{params:w,headers:y,context:D,reportProgress:p,responseType:s,withCredentials:d})}}var Qi=(()=>((Qi=Qi||{})[Qi.Sent=0]="Sent",Qi[Qi.UploadProgress=1]="UploadProgress",Qi[Qi.ResponseHeader=2]="ResponseHeader",Qi[Qi.DownloadProgress=3]="DownloadProgress",Qi[Qi.Response=4]="Response",Qi[Qi.User=5]="User",Qi))();class qO{constructor(e,t=200,i="OK"){this.headers=e.headers||new sd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class WO extends qO{constructor(e={}){super(e),this.type=Qi.ResponseHeader}clone(e={}){return new WO({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class TT extends qO{constructor(e={}){super(e),this.type=Qi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new TT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class pj extends qO{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ZO(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let KO=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Ww)s=t;else{let p,y;p=r.headers instanceof sd?r.headers:new sd(r.headers),r.params&&(y=r.params instanceof kh?r.params:new kh({fromObject:r.params})),s=new Ww(t,i,void 0!==r.body?r.body:null,{headers:p,context:r.context,params:y,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const l=Ke(s).pipe(Al(p=>this.handler.handle(p)));if(t instanceof Ww||"events"===r.observe)return l;const d=l.pipe(an(p=>p instanceof TT));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,st.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return d.pipe((0,st.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return d.pipe((0,st.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return d.pipe((0,st.U)(p=>p.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new kh).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,ZO(r,i))}post(t,i,r={}){return this.request("POST",t,ZO(r,i))}put(t,i,r={}){return this.request("PUT",t,ZO(r,i))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(aj))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class gj{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const mj=new u.OlP("HTTP_INTERCEPTORS");let N5=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const F5=/^\)\]\}',?\n/;let _j=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new tn.y(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((O,L)=>r.setRequestHeader(O,L.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const O=t.detectContentTypeHeader();null!==O&&r.setRequestHeader("Content-Type",O)}if(t.responseType){const O=t.responseType.toLowerCase();r.responseType="json"!==O?O:"text"}const s=t.serializeBody();let l=null;const d=()=>{if(null!==l)return l;const O=r.statusText||"OK",L=new sd(r.getAllResponseHeaders()),Y=function L5(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return l=new WO({headers:L,status:r.status,statusText:O,url:Y}),l},p=()=>{let{headers:O,status:L,statusText:Y,url:re}=d(),Oe=null;204!==L&&(Oe=void 0===r.response?r.responseText:r.response),0===L&&(L=Oe?200:0);let Ue=L>=200&&L<300;if("json"===t.responseType&&"string"==typeof Oe){const Ve=Oe;Oe=Oe.replace(F5,"");try{Oe=""!==Oe?JSON.parse(Oe):null}catch(Ge){Oe=Ve,Ue&&(Ue=!1,Oe={error:Ge,text:Oe})}}Ue?(i.next(new TT({body:Oe,headers:O,status:L,statusText:Y,url:re||void 0})),i.complete()):i.error(new pj({error:Oe,headers:O,status:L,statusText:Y,url:re||void 0}))},y=O=>{const{url:L}=d(),Y=new pj({error:O,status:r.status||0,statusText:r.statusText||"Unknown Error",url:L||void 0});i.error(Y)};let w=!1;const D=O=>{w||(i.next(d()),w=!0);let L={type:Qi.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(L.total=O.total),"text"===t.responseType&&!!r.responseText&&(L.partialText=r.responseText),i.next(L)},x=O=>{let L={type:Qi.UploadProgress,loaded:O.loaded};O.lengthComputable&&(L.total=O.total),i.next(L)};return r.addEventListener("load",p),r.addEventListener("error",y),r.addEventListener("timeout",y),r.addEventListener("abort",y),t.reportProgress&&(r.addEventListener("progress",D),null!==s&&r.upload&&r.upload.addEventListener("progress",x)),r.send(s),i.next({type:Qi.Sent}),()=>{r.removeEventListener("error",y),r.removeEventListener("abort",y),r.removeEventListener("load",p),r.removeEventListener("timeout",y),t.reportProgress&&(r.removeEventListener("progress",D),null!==s&&r.upload&&r.upload.removeEventListener("progress",x)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const YO=new u.OlP("XSRF_COOKIE_NAME"),QO=new u.OlP("XSRF_HEADER_NAME");class yj{}let B5=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ta(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ie),u.LFG(u.Lbi),u.LFG(YO))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),XO=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(yj),u.LFG(QO))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),V5=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(mj,[]);this.chain=i.reduceRight((r,s)=>new gj(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(lj),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),U5=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:XO,useClass:N5}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:YO,useValue:t.cookieName}:[],t.headerName?{provide:QO,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[XO,{provide:mj,useExisting:XO,multi:!0},{provide:yj,useClass:B5},{provide:YO,useValue:"XSRF-TOKEN"},{provide:QO,useValue:"X-XSRF-TOKEN"}]}),n})(),j5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[KO,{provide:aj,useClass:V5},_j,{provide:lj,useExisting:_j}],imports:[[U5.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const H5=["*"];let IT;function Zw(n){var e;return(null===(e=function G5(){if(void 0===IT&&(IT=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(IT=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return IT}())||void 0===e?void 0:e.createHTML(n))||n}function vj(n){return Error(`Unable to find icon with the name "${n}"`)}function bj(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function wj(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class eg{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let AT=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new eg(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const l=this._sanitizer.sanitize(u.q3G.HTML,r);if(!l)throw wj(r);const d=Zw(l);return this._addSvgIconConfig(t,i,new eg("",d,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new eg(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(u.q3G.HTML,i);if(!s)throw wj(i);const l=Zw(s);return this._addSvgIconSetConfig(t,new eg("",l,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,t);if(!i)throw bj(t);const r=this._cachedIconsByUrl.get(i);return r?Ke(MT(r)):this._loadSvgIconFromConfig(new eg(t,null)).pipe((0,Bi.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,st.U)(s=>MT(s)))}getNamedSvgIcon(t,i=""){const r=Cj(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const l=this._iconSetConfigs.get(i);return l?this._getSvgFromIconSetConfigs(t,l):wo(vj(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Ke(MT(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,st.U)(i=>MT(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?Ke(r):NR(i.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(Di(d=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(u.q3G.RESOURCE_URL,l.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(y)),Ke(null)})))).pipe((0,st.U)(()=>{const l=this._extractIconWithNameFromAnySet(t,i);if(!l)throw vj(t);return l}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const l=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(l,t,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,Bi.b)(i=>t.svgText=i),(0,st.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Ke(null):this._fetchIcon(t).pipe((0,Bi.b)(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const l=s.cloneNode(!0);if(l.removeAttribute("id"),"svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l,r);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l),r);const d=this._svgElementFromString(Zw("<svg></svg>"));return d.appendChild(l),this._setSvgAttributes(d,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(Zw("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:l,value:d}=r[s];"id"!==l&&i.setAttribute(l,d)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){var i;const{url:r,options:s}=t,l=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw function z5(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const d=this._sanitizer.sanitize(u.q3G.RESOURCE_URL,r);if(!d)throw bj(r);const p=this._inProgressUrlFetches.get(d);if(p)return p;const y=this._httpClient.get(d,{responseType:"text",withCredentials:l}).pipe((0,st.U)(w=>Zw(w)),uf(()=>this._inProgressUrlFetches.delete(d)),(0,uk.B)());return this._inProgressUrlFetches.set(d,y),y}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(Cj(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return q5(s)?new eg(s.url,null,s.options):new eg(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(KO,8),u.LFG(qo),u.LFG(ie,8),u.LFG(u.qLn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function MT(n){return n.cloneNode(!0)}function Cj(n,e){return n+":"+e}function q5(n){return!(!n.url||!n.options)}const W5=Ap(class{constructor(n){this._elementRef=n}}),Z5=new u.OlP("mat-icon-location",{providedIn:"root",factory:function K5(){const n=(0,u.f3M)(ie),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Ej=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Y5=Ej.map(n=>`[${n}]`).join(", "),Q5=/^url\(['"]?#(.*?)['"]?\)$/;let X5=(()=>{class n extends W5{constructor(t,i,r,s,l){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=l,this._inline=!1,this._currentIconFetch=gi.w0.EMPTY,r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Tn(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),i&&t.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(l=>{s.setAttribute(l.name,`url('${t}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(Y5),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)Ej.forEach(l=>{const d=i[s],p=d.getAttribute(l),y=p?p.match(Q5):null;if(y){let w=r.get(d);w||(w=[],r.set(d,w)),w.push({name:l,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe((0,ri.q)(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(AT),u.$8M("aria-hidden"),u.Y36(Z5),u.Y36(u.qLn))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,i){2&t&&(u.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),u.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[u.qOj],ngContentSelectors:H5,decls:1,vars:0,template:function(t,i){1&t&&(u.F$t(),u.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),Dj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[In],In]}),n})(),J5=(()=>{class n{constructor(t,i,r){this.stateM=t,this.router=i,this.firebase=r,this.hide=!0}ngOnInit(){this.checkDataValidity()}checkDataValidity(){this.stateM.getFullTradeInData().subscribe(t=>{null!=t.user&&this.router.navigate(["/"])})}onFormSubmit(t){console.log(t),this.stateM.addTradeInUserData(t),this.router.navigate(["/product-registration"])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Iv),u.Y36(Ii),u.Y36(oj))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-user-registration"]],decls:25,vars:4,consts:[[1,"example-form",3,"ngSubmit"],["form","ngForm"],["appearance","fill"],["ngModel","","name","fullname","matInput",""],["ngModel","","name","email","type","email","matInput","","placeholder","Ex. pat@example.com"],["ngModel","","name","password","matInput","",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[1,"button-group"],["routerLink","/user-login"],["type","submit","mat-raised-button","","color","primary"]],template:function(t,i){if(1&t){const r=u.EpF();u.TgZ(0,"article")(1,"form",0,1),u.NdJ("ngSubmit",function(){u.CHM(r);const l=u.MAs(2);return i.onFormSubmit(l.value)}),u.TgZ(3,"h1"),u._uU(4,"Create your Account"),u.qZA(),u.TgZ(5,"mat-form-field",2)(6,"mat-label"),u._uU(7,"Full Name"),u.qZA(),u._UZ(8,"input",3),u.qZA(),u.TgZ(9,"mat-form-field",2)(10,"mat-label"),u._uU(11,"Email"),u.qZA(),u._UZ(12,"input",4),u.qZA(),u.TgZ(13,"mat-form-field",2)(14,"mat-label"),u._uU(15,"Password"),u.qZA(),u._UZ(16,"input",5),u.TgZ(17,"button",6),u.NdJ("click",function(){return i.hide=!i.hide}),u.TgZ(18,"mat-icon"),u._uU(19),u.qZA()()(),u.TgZ(20,"div",7)(21,"a",8),u._uU(22,"Log in instead"),u.qZA(),u.TgZ(23,"button",9),u._uU(24,"Create"),u.qZA()()()()}2&t&&(u.xp6(16),u.Q6J("type",i.hide?"password":"text"),u.xp6(1),u.uIk("aria-label","Hide password")("aria-pressed",i.hide),u.xp6(2),u.Oqu(i.hide?"visibility_off":"visibility"))},directives:[tk,Bp,Up,KD,__,Fp,cV,Lp,AS,RS,zD,X5,Fc],styles:['@import"https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai+Looped:wght@200&family=Montserrat:wght@300;500&family=Roboto+Condensed:ital@1&display=swap";button[_ngcontent-%COMP%]{font-size:medium;font-family:IBM Plex Sans Thai Looped,sans-serif;font-family:Montserrat,sans-serif;font-family:Roboto Condensed,sans-serif;width:18%;margin-right:-2%}p[_ngcontent-%COMP%]{font-size:medium;font-family:IBM Plex Sans Thai Looped,sans-serif;font-family:Montserrat,sans-serif;font-family:Roboto Condensed,sans-serif}mat-form-field[_ngcontent-%COMP%]{font-size:medium;font-family:IBM Plex Sans Thai Looped,sans-serif;font-family:Montserrat,sans-serif;font-family:Roboto Condensed,sans-serif;width:100%;margin:2%}article[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:8%}h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:5%;font-family:IBM Plex Sans Thai Looped,sans-serif;font-family:Montserrat,sans-serif;font-family:Roboto Condensed,sans-serif}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}a[_ngcontent-%COMP%]{font-size:medium;text-decoration:none;margin-left:2%}']}),n})(),eY=(()=>{class n{constructor(t){this.router=t}ngOnInit(){}onBtnClick(){this.router.navigate(["/"])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ii))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-home"]],decls:4,vars:0,consts:[["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(u.TgZ(0,"h2"),u._uU(1,"Uploaded successfully"),u.qZA(),u.TgZ(2,"button",0),u.NdJ("click",function(){return i.onBtnClick()}),u._uU(3,"Done"),u.qZA())},directives:[RS],styles:["button[_ngcontent-%COMP%]{width:6%}"]}),n})();function tY(n,e){if(1&n&&(u.TgZ(0,"table",0)(1,"tbody")(2,"tr")(3,"th",1),u._uU(4,"Brand"),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA()(),u.TgZ(7,"tr")(8,"th",1),u._uU(9,"Model"),u.qZA(),u.TgZ(10,"td"),u._uU(11),u.qZA()(),u.TgZ(12,"tr")(13,"th",1),u._uU(14,"Year"),u.qZA(),u.TgZ(15,"td"),u._uU(16),u.qZA()(),u.TgZ(17,"tr")(18,"th",1),u._uU(19,"VinCode"),u.qZA(),u.TgZ(20,"td"),u._uU(21),u.qZA()(),u.TgZ(22,"tr")(23,"th",1),u._uU(24,"Run"),u.qZA(),u.TgZ(25,"td"),u._uU(26),u.qZA()(),u.TgZ(27,"tr")(28,"th",1),u._uU(29,"Gas Type"),u.qZA(),u.TgZ(30,"td"),u._uU(31),u.qZA()()()()),2&n){const t=u.oxw();u.xp6(6),u.Oqu(t.product.mark),u.xp6(5),u.Oqu(t.product.model),u.xp6(5),u.Oqu(t.product.year),u.xp6(5),u.Oqu(t.product.vincode),u.xp6(5),u.Oqu(t.product.run),u.xp6(5),u.Oqu(t.product.gasType)}}function nY(n,e){if(1&n&&(u.TgZ(0,"table",0)(1,"tbody")(2,"tr")(3,"th",1),u._uU(4,"Brand"),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.qZA()(),u.TgZ(7,"tr")(8,"th",1),u._uU(9,"Model"),u.qZA(),u.TgZ(10,"td"),u._uU(11),u.qZA()(),u.TgZ(12,"tr")(13,"th",1),u._uU(14,"Year"),u.qZA(),u.TgZ(15,"td"),u._uU(16),u.qZA()(),u.TgZ(17,"tr")(18,"th",1),u._uU(19,"Previous Price"),u.qZA(),u.TgZ(20,"td"),u._uU(21),u.qZA()()()()),2&n){const t=u.oxw();u.xp6(6),u.Oqu(t.product.brand),u.xp6(5),u.Oqu(t.product.model),u.xp6(5),u.Oqu(t.product.year),u.xp6(5),u.Oqu(t.product.prePrice)}}const iY=[{path:"upload-success",component:eY},{path:"",component:J5},{path:"product-registration",component:yW},{path:"info-submit",component:(()=>{class n{constructor(t,i,r){this.router=t,this.stateM=i,this.db=r,this.tradeInData={},this.images={},this.user={},this.product={}}ngOnInit(){this.getFullTradeInData()}checkPageDataValidity(){}getFullTradeInData(){this.stateM.getFullTradeInData().subscribe(t=>{this.tradeInData=t,this.user=t.user,this.product=t.product,this.checkPageDataValidity()})}onCancelBtnClick(){this.stateM.deleteFullTradeInData(),this.router.navigate(["/upload-success"])}onFullTradeInDataSubmit(){this.db.sendTradeInDataToFireBase(this.tradeInData),this.stateM.deleteFullTradeInData(),this.router.navigate(["/upload-success"])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ii),u.Y36(Iv),u.Y36(oj))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-info-submit"]],decls:20,vars:4,consts:[[1,"table"],["scope","row"],["class","table",4,"ngIf"],[1,"button-group"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(u.TgZ(0,"article")(1,"table",0)(2,"tbody")(3,"tr")(4,"th",1),u._uU(5,"Full Name"),u.qZA(),u.TgZ(6,"td"),u._uU(7),u.qZA()(),u.TgZ(8,"tr")(9,"th",1),u._uU(10,"Email"),u.qZA(),u.TgZ(11,"td"),u._uU(12),u.qZA()()()(),u.YNc(13,tY,32,6,"table",2),u.YNc(14,nY,22,4,"table",2),u.TgZ(15,"div",3)(16,"button",4),u.NdJ("click",function(){return i.onCancelBtnClick()}),u._uU(17,"Cancel"),u.qZA(),u.TgZ(18,"button",5),u.NdJ("click",function(){return i.onFullTradeInDataSubmit()}),u._uU(19,"Submit"),u.qZA()()()),2&t&&(u.xp6(7),u.Oqu(i.user.fullname),u.xp6(5),u.Oqu(i.user.email),u.xp6(1),u.Q6J("ngIf","car"==i.product.productType),u.xp6(1),u.Q6J("ngIf","tech"==i.product.productType))},directives:[Yn,RS],styles:["table[_ngcontent-%COMP%]{width:750px;border-collapse:collapse;margin:50px auto}tr[_ngcontent-%COMP%]:nth-of-type(odd){background:#eee}th[_ngcontent-%COMP%]{background:#2a48f5;color:#fff;font-weight:700}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;text-align:left;font-size:18px}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}button[_ngcontent-%COMP%]{width:10%;margin:2%}"]}),n})()}];let rY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Pf.forRoot(iY)],Pf]}),n})(),sY=(()=>{class n{constructor(){this.title="artile-page"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&u._UZ(0,"router-outlet")},directives:[Bu],styles:[""]}),n})();const Sj="firebasestorage.googleapis.com",Tj="storageBucket";class Ai extends N.ZR{constructor(e,t){super(JO(e),`Firebase Storage: ${t} (${JO(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ai.prototype)}_codeEquals(e){return JO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function JO(n){return"storage/"+n}function eP(){return new Ai("unknown","An unknown error occurred, please check the error payload for server response.")}function Ij(){return new Ai("canceled","User canceled the upload/download.")}function Aj(){return new Ai("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function H_(n){return new Ai("invalid-argument",n)}function Mj(){return new Ai("app-deleted","The Firebase app was deleted.")}function xj(n){return new Ai("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Kw(n,e){return new Ai("invalid-format","String does not match format '"+n+"': "+e)}function Yw(n){throw new Ai("internal-error","Internal error: "+n)}class Ts{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Ts.makeFromUrl(e,t)}catch(r){return new Ts(e,"")}if(""===i.path)return i;throw function gY(n){return new Ai("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function y(Ge){Ge.path_=decodeURIComponent(Ge.path)}const D=t.replace(/[.]/g,"\\."),Ve=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Ge){"/"===Ge.path.charAt(Ge.path.length-1)&&(Ge.path_=Ge.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===Sj?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ge=0;Ge<Ve.length;Ge++){const Dt=Ve[Ge],Mt=Dt.regex.exec(e);if(Mt){let Hi=Mt[Dt.indices.path];Hi||(Hi=""),i=new Ts(Mt[Dt.indices.bucket],Hi),Dt.postModify(i);break}}if(null==i)throw function pY(n){return new Ai("invalid-url","Invalid URL '"+n+"'.")}(e);return i}}class vY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function xT(n){return"string"==typeof n||n instanceof String}function Rj(n){return tP()&&n instanceof Blob}function tP(){return"undefined"!=typeof Blob}function nP(n,e,t,i){if(i<e)throw H_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw H_(`Invalid value for '${n}'. Expected ${t} or less.`)}function od(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function kj(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var Oh=(()=>{return(n=Oh||(Oh={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Oh;var n})();class SY{constructor(e,t,i,r,s,l,d,p,y,w,D){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,O)=>{this.resolve_=x,this.reject_=O,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,l=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function CY(n){return void 0!==n}(p)?s():s(p)}catch(p){l(p)}else if(null!==d){const p=eP();p.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,p):p)}else l(r.canceled?this.appDelete_?Mj():Ij():function fY(){return new Ai("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new RT(!1,null,!0)):this.backoffId_=function bY(n,e,t){let i=1,r=null,s=null,l=!1,d=0;function p(){return 2===d}let y=!1;function w(...re){y||(y=!0,e.apply(null,re))}function D(re){r=setTimeout(()=>{r=null,n(O,p())},re)}function x(){s&&clearTimeout(s)}function O(re,...Oe){if(y)return void x();if(re)return x(),void w.call(null,re,...Oe);if(p()||l)return x(),void w.call(null,re,...Oe);let Ve;i<64&&(i*=2),1===d?(d=2,Ve=0):Ve=1e3*(i+Math.random()),D(Ve)}let L=!1;function Y(re){L||(L=!0,x(),!y&&(null!==r?(re||(d=2),clearTimeout(r),D(0)):re||(d=1)))}return D(0),s=setTimeout(()=>{l=!0,Y(!0)},t),Y}((i,r)=>{if(r)return void i(!1,new RT(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const d=s.getErrorCode()===Oh.NO_ERROR,p=s.getStatus();if(!d||this.isRetryStatusCode_(p)){const w=s.getErrorCode()===Oh.ABORT;return void i(!1,new RT(!1,null,w))}const y=-1!==this.successCodes_.indexOf(p);i(!0,new RT(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function wY(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||s}}class RT{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function kY(...n){const e=function RY(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(tP())return new Blob(n);throw new Ai("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ya={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class iP{constructor(e,t){this.data=e,this.contentType=t||null}}function rP(n,e){switch(n){case ya.RAW:return new iP(Oj(e));case ya.BASE64:case ya.BASE64URL:return new iP(Pj(n,e));case ya.DATA_URL:return new iP(function FY(n){const e=new Nj(n);return e.base64?Pj(ya.BASE64,e.rest):function NY(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Kw(ya.DATA_URL,"Malformed data URL.")}return Oj(e)}(e.rest)}(e),function LY(n){return new Nj(n).contentType}(e))}throw eP()}function Oj(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function Pj(n,e){switch(n){case ya.BASE64:{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw Kw(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ya.BASE64URL:{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw Kw(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function PY(n){return atob(n)}(e)}catch(r){throw Kw(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class Nj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Kw(ya.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function BY(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class eu{constructor(e,t){let i=0,r="";Rj(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Rj(this.data_)){const r=function OY(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new eu(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new eu(i,!0)}}static getBlob(...e){if(tP()){const t=e.map(i=>i instanceof eu?i.data_:i);return new eu(kY.apply(null,t))}{const t=e.map(l=>xT(l)?rP(ya.RAW,l).data:l.data_);let i=0;t.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)r[s++]=l[d]}),new eu(r,!0)}}uploadData(){return this.data_}}function sP(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function DY(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Fj(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function jY(n,e){return e}class Qs{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||jY}}let kT=null;function Qw(){if(kT)return kT;const n=[];n.push(new Qs("bucket")),n.push(new Qs("generation")),n.push(new Qs("metageneration")),n.push(new Qs("name","fullPath",!0));const t=new Qs("name");t.xform=function e(s,l){return function HY(n){return!xT(n)||n.length<2?n:Fj(n)}(l)},n.push(t);const r=new Qs("size");return r.xform=function i(s,l){return void 0!==l?Number(l):l},n.push(r),n.push(new Qs("timeCreated")),n.push(new Qs("updated")),n.push(new Qs("md5Hash",null,!0)),n.push(new Qs("cacheControl",null,!0)),n.push(new Qs("contentDisposition",null,!0)),n.push(new Qs("contentEncoding",null,!0)),n.push(new Qs("contentLanguage",null,!0)),n.push(new Qs("contentType",null,!0)),n.push(new Qs("metadata","customMetadata",!0)),kT=n,kT}function Lj(n,e,t){const i=sP(e);return null===i?null:function zY(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const l=t[s];i[l.local]=l.xform(i,e[l.server])}return function GY(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Ts(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}function oP(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const Bj="prefixes";class tu{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function nu(n){if(!n)throw eP()}function OT(n,e){return function t(i,r){const s=Lj(n,r,e);return nu(null!==s),s}}function G_(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function dY(){return new Ai("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function uY(){return new Ai("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function cY(n){return new Ai("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function hY(n){return new Ai("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function Xw(n){const e=G_(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function lY(n){return new Ai("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function Uj(n,e,t){const r=od(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new tu(r,"GET",OT(n,t),l);return d.errorHandler=Xw(e),d}function YY(n,e,t,i,r){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=od(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,w=new tu(d,"GET",function ZY(n,e){return function t(i,r){const s=function WY(n,e,t){const i=sP(t);return null===i?null:function qY(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Bj])for(const r of t[Bj]){const s=r.replace(/\/$/,""),l=n._makeStorageReference(new Ts(e,s));i.prefixes.push(l)}if(t.items)for(const r of t.items){const s=n._makeStorageReference(new Ts(e,r.name));i.items.push(s)}return i}(n,e,i)}(n,e,r);return nu(null!==s),s}}(n,e.bucket),y);return w.urlParams=s,w.errorHandler=G_(e),w}function Hj(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function e7(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class PT{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function aP(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){nu(!1)}return nu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const s7={STATE_CHANGED:"state_changed"},Xs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lP(n){switch(n){case"running":case"pausing":case"canceling":return Xs.RUNNING;case"paused":return Xs.PAUSED;case"success":return Xs.SUCCESS;case"canceled":return Xs.CANCELED;default:return Xs.ERROR}}class o7{constructor(e,t,i){if(function EY(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=i?i:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function z_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class l7 extends class a7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw Yw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Yw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function oc(){return new l7}class qj{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=Qw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function t7(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),l=Hj(e,i,r),d={name:l.fullPath},p=od(s,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=oP(l,t),L=new tu(p,"POST",function O(Y){let re;aP(Y);try{re=Y.getResponseHeader("X-Goog-Upload-URL")}catch(Oe){nu(!1)}return nu(xT(re)),re},n.maxUploadRetryTime);return L.urlParams=d,L.headers=w,L.body=D,L.errorHandler=G_(e),L}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,oc,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function n7(n,e,t,i){const p=new tu(t,"POST",function s(y){const w=aP(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch(O){nu(!1)}D||nu(!1);const x=Number(D);return nu(!isNaN(x)),new PT(x,i.size(),"final"===w)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=G_(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,oc,t,i);this._request=s,s.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new PT(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let l;try{l=function r7(n,e,t,i,r,s,l,d){const p=new PT(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function _Y(){return new Ai("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let w=y;r>0&&(w=Math.min(w,r));const D=p.current,L={"X-Goog-Upload-Command":w===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},Y=i.slice(D,D+w);if(null===Y)throw Aj();const Ve=new tu(t,"POST",function re(Ge,Dt){const Mt=aP(Ge,["active","final"]),nn=p.current+w,Hi=i.size();let Ca;return Ca="final"===Mt?OT(e,s)(Ge,Dt):null,new PT(nn,Hi,"final"===Mt,Ca)},e.maxUploadRetryTime);return Ve.headers=L,Ve.body=Y.uploadData(),Ve.progressCallback=d||null,Ve.errorHandler=G_(n),Ve}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(l,oc,r,s);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=Uj(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,oc,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function Gj(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let Ve="";for(let Ge=0;Ge<2;Ge++)Ve+=Math.random().toString().slice(2);return Ve}();l["Content-Type"]="multipart/related; boundary="+p;const y=Hj(e,i,r),w=oP(y,t),O=eu.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===O)throw Aj();const L={name:y.fullPath},Y=od(s,n.host,n._protocol),Oe=n.maxUploadRetryTime,Ue=new tu(Y,"POST",OT(n,t),Oe);return Ue.urlParams=L,Ue.headers=l,Ue.body=O.uploadData(),Ue.errorHandler=G_(e),Ue}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,oc,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ij(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=lP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new o7(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(lP(this._state)){case Xs.SUCCESS:z_(this._resolve.bind(null,this.snapshot))();break;case Xs.CANCELED:case Xs.ERROR:z_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(lP(this._state)){case Xs.RUNNING:case Xs.PAUSED:e.next&&z_(e.next.bind(e,this.snapshot))();break;case Xs.SUCCESS:e.complete&&z_(e.complete.bind(e))();break;default:e.error&&z_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class tg{constructor(e,t){this._service=e,this._location=t instanceof Ts?t:Ts.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new tg(e,t)}get root(){const e=new Ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fj(this._location.path)}get storage(){return this._service}get parent(){const e=function VY(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ts(this._location.bucket,e);return new tg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw xj(e)}}function Zj(n,e,t){return cP.apply(this,arguments)}function cP(){return(cP=(0,Ce.Z)(function*(n,e,t){const r=yield Kj(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield Zj(n,e,r.nextPageToken))})).apply(this,arguments)}function Kj(n,e){null!=e&&"number"==typeof e.maxResults&&nP("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=YY(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,oc)}function b7(n){n._throwIfRoot("getDownloadURL");const e=function QY(n,e,t){const r=od(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new tu(r,"GET",function KY(n,e){return function t(i,r){const s=Lj(n,r,e);return nu(null!==s),function $Y(n,e,t,i){const r=sP(e);if(null===r||!xT(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(y=>{const D=n.fullPath;return od("/b/"+l(n.bucket)+"/o/"+l(D),t,i)+kj({alt:"media",token:y})})[0]}(s,r,n.host,n._protocol)}}(n,t),l);return d.errorHandler=Xw(e),d}(n.storage,n._location,Qw());return n.storage.makeRequestWithTokens(e,oc).then(t=>{if(null===t)throw function yY(){return new Ai("no-download-url","The given file does not have any download URLs.")}();return t})}function Yj(n,e){const t=function UY(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new Ts(n._location.bucket,t);return new tg(n.storage,i)}function Qj(n,e){if(n instanceof uP){const t=n;if(null==t._bucket)throw function mY(){return new Ai("no-default-bucket","No default bucket found. Did you set the '"+Tj+"' property when initializing the app?")}();const i=new tg(t,t._bucket);return null!=e?Qj(i,e):i}return void 0!==e?Yj(n,e):n}function D7(n,e){if(e&&function C7(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof uP)return function E7(n,e){return new tg(n,e)}(n,e);throw H_("To use ref(service, url), the first argument must be a Storage instance.")}return Qj(n,e)}function Xj(n,e){const t=null==e?void 0:e[Tj];return null==t?null:Ts.makeFromBucketSpec(t,n)}class uP{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=Sj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Ts.makeFromBucketSpec(r,this._host):Xj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ts.makeFromBucketSpec(this._url,e):Xj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tg(this,e)}_makeRequest(e,t,i,r){if(this._deleted)return new vY(Mj());{const s=function xY(n,e,t,i,r,s){const l=kj(n.urlParams),d=n.url+l,p=Object.assign({},n.headers);return function AY(n,e){e&&(n["X-Firebase-GMPID"]=e)}(p,e),function TY(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(p,t),function IY(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(p,s),function MY(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(p,i),new SY(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(e,this._appId,i,r,t,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var i=this;return(0,Ce.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const Jj="@firebase/storage";function nH(n,e){return D7(n=(0,N.m9)(n),e)}function N7(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new uP(t,i,r,e,Zs.SDK_VERSION)}!function F7(){(0,Zs._registerComponent)(new Jl.wA("storage",N7,"PUBLIC").setMultipleInstances(!0)),(0,Zs.registerVersion)(Jj,"0.9.9",""),(0,Zs.registerVersion)(Jj,"0.9.9","esm2017")}();class NT{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class iH{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new NT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new NT(i,this,this._ref))},t)}on(e,t,i,r){let s;return t&&(s="function"==typeof t?l=>t(new NT(l,this,this._ref)):{next:t.next?l=>t.next(new NT(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class rH{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ad(e,this._service))}get items(){return this._delegate.items.map(e=>new ad(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ad{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function O7(n,e){return Yj(n,e)}(this._delegate,e);return new ad(t,this.storage)}get root(){return new ad(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ad(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new iH(function T7(n,e,t){return function g7(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new qj(n,new eu(e),t)}(n=(0,N.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ya.RAW,i){this._throwIfRoot("putString");const r=rP(t,e),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new iH(new qj(this._delegate,new eu(r.data,!0),s),this)}listAll(){return function x7(n){return function _7(n){const e={prefixes:[],items:[]};return Zj(n,e).then(()=>e)}(n=(0,N.m9)(n))}(this._delegate).then(e=>new rH(e,this.storage))}list(e){return function M7(n,e){return Kj(n=(0,N.m9)(n),e)}(this._delegate,e||void 0).then(t=>new rH(t,this.storage))}getMetadata(){return function I7(n){return function y7(n){n._throwIfRoot("getMetadata");const e=Uj(n.storage,n._location,Qw());return n.storage.makeRequestWithTokens(e,oc)}(n=(0,N.m9)(n))}(this._delegate)}updateMetadata(e){return function A7(n,e){return function v7(n,e){n._throwIfRoot("updateMetadata");const t=function XY(n,e,t,i){const s=od(e.fullServerUrl(),n.host,n._protocol),d=oP(t,i),y=n.maxOperationRetryTime,w=new tu(s,"PATCH",OT(n,i),y);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=d,w.errorHandler=Xw(e),w}(n.storage,n._location,e,Qw());return n.storage.makeRequestWithTokens(t,oc)}(n=(0,N.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function R7(n){return b7(n=(0,N.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function k7(n){return function w7(n){n._throwIfRoot("deleteObject");const e=function JY(n,e){const i=od(e.fullServerUrl(),n.host,n._protocol),d=new tu(i,"DELETE",function l(p,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=Xw(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,oc)}(n=(0,N.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw xj(e)}}class sH{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(oH(e))throw H_("ref() expected a child path but got a URL, use refFromURL instead.");return new ad(nH(this._delegate,e),this)}refFromURL(e){if(!oH(e))throw H_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ts.makeFromUrl(e,this._delegate.host)}catch(t){throw H_("refFromUrl() expected a valid full URL but got an invalid one.")}return new ad(nH(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function P7(n,e,t,i={}){!function S7(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,N.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function oH(n){return/^[A-Za-z]+:\/\//.test(n)}function U7(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new sH(t,i)}function aH(n){const e=function H7(n){return new tn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const s=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){s()}}).pipe(zC(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,st.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function FT(n){return{getDownloadURL:()=>Ke(void 0).pipe(vn.fc,Cn(()=>n.getDownloadURL()),vn.iC),getMetadata:()=>Ke(void 0).pipe(vn.fc,Cn(()=>n.getMetadata()),vn.iC),delete:()=>(0,_n.D)(n.delete()),child:e=>FT(n.child(e)),updateMetadata:e=>(0,_n.D)(n.updateMetadata(e)),put:(e,t)=>aH(n.put(e,t)),putString:(e,t,i)=>aH(n.putString(e,t,i)),list:e=>(0,_n.D)(n.list(e)),listAll:()=>(0,_n.D)(n.listAll())}}!function j7(n){const e={TaskState:Xs,TaskEvent:s7,StringFormat:ya,Storage:sH,Reference:ad};n.INTERNAL.registerComponent(new Jl.wA("storage-compat",U7,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(dk.Z);const G7=new u.OlP("angularfire2.storageBucket"),z7=new u.OlP("angularfire2.storage.maxUploadRetryTime"),$7=new u.OlP("angularfire2.storage.maxOperationRetryTime"),q7=new u.OlP("angularfire2.storage.use-emulator");let W7=(()=>{class n{constructor(t,i,r,s,l,d,p,y,w,D){const x=(0,ur.on)(t,l,i);this.storage=(0,ur.cc)(`${x.name}.storage.${r}`,"AngularFireStorage",x.name,()=>{const O=l.runOutsideAngular(()=>x.storage(r||void 0)),L=w;return L&&O.useEmulator(...L),p&&O.setMaxUploadRetryTime(p),y&&O.setMaxOperationRetryTime(y),O},[p,y])}ref(t){return FT(this.storage.ref(t))}refFromURL(t){return FT(this.storage.refFromURL(t))}upload(t,i,r){return FT(this.storage.ref(t)).put(i,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ur.Dh),u.LFG(ur.xv,8),u.LFG(G7,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(vn.HU),u.LFG(z7,8),u.LFG($7,8),u.LFG(q7,8),u.LFG($w,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Z7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),K7=(()=>{class n{constructor(){DT.Z.registerVersion("angularfire",vn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[W7],imports:[Z7]}),n})();function dP(){return(0,kn.e)((n,e)=>{let t,i=!1;n.subscribe((0,yn.x)(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}var at,Y7="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ld={},hP=hP||{},Nt=Y7||self;function LT(){}function fP(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Jw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var pP="closure_uid_"+(1e9*Math.random()>>>0),X7=0;function J7(n,e,t){return n.call.apply(n.bind,arguments)}function eQ(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Yr(n,e,t){return(Yr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?J7:eQ).apply(null,arguments)}function BT(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Qr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[r].apply(i,l)}}function Ph(){this.s=this.s,this.o=this.o}var nQ={};Ph.prototype.s=!1,Ph.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Q7(n){return Object.prototype.hasOwnProperty.call(n,pP)&&n[pP]||(n[pP]=++X7)}(this);delete nQ[n]}},Ph.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lH=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},cH=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const i=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<i;s++)s in r&&e.call(t,r[s],s,n)};function uH(n){return Array.prototype.concat.apply([],arguments)}function gP(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function VT(n){return/^[\s\xa0]*$/.test(n)}var eo,dH=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Js(n,e){return-1!=n.indexOf(e)}function mP(n,e){return n<e?-1:n>e?1:0}e:{var hH=Nt.navigator;if(hH){var fH=hH.userAgent;if(fH){eo=fH;break e}}eo=""}function _P(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function pH(n){const e={};for(const t in n)e[t]=n[t];return e}var gH="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mH(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<gH.length;s++)t=gH[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function yP(n){return yP[" "](n),n}yP[" "]=LT;var UT,n,sQ=Js(eo,"Opera"),$_=Js(eo,"Trident")||Js(eo,"MSIE"),_H=Js(eo,"Edge"),vP=_H||$_,yH=Js(eo,"Gecko")&&!(Js(eo.toLowerCase(),"webkit")&&!Js(eo,"Edge"))&&!(Js(eo,"Trident")||Js(eo,"MSIE"))&&!Js(eo,"Edge"),oQ=Js(eo.toLowerCase(),"webkit")&&!Js(eo,"Edge");function vH(){var n=Nt.document;return n?n.documentMode:void 0}e:{var bP="",wP=(n=eo,yH?/rv:([^\);]+)(\)|;)/.exec(n):_H?/Edge\/([\d\.]+)/.exec(n):$_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):oQ?/WebKit\/(\S+)/.exec(n):sQ?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(wP&&(bP=wP?wP[1]:""),$_){var CP=vH();if(null!=CP&&CP>parseFloat(bP)){UT=String(CP);break e}}UT=bP}var aQ={};var cQ=Nt.document&&$_&&(vH()||parseInt(UT,10))||void 0,uQ=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Nt.addEventListener("test",LT,e),Nt.removeEventListener("test",LT,e)}catch(t){}return n}();function Is(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function e0(n,e){if(Is.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(yH){e:{try{yP(e.nodeName);var r=!0;break e}catch(s){}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:dQ[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&e0.Z.h.call(this)}}Is.prototype.h=function(){this.defaultPrevented=!0},Qr(e0,Is);var dQ={2:"touch",3:"pen",4:"mouse"};e0.prototype.h=function(){e0.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var t0="closure_listenable_"+(1e6*Math.random()|0),hQ=0;function fQ(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ia=r,this.key=++hQ,this.ca=this.fa=!1}function jT(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function HT(n){this.src=n,this.g={},this.h=0}function DP(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=lH(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(jT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function SP(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==i)return r}return-1}HT.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=SP(n,e,i,r);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new fQ(e,this.src,s,!!i,r)).fa=t,n.push(e)),e};var TP="closure_lm_"+(1e6*Math.random()|0),IP={};function wH(n,e,t,i,r){if(i&&i.once)return EH(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)wH(n,e[s],t,i,r);return null}return t=RP(t),n&&n[t0]?n.N(e,t,Jw(i)?!!i.capture:!!i,r):CH(n,e,t,!1,i,r)}function CH(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var l=Jw(r)?!!r.capture:!!r,d=MP(n);if(d||(n[TP]=d=new HT(n)),(t=d.add(e,t,i,l,s)).proxy)return t;if(i=function pQ(){var e=gQ;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)uQ||(r=l),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(SH(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function EH(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)EH(n,e[s],t,i,r);return null}return t=RP(t),n&&n[t0]?n.O(e,t,Jw(i)?!!i.capture:!!i,r):CH(n,e,t,!0,i,r)}function DH(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)DH(n,e[s],t,i,r);else i=Jw(i)?!!i.capture:!!i,t=RP(t),n&&n[t0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=SP(s=n.g[e],t,i,r))&&(jT(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=MP(n))&&(e=n.g[e.toString()],n=-1,e&&(n=SP(e,t,i,r)),(t=-1<n?e[n]:null)&&AP(t))}function AP(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[t0])DP(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(SH(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=MP(e))?(DP(t,n),0==t.h&&(t.src=null,e[TP]=null)):jT(n)}}}function SH(n){return n in IP?IP[n]:IP[n]="on"+n}function gQ(n,e){if(n.ca)n=!0;else{e=new e0(e,this);var t=n.listener,i=n.ia||n.src;n.fa&&AP(n),n=t.call(i,e)}return n}function MP(n){return(n=n[TP])instanceof HT?n:null}var xP="__closure_events_fn_"+(1e9*Math.random()>>>0);function RP(n){return"function"==typeof n?n:(n[xP]||(n[xP]=function(e){return n.handleEvent(e)}),n[xP])}function Pr(){Ph.call(this),this.i=new HT(this),this.P=this,this.I=null}function Xr(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new Is(e,n);else if(e instanceof Is)e.target=e.target||n;else{var r=e;mH(e=new Is(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];r=GT(l,i,!0,e)&&r}if(r=GT(l=e.g=n,i,!0,e)&&r,r=GT(l,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=GT(l=e.g=t[s],i,!1,e)&&r}function GT(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.ca&&l.capture==t){var d=l.listener,p=l.ia||l.src;l.fa&&DP(n.i,l),r=!1!==d.call(p,i)&&r}}return r&&!i.defaultPrevented}Qr(Pr,Ph),Pr.prototype[t0]=!0,Pr.prototype.removeEventListener=function(n,e,t,i){DH(this,n,e,t,i)},Pr.prototype.M=function(){if(Pr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)jT(t[i]);delete n.g[e],n.h--}}this.I=null},Pr.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Pr.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var kP=Nt.JSON.stringify;function mQ(){var n=IH;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var PP,TH=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new yQ,n=>n.reset());class yQ{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function vQ(n){Nt.setTimeout(()=>{throw n},0)}function OP(n,e){PP||function bQ(){var n=Nt.Promise.resolve(void 0);PP=function(){n.then(wQ)}}(),NP||(PP(),NP=!0),IH.add(n,e)}var NP=!1,IH=new class _Q{constructor(){this.h=this.g=null}add(e,t){const i=TH.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function wQ(){for(var n;n=mQ();){try{n.h.call(n.g)}catch(t){vQ(t)}var e=TH;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}NP=!1}function zT(n,e){Pr.call(this),this.h=n||1,this.g=e||Nt,this.j=Yr(this.kb,this),this.l=Date.now()}function FP(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function LP(n,e,t){if("function"==typeof n)t&&(n=Yr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Yr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Nt.setTimeout(n,e||0)}function AH(n){n.g=LP(()=>{n.g=null,n.i&&(n.i=!1,AH(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Qr(zT,Pr),(at=zT.prototype).da=!1,at.S=null,at.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Xr(this,"tick"),this.da&&(FP(this),this.start()))}},at.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.M=function(){zT.Z.M.call(this),FP(this),delete this.g};class CQ extends Ph{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:AH(this)}M(){super.M(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function n0(n){Ph.call(this),this.h=n,this.g={}}Qr(n0,Ph);var MH=[];function xH(n,e,t,i){Array.isArray(t)||(t&&(MH[0]=t.toString()),t=MH);for(var r=0;r<t.length;r++){var s=wH(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function RH(n){_P(n.g,function(e,t){this.g.hasOwnProperty(t)&&AP(e)},n),n.g={}}function $T(){this.g=!0}function q_(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function TQ(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<r.length;l++)r[l]=""}}}return kP(t)}catch(d){return e}}(n,t)+(i?" "+i:"")})}n0.prototype.M=function(){n0.Z.M.call(this),RH(this)},n0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$T.prototype.Aa=function(){this.g=!1},$T.prototype.info=function(){};var ng={},kH=null;function qT(){return kH=kH||new Pr}function OH(n){Is.call(this,ng.Ma,n)}function r0(n){const e=qT();Xr(e,new OH(e,n))}function PH(n,e){Is.call(this,ng.STAT_EVENT,n),this.stat=e}function to(n){const e=qT();Xr(e,new PH(e,n))}function NH(n,e){Is.call(this,ng.Na,n),this.size=e}function s0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){n()},e)}ng.Ma="serverreachability",Qr(OH,Is),ng.STAT_EVENT="statevent",Qr(PH,Is),ng.Na="timingevent",Qr(NH,Is);var WT={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},FH={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function BP(){}function BH(){}BP.prototype.h=null;var jP,o0={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function VP(){Is.call(this,"d")}function UP(){Is.call(this,"c")}function ZT(){}function a0(n,e,t,i){this.l=n,this.j=e,this.m=t,this.X=i||1,this.V=new n0(this),this.P=IQ,this.W=new zT(n=vP?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new VH}function VH(){this.i=null,this.g="",this.h=!1}Qr(VP,Is),Qr(UP,Is),Qr(ZT,BP),ZT.prototype.g=function(){return new XMLHttpRequest},ZT.prototype.i=function(){return{}},jP=new ZT;var IQ=45e3,HP={},KT={};function GP(n,e,t){n.K=1,n.v=eI(cd(e)),n.s=t,n.U=!0,UH(n,null)}function UH(n,e){n.F=Date.now(),l0(n),n.A=cd(n.v);var t=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),KH(t.h,"t",i),n.C=0,t=n.l.H,n.h=new VH,n.g=yG(n.l,t?e:null,!n.s),0<n.O&&(n.L=new CQ(Yr(n.Ia,n,n.g),n.O)),xH(n.V,n.g,"readystatechange",n.gb),e=n.H?pH(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),r0(1),function EQ(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var l="",d=s.split("&"),p=0;p<d.length;p++){var y=d[p].split("=");if(1<y.length){var w=y[0];y=y[1];var D=w.split("_");l=2<=D.length&&"type"==D[1]?l+(w+"=")+y+"&":l+(w+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function jH(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function HH(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=AQ(n,t),r==KT){4==e&&(n.o=4,to(14),i=!1),q_(n.j,n.m,null,"[Incomplete Response]");break}if(r==HP){n.o=4,to(15),q_(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}q_(n.j,n.m,r,null),zP(n,r)}jH(n)&&r!=KT&&r!=HP&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,to(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),tN(e),e.L=!0,to(11))):(q_(n.j,n.m,t,"[Invalid Chunked Response]"),ig(n),c0(n))}function AQ(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?KT:(t=Number(e.substring(t,i)),isNaN(t)?HP:(i+=1)+t>e.length?KT:(e=e.substr(i,t),n.C=i+t,e))}function l0(n){n.Y=Date.now()+n.P,GH(n,n.P)}function GH(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=s0(Yr(n.eb,n),e)}function YT(n){n.B&&(Nt.clearTimeout(n.B),n.B=null)}function c0(n){0==n.l.G||n.I||pG(n.l,n)}function ig(n){YT(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,FP(n.W),RH(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function zP(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||WP(t.i,n)))if(t.I=n.N,!n.J&&WP(t.i,n)&&3==t.G){try{var i=t.Ca.g.parse(e)}catch(y){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(t.u)t.ta=r[1],0<t.ta-t.U&&37500>r[2]&&t.N&&0==t.A&&!t.v&&(t.v=s0(Yr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;oI(t),rI(t)}eN(t),to(18)}if(1>=XH(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else og(t,11)}else if((n.J||t.g==n)&&oI(t),!VT(e))for(r=t.Ca.g.parse(e),e=0;e<r.length;e++){let y=r[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const w=y[3];null!=w&&(t.ma=w,t.h.info("VER="+t.ma));const D=y[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.K=i=1.5*x,t.h.info("backChannelRequestTimeoutMs_="+i)),i=t;const O=n.g;if(O){const L=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(L){var s=i.i;!s.g&&(Js(L,"spdy")||Js(L,"quic")||Js(L,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(ZP(s,s.h),s.h=null))}if(i.D){const Y=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;Y&&(i.sa=Y,li(i.F,i.D,Y))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((i=t).oa=_G(i,i.H?i.la:null,i.W),l.J){JH(i.i,l);var d=l,p=i.K;p&&d.setTimeout(p),d.B&&(YT(d),l0(d)),i.g=l}else hG(i);0<t.l.length&&sI(t)}else"stop"!=y[0]&&"close"!=y[0]||og(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?og(t,7):XP(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}r0(4)}catch(y){}}function $P(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(fP(n)||"string"==typeof n)cH(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(fP(n)||"string"==typeof n){t=[];for(var i=n.length,r=0;r<i;r++)t.push(r)}else for(r in t=[],i=0,n)t[i++]=r;i=function MQ(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(fP(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length;for(var s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}}function W_(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var i=0;i<t;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof W_)for(t=n.T(),i=0;i<t.length;i++)this.set(t[i],n.get(t[i]));else for(i in n)this.set(i,n[i])}function qP(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var i=n.g[e];rg(n.h,i)&&(n.g[t++]=i),e++}n.g.length=t}if(n.i!=n.g.length){var r={};for(t=e=0;e<n.g.length;)rg(r,i=n.g[e])||(n.g[t++]=i,r[i]=1),e++;n.g.length=t}}function rg(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(at=a0.prototype).setTimeout=function(n){this.P=n},at.gb=function(n){n=n.target;const e=this.L;e&&3==ud(n)?e.l():this.Ia(n)},at.Ia=function(n){try{if(n==this.g)e:{const w=ud(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>w)&&(3!=w||vP||this.g&&(this.h.h||this.g.ga()||aG(this.g)))){this.I||4!=w||7==e||r0(8==e||0>=D?3:2),YT(this);var t=this.g.ba();this.N=t;t:if(jH(this)){var i=aG(this.g);n="";var r=i.length,s=4==ud(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ig(this),c0(this);var l="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function DQ(n,e,t,i,r,s,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.X,w,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!VT(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,to(12),ig(this),c0(this);break e}q_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zP(this,t)}this.U?(HH(this,w,l),vP&&this.i&&3==w&&(xH(this.V,this.W,"tick",this.fb),this.W.start())):(q_(this.j,this.m,l,null),zP(this,l)),4==w&&ig(this),this.i&&!this.I&&(4==w?pG(this.l,this):(this.i=!1,l0(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,to(12)):(this.o=0,to(13)),ig(this),c0(this)}}}catch(w){}},at.fb=function(){if(this.g){var n=ud(this.g),e=this.g.ga();this.C<e.length&&(YT(this),HH(this,n,e),this.i&&4!=n&&l0(this))}},at.cancel=function(){this.I=!0,ig(this)},at.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function SQ(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(r0(3),to(17)),ig(this),this.o=2,c0(this)):GH(this,this.Y-n)},(at=W_.prototype).R=function(){qP(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},at.T=function(){return qP(this),this.g.concat()},at.get=function(n,e){return rg(this.h,n)?this.h[n]:e},at.set=function(n,e){rg(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},at.forEach=function(n,e){for(var t=this.T(),i=0;i<t.length;i++){var r=t[i],s=this.get(r);n.call(e,s,r,this)}};var zH=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function sg(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof sg){this.g=void 0!==e?e:n.g,QT(this,n.j),this.s=n.s,XT(this,n.i),JT(this,n.m),this.l=n.l,e=n.h;var t=new h0;t.i=e.i,e.g&&(t.g=new W_(e.g),t.h=e.h),$H(this,t),this.o=n.o}else n&&(t=String(n).match(zH))?(this.g=!!e,QT(this,t[1]||"",!0),this.s=u0(t[2]||""),XT(this,t[3]||"",!0),JT(this,t[4]),this.l=u0(t[5]||"",!0),$H(this,t[6]||"",!0),this.o=u0(t[7]||"")):(this.g=!!e,this.h=new h0(null,this.g))}function cd(n){return new sg(n)}function QT(n,e,t){n.j=t?u0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function XT(n,e,t){n.i=t?u0(e,!0):e}function JT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function $H(n,e,t){e instanceof h0?(n.h=e,function BQ(n,e){e&&!n.j&&(Nh(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(WH(this,i),KH(this,r,t))},n)),n.j=e}(n.h,n.g)):(t||(e=d0(e,FQ)),n.h=new h0(e,n.g))}function li(n,e,t){n.h.set(e,t)}function eI(n){return li(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function u0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function d0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,OQ),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function OQ(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}sg.prototype.toString=function(){var n=[],e=this.j;e&&n.push(d0(e,qH,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(d0(e,qH,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(d0(t,"/"==t.charAt(0)?NQ:PQ,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",d0(t,LQ)),n.join("")};var qH=/[#\/\?@]/g,PQ=/[#\?:]/g,NQ=/[#\?]/g,FQ=/[#\?@]/g,LQ=/#/g;function h0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Nh(n){n.g||(n.g=new W_,n.h=0,n.i&&function xQ(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function WH(n,e){Nh(n),e=Z_(n,e),rg(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,rg((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&qP(n)))}function ZH(n,e){return Nh(n),e=Z_(n,e),rg(n.g.h,e)}function KH(n,e,t){WH(n,e),0<t.length&&(n.i=null,n.g.set(Z_(n,e),gP(t)),n.h+=t.length)}function Z_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function YH(n){this.l=n||UQ,n=Nt.PerformanceNavigationTiming?0<(n=Nt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ea&&Nt.g.Ea()&&Nt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=h0.prototype).add=function(n,e){Nh(this),this.i=null,n=Z_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){Nh(this),this.g.forEach(function(t,i){cH(t,function(r){n.call(e,r,i,this)},this)},this)},at.T=function(){Nh(this);for(var n=this.g.R(),e=this.g.T(),t=[],i=0;i<e.length;i++)for(var r=n[i],s=0;s<r.length;s++)t.push(e[i]);return t},at.R=function(n){Nh(this);var e=[];if("string"==typeof n)ZH(this,n)&&(e=uH(e,this.g.get(Z_(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=uH(e,n[t])}return e},at.set=function(n,e){return Nh(this),this.i=null,ZH(this,n=Z_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var i=e[t],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var l=r;""!==i[s]&&(l+="="+encodeURIComponent(String(i[s]))),n.push(l)}}return this.i=n.join("&")};var UQ=10;function QH(n){return!!n.h||!!n.g&&n.g.size>=n.j}function XH(n){return n.h?1:n.g?n.g.size:0}function WP(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ZP(n,e){n.g?n.g.add(e):n.h=e}function JH(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function eG(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return gP(n.i)}function KP(){}function jQ(){this.g=new KP}function HQ(n,e,t){const i=t||"";try{$P(n,function(r,s){let l=r;Jw(r)&&(l=kP(r)),e.push(i+s+"="+encodeURIComponent(l))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function tI(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function f0(n){this.l=n.$b||null,this.j=n.ib||!1}function nI(n,e){Pr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=YP,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}YH.prototype.cancel=function(){if(this.i=eG(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},KP.prototype.stringify=function(n){return Nt.JSON.stringify(n,void 0)},KP.prototype.parse=function(n){return Nt.JSON.parse(n,void 0)},Qr(f0,BP),f0.prototype.g=function(){return new nI(this.l,this.j)},f0.prototype.i=function(n){return function(){return n}}({}),Qr(nI,Pr);var YP=0;function tG(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function p0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,g0(n)}function g0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=nI.prototype).open=function(n,e){if(this.readyState!=YP)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,g0(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Nt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,p0(this)),this.readyState=YP},at.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,g0(this)),this.g&&(this.readyState=3,g0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Nt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tG(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},at.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?p0(this):g0(this),3==this.readyState&&tG(this)}},at.Ua=function(n){this.g&&(this.response=this.responseText=n,p0(this))},at.Ta=function(n){this.g&&(this.response=n,p0(this))},at.ha=function(){this.g&&p0(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(nI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var zQ=Nt.JSON.parse;function Xi(n){Pr.call(this),this.headers=new W_,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nG,this.K=this.L=!1}Qr(Xi,Pr);var nG="",$Q=/^https?$/i,qQ=["POST","PUT"];function ZQ(n){return"content-type"==n.toLowerCase()}function iG(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,rG(n),iI(n)}function rG(n){n.D||(n.D=!0,Xr(n,"complete"),Xr(n,"error"))}function sG(n){if(n.h&&void 0!==hP&&(!n.C[1]||4!=ud(n)||2!=n.ba()))if(n.v&&4==ud(n))LP(n.Fa,0,n);else if(Xr(n,"readystatechange"),4==ud(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===d){var r=String(n.H).match(zH)[1]||null;if(!r&&Nt.self&&Nt.self.location){var s=Nt.self.location.protocol;r=s.substr(0,s.length-1)}i=!$Q.test(r?r.toLowerCase():"")}t=i}if(t)Xr(n,"complete"),Xr(n,"success");else{n.m=6;try{var l=2<ud(n)?n.g.statusText:""}catch(p){l=""}n.j=l+" ["+n.ba()+"]",rG(n)}}finally{iI(n)}}}function iI(n,e){if(n.g){oG(n);const t=n.g,i=n.C[0]?LT:null;n.g=null,n.C=null,e||Xr(n,"ready");try{t.onreadystatechange=i}catch(r){}}}function oG(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Nt.clearTimeout(n.A),n.A=null)}function ud(n){return n.g?n.g.readyState:0}function aG(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case nG:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function QP(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=function KQ(n){let e="";return _P(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):li(n,e,t))}function m0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function lG(n){this.za=0,this.l=[],this.h=new $T,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=m0("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=m0("baseRetryDelayMs",5e3,n),this.$a=m0("retryDelaySeedMs",1e4,n),this.Ya=m0("forwardChannelMaxRetries",2,n),this.ra=m0("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new YH(n&&n.concurrentRequestLimit),this.Ca=new jQ,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function XP(n){if(cG(n),3==n.G){var e=n.V++,t=cd(n.F);li(t,"SID",n.J),li(t,"RID",e),li(t,"TYPE","terminate"),_0(n,t),(e=new a0(n,n.h,e,void 0)).K=2,e.v=eI(cd(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon&&(t=Nt.navigator.sendBeacon(e.v.toString(),"")),!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=yG(e.l,null),e.g.ea(e.v)),e.F=Date.now(),l0(e)}mG(n)}function rI(n){n.g&&(tN(n),n.g.cancel(),n.g=null)}function cG(n){rI(n),n.u&&(Nt.clearTimeout(n.u),n.u=null),oI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Nt.clearTimeout(n.m),n.m=null)}function JP(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&sI(n)}function sI(n){QH(n.i)||n.m||(n.m=!0,OP(n.Ha,n),n.C=0)}function uG(n,e){var t;t=e?e.m:n.V++;const i=cd(n.F);li(i,"SID",n.J),li(i,"RID",t),li(i,"AID",n.U),_0(n,i),n.o&&n.s&&QP(i,n.o,n.s),t=new a0(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=dG(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),ZP(n.i,t),GP(t,i,e)}function _0(n,e){n.j&&$P({},function(t,i){li(e,i,t)})}function dG(n,e,t){t=Math.min(n.l.length,t);var i=n.j?Yr(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=r[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let d=!0;for(let p=0;p<t;p++){let y=r[p].h;const w=r[p].g;if(y-=s,0>y)s=Math.max(0,r[p].h-100),d=!1;else try{HQ(w,l,"req"+y+"_")}catch(D){i&&i(w)}}if(d){i=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,i}function hG(n){n.g||n.u||(n.Y=1,OP(n.Ga,n),n.A=0)}function eN(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=s0(Yr(n.Ga,n),gG(n,n.A)),n.A++,0))}function tN(n){null!=n.B&&(Nt.clearTimeout(n.B),n.B=null)}function fG(n){n.g=new a0(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=cd(n.oa);li(e,"RID","rpc"),li(e,"SID",n.J),li(e,"CI",n.N?"0":"1"),li(e,"AID",n.U),_0(n,e),li(e,"TYPE","xmlhttp"),n.o&&n.s&&QP(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=eI(cd(e)),t.s=null,t.U=!0,UH(t,n)}function oI(n){null!=n.v&&(Nt.clearTimeout(n.v),n.v=null)}function pG(n,e){var t=null;if(n.g==e){oI(n),tN(n),n.g=null;var i=2}else{if(!WP(n.i,e))return;t=e.D,JH(n.i,e),i=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;Xr(i=qT(),new NH(i,t,e,r)),sI(n)}else hG(n);else if(3==(r=e.o)||0==r&&0<n.I||!(1==i&&function YQ(n,e){return!(XH(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=s0(Yr(n.Ha,n,e),gG(n,n.C)),n.C++,0)))}(n,e)||2==i&&eN(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:og(n,5);break;case 4:og(n,10);break;case 3:og(n,6);break;default:og(n,2)}}function gG(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function og(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var i=Yr(n.jb,n);t||(t=new sg("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||QT(t,"https"),eI(t)),function GQ(n,e){const t=new $T;if(Nt.Image){const i=new Image;i.onload=BT(tI,t,i,"TestLoadImage: loaded",!0,e),i.onerror=BT(tI,t,i,"TestLoadImage: error",!1,e),i.onabort=BT(tI,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=BT(tI,t,i,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else to(2);n.G=0,n.j&&n.j.va(e),mG(n),cG(n)}function mG(n){n.G=0,n.I=-1,n.j&&((0!=eG(n.i).length||0!=n.l.length)&&(n.i.i.length=0,gP(n.l),n.l.length=0),n.j.ua())}function _G(n,e,t){let i=function RQ(n){return n instanceof sg?cd(n):new sg(n,void 0)}(t);if(""!=i.i)e&&XT(i,e+"."+i.i),JT(i,i.m);else{const r=Nt.location;i=function kQ(n,e,t,i){var r=new sg(null,void 0);return n&&QT(r,n),e&&XT(r,e),t&&JT(r,t),i&&(r.l=i),r}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,t)}return n.aa&&_P(n.aa,function(r,s){li(i,s,r)}),t=n.sa,(e=n.D)&&t&&li(i,e,t),li(i,"VER",n.ma),_0(n,i),i}function yG(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xi(t&&n.Ba&&!n.qa?new f0({ib:!0}):n.qa)).L=n.H,e}function vG(){}function aI(){if($_&&!(10<=Number(cQ)))throw Error("Environmental error: no available transport.")}function va(n,e){Pr.call(this),this.g=new lG(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!VT(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!VT(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new K_(this)}function bG(n){VP.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function wG(){UP.call(this),this.status=1}function K_(n){this.g=n}(at=Xi.prototype).ea=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():jP.g(),this.C=function LH(n){return n.h||(n.h=n.i())}(this.u?this.u:jP),this.g.onreadystatechange=Yr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void iG(this,s)}n=t||"";const r=new W_(this.headers);i&&$P(i,function(s,l){r.set(l,s)}),i=function iQ(n){e:{var e=ZQ;const t=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<t;r++)if(r in i&&e.call(void 0,i[r],r,n)){e=r;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(r.T()),t=Nt.FormData&&n instanceof Nt.FormData,!(0<=lH(qQ,e))||i||t||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,l){this.g.setRequestHeader(l,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{oG(this),0<this.B&&((this.K=function WQ(n){return $_&&function lQ(){return function rQ(n){var e=aQ;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=dH(String(UT)).split("."),t=dH("9").split("."),i=Math.max(e.length,t.length);for(let l=0;0==n&&l<i;l++){var r=e[l]||"",s=t[l]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=mP(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||mP(0==r[2].length,0==s[2].length)||mP(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yr(this.pa,this)):this.A=LP(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){iG(this,s)}},at.pa=function(){void 0!==hP&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xr(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xr(this,"complete"),Xr(this,"abort"),iI(this))},at.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),iI(this,!0)),Xi.Z.M.call(this)},at.Fa=function(){this.s||(this.F||this.v||this.l?sG(this):this.cb())},at.cb=function(){sG(this)},at.ba=function(){try{return 2<ud(this)?this.g.status:-1}catch(n){return-1}},at.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},at.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),zQ(e)}},at.Da=function(){return this.m},at.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=lG.prototype).ma=8,at.G=1,at.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},at.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new a0(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=pH(s),mH(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var i=this.l[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=dG(this,r,e),li(t=cd(this.F),"RID",n),li(t,"CVER",22),this.D&&li(t,"X-HTTP-Session-Id",this.D),_0(this,t),this.o&&s&&QP(t,this.o,s),ZP(this.i,r),this.Ra&&li(t,"TYPE","init"),this.ja?(li(t,"$req",e),li(t,"SID","null"),r.$=!0,GP(r,t,null)):GP(r,t,e),this.G=2}}else 3==this.G&&(n?uG(this,n):0==this.l.length||QH(this.i)||uG(this))},at.Ga=function(){if(this.u=null,fG(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=s0(Yr(this.bb,this),n)}},at.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,to(10),rI(this),fG(this))},at.ab=function(){null!=this.v&&(this.v=null,rI(this),eN(this),to(19))},at.jb=function(n){n?(this.h.info("Successfully pinged google.com"),to(2)):(this.h.info("Failed to ping google.com"),to(1))},(at=vG.prototype).xa=function(){},at.wa=function(){},at.va=function(){},at.ua=function(){},at.Oa=function(){},aI.prototype.g=function(n,e){return new va(n,e)},Qr(va,Pr),va.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),OP(Yr(n.hb,n,e))),to(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=_G(n,null,n.W),sI(n)},va.prototype.close=function(){XP(this.g)},va.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,JP(this.g,e)}else this.v?((e={}).__data__=kP(n),JP(this.g,e)):JP(this.g,n)},va.prototype.M=function(){this.g.j=null,delete this.j,XP(this.g),delete this.g,va.Z.M.call(this)},Qr(bG,VP),Qr(wG,UP),Qr(K_,vG),K_.prototype.xa=function(){Xr(this.g,"a")},K_.prototype.wa=function(n){Xr(this.g,new bG(n))},K_.prototype.va=function(n){Xr(this.g,new wG(n))},K_.prototype.ua=function(){Xr(this.g,"b")},aI.prototype.createWebChannel=aI.prototype.g,va.prototype.send=va.prototype.u,va.prototype.open=va.prototype.m,va.prototype.close=va.prototype.close,WT.NO_ERROR=0,WT.TIMEOUT=8,WT.HTTP_ERROR=6,FH.COMPLETE="complete",BH.EventType=o0,o0.OPEN="a",o0.CLOSE="b",o0.ERROR="c",o0.MESSAGE="d",Pr.prototype.listen=Pr.prototype.N,Xi.prototype.listenOnce=Xi.prototype.O,Xi.prototype.getLastError=Xi.prototype.La,Xi.prototype.getLastErrorCode=Xi.prototype.Da,Xi.prototype.getStatus=Xi.prototype.ba,Xi.prototype.getResponseJson=Xi.prototype.Qa,Xi.prototype.getResponseText=Xi.prototype.ga,Xi.prototype.send=Xi.prototype.ea;var QQ=ld.createWebChannelTransport=function(){return new aI},XQ=ld.getStatEventTarget=function(){return qT()},nN=ld.ErrorCode=WT,JQ=ld.EventType=FH,e9=ld.Event=ng,CG=ld.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},t9=ld.FetchXmlHttpFactory=f0,lI=ld.WebChannel=BH,n9=ld.XhrIo=Xi;const EG="@firebase/firestore";class Nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");let Y_="9.9.0";const Fh=new ec.Yd("@firebase/firestore");function iN(){return Fh.logLevel}function Fe(n,...e){if(Fh.logLevel<=ec.in.DEBUG){const t=e.map(rN);Fh.debug(`Firestore (${Y_}): ${n}`,...t)}}function Ji(n,...e){if(Fh.logLevel<=ec.in.ERROR){const t=e.map(rN);Fh.error(`Firestore (${Y_}): ${n}`,...t)}}function y0(n,...e){if(Fh.logLevel<=ec.in.WARN){const t=e.map(rN);Fh.warn(`Firestore (${Y_}): ${n}`,...t)}}function rN(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${Y_}) INTERNAL ASSERTION FAILED: `+n;throw Ji(e),new Error(e)}function Rt(n,e){n||lt()}function it(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends N.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class DG{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nr.UNAUTHENTICATED))}shutdown(){}}class o9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class a9{constructor(e){this.t=e,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let l=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Fr,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=l;e.enqueueRetryable((0,Ce.Z)(function*(){yield y.promise,yield s(i.currentUser)}))},p=y=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Fr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Rt("string"==typeof i.accessToken),new DG(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new Nr(e)}}class l9{constructor(e,t,i){this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class c9{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new l9(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u9{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const i=s=>{null!=s.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.p;return this.p=s.token,Fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.p=t.token,new SG(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function d9(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class TG{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=d9(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function jt(n,e){return n<e?-1:n>e?1:0}function Q_(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function IG(n){return n+"\0"}class ci{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ci.fromMillis(Date.now())}static fromDate(e){return ci.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new ci(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new ci(0,0))}static max(){return new At(new ci(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class v0{constructor(e,t,i){void 0===t?t=0:t>e.length&&lt(),void 0===i?i=e.length-t:i>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===v0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof v0?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),l=t.get(r);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ln extends v0{construct(e,t,i){return new ln(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ke(ge.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new ln(t)}static emptyPath(){return new ln([])}}const h9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ji extends v0{construct(e,t,i){return new ji(e,t,i)}static isValidIdentifier(e){return h9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ji.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ji(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new ke(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const d=e[r];if("\\"===d){if(r+1===e.length)throw new ke(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new ke(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,r+=2}else"`"===d?(l=!l,r++):"."!==d||l?(i+=d,r++):(s(),r++)}if(s(),l)throw new ke(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ji(t)}static emptyPath(){return new ji([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(ln.fromString(e))}static fromName(e){return new Xe(ln.fromString(e).popFirst(5))}static empty(){return new Xe(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new ln(e.slice()))}}class cI{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function sN(n){return n.fields.find(e=>2===e.kind)}function ag(n){return n.fields.filter(e=>2!==e.kind)}cI.UNKNOWN_ID=-1;class uI{constructor(e,t){this.fieldPath=e,this.kind=t}}class b0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new b0(0,ba.min())}}function AG(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=At.fromTimestamp(1e9===i?new ci(t+1,0):new ci(t,i));return new ba(r,Xe.empty(),e)}function MG(n){return new ba(n.readTime,n.key,-1)}class ba{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ba(At.min(),Xe.empty(),-1)}static max(){return new ba(At.max(),Xe.empty(),-1)}}function oN(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:jt(n.largestBatchId,e.largestBatchId))}const xG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Lh(n){return aN.apply(this,arguments)}function aN(){return aN=(0,Ce.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==xG)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),aN.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,i)=>{t(e)})}static reject(e){return new de((t,i)=>{i(e)})}static waitFor(e){return new de((t,i)=>{let r=0,s=0,l=!1;e.forEach(d=>{++r,d.next(()=>{++s,l&&s===r&&t()},p=>i(p))}),l=!0,s===r&&t()})}static or(e){let t=de.resolve(!1);for(const i of e)t=t.next(r=>r?de.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new de((i,r)=>{const s=e.length,l=new Array(s);let d=0;for(let p=0;p<s;p++){const y=p;t(e[y]).next(w=>{l[y]=w,++d,d===s&&i(l)},w=>r(w))}})}static doWhile(e,t){return new de((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class dI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Fr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new w0(e,t.error)):this.T.resolve()},this.transaction.onerror=i=>{const r=lN(i.target.error);this.T.reject(new w0(e,r))}}static open(e,t,i,r){try{return new dI(t,e.transaction(r,i))}catch(s){throw new w0(t,s)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new p9(t)}}class ac{constructor(e,t,i){this.name=e,this.version=t,this.P=i,12.2===ac.v((0,N.z$)())&&Ji("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),lg(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,N.hl)())return!1;if(ac.S())return!0;const e=(0,N.z$)(),t=ac.v(e),i=0<t&&t<10,r=ac.D(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static D(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}k(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{i(l.target.result)},s.onblocked=()=>{r(new w0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const d=l.target.error;r("VersionError"===d.name?new ke(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new ke(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new w0(e,d))},s.onupgradeneeded=l=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.P.O(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=i=>t.M(i)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,Ce.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.k(e);const p=dI.open(s.db,e,l?"readonly":"readwrite",i),y=r(p).next(w=>(p.R(),w)).catch(w=>(p.abort(w),de.reject(w))).toPromise();return y.catch(()=>{}),yield p.A,y}catch(p){const y=p,w="FirebaseError"!==y.name&&d<3;if(Fe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",w),s.close(),!w)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class f9{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return lg(this.$.delete())}}class w0 extends ke{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bh(n){return"IndexedDbTransactionError"===n.name}class p9{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),lg(i)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),lg(this.store.add(e))}get(e){return lg(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),lg(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),lg(this.store.count())}K(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.G(r,(l,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new de((s,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}j(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new de((r,s)=>{i.onerror=l=>{s(l.target.error)},i.onsuccess=l=>{r(l.target.result)}})}W(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.H=!1;const r=this.cursor(i);return this.G(r,(s,l,d)=>d.delete())}J(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.G(r,t)}Y(e){const t=this.cursor({});return new de((i,r)=>{t.onerror=s=>{const l=lN(s.target.error);r(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():i()}):i()}})}G(e,t){const i=[];return new de((r,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void r();const p=new f9(d),y=t(d.primaryKey,d.value,p);if(y instanceof de){const w=y.catch(D=>(p.done(),de.reject(D)));i.push(w)}p.isDone?r():null===p.U?d.continue():d.continue(p.U)}}).next(()=>de.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lg(n){return new de((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=lN(i.target.error);t(r)}})}let kG=!1;function lN(n){const e=ac.v((0,N.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kG||(kG=!0,setTimeout(()=>{throw i},0)),i}}return n}class g9{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ce.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(i){Bh(i)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Lh(i)}yield t.Z(1)}))}}class m9{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Ce.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.et(i,e))})()}et(e,t){const i=new Set;let r=t,s=!0;return de.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!i.has(l))return Fe("IndexBackiller",`Processing collection: ${l}`),this.nt(e,l,r).next(d=>{r-=d,i.add(l)});s=!1})).next(()=>t-r)}nt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.st(r,s)).next(d=>(Fe("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}st(e,t){let i=e;return t.changes.forEach((r,s)=>{const l=MG(s);oN(l,i)>0&&(i=l)}),new ba(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Po{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.it(i),this.rt=i=>t.writeSequenceNumber(i))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function OG(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cg(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PG(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Po.ot=-1;class Mi{constructor(e,t){this.comparator=e,this.root=t||Jr.EMPTY}insert(e,t){return new Mi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jr.BLACK,null,null))}remove(e){return new Mi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hI(this.root,e,this.comparator,!1)}getReverseIterator(){return new hI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hI(this.root,e,this.comparator,!0)}}class hI{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jr{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=null!=i?i:Jr.RED,this.left=null!=r?r:Jr.EMPTY,this.right=null!=s?s:Jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new Jr(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Jr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}Jr.EMPTY=null,Jr.RED=!0,Jr.BLACK=!1,Jr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,i,r){return this}insert(n,e,t){return new Jr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class On{constructor(e){this.comparator=e,this.data=new Mi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new NG(this.data.getIterator())}getIteratorFrom(e){return new NG(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof On)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new On(this.comparator);return t.data=e,t}}class NG{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function X_(n){return n.hasNext()?n.getNext():void 0}class wa{constructor(e){this.fields=e,e.sort(ji.comparator)}static empty(){return new wa([])}unionWith(e){let t=new On(ji.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new wa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Q_(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new dr(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dr.EMPTY_BYTE_STRING=new dr("");const y9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vh(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=y9.exec(n);if(Rt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xi(n.seconds),nanos:xi(n.nanos)}}function xi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ug(n){return"string"==typeof n?dr.fromBase64String(n):dr.fromUint8Array(n)}function cN(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function FG(n){const e=n.mapValue.fields.__previous_value__;return cN(e)?FG(e):e}function C0(n){const e=Vh(n.mapValue.fields.__local_write_time__.timestampValue);return new ci(e.seconds,e.nanos)}class v9{constructor(e,t,i,r,s,l,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class dd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new dd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof dd&&e.projectId===this.projectId&&e.database===this.database}}function E0(n){return null==n}function D0(n){return 0===n&&1/n==-1/0}function LG(n){return"number"==typeof n&&Number.isInteger(n)&&!D0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Uh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fI={nullValue:"NULL_VALUE"};function dg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cN(n)?4:jG(n)?9007199254740991:10:lt()}function iu(n,e){if(n===e)return!0;const t=dg(n);if(t!==dg(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return C0(n).isEqual(C0(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Vh(i.timestampValue),l=Vh(r.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,ug(n.bytesValue).isEqual(ug(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return xi(i.geoPointValue.latitude)===xi(r.geoPointValue.latitude)&&xi(i.geoPointValue.longitude)===xi(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return xi(i.integerValue)===xi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=xi(i.doubleValue),l=xi(r.doubleValue);return s===l?D0(s)===D0(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return Q_(n.arrayValue.values||[],e.arrayValue.values||[],iu);case 10:return function(i,r){const s=i.mapValue.fields||{},l=r.mapValue.fields||{};if(OG(s)!==OG(l))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===l[d]||!iu(s[d],l[d])))return!1;return!0}(n,e);default:return lt()}var r}function S0(n,e){return void 0!==(n.values||[]).find(t=>iu(t,e))}function jh(n,e){if(n===e)return 0;const t=dg(n),i=dg(e);if(t!==i)return jt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,e.booleanValue);case 2:return function(r,s){const l=xi(r.integerValue||r.doubleValue),d=xi(s.integerValue||s.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return BG(n.timestampValue,e.timestampValue);case 4:return BG(C0(n),C0(e));case 5:return jt(n.stringValue,e.stringValue);case 6:return function(r,s){const l=ug(r),d=ug(s);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const l=r.split("/"),d=s.split("/");for(let p=0;p<l.length&&p<d.length;p++){const y=jt(l[p],d[p]);if(0!==y)return y}return jt(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const l=jt(xi(r.latitude),xi(s.latitude));return 0!==l?l:jt(xi(r.longitude),xi(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const l=r.values||[],d=s.values||[];for(let p=0;p<l.length&&p<d.length;++p){const y=jh(l[p],d[p]);if(y)return y}return jt(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===Uh.mapValue&&s===Uh.mapValue)return 0;if(r===Uh.mapValue)return 1;if(s===Uh.mapValue)return-1;const l=r.fields||{},d=Object.keys(l),p=s.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const D=jt(d[w],y[w]);if(0!==D)return D;const x=jh(l[d[w]],p[y[w]]);if(0!==x)return x}return jt(d.length,y.length)}(n.mapValue,e.mapValue);default:throw lt()}}function BG(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return jt(n,e);const t=Vh(n),i=Vh(e),r=jt(t.seconds,i.seconds);return 0!==r?r:jt(t.nanos,i.nanos)}function J_(n){return uN(n)}function uN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Vh(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ug(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const l of i.values||[])s?s=!1:r+=",",r+=uN(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",l=!0;for(const d of r)l?l=!1:s+=",",s+=`${d}:${uN(i.fields[d])}`;return s+"}"}(n.mapValue):lt();var e}function hg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function dN(n){return!!n&&"integerValue"in n}function T0(n){return!!n&&"arrayValue"in n}function VG(n){return!!n&&"nullValue"in n}function UG(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pI(n){return!!n&&"mapValue"in n}function I0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return cg(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=I0(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=I0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jG(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function b9(n){return"nullValue"in n?fI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?hg(dd.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:lt()}function w9(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?hg(dd.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Uh:lt()}function HG(n,e){const t=jh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function GG(n,e){const t=jh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class es{constructor(e){this.value=e}static empty(){return new es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!pI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=I0(t)}setAll(e){let t=ji.emptyPath(),i={},r=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,r),i={},r=[],t=d.popLast()}l?i[d.lastSegment()]=I0(l):r.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());pI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return iu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];pI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){cg(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new es(I0(this.value))}}function zG(n){const e=[];return cg(n.fields,(t,i)=>{const r=new ji([t]);if(pI(i)){const s=zG(i.mapValue).fields;if(0===s.length)e.push(r);else for(const l of s)e.push(r.child(l))}else e.push(r)}),new wa(e)}class Wn{constructor(e,t,i,r,s,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Wn(e,0,At.min(),At.min(),es.empty(),0)}static newFoundDocument(e,t,i){return new Wn(e,1,t,At.min(),i,0)}static newNoDocument(e,t){return new Wn(e,2,t,At.min(),es.empty(),0)}static newUnknownDocument(e,t){return new Wn(e,3,t,At.min(),es.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class C9{constructor(e,t=null,i=[],r=[],s=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=l,this.endAt=d,this.ut=null}}function $G(n,e=null,t=[],i=[],r=null,s=null,l=null){return new C9(n,e,t,i,r,s,l)}function fg(n){const e=it(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+J_(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),E0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>J_(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>J_(i)).join(",")),e.ut=t}return e.ut}function A0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!R9(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((t=n.filters[r]).op!==(i=e.filters[r]).op||!t.field.isEqual(i.field)||!iu(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!YG(n.startAt,e.startAt)&&YG(n.endAt,e.endAt)}function gI(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function mI(n,e){return n.filters.filter(t=>t instanceof ts&&t.field.isEqual(e))}function qG(n,e,t){let i=fI,r=!0;for(const s of mI(n,e)){let l=fI,d=!0;switch(s.op){case"<":case"<=":l=b9(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,d=!1;break;case"!=":case"not-in":l=fI}HG({value:i,inclusive:r},{value:l,inclusive:d})<0&&(i=l,r=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];HG({value:i,inclusive:r},{value:l,inclusive:t.inclusive})<0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}function WG(n,e,t){let i=Uh,r=!0;for(const s of mI(n,e)){let l=Uh,d=!0;switch(s.op){case">=":case">":l=w9(s.value),d=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,d=!1;break;case"!=":case"not-in":l=Uh}GG({value:i,inclusive:r},{value:l,inclusive:d})>0&&(i=l,r=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];GG({value:i,inclusive:r},{value:l,inclusive:t.inclusive})>0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}class ts extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,i):new D9(e,t,i):"array-contains"===t?new I9(e,i):"in"===t?new A9(e,i):"not-in"===t?new M9(e,i):"array-contains-any"===t?new x9(e,i):new ts(e,t,i)}static ct(e,t,i){return"in"===t?new S9(e,i):new T9(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(jh(t,this.value)):null!==t&&dg(this.value)===dg(t)&&this.at(jh(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class D9 extends ts{constructor(e,t,i){super(e,t,i),this.key=Xe.fromName(i.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.at(t)}}class S9 extends ts{constructor(e,t){super(e,"in",t),this.keys=ZG(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class T9 extends ts{constructor(e,t){super(e,"not-in",t),this.keys=ZG(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ZG(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Xe.fromName(i.referenceValue))}class I9 extends ts{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return T0(t)&&S0(t.arrayValue,this.value)}}class A9 extends ts{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&S0(this.value.arrayValue,t)}}class M9 extends ts{constructor(e,t){super(e,"not-in",t)}matches(e){if(S0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!S0(this.value.arrayValue,t)}}class x9 extends ts{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!T0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>S0(this.value.arrayValue,i))}}class Hh{constructor(e,t){this.position=e,this.inclusive=t}}class ey{constructor(e,t="asc"){this.field=e,this.dir=t}}function R9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function KG(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],l=n.position[r];if(i=s.field.isKeyField()?Xe.comparator(Xe.fromName(l.referenceValue),t.key):jh(l,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function YG(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!iu(n.position[t],e.position[t]))return!1;return!0}class hd{constructor(e,t=null,i=[],r=[],s=null,l="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=l,this.startAt=d,this.endAt=p,this.lt=null,this.ft=null}}function QG(n,e,t,i,r,s,l,d){return new hd(n,e,t,i,r,s,l,d)}function ty(n){return new hd(n)}function hN(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function fN(n){for(const e of n.filters)if(e.ht())return e.field;return null}function pN(n){return null!==n.collectionGroup}function ny(n){const e=it(n);if(null===e.lt){e.lt=[];const t=fN(e),i=hN(e);if(null!==t&&null===i)t.isKeyField()||e.lt.push(new ey(t)),e.lt.push(new ey(ji.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new ey(ji.keyField(),s))}}}return e.lt}function rl(n){const e=it(n);if(!e.ft)if("F"===e.limitType)e.ft=$G(e.path,e.collectionGroup,ny(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of ny(e))t.push(new ey(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new Hh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Hh(e.startAt.position,e.startAt.inclusive):null;e.ft=$G(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.ft}function XG(n,e,t){return new hd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function M0(n,e){return A0(rl(n),rl(e))&&n.limitType===e.limitType}function JG(n){return`${fg(rl(n))}|lt:${n.limitType}`}function gN(n){return`Query(target=${function E9(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${J_(i.value)}`;var i}).join(", ")}]`),E0(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>J_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>J_(t)).join(",")),`Target(${e})`}(rl(n))}; limitType=${n.limitType})`}function mN(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):Xe.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,l){const d=KG(r,s,l);return r.inclusive?d<=0:d<0}(t.startAt,ny(t),i)||t.endAt&&!function(r,s,l){const d=KG(r,s,l);return r.inclusive?d>=0:d>0}(t.endAt,ny(t),i)));var t,i}function ez(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function tz(n){return(e,t)=>{let i=!1;for(const r of ny(n)){const s=O9(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function O9(n,e,t){const i=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(r,s,l){const d=s.data.field(r),p=l.data.field(r);return null!==d&&null!==p?jh(d,p):lt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return lt()}}function nz(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:D0(e)?"-0":e}}function iz(n){return{integerValue:""+n}}function rz(n,e){return LG(e)?iz(e):nz(n,e)}class _I{constructor(){this._=void 0}}function P9(n,e,t){return n instanceof iy?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof pg?oz(n,e):n instanceof gg?az(n,e):function(i,r){const s=sz(i,r),l=lz(s)+lz(i._t);return dN(s)&&dN(i._t)?iz(l):nz(i.wt,l)}(n,e)}function N9(n,e,t){return n instanceof pg?oz(n,e):n instanceof gg?az(n,e):t}function sz(n,e){return n instanceof ry?dN(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class iy extends _I{}class pg extends _I{constructor(e){super(),this.elements=e}}function oz(n,e){const t=cz(e);for(const i of n.elements)t.some(r=>iu(r,i))||t.push(i);return{arrayValue:{values:t}}}class gg extends _I{constructor(e){super(),this.elements=e}}function az(n,e){let t=cz(e);for(const i of n.elements)t=t.filter(r=>!iu(r,i));return{arrayValue:{values:t}}}class ry extends _I{constructor(e,t){super(),this.wt=e,this._t=t}}function lz(n){return xi(n.integerValue||n.doubleValue)}function cz(n){return T0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class x0{constructor(e,t){this.field=e,this.transform=t}}class L9{constructor(e,t){this.version=e,this.transformResults=t}}class yi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yi}static exists(e){return new yi(void 0,e)}static updateTime(e){return new yi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class vI{}function uz(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new oy(n.key,yi.none()):new sy(n.key,n.data,yi.none());{const t=n.data,i=es.empty();let r=new On(ji.comparator);for(let s of e.fields)if(!r.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?i.delete(s):i.set(s,l),r=r.add(s)}return new fd(n.key,i,new wa(r.toArray()),yi.none())}}function B9(n,e,t){n instanceof sy?function(i,r,s){const l=i.value.clone(),d=fz(i.fieldTransforms,r,s.transformResults);l.setAll(d),r.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof fd?function(i,r,s){if(!yI(i.precondition,r))return void r.convertToUnknownDocument(s.version);const l=fz(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(hz(i)),d.setAll(l),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function R0(n,e,t,i){return n instanceof sy?function(r,s,l,d){if(!yI(r.precondition,s))return l;const p=r.value.clone(),y=pz(r.fieldTransforms,d,s);return p.setAll(y),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,i):n instanceof fd?function(r,s,l,d){if(!yI(r.precondition,s))return l;const p=pz(r.fieldTransforms,d,s),y=s.data;return y.setAll(hz(r)),y.setAll(p),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===l?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(w=>w.field))}(n,e,t,i):(l=t,yI(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function V9(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=sz(i.transform,r||null);null!=s&&(null===t&&(t=es.empty()),t.set(i.field,s))}return t||null}function dz(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&Q_(t,i,(r,s)=>function F9(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof pg&&i instanceof pg||t instanceof gg&&i instanceof gg?Q_(t.elements,i.elements,iu):t instanceof ry&&i instanceof ry?iu(t._t,i._t):t instanceof iy&&i instanceof iy);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class sy extends vI{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class fd extends vI{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function hz(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function fz(n,e,t){const i=new Map;Rt(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],l=s.transform,d=e.data.field(s.field);i.set(s.field,N9(l,d,t[r]))}return i}function pz(n,e,t){const i=new Map;for(const r of n){const s=r.transform,l=t.data.field(r.field);i.set(r.field,P9(s,l,e))}return i}class oy extends vI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _N extends vI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class U9{constructor(e){this.count=e}}var er,cn;function gz(n){switch(n){default:return lt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function mz(n){if(void 0===n)return Ji("GRPC error has no .code"),ge.UNKNOWN;switch(n){case er.OK:return ge.OK;case er.CANCELLED:return ge.CANCELLED;case er.UNKNOWN:return ge.UNKNOWN;case er.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case er.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case er.INTERNAL:return ge.INTERNAL;case er.UNAVAILABLE:return ge.UNAVAILABLE;case er.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case er.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case er.NOT_FOUND:return ge.NOT_FOUND;case er.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case er.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case er.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case er.ABORTED:return ge.ABORTED;case er.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case er.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case er.DATA_LOSS:return ge.DATA_LOSS;default:return lt()}}(cn=er||(er={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class Gh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){cg(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return PG(this.inner)}size(){return this.innerSize}}const j9=new Mi(Xe.comparator);function No(){return j9}const _z=new Mi(Xe.comparator);function k0(...n){let e=_z;for(const t of n)e=e.insert(t.key,t);return e}function yz(n){let e=_z;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ru(){return O0()}function vz(){return O0()}function O0(){return new Gh(n=>n.toString(),(n,e)=>n.isEqual(e))}const H9=new Mi(Xe.comparator),G9=new On(Xe.comparator);function Gt(...n){let e=G9;for(const t of n)e=e.add(t);return e}const z9=new On(jt);function bI(){return z9}class P0{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,N0.createSynthesizedTargetChangeForCurrentChange(e,t)),new P0(At.min(),i,bI(),No(),Gt())}}class N0{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new N0(dr.EMPTY_BYTE_STRING,t,Gt(),Gt(),Gt())}}class wI{constructor(e,t,i,r){this.gt=e,this.removedTargetIds=t,this.key=i,this.yt=r}}class bz{constructor(e,t){this.targetId=e,this.It=t}}class wz{constructor(e,t,i=dr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class Cz{constructor(){this.Tt=0,this.Et=Dz(),this.At=dr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Gt(),t=Gt(),i=Gt();return this.Et.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:lt()}}),new N0(this.At,this.Rt,e,t,i)}Dt(){this.bt=!1,this.Et=Dz()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class $9{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=No(),this.Bt=Ez(),this.Lt=new On(jt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const i=this.Qt(t);switch(e.state){case 0:this.jt(t)&&i.Vt(e.resumeToken);break;case 1:i.kt(),i.Pt||i.Dt(),i.Vt(e.resumeToken);break;case 2:i.kt(),i.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(i.Ot(),i.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),i.Vt(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((i,r)=>{this.jt(r)&&t(r)})}zt(e){const t=e.targetId,i=e.It.count,r=this.Ht(t);if(r){const s=r.target;if(gI(s))if(0===i){const l=new Xe(s.path);this.Kt(t,l,Wn.newNoDocument(l,At.min()))}else Rt(1===i);else this.Jt(t)!==i&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((s,l)=>{const d=this.Ht(l);if(d){if(s.current&&gI(d.target)){const p=new Xe(d.target.path);null!==this.$t.get(p)||this.Xt(l,p)||this.Kt(l,p,Wn.newNoDocument(p,e))}s.vt&&(t.set(l,s.St()),s.Dt())}});let i=Gt();this.Bt.forEach((s,l)=>{let d=!0;l.forEachWhile(p=>{const y=this.Ht(p);return!y||2===y.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.$t.forEach((s,l)=>l.setReadTime(e));const r=new P0(e,t,this.Lt,this.$t,i);return this.$t=No(),this.Bt=Ez(),this.Lt=new On(jt),r}qt(e,t){if(!this.jt(e))return;const i=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,i),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,i){if(!this.jt(e))return;const r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),i&&(this.$t=this.$t.insert(t,i))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Cz,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new On(jt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new Cz),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function Ez(){return new Mi(Xe.comparator)}function Dz(){return new Mi(Xe.comparator)}const q9={asc:"ASCENDING",desc:"DESCENDING"},W9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Z9{constructor(e,t){this.databaseId=e,this.dt=t}}function F0(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sz(n,e){return n.dt?e.toBase64():e.toUint8Array()}function K9(n,e){return F0(n,e.toTimestamp())}function Lr(n){return Rt(!!n),At.fromTimestamp(function(e){const t=Vh(e);return new ci(t.seconds,t.nanos)}(n))}function yN(n,e){return(t=n,new ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Tz(n){const e=ln.fromString(n);return Rt(Nz(e)),e}function L0(n,e){return yN(n.databaseId,e.path)}function su(n,e){const t=Tz(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(Az(t))}function vN(n,e){return yN(n.databaseId,e)}function Iz(n){const e=Tz(n);return 4===e.length?ln.emptyPath():Az(e)}function B0(n){return new ln(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Az(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Mz(n,e,t){return{name:L0(n,e),fields:t.value.mapValue.fields}}function xz(n,e,t){const i=su(n,e.name),r=Lr(e.updateTime),s=new es({mapValue:{fields:e.fields}}),l=Wn.newFoundDocument(i,r,s);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function V0(n,e){let t;if(e instanceof sy)t={update:Mz(n,e.key,e.value)};else if(e instanceof oy)t={delete:L0(n,e.key)};else if(e instanceof fd)t={update:Mz(n,e.key,e.data),updateMask:rX(e.fieldMask)};else{if(!(e instanceof _N))return lt();t={verify:L0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const l=s.transform;if(l instanceof iy)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof pg)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof gg)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ry)return{fieldPath:s.field.canonicalString(),increment:l._t};throw lt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:K9(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:lt()),t;var r}function bN(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?yi.updateTime(Lr(r.updateTime)):void 0!==r.exists?yi.exists(r.exists):yi.none():yi.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,l){let d=null;"setToServerValue"in l?(Rt("REQUEST_TIME"===l.setToServerValue),d=new iy):"appendMissingElements"in l?d=new pg(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new gg(l.removeAllFromArray.values||[]):"increment"in l?d=new ry(s,l.increment):lt();const p=ji.fromServerFormat(l.fieldPath);return new x0(p,d)}(n,r)):[];var r;if(e.update){const r=su(n,e.update.name),s=new es({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new wa((e.updateMask.fieldPaths||[]).map(y=>ji.fromServerFormat(y)));return new fd(r,s,l,t,i)}return new sy(r,s,t,i)}if(e.delete){const r=su(n,e.delete);return new oy(r,t)}if(e.verify){const r=su(n,e.verify);return new _N(r,t)}return lt()}function Rz(n,e){return{documents:[vN(n,e.path)]}}function kz(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=vN(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=vN(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const y=p.map(w=>function(D){if("=="===D.op){if(UG(D.value))return{unaryFilter:{field:ay(D.field),op:"IS_NAN"}};if(VG(D.value))return{unaryFilter:{field:ay(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(UG(D.value))return{unaryFilter:{field:ay(D.field),op:"IS_NOT_NAN"}};if(VG(D.value))return{unaryFilter:{field:ay(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ay(D.field),op:tX(D.op),value:D.value}}}(w));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);r&&(t.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:ay((w=y).field),direction:eX(w.dir)};var w})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=(y=e.limit,n.dt||E0(y)?y:{value:y});var y,d,p;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function Oz(n){let e=Iz(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Rt(1===i);const w=t.from[0];w.allDescendants?r=w.collectionId:e=e.child(w.collectionId)}let s=[];t.where&&(s=Pz(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(w=>{return new ey(ly((D=w).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(w){let D;return D="object"==typeof w?w.value:w,E0(D)?null:D}(t.limit));let p=null;var w;t.startAt&&(p=new Hh((w=t.startAt).values||[],!!w.before));let y=null;return t.endAt&&(y=function(w){return new Hh(w.values||[],!w.before)}(t.endAt)),QG(e,r,l,s,d,"F",p,y)}function Pz(n){return n?void 0!==n.unaryFilter?[iX(n)]:void 0!==n.fieldFilter?[nX(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Pz(e)).reduce((e,t)=>e.concat(t)):lt():[]}function eX(n){return q9[n]}function tX(n){return W9[n]}function ay(n){return{fieldPath:n.canonicalString()}}function ly(n){return ji.fromServerFormat(n.fieldPath)}function nX(n){return ts.create(ly(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}function iX(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ly(n.unaryFilter.field);return ts.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ly(n.unaryFilter.field);return ts.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ly(n.unaryFilter.field);return ts.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=ly(n.unaryFilter.field);return ts.create(r,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}function rX(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Nz(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function no(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Fz(e)),e=sX(n.get(t),e);return Fz(e)}function sX(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function Fz(n){return n+"\x01\x01"}function ou(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),ln.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&lt(),n.charAt(l+1)){case"\x01":const d=n.substring(s,l);let p;0===r.length?p=d:(r+=d,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,l),r+="\0";break;case"\x11":r+=n.substring(s,l+1);break;default:lt()}s=l+2}return new ln(i)}const Lz=["userId","batchId"];function CI(n,e){return[n,no(e)]}function Bz(n,e,t){return[n,no(e),t]}const oX={},aX=["prefixPath","collectionGroup","readTime","documentId"],lX=["prefixPath","collectionGroup","documentId"],cX=["collectionGroup","readTime","prefixPath","documentId"],uX=["canonicalId","targetId"],dX=["targetId","path"],hX=["path","targetId"],fX=["collectionId","parent"],pX=["indexId","uid"],gX=["uid","sequenceNumber"],mX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_X=["indexId","uid","orderedDocumentKey"],yX=["userId","collectionPath","documentId"],vX=["userId","collectionPath","largestBatchId"],bX=["userId","collectionGroup","largestBatchId"],Vz=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wX=[...Vz,"documentOverlays"],Uz=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jz=Uz,CX=[...jz,"indexConfiguration","indexState","indexEntries"];class wN extends RG{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Br(n,e){const t=it(n);return ac.N(t.ee,e)}class CN{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&B9(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=R0(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=R0(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=vz();return this.mutations.forEach(r=>{const s=e.get(r.key),l=s.overlayedDocument;let d=this.applyToLocalView(l,s.mutatedFields);d=t.has(r.key)?null:d;const p=uz(l,d);null!==p&&i.set(r.key,p),l.isValidDocument()||l.convertToNoDocument(At.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&Q_(this.mutations,e.mutations,(t,i)=>dz(t,i))&&Q_(this.baseMutations,e.baseMutations,(t,i)=>dz(t,i))}}class EN{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Rt(e.mutations.length===i.length);let r=H9;const s=e.mutations;for(let l=0;l<s.length;l++)r=r.insert(s[l].key,i[l].version);return new EN(e,t,i,r)}}class DN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class zh{constructor(e,t,i,r,s=At.min(),l=At.min(),d=dr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new zh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new zh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new zh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Hz{constructor(e){this.ne=e}}function Gz(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:EI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:L0(r=n.ne,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:F0(r,s.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:mg(e.version)};else{if(!e.isUnknownDocument())return lt();i.unknownDocument={path:t.path.toArray(),version:mg(e.version)}}var r,s;return i}function EI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function mg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _g(n){const e=new ci(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function yg(n,e){const t=(e.baseMutations||[]).map(s=>bN(n.ne,s));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(l.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const i=e.mutations.map(s=>bN(n.ne,s)),r=ci.fromMillis(e.localWriteTimeMs);return new CN(e.batchId,r,t,i)}function U0(n){const e=_g(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?_g(n.lastLimboFreeSnapshotVersion):At.min();let i;var r;return void 0!==n.query.documents?(Rt(1===(r=n.query).documents.length),i=rl(ty(Iz(r.documents[0])))):i=rl(Oz(n.query)),new zh(i,n.targetId,0,n.lastListenSequenceNumber,e,t,dr.fromBase64String(n.resumeToken))}function zz(n,e){const t=mg(e.snapshotVersion),i=mg(e.lastLimboFreeSnapshotVersion);let r;r=gI(e.target)?Rz(n.ne,e.target):kz(n.ne,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fg(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function SN(n){const e=Oz({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?XG(e,e.limit,"L"):e}function TN(n,e){return new DN(e.largestBatchId,bN(n.ne,e.overlayMutation))}function $z(n,e){const t=e.path.lastSegment();return[n,no(e.path.popLast()),t]}function qz(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:mg(i.readTime),documentKey:no(i.documentKey.path),largestBatchId:i.largestBatchId}}class DX{getBundleMetadata(e,t){return Wz(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:_g(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return Wz(e).put({bundleId:(i=t).id,createTime:mg(Lr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Zz(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:SN(r.bundledQuery),readTime:_g(r.readTime)};var r})}saveNamedQuery(e,t){return Zz(e).put({name:(i=t).name,readTime:mg(Lr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Wz(n){return Br(n,"bundles")}function Zz(n){return Br(n,"namedQueries")}class DI{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new DI(e,t.uid||"")}getOverlay(e,t){return j0(e).get($z(this.userId,t)).next(i=>i?TN(this.wt,i):null)}getOverlays(e,t){const i=ru();return de.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,l)=>{const d=new DN(t,l);r.push(this.ie(e,d))}),de.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(l=>r.add(no(l.getCollectionPath())));const s=[];return r.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);s.push(j0(e).W("collectionPathOverlayIndex",d))}),de.waitFor(s)}getOverlaysForCollection(e,t,i){const r=ru(),s=no(t),l=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return j0(e).K("collectionPathOverlayIndex",l).next(d=>{for(const p of d){const y=TN(this.wt,p);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=ru();let l;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return j0(e).J({index:"collectionGroupOverlayIndex",range:d},(p,y,w)=>{const D=TN(this.wt,y);s.size()<r||D.largestBatchId===l?(s.set(D.getKey(),D),l=D.largestBatchId):w.done()}).next(()=>s)}ie(e,t){return j0(e).put(function(i,r,s){const[l,d,p]=$z(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:V0(i.ne,s.mutation)}}(this.wt,this.userId,t))}}function j0(n){return Br(n,"documentOverlays")}class vg{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(xi(e.integerValue));else if("doubleValue"in e){const i=xi(e.doubleValue);isNaN(i)?this.ce(t,13):(this.ce(t,15),D0(i)?t.ae(0):t.ae(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ce(t,20),"string"==typeof i?t.he(i):(t.he(`${i.seconds||""}`),t.ae(i.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(ug(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?jG(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):lt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const i=e.fields||{};this.ce(t,55);for(const r of Object.keys(i))this.le(r,t),this.oe(i[r],t)}me(e,t){const i=e.values||[];this.ce(t,50);for(const r of i)this.oe(r,t)}_e(e,t){this.ce(t,37),Xe.fromName(e).path.forEach(i=>{this.ce(t,60),this.ge(i,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function SX(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Kz(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=SX(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}vg.ye=new vg;class TX{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ie(i.value),i=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ae(i.value),i=t.next();this.Re()}be(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{const r=t.codePointAt(0);this.Ie(240|r>>>18),this.Ie(128|63&r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r)}}this.Te()}Pe(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=t.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}ve(e){const t=this.Ve(e),i=Kz(t);this.Se(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}De(e){const t=this.Ve(e),i=Kz(t);this.Se(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class IX{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class AX{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class H0{constructor(){this.Me=new TX,this.Fe=new IX(this.Me),this.$e=new AX(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class bg{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new bg(this.indexId,this.documentKey,this.arrayValue,i)}}function wg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Yz(n.arrayValue,e.arrayValue),0!==t?t:(t=Yz(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function Yz(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class MX{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const i=t;i.ht()?this.Ke=i:this.qe.push(i)}}Ge(e){const t=sN(e);if(void 0!==t&&!this.Qe(t))return!1;const i=ag(e);let r=0,s=0;for(;r<i.length&&this.Qe(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Ke){const l=i[r];if(!this.je(this.Ke,l)||!this.We(this.Ue[s++],l))return!1;++r}for(;r<i.length;++r){const l=i[r];if(s>=this.Ue.length||!this.We(this.Ue[s++],l))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class xX{constructor(){this.ze=new IN}addToCollectionParentIndex(e,t){return this.ze.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(ba.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(ba.min())}updateCollectionGroup(e,t,i){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class IN{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new On(ln.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new On(ln.comparator)).toArray()}}const SI=new Uint8Array(0);class RX{constructor(e,t){this.user=e,this.databaseId=t,this.He=new IN,this.Je=new Gh(i=>fg(i),(i,r)=>A0(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const s={collectionId:i,parent:no(r)};return Qz(e).put(s)}return de.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[IG(t),""],!1,!0);return Qz(e).K(r).next(s=>{for(const l of s){if(l.collectionId!==t)break;i.push(ou(l.parent))}return i})}addFieldIndex(e,t){const i=TI(e),r={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete r.indexId;const s=i.add(r);if(t.indexState){const l=z0(e);return s.next(d=>{l.put(qz(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=TI(e),r=z0(e),s=G0(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=G0(e);let r=!0;const s=new Map;return de.forEach(this.Ye(t),l=>this.Xe(e,l).next(d=>{r&&(r=!!d),s.set(l,d)})).next(()=>{if(r){let l=Gt();const d=[];return de.forEach(s,(p,y)=>{var w;Fe("IndexedDbIndexManager",`Using index ${w=p,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(Ve=>`${Ve.fieldPath}:${Ve.kind}`).join(",")}`} to execute ${fg(t)}`);const D=function(Ve,Ge){const Dt=sN(Ge);if(void 0===Dt)return null;for(const Mt of mI(Ve,Dt.fieldPath))switch(Mt.op){case"array-contains-any":return Mt.value.arrayValue.values||[];case"array-contains":return[Mt.value]}return null}(y,p),x=function(Ve,Ge){const Dt=new Map;for(const Mt of ag(Ge))for(const nn of mI(Ve,Mt.fieldPath))switch(nn.op){case"==":case"in":Dt.set(Mt.fieldPath.canonicalString(),nn.value);break;case"not-in":case"!=":return Dt.set(Mt.fieldPath.canonicalString(),nn.value),Array.from(Dt.values())}return null}(y,p),O=function(Ve,Ge){const Dt=[];let Mt=!0;for(const nn of ag(Ge)){const Hi=0===nn.kind?qG(Ve,nn.fieldPath,Ve.startAt):WG(Ve,nn.fieldPath,Ve.startAt);Dt.push(Hi.value),Mt&&(Mt=Hi.inclusive)}return new Hh(Dt,Mt)}(y,p),L=function(Ve,Ge){const Dt=[];let Mt=!0;for(const nn of ag(Ge)){const Hi=0===nn.kind?WG(Ve,nn.fieldPath,Ve.endAt):qG(Ve,nn.fieldPath,Ve.endAt);Dt.push(Hi.value),Mt&&(Mt=Hi.inclusive)}return new Hh(Dt,Mt)}(y,p),Y=this.Ze(p,y,O),re=this.Ze(p,y,L),Oe=this.tn(p,y,x),Ue=this.en(p.indexId,D,Y,O.inclusive,re,L.inclusive,Oe);return de.forEach(Ue,Ve=>i.j(Ve,t.limit).next(Ge=>{Ge.forEach(Dt=>{const Mt=Xe.fromSegments(Dt.documentKey);l.has(Mt)||(l=l.add(Mt),d.push(Mt))})}))}).next(()=>d)}return de.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,i,r,s,l,d){const p=(null!=t?t.length:1)*Math.max(i.length,s.length),y=p/(null!=t?t.length:1),w=[];for(let D=0;D<p;++D){const x=t?this.nn(t[D/y]):SI,O=this.sn(e,x,i[D%y],r),L=this.rn(e,x,s[D%y],l),Y=d.map(re=>this.sn(e,x,re,!0));w.push(...this.createRange(O,L,Y))}return w}sn(e,t,i,r){const s=new bg(e,Xe.empty(),t,i);return r?s:s.Le()}rn(e,t,i,r){const s=new bg(e,Xe.empty(),t,i);return r?s.Le():s}Xe(e,t){const i=new MX(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let l=null;for(const d of s)i.Ge(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let i=2;return de.forEach(this.Ye(t),r=>this.Xe(e,r).next(s=>{s?0!==i&&s.fields.length<function(l){let d=new On(ji.comparator),p=!1;for(const y of l.filters){const w=y;w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?p=!0:d=d.add(w.field))}for(const y of l.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}on(e,t){const i=new H0;for(const r of ag(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const l=i.Be(r.kind);vg.ye.re(s,l)}return i.Oe()}nn(e){const t=new H0;return vg.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const i=new H0;return vg.ye.re(hg(this.databaseId,t),i.Be(function(r){const s=ag(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.Oe()}tn(e,t,i){if(null===i)return[];let r=[];r.push(new H0);let s=0;for(const l of ag(e)){const d=i[s++];for(const p of r)if(this.cn(t,l.fieldPath)&&T0(d))r=this.an(r,l,d);else{const y=p.Be(l.kind);vg.ye.re(d,y)}}return this.hn(r)}Ze(e,t,i){return this.tn(e,t,i.position)}hn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Oe();return t}an(e,t,i){const r=[...e],s=[];for(const l of i.arrayValue.values||[])for(const d of r){const p=new H0;p.seed(d.Oe()),vg.ye.re(l,p.Be(t.kind)),s.push(p)}return s}cn(e,t){return!!e.filters.find(i=>i instanceof ts&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=TI(e),r=z0(e);return(t?i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.K()).next(s=>{const l=[];return de.forEach(s,d=>r.get([d.indexId,this.uid]).next(p=>{l.push(function(y,w){const D=w?new b0(w.sequenceNumber,new ba(_g(w.readTime),new Xe(ou(w.documentKey)),w.largestBatchId)):b0.empty(),x=y.fields.map(([O,L])=>new uI(ji.fromServerFormat(O),L));return new cI(y.indexId,y.collectionGroup,x,D)}(d,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:jt(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=TI(e),s=z0(e);return this.ln(e).next(l=>r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>de.forEach(d,p=>s.put(qz(p.indexId,this.user,l,i)))))}updateIndexEntries(e,t){const i=new Map;return de.forEach(t,(r,s)=>{const l=i.get(r.collectionGroup);return(l?de.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),de.forEach(d,p=>this.fn(e,r,p).next(y=>{const w=this.dn(s,p);return y.isEqual(w)?de.resolve():this._n(e,s,p,y,w)}))))})}wn(e,t,i,r){return G0(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(i,t.key),documentKey:t.key.path.toArray()})}mn(e,t,i,r){return G0(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(i,t.key),t.key.path.toArray()])}fn(e,t,i){const r=G0(e);let s=new On(wg);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.un(i,t)])},(l,d)=>{s=s.add(new bg(i.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}dn(e,t){let i=new On(wg);const r=this.on(t,e);if(null==r)return i;const s=sN(t);if(null!=s){const l=e.data.field(s.fieldPath);if(T0(l))for(const d of l.arrayValue.values||[])i=i.add(new bg(t.indexId,e.key,this.nn(d),r))}else i=i.add(new bg(t.indexId,e.key,SI,r));return i}_n(e,t,i,r,s){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,p,y,w,D){const x=d.getIterator(),O=p.getIterator();let L=X_(x),Y=X_(O);for(;L||Y;){let re=!1,Oe=!1;if(L&&Y){const Ue=y(L,Y);Ue<0?Oe=!0:Ue>0&&(re=!0)}else null!=L?Oe=!0:re=!0;re?(w(Y),Y=X_(O)):Oe?(D(L),L=X_(x)):(L=X_(x),Y=X_(O))}}(r,s,wg,d=>{l.push(this.wn(e,t,i,d))},d=>{l.push(this.mn(e,t,i,d))}),de.waitFor(l)}ln(e){let t=1;return z0(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((l,d)=>wg(l,d)).filter((l,d,p)=>!d||0!==wg(l,p[d-1]));const r=[];r.push(e);for(const l of i){const d=wg(l,e),p=wg(l,t);if(0===d)r[0]=e.Le();else if(d>0&&p<0)r.push(l),r.push(l.Le());else if(p>0)break}r.push(t);const s=[];for(let l=0;l<r.length;l+=2)s.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,SI,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,SI,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Xz)}getMinOffset(e,t){return de.mapArray(this.Ye(t),i=>this.Xe(e,i).next(r=>r||lt())).next(Xz)}}function Qz(n){return Br(n,"collectionParents")}function G0(n){return Br(n,"indexEntries")}function TI(n){return Br(n,"indexConfiguration")}function z0(n){return Br(n,"indexState")}function Xz(n){Rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;oN(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new ba(e.readTime,e.documentKey,t)}const Jz={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fo{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Fo(e,Fo.DEFAULT_COLLECTION_PERCENTILE,Fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function e$(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let d=0;const p=i.J({range:l},(w,D,x)=>(d++,x.delete()));s.push(p.next(()=>{Rt(1===d)}));const y=[];for(const w of t.mutations){const D=Bz(e,w.key.path,t.batchId);s.push(r.delete(D)),y.push(w.key)}return de.waitFor(s).next(()=>y)}function II(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}Fo.DEFAULT_COLLECTION_PERCENTILE=10,Fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fo.DEFAULT=new Fo(41943040,Fo.DEFAULT_COLLECTION_PERCENTILE,Fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fo.DISABLED=new Fo(-1,0,0);class AI{constructor(e,t,i,r){this.userId=e,this.wt=t,this.indexManager=i,this.referenceDelegate=r,this.gn={}}static se(e,t,i,r){Rt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new AI(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $h(e).J({index:"userMutationsIndex",range:i},(r,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=cy(e),l=$h(e);return l.add({}).next(d=>{Rt("number"==typeof d);const p=new CN(d,t,i,r),y=function(x,O,L){const Y=L.baseMutations.map(Oe=>V0(x.ne,Oe)),re=L.mutations.map(Oe=>V0(x.ne,Oe));return{userId:O,batchId:L.batchId,localWriteTimeMs:L.localWriteTime.toMillis(),baseMutations:Y,mutations:re}}(this.wt,this.userId,p),w=[];let D=new On((x,O)=>jt(x.canonicalString(),O.canonicalString()));for(const x of r){const O=Bz(this.userId,x.key.path,d);D=D.add(x.key.path.popLast()),w.push(l.put(y)),w.push(s.put(O,oX))}return D.forEach(x=>{w.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.gn[d]=p.keys()}),de.waitFor(w).next(()=>p)})}lookupMutationBatch(e,t){return $h(e).get(t).next(i=>i?(Rt(i.userId===this.userId),yg(this.wt,i)):null)}yn(e,t){return this.gn[t]?de.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.gn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return $h(e).J({index:"userMutationsIndex",range:r},(l,d,p)=>{d.userId===this.userId&&(Rt(d.batchId>=i),s=yg(this.wt,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return $h(e).J({index:"userMutationsIndex",range:t,reverse:!0},(r,s,l)=>{i=s.batchId,l.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $h(e).K("userMutationsIndex",t).next(i=>i.map(r=>yg(this.wt,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=CI(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return cy(e).J({range:r},(l,d,p)=>{const[y,w,D]=l,x=ou(w);if(y===this.userId&&t.path.isEqual(x))return $h(e).get(D).next(O=>{if(!O)throw lt();Rt(O.userId===this.userId),s.push(yg(this.wt,O))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new On(jt);const r=[];return t.forEach(s=>{const l=CI(this.userId,s.path),d=IDBKeyRange.lowerBound(l),p=cy(e).J({range:d},(y,w,D)=>{const[x,O,L]=y,Y=ou(O);x===this.userId&&s.path.isEqual(Y)?i=i.add(L):D.done()});r.push(p)}),de.waitFor(r).next(()=>this.pn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=CI(this.userId,i),l=IDBKeyRange.lowerBound(s);let d=new On(jt);return cy(e).J({range:l},(p,y,w)=>{const[D,x,O]=p,L=ou(x);D===this.userId&&i.isPrefixOf(L)?L.length===r&&(d=d.add(O)):w.done()}).next(()=>this.pn(e,d))}pn(e,t){const i=[],r=[];return t.forEach(s=>{r.push($h(e).get(s).next(l=>{if(null===l)throw lt();Rt(l.userId===this.userId),i.push(yg(this.wt,l))}))}),de.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return e$(e.ee,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),de.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return cy(e).J({range:i},(s,l,d)=>{if(s[0]===this.userId){const p=ou(s[1]);r.push(p)}else d.done()}).next(()=>{Rt(0===r.length)})})}containsKey(e,t){return t$(e,this.userId,t)}Tn(e){return n$(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function t$(n,e,t){const i=CI(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let l=!1;return cy(n).J({range:s,H:!0},(d,p,y)=>{const[w,D,x]=d;w===e&&D===r&&(l=!0),y.done()}).next(()=>l)}function $h(n){return Br(n,"mutations")}function cy(n){return Br(n,"documentMutations")}function n$(n){return Br(n,"mutationQueues")}class Cg{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Cg(0)}static Rn(){return new Cg(-1)}}class kX{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const i=new Cg(t.highestTargetId);return t.highestTargetId=i.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>At.fromTimestamp(new ci(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.bn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Pn(e,r)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(i=>(i.targetCount+=1,this.Vn(t,i),this.Pn(e,i))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>uy(e).delete(t.targetId)).next(()=>this.bn(e)).next(i=>(Rt(i.targetCount>0),i.targetCount-=1,this.Pn(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return uy(e).J((l,d)=>{const p=U0(d);p.sequenceNumber<=t&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(e,p)))}).next(()=>de.waitFor(s)).next(()=>r)}forEachTarget(e,t){return uy(e).J((i,r)=>{const s=U0(r);t(s)})}bn(e){return i$(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}Pn(e,t){return i$(e).put("targetGlobalKey",t)}vn(e,t){return uy(e).put(zz(this.wt,t))}Vn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=fg(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return uy(e).J({range:r,index:"queryTargetsIndex"},(l,d,p)=>{const y=U0(d);A0(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=qh(e);return t.forEach(l=>{const d=no(l.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(e,i,l))}),de.waitFor(r)}removeMatchingKeys(e,t,i){const r=qh(e);return de.forEach(t,s=>{const l=no(s.path);return de.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=qh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=qh(e);let s=Gt();return r.J({range:i,H:!0},(l,d,p)=>{const y=ou(l[1]),w=new Xe(y);s=s.add(w)}).next(()=>s)}containsKey(e,t){const i=no(t.path),r=IDBKeyRange.bound([i],[IG(i)],!1,!0);let s=0;return qh(e).J({index:"documentTargetsIndex",H:!0,range:r},([l,d],p,y)=>{0!==l&&(s++,y.done())}).next(()=>s>0)}te(e,t){return uy(e).get(t).next(i=>i?U0(i):null)}}function uy(n){return Br(n,"targets")}function i$(n){return Br(n,"targetGlobal")}function qh(n){return Br(n,"targetDocuments")}function r$([n,e],[t,i]){const r=jt(n,t);return 0===r?jt(e,i):r}class OX{constructor(e){this.Sn=e,this.buffer=new On(r$),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();r$(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PX{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ce.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Bh(i)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Lh(i)}yield t.kn(3e5)}))}}class NX{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return de.resolve(Po.ot);const i=new OX(t);return this.On.forEachTarget(e,r=>i.xn(r.sequenceNumber)).next(()=>this.On.Fn(e,r=>i.xn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.On.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Jz)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jz):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let i,r,s,l,d,p,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),r=this.params.maximumSequenceNumbersToCollect):r=D,l=Date.now(),this.nthSequenceNumber(e,r))).next(D=>(i=D,d=Date.now(),this.removeTargets(e,i,t))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(D=>(y=Date.now(),iN()<=ec.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-w}ms\n\tDetermined least recently used ${r} in `+(d-l)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${D} documents in `+(y-p)+`ms\nTotal Duration: ${y-w}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:D})))}}class FX{constructor(e,t){this.db=e,this.garbageCollector=new NX(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Bn(e){let t=0;return this.Fn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(i,r)=>t(r))}addReference(e,t,i){return MI(e,i)}removeReference(e,t,i){return MI(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return MI(e,t)}Un(e,t){return function(i,r){let s=!1;return n$(i).Y(l=>t$(i,l,r).next(d=>(d&&(s=!0),de.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Ln(e,(l,d)=>{if(d<=t){const p=this.Un(e,l).next(y=>{if(!y)return s++,i.getEntry(e,l).next(()=>(i.removeEntry(l,At.min()),qh(e).delete([0,no(l.path)])))});r.push(p)}}).next(()=>de.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return MI(e,t)}Ln(e,t){const i=qh(e);let r,s=Po.ot;return i.J({index:"documentTargetsIndex"},([l,d],{path:p,sequenceNumber:y})=>{0===l?(s!==Po.ot&&t(new Xe(ou(r)),s),s=y,r=p):s=Po.ot}).next(()=>{s!==Po.ot&&t(new Xe(ou(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function MI(n,e){return qh(n).put((i=n.currentSequenceNumber,{targetId:0,path:no(e.path),sequenceNumber:i}));var i}class s${constructor(){this.changes=new Gh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?de.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class LX{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Eg(e).put(i)}removeEntry(e,t,i){return Eg(e).delete(function(r,s){const l=r.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],EI(s),l[l.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.qn(e,i)))}getEntry(e,t){let i=Wn.newInvalidDocument(t);return Eg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($0(t))},(r,s)=>{i=this.Kn(t,s)}).next(()=>i)}Gn(e,t){let i={size:0,document:Wn.newInvalidDocument(t)};return Eg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($0(t))},(r,s)=>{i={document:this.Kn(t,s),size:II(s)}}).next(()=>i)}getEntries(e,t){let i=No();return this.Qn(e,t,(r,s)=>{const l=this.Kn(r,s);i=i.insert(r,l)}).next(()=>i)}jn(e,t){let i=No(),r=new Mi(Xe.comparator);return this.Qn(e,t,(s,l)=>{const d=this.Kn(s,l);i=i.insert(s,d),r=r.insert(s,II(l))}).next(()=>({documents:i,Wn:r}))}Qn(e,t,i){if(t.isEmpty())return de.resolve();let r=new On(c$);t.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound($0(r.first()),$0(r.last())),l=r.getIterator();let d=l.getNext();return Eg(e).J({index:"documentKeyIndex",range:s},(p,y,w)=>{const D=Xe.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&c$(d,D)<0;)i(d,null),d=l.getNext();d&&d.isEqual(D)&&(i(d,y),d=l.hasNext()?l.getNext():null),d?w.q($0(d)):w.done()}).next(()=>{for(;d;)i(d,null),d=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,i){const r=[t.popLast().toArray(),t.lastSegment(),EI(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Eg(e).K(IDBKeyRange.bound(r,s,!0)).next(l=>{let d=No();for(const p of l){const y=this.Kn(Xe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,i,r){let s=No();const l=l$(t,i),d=l$(t,ba.max());return Eg(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(p,y,w)=>{const D=this.Kn(Xe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(D.key,D),s.size===r&&w.done()}).next(()=>s)}newChangeBuffer(e){return new BX(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return a$(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}qn(e,t){return a$(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const i=function EX(n,e){let t;if(e.document)t=xz(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Xe.fromSegments(e.noDocument.path),r=_g(e.noDocument.readTime);t=Wn.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const i=Xe.fromSegments(e.unknownDocument.path),r=_g(e.unknownDocument.version);t=Wn.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new ci(i[0],i[1]);return At.fromTimestamp(r)}(e.readTime)),t}(this.wt,t);if(!i.isNoDocument()||!i.version.isEqual(At.min()))return i}return Wn.newInvalidDocument(e)}}function o$(n){return new LX(n)}class BX extends s${constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Gh(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new On((s,l)=>jt(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const d=this.Hn.get(s);if(t.push(this.zn.removeEntry(e,s,d.readTime)),l.isValidDocument()){const p=Gz(this.zn.wt,l);r=r.add(s.path.popLast()),i+=II(p)-d.size,t.push(this.zn.addEntry(e,s,p))}else if(i-=d.size,this.trackRemovals){const p=Gz(this.zn.wt,l.convertToNoDocument(At.min()));t.push(this.zn.addEntry(e,s,p))}}),r.forEach(s=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.zn.updateMetadata(e,i)),de.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(i=>(this.Hn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:i,Wn:r})=>(r.forEach((s,l)=>{this.Hn.set(s,{size:l,readTime:i.get(s).readTime})}),i))}}function a$(n){return Br(n,"remoteDocumentGlobal")}function Eg(n){return Br(n,"remoteDocumentsV14")}function $0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function l$(n,e){const t=e.documentKey.path.toArray();return[n,EI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function c$(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=jt(t[s],i[s]),r)return r;return r=jt(t.length,i.length),r||(r=jt(t[t.length-2],i[i.length-2]),r||jt(t[t.length-1],i[i.length-1]))}class VX{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class u${constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.getBaseDocument(e,t,i))).next(r=>(null!==i&&R0(i.mutation,r,wa.empty(),ci.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Gt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Gt()){const r=ru();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let l=k0();return s.forEach((d,p)=>{l=l.insert(d,p.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const i=ru();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Gt()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,i,r){let s=No();const l=O0(),d=O0();return t.forEach((p,y)=>{const w=i.get(y.key);r.has(y.key)&&(void 0===w||w.mutation instanceof fd)?s=s.insert(y.key,y):void 0!==w&&(l.set(y.key,w.mutation.getFieldMask()),R0(w.mutation,y,w.mutation.getFieldMask(),ci.now()))}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((y,w)=>l.set(y,w)),t.forEach((y,w)=>{var D;return d.set(y,new VX(w,null!==(D=l.get(y))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(e,t){const i=O0();let r=new Mi((l,d)=>l-d),s=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let w=i.get(p)||wa.empty();w=d.applyToLocalView(y,w),i.set(p,w);const D=(r.get(d.batchId)||Gt()).add(p);r=r.insert(d.batchId,D)})}).next(()=>{const l=[],d=r.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,w=p.value,D=vz();w.forEach(x=>{if(!s.has(x)){const O=uz(t.get(x),i.get(x));null!==O&&D.set(x,O),s=s.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,D))}return de.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return Xe.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):pN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const l=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):de.resolve(ru());let d=-1,p=s;return l.next(y=>de.forEach(y,(w,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),s.get(w)?de.resolve():this.getBaseDocument(e,w,D).next(x=>{p=p.insert(w,x)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,p,y,Gt())).next(w=>({batchId:d,changes:yz(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(i=>{let r=k0();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=k0();return this.indexManager.getCollectionParents(e,r).next(l=>de.forEach(l,d=>{const p=(y=t,w=d.child(r),new hd(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,w;return this.getDocumentsMatchingCollectionQuery(e,p,i).next(y=>{y.forEach((w,D)=>{s=s.insert(w,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(s=>{s.forEach((d,p)=>{const y=p.getKey();null===r.get(y)&&(r=r.insert(y,Wn.newInvalidDocument(y)))});let l=k0();return r.forEach((d,p)=>{const y=s.get(d);void 0!==y&&R0(y.mutation,p,wa.empty(),ci.now()),mN(t,p)&&(l=l.insert(d,p))}),l})}getBaseDocument(e,t,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(e,t):de.resolve(Wn.newInvalidDocument(t))}}class UX{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return de.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var i;return this.Jn.set(t.id,{id:(i=t).id,version:i.version,createTime:Lr(i.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(i=t).name,query:SN(i.bundledQuery),readTime:Lr(i.readTime)}),de.resolve();var i}}class jX{constructor(){this.overlays=new Mi(Xe.comparator),this.Xn=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ru();return de.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ie(e,t,s)}),de.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Xn.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(i)),de.resolve()}getOverlaysForCollection(e,t,i){const r=ru(),s=t.length+1,l=new Xe(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return de.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Mi((y,w)=>y-w);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let w=s.get(y.largestBatchId);null===w&&(w=ru(),s=s.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const d=ru(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,w)=>d.set(y,w)),!(d.size()>=r)););return de.resolve(d)}ie(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const l=this.Xn.get(r.largestBatchId).delete(i.key);this.Xn.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new DN(t,i));let s=this.Xn.get(t);void 0===s&&(s=Gt(),this.Xn.set(t,s)),this.Xn.set(t,s.add(i.key))}}class AN{constructor(){this.Zn=new On(Vr.ts),this.es=new On(Vr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const i=new Vr(e,t);this.Zn=this.Zn.add(i),this.es=this.es.add(i)}ss(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.rs(new Vr(e,t))}os(e,t){e.forEach(i=>this.removeReference(i,t))}us(e){const t=new Xe(new ln([])),i=new Vr(t,e),r=new Vr(t,e+1),s=[];return this.es.forEachInRange([i,r],l=>{this.rs(l),s.push(l.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Xe(new ln([])),i=new Vr(t,e),r=new Vr(t,e+1);let s=Gt();return this.es.forEachInRange([i,r],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new Vr(e,0),i=this.Zn.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Vr{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Xe.comparator(e.key,t.key)||jt(e.ls,t.ls)}static ns(e,t){return jt(e.ls,t.ls)||Xe.comparator(e.key,t.key)}}class HX{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new On(Vr.ts)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.fs;this.fs++;const l=new CN(s,t,i,r);this.mutationQueue.push(l);for(const d of r)this.ds=this.ds.add(new Vr(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(l)}lookupMutationBatch(e,t){return de.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.ws(t+1),s=r<0?0:r;return de.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Vr(t,0),r=new Vr(t,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([i,r],l=>{const d=this._s(l.ls);s.push(d)}),de.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new On(jt);return t.forEach(r=>{const s=new Vr(r,0),l=new Vr(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,l],d=>{i=i.add(d.ls)})}),de.resolve(this.gs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;Xe.isDocumentKey(s)||(s=s.child(""));const l=new Vr(new Xe(s),0);let d=new On(jt);return this.ds.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(d=d.add(p.ls)),!0)},l),de.resolve(this.gs(d))}gs(e){const t=[];return e.forEach(i=>{const r=this._s(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Rt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let i=this.ds;return de.forEach(t.mutations,r=>{const s=new Vr(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=i})}In(e){}containsKey(e,t){const i=new Vr(t,0),r=this.ds.firstAfterOrEqual(i);return de.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return de.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class GX{constructor(e){this.ps=e,this.docs=new Mi(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,l=this.ps(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return de.resolve(i?i.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let i=No();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Wn.newInvalidDocument(r))}),de.resolve(i)}getAllFromCollection(e,t,i){let r=No();const s=new Xe(t.child("")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:d,value:{document:p}}=l.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||oN(MG(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return de.resolve(r)}getAllFromCollectionGroup(e,t,i,r){lt()}Is(e,t){return de.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new zX(this)}getSize(e){return de.resolve(this.size)}}class zX extends s${constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.zn.addEntry(e,r)):this.zn.removeEntry(i)}),de.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class $X{constructor(e){this.persistence=e,this.Ts=new Gh(t=>fg(t),A0),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Es=0,this.As=new AN,this.targetCount=0,this.Rs=Cg.An()}forEachTarget(e,t){return this.Ts.forEach((i,r)=>t(r)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Es&&(this.Es=t),de.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Cg(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.vn(t),de.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Ts.forEach((l,d)=>{d.sequenceNumber<=t&&null===i.get(d.targetId)&&(this.Ts.delete(l),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)}),de.waitFor(s).next(()=>r)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const i=this.Ts.get(t)||null;return de.resolve(i)}addMatchingKeys(e,t,i){return this.As.ss(t,i),de.resolve()}removeMatchingKeys(e,t,i){this.As.os(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(l=>{s.push(r.markPotentiallyOrphaned(e,l))}),de.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),de.resolve()}getMatchingKeysForTargetId(e,t){const i=this.As.hs(t);return de.resolve(i)}containsKey(e,t){return de.resolve(this.As.containsKey(t))}}class d${constructor(e,t){this.bs={},this.overlays={},this.Ps=new Po(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new $X(this),this.indexManager=new xX,this.remoteDocumentCache=new GX(i=>this.referenceDelegate.Ss(i)),this.wt=new Hz(t),this.Ds=new UX(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jX,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.bs[e.toKey()];return i||(i=new HX(t,this.referenceDelegate),this.bs[e.toKey()]=i),i}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,i){Fe("MemoryPersistence","Starting transaction:",e);const r=new qX(this.Ps.next());return this.referenceDelegate.Cs(),i(r).next(s=>this.referenceDelegate.xs(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ns(e,t){return de.or(Object.values(this.bs).map(i=>()=>i.containsKey(e,t)))}}class qX extends RG{constructor(e){super(),this.currentSequenceNumber=e}}class xI{constructor(e){this.persistence=e,this.ks=new AN,this.Os=null}static Ms(e){return new xI(e)}get Fs(){if(this.Os)return this.Os;throw lt()}addReference(e,t,i){return this.ks.addReference(i,t),this.Fs.delete(i.toString()),de.resolve()}removeReference(e,t,i){return this.ks.removeReference(i,t),this.Fs.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),de.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(r=>this.Fs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Fs.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Fs,i=>{const r=Xe.fromPath(i);return this.$s(e,r).next(s=>{s||t.removeEntry(r,At.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(i=>{i?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return de.or([()=>de.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class WX{constructor(e){this.wt=e}O(e,t,i,r){const s=new dI("createOrUpgrade",t);var d;i<1&&r>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Lz,{unique:!0}),d.createObjectStore("documentMutations"),h$(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=de.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),h$(e)),l=l.next(()=>function(d){const p=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),i<4&&r>=4&&(0!==i&&(l=l.next(()=>function(d,p){return p.store("mutations").K().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Lz,{unique:!0});const w=p.store("mutations"),D=y.map(x=>w.put(x));return de.waitFor(D)})}(e,s))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(l=l.next(()=>this.Bs(s))),i<6&&r>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(s)))),i<7&&r>=7&&(l=l.next(()=>this.Us(s))),i<8&&r>=8&&(l=l.next(()=>this.qs(e,s))),i<9&&r>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(l=l.next(()=>this.Ks(s))),i<11&&r>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(l=l.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:yX});p.createIndex("collectionPathOverlayIndex",vX,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",bX,{unique:!1})}(e)})),i<13&&r>=13&&(l=l.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:aX});p.createIndex("documentKeyIndex",lX),p.createIndex("collectionGroupIndex",cX)}(e)).next(()=>this.Gs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(l=l.next(()=>this.Qs(e,s))),i<15&&r>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:pX}).createIndex("sequenceNumberIndex",gX,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:mX}).createIndex("documentKeyIndex",_X,{unique:!1})}(e))),l}Ls(e){let t=0;return e.store("remoteDocuments").J((i,r)=>{t+=II(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Bs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.K().next(r=>de.forEach(r,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.K("userMutationsIndex",l).next(d=>de.forEach(d,p=>{Rt(p.userId===s.userId);const y=yg(this.wt,p);return e$(e,s.userId,y).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.J((l,d)=>{const p=new ln(l),y=[0,no(p)];s.push(t.get(y).next(w=>w?de.resolve():t.put({targetId:0,path:no(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>de.waitFor(s))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:fX});const i=t.store("collectionParents"),r=new IN,s=l=>{if(r.add(l)){const d=l.lastSegment(),p=l.popLast();return i.put({collectionId:d,parent:no(p)})}};return t.store("remoteDocuments").J({H:!0},(l,d)=>{const p=new ln(l);return s(p.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,d,p],y)=>{const w=ou(d);return s(w.popLast())}))}Ks(e){const t=e.store("targets");return t.J((i,r)=>{const s=U0(r),l=zz(this.wt,s);return t.put(l)})}Gs(e,t){const i=t.store("remoteDocuments"),r=[];return i.J((s,l)=>{const d=t.store("remoteDocumentsV14"),p=(y=l,y.document?new Xe(ln.fromString(y.document.name).popFirst(5)):y.noDocument?Xe.fromSegments(y.noDocument.path):y.unknownDocument?Xe.fromSegments(y.unknownDocument.path):lt()).path.toArray();var y;const w={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(d.put(w))}).next(()=>de.waitFor(r))}Qs(e,t){const i=t.store("mutations"),r=o$(this.wt),s=new d$(xI.Ms,this.wt.ne);return i.K().next(l=>{const d=new Map;return l.forEach(p=>{var y;let w=null!==(y=d.get(p.userId))&&void 0!==y?y:Gt();yg(this.wt,p).keys().forEach(D=>w=w.add(D)),d.set(p.userId,w)}),de.forEach(d,(p,y)=>{const w=new Nr(y),D=DI.se(this.wt,w),x=s.getIndexManager(w),O=AI.se(w,this.wt,x,s.referenceDelegate);return new u$(r,O,D,x).recalculateAndSaveOverlaysForDocumentKeys(new wN(t,Po.ot),p).next()})})}}function h$(n){n.createObjectStore("targetDocuments",{keyPath:dX}).createIndex("documentTargetsIndex",hX,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uX,{unique:!0}),n.createObjectStore("targetGlobal")}const MN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class xN{constructor(e,t,i,r,s,l,d,p,y,w,D=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.js=s,this.window=l,this.document=d,this.Ws=y,this.zs=w,this.Hs=D,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=x=>Promise.resolve(),!xN.V())throw new ke(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FX(this,r),this.ei=t+"main",this.wt=new Hz(p),this.ni=new ac(this.ei,this.Hs,new WX(this.wt)),this.Vs=new kX(this.referenceDelegate,this.wt),this.remoteDocumentCache=o$(this.wt),this.Ds=new DX,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===w&&Ji("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(ge.FAILED_PRECONDITION,MN);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Po(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var i=(0,Ce.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Ce.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>RI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Bh(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return q0(e).get("owner").next(t=>de.resolve(this.di(t)))}_i(e){return RI(e).delete(this.clientId)}wi(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Br(i,"clientMetadata");return r.K().next(s=>{const l=e.gi(s,18e5),d=s.filter(p=>-1===l.indexOf(p));return de.forEach(d,p=>r.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(e.si)for(const i of t)e.si.removeItem(e.yi(i.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?de.resolve(!0):q0(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new ke(ge.FAILED_PRECONDITION,MN);return!1}}return!(!this.networkEnabled||!this.inForeground)||RI(e).K().next(i=>void 0===this.gi(i,5e3).find(r=>{if(this.clientId!==r.clientId){const l=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new wN(t,Po.ot);return e.li(i).next(()=>e._i(i))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(i=>this.mi(i.updateTimeMs,t)&&!this.pi(i.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>RI(e).K().next(t=>this.gi(t,18e5).map(i=>i.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return AI.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new RX(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return DI.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,i){Fe("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(l=this.Hs)?CX:14===l?jz:13===l?Uz:12===l?wX:11===l?Vz:void lt();var l;let d;return this.ni.runTransaction(e,r,s,p=>(d=new wN(p,this.Ps?this.Ps.next():Po.ot),"readwrite-primary"===t?this.ai(d).next(y=>!!y||this.hi(d)).next(y=>{if(!y)throw Ji(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new ke(ge.FAILED_PRECONDITION,xG);return i(d)}).next(y=>this.fi(d).next(()=>y)):this.bi(d).next(()=>i(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}bi(e){return q0(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(ge.FAILED_PRECONDITION,MN)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return q0(e).put("owner",t)}static V(){return ac.V()}li(e){const t=q0(e);return t.get("owner").next(i=>this.di(i)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}mi(e,t){const i=Date.now();return!(e<i-t||e>i&&(Ji(`Detected an update time that is in the future: ${e} > ${i}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,N.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const i=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ji("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Ji("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function q0(n){return Br(n,"owner")}function RI(n){return Br(n,"clientMetadata")}function RN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class kN{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Pi=i,this.vi=r}static Vi(e,t){let i=Gt(),r=Gt();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new kN(e,t.fromCache,i,r)}}class f${constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ci(e,t).next(s=>s||this.xi(e,t,r,i)).next(s=>s||this.Ni(e,t))}Ci(e,t){return de.resolve(null)}xi(e,t,i,r){return function k9(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(At.min())?this.Ni(e,t):this.Di.getDocuments(e,i).next(s=>{const l=this.ki(t,s);return this.Oi(t,l,i,r)?this.Ni(e,t):(iN()<=ec.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gN(t)),this.Mi(e,l,t,AG(r,-1)))})}ki(e,t){let i=new On(tz(e));return t.forEach((r,s)=>{mN(e,s)&&(i=i.add(s))}),i}Oi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ni(e,t){return iN()<=ec.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",gN(t)),this.Di.getDocumentsMatchingQuery(e,t,ba.min())}Mi(e,t,i,r){return this.Di.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class ZX{constructor(e,t,i,r){this.persistence=e,this.Fi=t,this.wt=r,this.$i=new Mi(jt),this.Bi=new Gh(s=>fg(s),A0),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(i)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u$(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function p$(n,e,t,i){return new ZX(n,e,t,i)}function g$(n,e){return ON.apply(this,arguments)}function ON(){return ON=(0,Ce.Z)(function*(n,e){const t=it(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.qi(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const l=[],d=[];let p=Gt();for(const y of r){l.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}for(const y of s){d.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(i,p).next(y=>({Ki:y,removedBatchIds:l,addedBatchIds:d}))})})}),ON.apply(this,arguments)}function KX(n,e){const t=it(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Ui.newChangeBuffer({trackRemovals:!0});return function(l,d,p,y){const w=p.batch,D=w.keys();let x=de.resolve();return D.forEach(O=>{x=x.next(()=>y.getEntry(d,O)).next(L=>{const Y=p.docVersions.get(O);Rt(null!==Y),L.version.compareTo(Y)<0&&(w.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),y.addEntry(L)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(d,w))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let d=Gt();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(d=d.add(l.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function m$(n){const e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function YX(n,e){const t=it(n),i=e.snapshotVersion;let r=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.Ui.newChangeBuffer({trackRemovals:!0});r=t.$i;const d=[];e.targetChanges.forEach((w,D)=>{const x=r.get(D);if(!x)return;d.push(t.Vs.removeMatchingKeys(s,w.removedDocuments,D).next(()=>t.Vs.addMatchingKeys(s,w.addedDocuments,D)));let O=x.withSequenceNumber(s.currentSequenceNumber);var L,Y,re;e.targetMismatches.has(D)?O=O.withResumeToken(dr.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,i)),r=r.insert(D,O),Y=O,re=w,(0===(L=x).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8||re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0)&&d.push(t.Vs.updateTargetData(s,O))});let p=No(),y=Gt();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,w))}),d.push(_$(s,l,e.documentUpdates).next(w=>{p=w.Gi,y=w.Qi})),!i.isEqual(At.min())){const w=t.Vs.getLastRemoteSnapshotVersion(s).next(D=>t.Vs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(w)}return de.waitFor(d).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(t.$i=r,s))}function _$(n,e,t){let i=Gt(),r=Gt();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let l=No();return t.forEach((d,p)=>{const y=s.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(r=r.add(d)),p.isNoDocument()&&p.version.isEqual(At.min())?(e.removeEntry(d,p.readTime),l=l.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),l=l.insert(d,p)):Fe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{Gi:l,Qi:r}})}function QX(n,e){const t=it(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function dy(n,e){const t=it(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Vs.getTargetData(i,e).next(s=>s?(r=s,de.resolve(r)):t.Vs.allocateTargetId(i).next(l=>(r=new zh(e,l,0,i.currentSequenceNumber),t.Vs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.$i.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.$i=t.$i.insert(i.targetId,i),t.Bi.set(e,i.targetId)),i})}function hy(n,e,t){return PN.apply(this,arguments)}function PN(){return PN=(0,Ce.Z)(function*(n,e,t){const i=it(n),r=i.$i.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Bh(l))throw l;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.$i=i.$i.remove(e),i.Bi.delete(r.target)}),PN.apply(this,arguments)}function kI(n,e,t){const i=it(n);let r=At.min(),s=Gt();return i.persistence.runTransaction("Execute query","readonly",l=>function(d,p,y){const w=it(d),D=w.Bi.get(y);return void 0!==D?de.resolve(w.$i.get(D)):w.Vs.getTargetData(p,y)}(i,l,rl(e)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Vs.getMatchingKeysForTargetId(l,d.targetId).next(p=>{s=p})}).next(()=>i.Fi.getDocumentsMatchingQuery(l,e,t?r:At.min(),t?s:Gt())).next(d=>(b$(i,ez(e),d),{documents:d,ji:s})))}function y$(n,e){const t=it(n),i=it(t.Vs),r=t.$i.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.te(s,e).next(l=>l?l.target:null))}function v$(n,e){const t=it(n),i=t.Li.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Ui.getAllFromCollectionGroup(r,e,AG(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(b$(t,e,r),r))}function b$(n,e,t){let i=At.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Li.set(e,i)}function NN(){return NN=(0,Ce.Z)(function*(n,e,t,i){const r=it(n);let s=Gt(),l=No();for(const y of t){const w=e.Wi(y.metadata.name);y.document&&(s=s.add(w));const D=e.zi(y);D.setReadTime(e.Hi(y.metadata.readTime)),l=l.insert(w,D)}const d=r.Ui.newChangeBuffer({trackRemovals:!0}),p=yield dy(r,(y=i,rl(ty(ln.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>_$(y,d,l).next(w=>(d.apply(y),w)).next(w=>r.Vs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>r.Vs.addMatchingKeys(y,s,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(y,w.Gi,w.Qi)).next(()=>w.Gi)))}),NN.apply(this,arguments)}function JX(n,e){return FN.apply(this,arguments)}function FN(){return FN=(0,Ce.Z)(function*(n,e,t=Gt()){const i=yield dy(n,rl(SN(e.bundledQuery))),r=it(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const l=Lr(e.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r.Ds.saveNamedQuery(s,e);const d=i.withResumeToken(dr.EMPTY_BYTE_STRING,l);return r.$i=r.$i.insert(d.targetId,d),r.Vs.updateTargetData(s,d).next(()=>r.Vs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Vs.addMatchingKeys(s,t,i.targetId)).next(()=>r.Ds.saveNamedQuery(s,e))})}),FN.apply(this,arguments)}function w$(n,e){return`firestore_clients_${n}_${e}`}function C$(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function LN(n,e){return`firestore_targets_${n}_${e}`}class OI{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Ji(e,t,i){const r=JSON.parse(i);let s,l="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(s=new ke(r.error.code,r.error.message))),l?new OI(e,t,r.state,s):(Ji("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class W0{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ji(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new ke(i.error.code,i.error.message))),s?new W0(e,i.state,r):(Ji("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class PI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=bI();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=LG(i.activeTargetIds[l]),s=s.add(i.activeTargetIds[l]);return r?new PI(e,s):(Ji("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class BN{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new BN(t.clientId,t.onlineState):(Ji("SharedClientState",`Failed to parse online state: ${e}`),null)}}class VN{constructor(){this.activeTargetIds=bI()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UN{constructor(e,t,i,r,s){this.window=e,this.js=t,this.persistenceKey=i,this.tr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Mi(jt),this.started=!1,this.ir=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=w$(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new VN),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.Ri();for(const r of t){if(r===e.tr)continue;const s=e.getItem(w$(e.persistenceKey,r));if(s){const l=PI.Ji(r,s);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const i=e.storage.getItem(e.lr);if(i){const r=e.wr(i);r&&e.mr(r)}for(const r of e.ir)e.nr(r);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,i){this.yr(e,t,i),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(LN(this.persistenceKey,e));if(i){const r=W0.Ji(e,i);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(LN(this.persistenceKey,e))}updateQueryState(e,t,i){this.Tr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.pr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Fe("SharedClientState","EVENT",i.key,i.newValue),i.key===this.rr)return void Ji("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==i.key)if(t.cr.test(i.key)){if(null==i.newValue){const r=t.Rr(i.key);return t.br(r,null)}{const r=t.Pr(i.key,i.newValue);if(r)return t.br(r.clientId,r)}}else if(t.ar.test(i.key)){if(null!==i.newValue){const r=t.vr(i.key,i.newValue);if(r)return t.Vr(r)}}else if(t.hr.test(i.key)){if(null!==i.newValue){const r=t.Sr(i.key,i.newValue);if(r)return t.Dr(r)}}else if(i.key===t.lr){if(null!==i.newValue){const r=t.wr(i.newValue);if(r)return t.mr(r)}}else if(i.key===t.ur){const r=function(s){let l=Po.ot;if(null!=s)try{const d=JSON.parse(s);Rt("number"==typeof d),l=d}catch(d){Ji("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(i.newValue);r!==Po.ot&&t.sequenceNumberHandler(r)}else if(i.key===t.dr){const r=t.Cr(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Nr(s)))}}else t.ir.push(i)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,i){const r=new OI(this.currentUser,e,t,i),s=C$(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Yi())}pr(e){const t=C$(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,i){const r=LN(this.persistenceKey,e),s=new W0(e,t,i);this.setItem(r,s.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const i=this.Rr(e);return PI.Ji(i,t)}vr(e,t){const i=this.ar.exec(e),r=Number(i[1]);return OI.Ji(new Nr(void 0!==i[2]?i[2]:null),r,t)}Sr(e,t){const i=this.hr.exec(e),r=Number(i[1]);return W0.Ji(r,t)}wr(e){return BN.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const i=t?this.sr.insert(e,t):this.sr.remove(e),r=this.gr(this.sr),s=this.gr(i),l=[],d=[];return s.forEach(p=>{r.has(p)||l.push(p)}),r.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Mr(l,d).then(()=>{this.sr=i})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=bI();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class E${constructor(){this.Fr=new VN,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,i){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new VN,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eJ{Br(e){}shutdown(){}}class D${constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const tJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class nJ{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class iJ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,i,r,s){const l=this.oo(e,t);Fe("RestConnection","Sending: ",l,i);const d={};return this.uo(d,r,s),this.co(e,l,d,i).then(p=>(Fe("RestConnection","Received: ",p),p),p=>{throw y0("RestConnection",`${e} failed with error: `,p,"url: ",l,"request:",i),p})}ao(e,t,i,r,s,l){return this.ro(e,t,i,r,s)}uo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Y_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}oo(e,t){return`${this.so}/v1/${t}:${tJ[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,i,r){return new Promise((s,l)=>{const d=new n9;d.listenOnce(JQ.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case nN.NO_ERROR:const y=d.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(y)),s(y);break;case nN.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),l(new ke(ge.DEADLINE_EXCEEDED,"Request time out"));break;case nN.HTTP_ERROR:const w=d.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',w,"response text:",d.getResponseText()),w>0){const D=d.getResponseJson().error;if(D&&D.status&&D.message){const x=function(O){const L=O.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(L)>=0?L:ge.UNKNOWN}(D.status);l(new ke(x,D.message))}else l(new ke(ge.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new ke(ge.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(r);d.send(t,"POST",p,i,15)})}ho(e,t,i){const r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=QQ(),l=XQ(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new t9({})),this.uo(d.initMessageHeaders,t,i),(0,N.uI)()||(0,N.b$)()||(0,N.d)()||(0,N.w1)()||(0,N.Mn)()||(0,N.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");Fe("Connection","Creating WebChannel: "+p,d);const y=s.createWebChannel(p,d);let w=!1,D=!1;const x=new nJ({jr:L=>{D?Fe("Connection","Not sending because WebChannel is closed:",L):(w||(Fe("Connection","Opening WebChannel transport."),y.open(),w=!0),Fe("Connection","WebChannel sending:",L),y.send(L))},Wr:()=>y.close()}),O=(L,Y,re)=>{L.listen(Y,Oe=>{try{re(Oe)}catch(Ue){setTimeout(()=>{throw Ue},0)}})};return O(y,lI.EventType.OPEN,()=>{D||Fe("Connection","WebChannel transport opened.")}),O(y,lI.EventType.CLOSE,()=>{D||(D=!0,Fe("Connection","WebChannel transport closed"),x.eo())}),O(y,lI.EventType.ERROR,L=>{D||(D=!0,y0("Connection","WebChannel transport errored:",L),x.eo(new ke(ge.UNAVAILABLE,"The operation could not be completed")))}),O(y,lI.EventType.MESSAGE,L=>{var Y;if(!D){const re=L.data[0];Rt(!!re);const Oe=re,Ue=Oe.error||(null===(Y=Oe[0])||void 0===Y?void 0:Y.error);if(Ue){Fe("Connection","WebChannel received error:",Ue);const Ve=Ue.status;let Ge=function(Mt){const nn=er[Mt];if(void 0!==nn)return mz(nn)}(Ve),Dt=Ue.message;void 0===Ge&&(Ge=ge.INTERNAL,Dt="Unknown error status: "+Ve+" with message "+Ue.message),D=!0,x.eo(new ke(Ge,Dt)),y.close()}else Fe("Connection","WebChannel received:",re),x.no(re)}}),O(l,e9.STAT_EVENT,L=>{L.stat===CG.PROXY?Fe("Connection","Detected buffering proxy"):L.stat===CG.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.Zr()},0),x}}function S$(){return"undefined"!=typeof window?window:null}function NI(){return"undefined"!=typeof document?document:null}function Z0(n){return new Z9(n,!0)}class jN{constructor(e,t,i=1e3,r=1.5,s=6e4){this.js=e,this.timerId=t,this.lo=i,this.fo=r,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),i=Math.max(0,Date.now()-this.yo),r=Math.max(0,t-i);r>0&&Fe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,r,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class T${constructor(e,t,i,r,s,l,d,p){this.js=e,this.Ao=i,this.Ro=r,this.bo=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new jN(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ce.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Ce.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var i=this;return(0,Ce.Z)(function*(){i.Fo(),i.$o(),i.So.cancel(),i.Po++,4!==e?i.So.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Ji(t.toString()),Ji("Using maximum backoff delay to prevent overloading the backend."),i.So.po()):t&&t.code===ge.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Bo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Po===t&&this.Uo(i,r)},i=>{e(()=>{const r=new ke(ge.UNKNOWN,"Fetching auth token failed: "+i.message);return this.qo(r)})})}Uo(e,t){const i=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{i(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(r=>{i(()=>this.qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}xo(){var e=this;this.state=5,this.So.Io((0,Ce.Z)(function*(){e.state=0,e.start()}))}qo(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rJ extends T${constructor(e,t,i,r,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.wt=s}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Q9(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:lt(),r=e.targetChange.targetIds||[],s=function(p,y){return p.dt?(Rt(void 0===y||"string"==typeof y),dr.fromBase64String(y||"")):(Rt(void 0===y||y instanceof Uint8Array),dr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(p){const y=void 0===p.code?ge.UNKNOWN:mz(p.code);return new ke(y,p.message||"")}(l);t=new wz(i,r,s,d||null)}else if("documentChange"in e){const i=e.documentChange,r=su(n,i.document.name),s=Lr(i.document.updateTime),l=new es({mapValue:{fields:i.document.fields}}),d=Wn.newFoundDocument(r,s,l);t=new wI(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const i=e.documentDelete,r=su(n,i.document),s=i.readTime?Lr(i.readTime):At.min(),l=Wn.newNoDocument(r,s);t=new wI([],i.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const i=e.documentRemove,r=su(n,i.document);t=new wI([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return lt();{const i=e.filter,s=new U9(i.count||0);t=new bz(i.targetId,s)}}var p;return t}(this.wt,e),i=function(r){if(!("targetChange"in r))return At.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?At.min():s.readTime?Lr(s.readTime):At.min()}(e);return this.listener.Go(t,i)}Qo(e){const t={};t.database=B0(this.wt),t.addTarget=function(r,s){let l;const d=s.target;return l=gI(d)?{documents:Rz(r,d)}:{query:kz(r,d)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=Sz(r,s.resumeToken):s.snapshotVersion.compareTo(At.min())>0&&(l.readTime=F0(r,s.snapshotVersion.toTimestamp())),l}(this.wt,e);const i=function J9(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Mo(t)}jo(e){const t={};t.database=B0(this.wt),t.removeTarget=e,this.Mo(t)}}class sJ extends T${constructor(e,t,i,r,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function X9(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(i,r){let s=Lr(i.updateTime?i.updateTime:r);return s.isEqual(At.min())&&(s=Lr(r)),new L9(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Lr(e.commitTime);return this.listener.Jo(i,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=B0(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>V0(this.wt,i))};this.Mo(t)}}class oJ extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=i,this.wt=r,this.Zo=!1}tu(){if(this.Zo)throw new ke(ge.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.bo.ro(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ke(ge.UNKNOWN,r.toString())})}ao(e,t,i,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.bo.ao(e,t,i,s,l,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ke(ge.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class aJ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Ji(t),this.su=!1):Fe("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class lJ{constructor(e,t,i,r,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(d=>{i.enqueueAndForget((0,Ce.Z)(function*(){var p;Wh(l)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Ce.Z)(function*(y){const w=it(y);w.lu.add(4),yield fy(w),w._u.set("Unknown"),w.lu.delete(4),yield K0(w)}),function(y){return p.apply(this,arguments)})(l))}))}),this._u=new aJ(i,r)}}function K0(n){return HN.apply(this,arguments)}function HN(){return HN=(0,Ce.Z)(function*(n){if(Wh(n))for(const e of n.fu)yield e(!0)}),HN.apply(this,arguments)}function fy(n){return GN.apply(this,arguments)}function GN(){return GN=(0,Ce.Z)(function*(n){for(const e of n.fu)yield e(!1)}),GN.apply(this,arguments)}function FI(n,e){const t=it(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),qN(t)?$N(t):gy(t).Co()&&zN(t,e))}function Y0(n,e){const t=it(n),i=gy(t);t.hu.delete(e),i.Co()&&I$(t,e),0===t.hu.size&&(i.Co()?i.ko():Wh(t)&&t._u.set("Unknown"))}function zN(n,e){n.wu.Nt(e.targetId),gy(n).Qo(e)}function I$(n,e){n.wu.Nt(e),gy(n).jo(e)}function $N(n){n.wu=new $9({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),gy(n).start(),n._u.iu()}function qN(n){return Wh(n)&&!gy(n).Do()&&n.hu.size>0}function Wh(n){return 0===it(n).lu.size}function A$(n){n.wu=void 0}function cJ(n){return WN.apply(this,arguments)}function WN(){return WN=(0,Ce.Z)(function*(n){n.hu.forEach((e,t)=>{zN(n,e)})}),WN.apply(this,arguments)}function uJ(n,e){return ZN.apply(this,arguments)}function ZN(){return ZN=(0,Ce.Z)(function*(n,e){A$(n),qN(n)?(n._u.uu(e),$N(n)):n._u.set("Unknown")}),ZN.apply(this,arguments)}function dJ(n,e,t){return KN.apply(this,arguments)}function KN(){return KN=(0,Ce.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof wz&&2===e.state&&e.cause)try{yield(i=(0,Ce.Z)(function*(r,s){const l=s.cause;for(const d of s.targetIds)r.hu.has(d)&&(yield r.remoteSyncer.rejectListen(d,l),r.hu.delete(d),r.wu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield LI(n,i)}else if(e instanceof wI?n.wu.Ut(e):e instanceof bz?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(At.min()))try{const i=yield m$(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const l=r.wu.Yt(s);return l.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=r.hu.get(p);y&&r.hu.set(p,y.withResumeToken(d.resumeToken,s))}}),l.targetMismatches.forEach(d=>{const p=r.hu.get(d);if(!p)return;r.hu.set(d,p.withResumeToken(dr.EMPTY_BYTE_STRING,p.snapshotVersion)),I$(r,d);const y=new zh(p.target,d,1,p.sequenceNumber);zN(r,y)}),r.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(i){Fe("RemoteStore","Failed to raise snapshot:",i),yield LI(n,i)}var i}),KN.apply(this,arguments)}function LI(n,e,t){return YN.apply(this,arguments)}function YN(){return YN=(0,Ce.Z)(function*(n,e,t){if(!Bh(e))throw e;n.lu.add(1),yield fy(n),n._u.set("Offline"),t||(t=()=>m$(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield K0(n)}))}),YN.apply(this,arguments)}function M$(n,e){return e().catch(t=>LI(n,t,e))}function py(n){return QN.apply(this,arguments)}function QN(){return QN=(0,Ce.Z)(function*(n){const e=it(n),t=Zh(e);let i=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;hJ(e);)try{const r=yield QX(e.localStore,i);if(null===r){0===e.au.length&&t.ko();break}i=r.batchId,fJ(e,r)}catch(r){yield LI(e,r)}x$(e)&&R$(e)}),QN.apply(this,arguments)}function hJ(n){return Wh(n)&&n.au.length<10}function fJ(n,e){n.au.push(e);const t=Zh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function x$(n){return Wh(n)&&!Zh(n).Do()&&n.au.length>0}function R$(n){Zh(n).start()}function pJ(n){return XN.apply(this,arguments)}function XN(){return XN=(0,Ce.Z)(function*(n){Zh(n).Xo()}),XN.apply(this,arguments)}function gJ(n){return JN.apply(this,arguments)}function JN(){return JN=(0,Ce.Z)(function*(n){const e=Zh(n);for(const t of n.au)e.Ho(t.mutations)}),JN.apply(this,arguments)}function mJ(n,e,t){return eF.apply(this,arguments)}function eF(){return eF=(0,Ce.Z)(function*(n,e,t){const i=n.au.shift(),r=EN.from(i,e,t);yield M$(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield py(n)}),eF.apply(this,arguments)}function _J(n,e){return tF.apply(this,arguments)}function tF(){return tF=(0,Ce.Z)(function*(n,e){var t;e&&Zh(n).zo&&(yield(t=(0,Ce.Z)(function*(i,r){if(gz(s=r.code)&&s!==ge.ABORTED){const l=i.au.shift();Zh(i).No(),yield M$(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),yield py(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),x$(n)&&R$(n)}),tF.apply(this,arguments)}function k$(n,e){return nF.apply(this,arguments)}function nF(){return nF=(0,Ce.Z)(function*(n,e){const t=it(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const i=Wh(t);t.lu.add(3),yield fy(t),i&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield K0(t)}),nF.apply(this,arguments)}function iF(n,e){return rF.apply(this,arguments)}function rF(){return rF=(0,Ce.Z)(function*(n,e){const t=it(n);e?(t.lu.delete(2),yield K0(t)):e||(t.lu.add(2),yield fy(t),t._u.set("Unknown"))}),rF.apply(this,arguments)}function gy(n){return n.mu||(n.mu=function(e,t,i){const r=it(e);return r.tu(),new rJ(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:cJ.bind(null,n),Jr:uJ.bind(null,n),Go:dJ.bind(null,n)}),n.fu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.mu.No(),qN(n)?$N(n):n._u.set("Unknown")):(yield n.mu.stop(),A$(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Zh(n){return n.gu||(n.gu=function(e,t,i){const r=it(e);return r.tu(),new sJ(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:pJ.bind(null,n),Jr:_J.bind(null,n),Yo:gJ.bind(null,n),Jo:mJ.bind(null,n)}),n.fu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.gu.No(),yield py(n)):(yield n.gu.stop(),n.au.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class sF{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,i,r,s){const l=Date.now()+i,d=new sF(e,t,l,r,s);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function my(n,e){if(Ji("AsyncQueue",`${e}: ${n}`),Bh(n))return new ke(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class _y{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Xe.comparator(t.key,i.key):(t,i)=>Xe.comparator(t.key,i.key),this.keyedMap=k0(),this.sortedSet=new Mi(this.comparator)}static emptySet(e){return new _y(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _y)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new _y;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class O${constructor(){this.yu=new Mi(Xe.comparator)}track(e){const t=e.doc.key,i=this.yu.get(t);i?0!==e.type&&3===i.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==i.type?this.yu=this.yu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.yu=this.yu.remove(t):1===e.type&&2===i.type?this.yu=this.yu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):lt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,i)=>{e.push(i)}),e}}class yy{constructor(e,t,i,r,s,l,d,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,i,r){const s=[];return t.forEach(l=>{s.push({type:0,doc:l})}),new yy(e,t,_y.emptySet(t),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&M0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class yJ{constructor(){this.Iu=void 0,this.listeners=[]}}class vJ{constructor(){this.queries=new Gh(e=>JG(e),M0),this.onlineState="Unknown",this.Tu=new Set}}function oF(n,e){return aF.apply(this,arguments)}function aF(){return aF=(0,Ce.Z)(function*(n,e){const t=it(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new yJ),r)try{s.Iu=yield t.onListen(i)}catch(l){const d=my(l,`Initialization of query '${gN(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,s),s.listeners.push(e),e.Eu(t.onlineState),s.Iu&&e.Au(s.Iu)&&uF(t)}),aF.apply(this,arguments)}function lF(n,e){return cF.apply(this,arguments)}function cF(){return cF=(0,Ce.Z)(function*(n,e){const t=it(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),cF.apply(this,arguments)}function bJ(n,e){const t=it(n);let i=!1;for(const r of e){const l=t.queries.get(r.query);if(l){for(const d of l.listeners)d.Au(r)&&(i=!0);l.Iu=r}}i&&uF(t)}function wJ(n,e,t){const i=it(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function uF(n){n.Tu.forEach(e=>{e.next()})}class dF{constructor(e,t,i){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=i||{}}Au(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new yy(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=yy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class CJ{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class P${constructor(e){this.wt=e}Wi(e){return su(this.wt,e)}zi(e){return e.metadata.exists?xz(this.wt,e.document,!1):Wn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Lr(e)}}class EJ{constructor(e,t,i){this.xu=e,this.localStore=t,this.wt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=N$(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const i=ln.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,i=new P$(this.wt);for(const r of e)if(r.metadata.queries){const s=i.Wi(r.metadata.name);for(const l of r.metadata.queries){const d=(t.get(l)||Gt()).add(s);t.set(l,d)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function XX(n,e,t,i){return NN.apply(this,arguments)}(e.localStore,new P$(e.wt),e.documents,e.xu.id),i=e.ku(e.documents);for(const r of e.queries)yield JX(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function N$(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class F${constructor(e){this.key=e}}class L${constructor(e){this.key=e}}class B${constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Gt(),this.mutatedKeys=Gt(),this.Lu=tz(e),this.Uu=new _y(this.Lu)}get qu(){return this.Fu}Ku(e,t){const i=t?t.Gu:new O$,r=t?t.Uu:this.Uu;let s=t?t.mutatedKeys:this.mutatedKeys,l=r,d=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((w,D)=>{const x=r.get(w),O=mN(this.query,D)?D:null,L=!!x&&this.mutatedKeys.has(x.key),Y=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let re=!1;x&&O?x.data.isEqual(O.data)?L!==Y&&(i.track({type:3,doc:O}),re=!0):this.Qu(x,O)||(i.track({type:2,doc:O}),re=!0,(p&&this.Lu(O,p)>0||y&&this.Lu(O,y)<0)&&(d=!0)):!x&&O?(i.track({type:0,doc:O}),re=!0):x&&!O&&(i.track({type:1,doc:x}),re=!0,(p||y)&&(d=!0)),re&&(O?(l=l.add(O),s=Y?s.add(w):s.delete(w)):(l=l.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const w="F"===this.query.limitType?l.last():l.first();l=l.delete(w.key),s=s.delete(w.key),i.track({type:1,doc:w})}return{Uu:l,Gu:i,Oi:d,mutatedKeys:s}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((y,w)=>function(D,x){const O=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return O(D)-O(x)}(y.type,w.type)||this.Lu(y.doc,w.doc)),this.ju(i);const l=t?this.Wu():[],d=0===this.Bu.size&&this.current?1:0,p=d!==this.$u;return this.$u=d,0!==s.length||p?{snapshot:new yy(this.query,e.Uu,r,s,e.mutatedKeys,0===d,p,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new O$,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Gt(),this.Uu.forEach(i=>{this.Hu(i.key)&&(this.Bu=this.Bu.add(i.key))});const t=[];return e.forEach(i=>{this.Bu.has(i)||t.push(new L$(i))}),this.Bu.forEach(i=>{e.has(i)||t.push(new F$(i))}),t}Ju(e){this.Fu=e.ji,this.Bu=Gt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return yy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class DJ{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class SJ{constructor(e){this.key=e,this.Xu=!1}}class TJ{constructor(e,t,i,r,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.Zu={},this.tc=new Gh(d=>JG(d),M0),this.ec=new Map,this.nc=new Set,this.sc=new Mi(Xe.comparator),this.ic=new Map,this.rc=new AN,this.oc={},this.uc=new Map,this.cc=Cg.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function IJ(n,e){return hF.apply(this,arguments)}function hF(){return hF=(0,Ce.Z)(function*(n,e){const t=NF(n);let i,r;const s=t.tc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.Yu();else{const l=yield dy(t.localStore,rl(e));t.isPrimaryClient&&FI(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,r=yield fF(t,e,i,"current"===d)}return r}),hF.apply(this,arguments)}function fF(n,e,t,i){return pF.apply(this,arguments)}function pF(){return pF=(0,Ce.Z)(function*(n,e,t,i){n.hc=(w,D,x)=>{return(O=(0,Ce.Z)(function*(L,Y,re,Oe){let Ue=Y.view.Ku(re);Ue.Oi&&(Ue=yield kI(L.localStore,Y.query,!1).then(({documents:Dt})=>Y.view.Ku(Dt,Ue)));const Ve=Oe&&Oe.targetChanges.get(Y.targetId),Ge=Y.view.applyChanges(Ue,L.isPrimaryClient,Ve);return DF(L,Y.targetId,Ge.zu),Ge.snapshot}),function(L,Y,re,Oe){return O.apply(this,arguments)})(n,w,D,x);var O};const r=yield kI(n.localStore,e,!0),s=new B$(e,r.ji),l=s.Ku(r.documents),d=N0.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState),p=s.applyChanges(l,n.isPrimaryClient,d);DF(n,t,p.zu);const y=new DJ(e,t,s);return n.tc.set(e,y),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),p.snapshot}),pF.apply(this,arguments)}function AJ(n,e){return gF.apply(this,arguments)}function gF(){return gF=(0,Ce.Z)(function*(n,e){const t=it(n),i=t.tc.get(e),r=t.ec.get(i.targetId);if(r.length>1)return t.ec.set(i.targetId,r.filter(s=>!M0(s,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield hy(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Y0(t.remoteStore,i.targetId),vy(t,i.targetId)}).catch(Lh))):(vy(t,i.targetId),yield hy(t.localStore,i.targetId,!0))}),gF.apply(this,arguments)}function mF(){return mF=(0,Ce.Z)(function*(n,e,t){const i=FF(n);try{const r=yield function(s,l){const d=it(s),p=ci.now(),y=l.reduce((x,O)=>x.add(O.key),Gt());let w,D;return d.persistence.runTransaction("Locally write mutations","readwrite",x=>{let O=No(),L=Gt();return d.Ui.getEntries(x,y).next(Y=>{O=Y,O.forEach((re,Oe)=>{Oe.isValidDocument()||(L=L.add(re))})}).next(()=>d.localDocuments.getOverlayedDocuments(x,O)).next(Y=>{w=Y;const re=[];for(const Oe of l){const Ue=V9(Oe,w.get(Oe.key).overlayedDocument);null!=Ue&&re.push(new fd(Oe.key,Ue,zG(Ue.value.mapValue),yi.exists(!0)))}return d.mutationQueue.addMutationBatch(x,p,re,l)}).next(Y=>{D=Y;const re=Y.applyToLocalDocumentSet(w,L);return d.documentOverlayCache.saveOverlays(x,Y.batchId,re)})}).then(()=>({batchId:D.batchId,changes:yz(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,l,d){let p=s.oc[s.currentUser.toKey()];p||(p=new Mi(jt)),p=p.insert(l,d),s.oc[s.currentUser.toKey()]=p}(i,r.batchId,t),yield pd(i,r.changes),yield py(i.remoteStore)}catch(r){const s=my(r,"Failed to persist write");t.reject(s)}}),mF.apply(this,arguments)}function V$(n,e){return _F.apply(this,arguments)}function _F(){return _F=(0,Ce.Z)(function*(n,e){const t=it(n);try{const i=yield YX(t.localStore,e);e.targetChanges.forEach((r,s)=>{const l=t.ic.get(s);l&&(Rt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.Xu=!0:r.modifiedDocuments.size>0?Rt(l.Xu):r.removedDocuments.size>0&&(Rt(l.Xu),l.Xu=!1))}),yield pd(t,i,e)}catch(i){yield Lh(i)}}),_F.apply(this,arguments)}function U$(n,e,t){const i=it(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.tc.forEach((s,l)=>{const d=l.view.Eu(e);d.snapshot&&r.push(d.snapshot)}),function(s,l){const d=it(s);d.onlineState=l;let p=!1;d.queries.forEach((y,w)=>{for(const D of w.listeners)D.Eu(l)&&(p=!0)}),p&&uF(d)}(i.eventManager,e),r.length&&i.Zu.Go(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function xJ(n,e,t){return yF.apply(this,arguments)}function yF(){return yF=(0,Ce.Z)(function*(n,e,t){const i=it(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.ic.get(e),s=r&&r.key;if(s){let l=new Mi(Xe.comparator);l=l.insert(s,Wn.newNoDocument(s,At.min()));const d=Gt().add(s),p=new P0(At.min(),new Map,new On(jt),l,d);yield V$(i,p),i.sc=i.sc.remove(s),i.ic.delete(e),SF(i)}else yield hy(i.localStore,e,!1).then(()=>vy(i,e,t)).catch(Lh)}),yF.apply(this,arguments)}function RJ(n,e){return vF.apply(this,arguments)}function vF(){return vF=(0,Ce.Z)(function*(n,e){const t=it(n),i=e.batch.batchId;try{const r=yield KX(t.localStore,e);EF(t,i,null),CF(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield pd(t,r)}catch(r){yield Lh(r)}}),vF.apply(this,arguments)}function kJ(n,e,t){return bF.apply(this,arguments)}function bF(){return bF=(0,Ce.Z)(function*(n,e,t){const i=it(n);try{const r=yield function(s,l){const d=it(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,l).next(w=>(Rt(null!==w),y=w.keys(),d.mutationQueue.removeMutationBatch(p,w))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(i.localStore,e);EF(i,e,t),CF(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield pd(i,r)}catch(r){yield Lh(r)}}),bF.apply(this,arguments)}function wF(){return wF=(0,Ce.Z)(function*(n,e){const t=it(n);Wh(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const l=it(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===i)return void e.resolve();const r=t.uc.get(i)||[];r.push(e),t.uc.set(i,r)}catch(i){const r=my(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),wF.apply(this,arguments)}function CF(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function EF(n,e,t){const i=it(n);let r=i.oc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.oc[i.currentUser.toKey()]=r}}function vy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.ec.get(e))n.tc.delete(i),t&&n.Zu.lc(i,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(i=>{n.rc.containsKey(i)||j$(n,i)})}function j$(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(Y0(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),SF(n))}function DF(n,e,t){for(const i of t)i instanceof F$?(n.rc.addReference(i.key,e),PJ(n,i)):i instanceof L$?(Fe("SyncEngine","Document no longer in limbo: "+i.key),n.rc.removeReference(i.key,e),n.rc.containsKey(i.key)||j$(n,i.key)):lt()}function PJ(n,e){const t=e.key,i=t.path.canonicalString();n.sc.get(t)||n.nc.has(i)||(Fe("SyncEngine","New document in limbo: "+t),n.nc.add(i),SF(n))}function SF(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Xe(ln.fromString(e)),i=n.cc.next();n.ic.set(i,new SJ(t)),n.sc=n.sc.insert(t,i),FI(n.remoteStore,new zh(rl(ty(t.path)),i,2,Po.ot))}}function pd(n,e,t){return TF.apply(this,arguments)}function TF(){return TF=(0,Ce.Z)(function*(n,e,t){const i=it(n),r=[],s=[],l=[];var d;i.tc.isEmpty()||(i.tc.forEach((d,p)=>{l.push(i.hc(p,e,t).then(y=>{if(y){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),r.push(y);const w=kN.Vi(p.targetId,y);s.push(w)}}))}),yield Promise.all(l),i.Zu.Go(r),yield(d=(0,Ce.Z)(function*(p,y){const w=it(p);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>de.forEach(y,x=>de.forEach(x.Pi,O=>w.persistence.referenceDelegate.addReference(D,x.targetId,O)).next(()=>de.forEach(x.vi,O=>w.persistence.referenceDelegate.removeReference(D,x.targetId,O)))))}catch(D){if(!Bh(D))throw D;Fe("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const x=D.targetId;if(!D.fromCache){const O=w.$i.get(x),Y=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);w.$i=w.$i.insert(x,Y)}}}),function(p,y){return d.apply(this,arguments)})(i.localStore,s))}),TF.apply(this,arguments)}function NJ(n,e){return IF.apply(this,arguments)}function IF(){return IF=(0,Ce.Z)(function*(n,e){const t=it(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const i=yield g$(t.localStore,e);t.currentUser=e,(r=t).uc.forEach(l=>{l.forEach(d=>{d.reject(new ke(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.uc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield pd(t,i.Ki)}var r}),IF.apply(this,arguments)}function FJ(n,e){const t=it(n),i=t.ic.get(e);if(i&&i.Xu)return Gt().add(i.key);{let r=Gt();const s=t.ec.get(e);if(!s)return r;for(const l of s){const d=t.tc.get(l);r=r.unionWith(d.view.qu)}return r}}function LJ(n,e){return AF.apply(this,arguments)}function AF(){return AF=(0,Ce.Z)(function*(n,e){const t=it(n),i=yield kI(t.localStore,e.query,!0),r=e.view.Ju(i);return t.isPrimaryClient&&DF(t,e.targetId,r.zu),r}),AF.apply(this,arguments)}function BJ(n,e){return MF.apply(this,arguments)}function MF(){return MF=(0,Ce.Z)(function*(n,e){const t=it(n);return v$(t.localStore,e).then(i=>pd(t,i))}),MF.apply(this,arguments)}function VJ(n,e,t,i){return xF.apply(this,arguments)}function xF(){return xF=(0,Ce.Z)(function*(n,e,t,i){const r=it(n),s=yield function(l,d){const p=it(l),y=it(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",w=>y.yn(w,d).next(D=>D?p.localDocuments.getDocuments(w,D):de.resolve(null)))}(r.localStore,e);var d;null!==s?("pending"===t?yield py(r.remoteStore):"acknowledged"===t||"rejected"===t?(EF(r,e,i||null),CF(r,e),d=e,it(it(r.localStore).mutationQueue).In(d)):lt(),yield pd(r,s)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),xF.apply(this,arguments)}function RF(){return RF=(0,Ce.Z)(function*(n,e){const t=it(n);if(NF(t),FF(t),!0===e&&!0!==t.ac){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield H$(t,i.toArray());t.ac=!0,yield iF(t.remoteStore,!0);for(const s of r)FI(t.remoteStore,s)}else if(!1===e&&!1!==t.ac){const i=[];let r=Promise.resolve();t.ec.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then(()=>(vy(t,l),hy(t.localStore,l,!0))),Y0(t.remoteStore,l)}),yield r,yield H$(t,i),function(s){const l=it(s);l.ic.forEach((d,p)=>{Y0(l.remoteStore,p)}),l.rc.cs(),l.ic=new Map,l.sc=new Mi(Xe.comparator)}(t),t.ac=!1,yield iF(t.remoteStore,!1)}}),RF.apply(this,arguments)}function H$(n,e,t){return kF.apply(this,arguments)}function kF(){return kF=(0,Ce.Z)(function*(n,e,t){const i=it(n),r=[],s=[];for(const l of e){let d;const p=i.ec.get(l);if(p&&0!==p.length){d=yield dy(i.localStore,rl(p[0]));for(const y of p){const w=i.tc.get(y),D=yield LJ(i,w);D.snapshot&&s.push(D.snapshot)}}else{const y=yield y$(i.localStore,l);d=yield dy(i.localStore,y),yield fF(i,G$(y),l,!1)}r.push(d)}return i.Zu.Go(s),r}),kF.apply(this,arguments)}function G$(n){return QG(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function jJ(n){const e=it(n);return it(it(e.localStore).persistence).Ri()}function HJ(n,e,t,i){return OF.apply(this,arguments)}function OF(){return OF=(0,Ce.Z)(function*(n,e,t,i){const r=it(n);if(r.ac)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const s=r.ec.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield v$(r.localStore,ez(s[0])),d=P0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield pd(r,l,d);break}case"rejected":yield hy(r.localStore,e,!0),vy(r,e,i);break;default:lt()}}),OF.apply(this,arguments)}function GJ(n,e,t){return PF.apply(this,arguments)}function PF(){return PF=(0,Ce.Z)(function*(n,e,t){const i=NF(n);if(i.ac){for(const r of e){if(i.ec.has(r)){Fe("SyncEngine","Adding an already active target "+r);continue}const s=yield y$(i.localStore,r),l=yield dy(i.localStore,s);yield fF(i,G$(s),l.targetId,!1),FI(i.remoteStore,l)}for(const r of t)i.ec.has(r)&&(yield hy(i.localStore,r,!1).then(()=>{Y0(i.remoteStore,r),vy(i,r)}).catch(Lh))}}),PF.apply(this,arguments)}function NF(n){const e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=V$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xJ.bind(null,e),e.Zu.Go=bJ.bind(null,e.eventManager),e.Zu.lc=wJ.bind(null,e.eventManager),e}function FF(n){const e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kJ.bind(null,e),e}class z${constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.wt=Z0(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return p$(this.persistence,new f$,e.initialUser,this.wt)}_c(e){return new d$(xI.Ms,this.wt)}dc(e){return new E$}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class $$ extends z${constructor(e,t,i){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,Ce.Z)(function*(){yield t().call(i,e),yield i.yc.initialize(i,e),yield FF(i.yc.syncEngine),yield py(i.yc.remoteStore),yield i.persistence.ci(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return p$(this.persistence,new f$,e.initialUser,this.wt)}mc(e,t){return new PX(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const i=new m9(t,this.persistence);return new g9(e.asyncQueue,i)}_c(e){const t=RN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Fo.withCacheSize(this.cacheSizeBytes):Fo.DEFAULT;return new xN(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,S$(),NI(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new E$}}class $J extends $${constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,Ce.Z)(function*(){yield t().call(i,e);const r=i.yc.syncEngine;i.sharedClientState instanceof UN&&(i.sharedClientState.syncEngine={kr:VJ.bind(null,r),Or:HJ.bind(null,r),Mr:GJ.bind(null,r),Ri:jJ.bind(null,r),Nr:BJ.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.ci(function(){var s=(0,Ce.Z)(function*(l){yield function UJ(n,e){return RF.apply(this,arguments)}(i.yc.syncEngine,l),i.gcScheduler&&(l&&!i.gcScheduler.started?i.gcScheduler.start():l||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(l&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():l||i.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}dc(e){const t=S$();if(!UN.V(t))throw new ke(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=RN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new UN(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class LF{initialize(e,t){var i=this;return(0,Ce.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>U$(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=NJ.bind(null,i.syncEngine),yield iF(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new vJ}createDatastore(e){const t=Z0(e.databaseInfo.databaseId),i=new iJ(e.databaseInfo);return new oJ(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=d=>U$(this.syncEngine,d,0),l=D$.V()?new D$:new eJ,new lJ(t,i,r,s,l);var t,i,r,s,l}createSyncEngine(e,t){return function(i,r,s,l,d,p,y){const w=new TJ(i,r,s,l,d,p);return y&&(w.ac=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const i=it(t);Fe("RemoteStore","RemoteStore shutting down."),i.lu.add(5),yield fy(i),i.du.shutdown(),i._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function q$(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class BI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qJ{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Fr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(i=>{i&&i.Cu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.bc();if(null===t)return null;const i=e.Ac.decode(t),r=Number(i);isNaN(r)&&e.Pc(`length string (${i}) is not valid number`);const s=yield e.vc(r);return new CJ(JSON.parse(s),t.length+r)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ce.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}vc(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const i=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class WJ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ce.Z)(function*(s,l){const d=it(s),p=B0(d.wt)+"/documents",y={documents:l.map(O=>L0(d.wt,O))},w=yield d.ao("BatchGetDocuments",p,y,l.length),D=new Map;w.forEach(O=>{const L=function Y9(n,e){return"found"in e?function(t,i){Rt(!!i.found);const r=su(t,i.found.name),s=Lr(i.found.updateTime),l=new es({mapValue:{fields:i.found.fields}});return Wn.newFoundDocument(r,s,l)}(n,e):"missing"in e?function(t,i){Rt(!!i.missing),Rt(!!i.readTime);const r=su(t,i.missing),s=Lr(i.readTime);return Wn.newNoDocument(r,s)}(n,e):lt()}(d.wt,O);D.set(L.key.toString(),L)});const x=[];return l.forEach(O=>{const L=D.get(O.toString());Rt(!!L),x.push(L)}),x}),function(s,l){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new oy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=Xe.fromPath(r);e.mutations.push(new _N(s,e.precondition(s)))}),yield(i=(0,Ce.Z)(function*(r,s){const l=it(r),d=B0(l.wt)+"/documents",p={writes:s.map(y=>V0(l.wt,y))};yield l.ro("Commit",d,p)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=At.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new ke(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?yi.updateTime(t):yi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new ke(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yi.updateTime(t)}return yi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ZJ{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Dc=i.maxAttempts,this.So=new jN(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ce.Z)(function*(){const t=new WJ(e.datastore),i=e.xc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Nc(s)}))}).catch(r=>{e.Nc(r)})}))}xc(e){try{const t=this.updateFunction(e);return!E0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!gz(t)}return!1}}class KJ{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Nr.UNAUTHENTICATED,this.clientId=TG.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var l=(0,Ce.Z)(function*(d){Fe("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>(Fe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=my(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function W$(n,e){return BF.apply(this,arguments)}function BF(){return BF=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ce.Z)(function*(s){i.isEqual(s)||(yield g$(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),BF.apply(this,arguments)}function Z$(n,e){return VF.apply(this,arguments)}function VF(){return VF=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield UF(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>k$(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>k$(e.remoteStore,s)),n.onlineComponents=e}),VF.apply(this,arguments)}function UF(n){return jF.apply(this,arguments)}function jF(){return jF=(0,Ce.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield W$(n,new z$)),n.offlineComponents}),jF.apply(this,arguments)}function VI(n){return HF.apply(this,arguments)}function HF(){return HF=(0,Ce.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield Z$(n,new LF)),n.onlineComponents}),HF.apply(this,arguments)}function K$(n){return UF(n).then(e=>e.persistence)}function GF(n){return UF(n).then(e=>e.localStore)}function Y$(n){return VI(n).then(e=>e.remoteStore)}function zF(n){return VI(n).then(e=>e.syncEngine)}function by(n){return $F.apply(this,arguments)}function $F(){return $F=(0,Ce.Z)(function*(n){const e=yield VI(n),t=e.eventManager;return t.onListen=IJ.bind(null,e.syncEngine),t.onUnlisten=AJ.bind(null,e.syncEngine),t}),$F.apply(this,arguments)}function Q$(n,e,t={}){const i=new Fr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(r,s,l,d,p){const y=new BI({next:D=>{s.enqueueAndForget(()=>lF(r,w));const x=D.docs.has(l);!x&&D.fromCache?p.reject(new ke(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&D.fromCache&&d&&"server"===d.source?p.reject(new ke(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),w=new dF(ty(l.path),y,{includeMetadataChanges:!0,Du:!0});return oF(r,w)}(yield by(n),n.asyncQueue,e,t,i)})),i.promise}function X$(n,e,t={}){const i=new Fr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(r,s,l,d,p){const y=new BI({next:D=>{s.enqueueAndForget(()=>lF(r,w)),D.fromCache&&"server"===d.source?p.reject(new ke(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),w=new dF(l,y,{includeMetadataChanges:!0,Du:!0});return oF(r,w)}(yield by(n),n.asyncQueue,e,t,i)})),i.promise}const J$=new Map;function qF(n,e,t){if(!t)throw new ke(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function e3(n,e,t,i){if(!0===e&&!0===i)throw new ke(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function t3(n){if(!Xe.isDocumentKey(n))throw new ke(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function n3(n){if(Xe.isDocumentKey(n))throw new ke(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function UI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=UI(n);throw new ke(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function r3(n,e){if(e<=0)throw new ke(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class s3{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,e3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Q0{constructor(e,t,i){this._authCredentials=t,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s3({}),this._settingsFrozen=!1,e instanceof dd?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ke(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dd(r.options.projectId)}(e))}get app(){if(!this._app)throw new ke(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s3(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new s9;switch(t.type){case"gapi":const i=t.client;return Rt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new c9(i,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=J$.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),J$.delete(e),t.terminate())}(this),Promise.resolve()}}class ei{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new au(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ei(this.firestore,e,this._key)}}class As{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new As(this.firestore,e,this._query)}}class au extends As{constructor(e,t,i){super(e,t,ty(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ei(this.firestore,null,new Xe(e))}withConverter(e){return new au(this.firestore,e,this._path)}}function o3(n,e,...t){if(n=(0,N.m9)(n),qF("collection","path",e),n instanceof Q0){const i=ln.fromString(e,...t);return n3(i),new au(n,null,i)}{if(!(n instanceof ei||n instanceof au))throw new ke(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ln.fromString(e,...t));return n3(i),new au(n.firestore,null,i)}}function jI(n,e,...t){if(n=(0,N.m9)(n),1===arguments.length&&(e=TG.I()),qF("doc","path",e),n instanceof Q0){const i=ln.fromString(e,...t);return t3(i),new ei(n,null,new Xe(i))}{if(!(n instanceof ei||n instanceof au))throw new ke(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ln.fromString(e,...t));return t3(i),new ei(n.firestore,n instanceof au?n.converter:null,new Xe(i))}}function a3(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),(n instanceof ei||n instanceof au)&&(e instanceof ei||e instanceof au)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function l3(n,e){return n=(0,N.m9)(n),e=(0,N.m9)(e),n instanceof As&&e instanceof As&&n.firestore===e.firestore&&M0(n._query,e._query)&&n.converter===e.converter}class oee{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new jN(this,"async_queue_retry"),this.Kc=()=>{const t=NI();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=NI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=NI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Fr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Bh(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(i=>{throw this.Bc=i,this.Lc=!1,Ji("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(i)),i}).then(i=>(this.Lc=!1,i))));return this.Oc=t,t}enqueueAfterDelay(e,t,i){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const r=sF.createAndSchedule(this,e,t,i,s=>this.Wc(s));return this.$c.push(r),r}Gc(){this.Bc&&lt()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function WF(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class aee{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ui extends Q0{constructor(e,t,i){super(e,t,i),this.type="firestore",this._queue=new oee,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||c3(this),this._firestoreClient.terminate()}}function tr(n){return n._firestoreClient||c3(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function c3(n){var e;const t=n._freezeSettings(),i=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new v9(n._databaseId,s,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new KJ(n._authCredentials,n._appCheckCredentials,n._queue,i)}function u3(n,e,t){const i=new Fr;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield W$(n,t),yield Z$(n,e),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(l=s).name?l.code===ge.FAILED_PRECONDITION||l.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var l})).then(()=>i.promise)}function d3(n){if(n._initialized||n._terminated)throw new ke(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class gd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ji(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lu(dr.fromBase64String(e))}catch(t){throw new ke(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new lu(dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Dg{constructor(e){this._methodName=e}}class HI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}const _ee=/^__.*__$/;class yee{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new fd(e,this.data,this.fieldMask,t,this.fieldTransforms):new sy(e,this.data,t,this.fieldTransforms)}}class h3{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new fd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function f3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class GI{constructor(e,t,i,r,s,l){this.settings=e,this.databaseId=t,this.wt=i,this.ignoreUndefinedProperties=r,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new GI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:i,na:!1});return r.sa(e),r}ia(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:i,na:!1});return r.Xc(),r}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return qI(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(f3(this.Zc)&&_ee.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class vee{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=i||Z0(e)}aa(e,t,i,r=!1){return new GI({Zc:e,methodName:t,ca:i,path:ji.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Sg(n){const e=n._freezeSettings(),t=Z0(n._databaseId);return new vee(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zI(n,e,t,i,r,s={}){const l=n.aa(s.merge||s.mergeFields?2:0,e,t,r);QF("Data must be an object, but it was:",l,i);const d=m3(i,l);let p,y;if(s.merge)p=new wa(l.fieldMask),y=l.fieldTransforms;else if(s.mergeFields){const w=[];for(const D of s.mergeFields){const x=XF(e,D,t);if(!l.contains(x))throw new ke(ge.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);y3(w,x)||w.push(x)}p=new wa(w),y=l.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,y=l.fieldTransforms;return new yee(new es(d),p,y)}class X0 extends Dg{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof X0}}function p3(n,e,t){return new GI({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class ZF extends Dg{_toFieldTransform(e){return new x0(e.path,new iy)}isEqual(e){return e instanceof ZF}}class bee extends Dg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=p3(this,e,!0),i=this.ha.map(s=>Tg(s,t)),r=new pg(i);return new x0(e.path,r)}isEqual(e){return this===e}}class wee extends Dg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=p3(this,e,!0),i=this.ha.map(s=>Tg(s,t)),r=new gg(i);return new x0(e.path,r)}isEqual(e){return this===e}}class Cee extends Dg{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new ry(e.wt,rz(e.wt,this.la));return new x0(e.path,t)}isEqual(e){return this===e}}function KF(n,e,t,i){const r=n.aa(1,e,t);QF("Data must be an object, but it was:",r,i);const s=[],l=es.empty();cg(i,(p,y)=>{const w=$I(e,p,t);y=(0,N.m9)(y);const D=r.ia(w);if(y instanceof X0)s.push(w);else{const x=Tg(y,D);null!=x&&(s.push(w),l.set(w,x))}});const d=new wa(s);return new h3(l,d,r.fieldTransforms)}function YF(n,e,t,i,r,s){const l=n.aa(1,e,t),d=[XF(e,i,t)],p=[r];if(s.length%2!=0)throw new ke(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)d.push(XF(e,s[x])),p.push(s[x+1]);const y=[],w=es.empty();for(let x=d.length-1;x>=0;--x)if(!y3(y,d[x])){const O=d[x];let L=p[x];L=(0,N.m9)(L);const Y=l.ia(O);if(L instanceof X0)y.push(O);else{const re=Tg(L,Y);null!=re&&(y.push(O),w.set(O,re))}}const D=new wa(y);return new h3(w,D,l.fieldTransforms)}function g3(n,e,t,i=!1){return Tg(t,n.aa(i?4:3,e))}function Tg(n,e){if(_3(n=(0,N.m9)(n)))return QF("Unsupported field value:",e,n),m3(n,e);if(n instanceof Dg)return function(t,i){if(!f3(i.Zc))throw i.oa(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.oa(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const l of t){let d=Tg(l,i.ra(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,N.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return rz(i.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=ci.fromDate(t);return{timestampValue:F0(i.wt,r)}}if(t instanceof ci){const r=new ci(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:F0(i.wt,r)}}if(t instanceof HI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof lu)return{bytesValue:Sz(i.wt,t._byteString)};if(t instanceof ei){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:yN(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.oa(`Unsupported field value: ${UI(t)}`)}(n,e)}function m3(n,e){const t={};return PG(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cg(n,(i,r)=>{const s=Tg(r,e.ea(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function _3(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ci||n instanceof HI||n instanceof lu||n instanceof ei||n instanceof Dg)}function QF(n,e,t){if(!_3(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=UI(t);throw e.oa("an object"===i?n+" a custom object":n+" "+i)}var i}function XF(n,e,t){if((e=(0,N.m9)(e))instanceof gd)return e._internalPath;if("string"==typeof e)return $I(n,e);throw qI("Field path arguments must be of type string or ",n,!1,void 0,t)}const Eee=new RegExp("[~\\*/\\[\\]]");function $I(n,e,t){if(e.search(Eee)>=0)throw qI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gd(...e.split("."))._internalPath}catch(i){throw qI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qI(n,e,t,i,r){const s=i&&!i.isEmpty(),l=void 0!==r;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||l)&&(p+=" (found",s&&(p+=` in field ${i}`),l&&(p+=` in document ${r}`),p+=")"),new ke(ge.INVALID_ARGUMENT,d+n+p)}function y3(n,e){return n.some(t=>t.isEqual(e))}class J0{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ei(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Dee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(WI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Dee extends J0{data(){return super.data()}}function WI(n,e){return"string"==typeof e?$I(n,e):e instanceof gd?e._internalPath:e._delegate._internalPath}class Ig{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class md extends J0{constructor(e,t,i,r,s,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new eC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(WI("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class eC extends md{data(e={}){return super.data(e)}}class Kh{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ig(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new eC(this._firestore,this._userDataWriter,i.key,i,new Ig(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new eC(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ig(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||3!==l.type).map(l=>{const d=new eC(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ig(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return 0!==l.type&&(p=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),y=s.indexOf(l.doc.key)),{type:See(l.type),doc:d,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function See(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function v3(n,e){return n instanceof md&&e instanceof md?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Kh&&e instanceof Kh&&n._firestore===e._firestore&&l3(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function b3(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tC{}function Yh(n,...e){for(const t of e)n=t._apply(n);return n}class Tee extends tC{constructor(e,t,i){super(),this.fa=e,this.da=t,this._a=i,this.type="where"}_apply(e){const t=Sg(e.firestore),i=function(r,s,l,d,p,y,w){let D;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new ke(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){T3(w,y);const O=[];for(const L of w)O.push(S3(d,r,L));D={arrayValue:{values:O}}}else D=S3(d,r,w)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||T3(w,y),D=g3(l,"where",w,"in"===y||"not-in"===y);const x=ts.create(p,y,D);return function(O,L){if(L.ht()){const re=fN(O);if(null!==re&&!re.isEqual(L.field))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${re.toString()}' and '${L.field.toString()}'`);const Oe=hN(O);null!==Oe&&I3(0,L.field,Oe)}const Y=function(re,Oe){for(const Ue of re.filters)if(Oe.indexOf(Ue.op)>=0)return Ue.op;return null}(O,function(re){switch(re){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(L.op));if(null!==Y)throw new ke(ge.INVALID_ARGUMENT,Y===L.op?`Invalid query. You cannot use more than one '${L.op.toString()}' filter.`:`Invalid query. You cannot use '${L.op.toString()}' filters with '${Y.toString()}' filters.`)}(r,x),x}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new As(e.firestore,e.converter,function(r,s){const l=r.filters.concat([s]);return new hd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),l,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}class Aee extends tC{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new ke(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ke(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new ey(r,s);return function(d,p){if(null===hN(d)){const y=fN(d);null!==y&&I3(0,y,p.field)}}(i,l),l}(e._query,this.fa,this.wa);return new As(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new hd(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class w3 extends tC{constructor(e,t,i){super(),this.type=e,this.ma=t,this.ga=i}_apply(e){return new As(e.firestore,e.converter,XG(e._query,this.ma,this.ga))}}class C3 extends tC{constructor(e,t,i){super(),this.type=e,this.ya=t,this.pa=i}_apply(e){const t=D3(e,this.type,this.ya,this.pa);return new As(e.firestore,e.converter,(r=t,new hd((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class E3 extends tC{constructor(e,t,i){super(),this.type=e,this.ya=t,this.pa=i}_apply(e){const t=D3(e,this.type,this.ya,this.pa);return new As(e.firestore,e.converter,(r=t,new hd((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function D3(n,e,t,i){if(t[0]=(0,N.m9)(t[0]),t[0]instanceof J0)return function(r,s,l,d,p){if(!d)throw new ke(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const w of ny(r))if(w.field.isKeyField())y.push(hg(s,d.key));else{const D=d.data.field(w.field);if(cN(D))throw new ke(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const x=w.field.canonicalString();throw new ke(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(D)}return new Hh(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Sg(n.firestore);return function(s,l,d,p,y,w){const D=s.explicitOrderBy;if(y.length>D.length)throw new ke(ge.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let O=0;O<y.length;O++){const L=y[O];if(D[O].field.isKeyField()){if("string"!=typeof L)throw new ke(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof L}`);if(!pN(s)&&-1!==L.indexOf("/"))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${L}' contains a slash.`);const Y=s.path.child(ln.fromString(L));if(!Xe.isDocumentKey(Y))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${Y}' is not because it contains an odd number of segments.`);const re=new Xe(Y);x.push(hg(l,re))}else{const Y=g3(d,p,L);x.push(Y)}}return new Hh(x,w)}(n._query,n.firestore._databaseId,r,e,t,i)}}function S3(n,e,t){if("string"==typeof(t=(0,N.m9)(t))){if(""===t)throw new ke(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pN(e)&&-1!==t.indexOf("/"))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ln.fromString(t));if(!Xe.isDocumentKey(i))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return hg(n,new Xe(i))}if(t instanceof ei)return hg(n,t._key);throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${UI(t)}.`)}function T3(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function I3(n,e,t){if(!t.isEqual(e))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Fee={maxAttempts:5};class JF{convertValue(e,t="none"){switch(dg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ug(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const i={};return cg(e.fields,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new HI(xi(e.latitude),xi(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=FG(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(C0(e));default:return null}}convertTimestamp(e){const t=Vh(e);return new ci(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ln.fromString(e);Rt(Nz(i));const r=new dd(i.get(1),i.get(3)),s=new Xe(i.popFirst(5));return r.isEqual(t)||Ji(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function ZI(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Lee extends JF{constructor(e){super(),this.firestore=e}convertBytes(e){return new lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ei(this.firestore,null,t)}}class A3{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Sg(e)}set(e,t,i){this._verifyNotCommitted();const r=Qh(e,this._firestore),s=ZI(r.converter,t,i),l=zI(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(l.toMutation(r._key,yi.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=Qh(e,this._firestore);let l;return l="string"==typeof(t=(0,N.m9)(t))||t instanceof gd?YF(this._dataReader,"WriteBatch.update",s._key,t,i,r):KF(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,yi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qh(e,this._firestore);return this._mutations=this._mutations.concat(new oy(t._key,yi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qh(n,e){if((n=(0,N.m9)(n)).firestore!==e)throw new ke(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ag extends JF{constructor(e){super(),this.firestore=e}convertBytes(e){return new lu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ei(this.firestore,null,t)}}function M3(n,e,t){n=sn(n,ei);const i=sn(n.firestore,ui),r=ZI(n.converter,e,t);return wy(i,[zI(Sg(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,yi.none())])}function x3(n,e,t,...i){n=sn(n,ei);const r=sn(n.firestore,ui),s=Sg(r);let l;return l="string"==typeof(e=(0,N.m9)(e))||e instanceof gd?YF(s,"updateDoc",n._key,e,t,i):KF(s,"updateDoc",n._key,e),wy(r,[l.toMutation(n._key,yi.exists(!0))])}function R3(n,...e){var t,i,r;n=(0,N.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||WF(e[l])||(s=e[l],l++);const d={includeMetadataChanges:s.includeMetadataChanges};if(WF(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(i=D.error)||void 0===i?void 0:i.bind(D),e[l+2]=null===(r=D.complete)||void 0===r?void 0:r.bind(D)}let p,y,w;if(n instanceof ei)y=sn(n.firestore,ui),w=ty(n._key.path),p={next:D=>{e[l]&&e[l](e1(y,n,D))},error:e[l+1],complete:e[l+2]};else{const D=sn(n,As);y=sn(D.firestore,ui),w=D._query;const x=new Ag(y);p={next:O=>{e[l]&&e[l](new Kh(y,x,D,O))},error:e[l+1],complete:e[l+2]},b3(n._query)}return function(D,x,O,L){const Y=new BI(L),re=new dF(x,Y,O);return D.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return oF(yield by(D),re)})),()=>{Y.Tc(),D.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return lF(yield by(D),re)}))}}(tr(y),w,d,p)}function wy(n,e){return function(t,i){const r=new Fr;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function MJ(n,e,t){return mF.apply(this,arguments)}(yield zF(t),i,r)})),r.promise}(tr(n),e)}function e1(n,e,t){const i=t.docs.get(e._key),r=new Ag(n);return new md(n,r,e._key,i,new Ig(t.hasPendingWrites,t.fromCache),e.converter)}class Wee extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Sg(e)}get(e){const t=Qh(e,this._firestore),i=new Lee(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return lt();const s=r[0];if(s.isFoundDocument())return new J0(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new J0(this._firestore,i,t._key,null,t.converter);throw lt()})}set(e,t,i){const r=Qh(e,this._firestore),s=ZI(r.converter,t,i),l=zI(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,l),this}update(e,t,i,...r){const s=Qh(e,this._firestore);let l;return l="string"==typeof(t=(0,N.m9)(t))||t instanceof gd?YF(this._dataReader,"Transaction.update",s._key,t,i,r):KF(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=Qh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qh(e,this._firestore),i=new Ag(this._firestore);return super.get(e).then(r=>new md(this._firestore,i,t._key,r._document,new Ig(!1,!1),t.converter))}}function t1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function O3(){if("undefined"==typeof Uint8Array)throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function P3(){if(!function _9(){return"undefined"!=typeof atob}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Y_=Zs.SDK_VERSION,(0,Zs._registerComponent)(new Jl.wA("firestore",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),s=new ui(r,new a9(t.getProvider("auth-internal")),new u9(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s},"PUBLIC")),(0,Zs.registerVersion)(EG,"3.4.12",n),(0,Zs.registerVersion)(EG,"3.4.12","esm2017")}();class nC{constructor(e){this._delegate=e}static fromBase64String(e){return P3(),new nC(lu.fromBase64String(e))}static fromUint8Array(e){return O3(),new nC(lu.fromUint8Array(e))}toBase64(){return P3(),this._delegate.toBase64()}toUint8Array(){return O3(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function n1(n){return function nte(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class ite{enableIndexedDbPersistence(e,t){return function cee(n,e){d3(n=sn(n,ui));const t=tr(n),i=n._freezeSettings(),r=new LF;return u3(t,r,new $$(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function uee(n){d3(n=sn(n,ui));const e=tr(n),t=n._freezeSettings(),i=new LF;return u3(e,i,new $J(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function dee(n){if(n._initialized&&!n._terminated)throw new ke(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(i){if(!ac.V())return Promise.resolve();const r=i+"main";yield ac.delete(r)}),function(i){return t.apply(this,arguments)})(RN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class N3{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof dd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&y0("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function ree(n,e,t,i={}){var r;const s=(n=sn(n,Q0))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&y0("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let l,d;if("string"==typeof i.mockUserToken)l=i.mockUserToken,d=Nr.MOCK_USER;else{l=(0,N.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new ke(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Nr(p)}n._authCredentials=new o9(new DG(l,d))}}(this._delegate,e,t,i)}enableNetwork(){return function fee(n){return function YJ(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield K$(n),t=yield Y$(n);return e.setNetworkEnabled(!0),function(i){const r=it(i);return r.lu.delete(0),K0(r)}(t)}))}(tr(n=sn(n,ui)))}(this._delegate)}disableNetwork(){return function pee(n){return function QJ(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield K$(n),t=yield Y$(n);return e.setNetworkEnabled(!1),(i=(0,Ce.Z)(function*(r){const s=it(r);s.lu.add(0),yield fy(s),s._u.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(tr(n=sn(n,ui)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,e3("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function hee(n){return function(e){const t=new Fr;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function OJ(n,e){return wF.apply(this,arguments)}(yield zF(e),t)})),t.promise}(tr(n=sn(n,ui)))}(this._delegate)}onSnapshotsInSync(e){return function qee(n,e){return function eee(n,e){const t=new BI(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return i=yield by(n),r=t,it(i).Tu.add(r),void r.next();var i,r})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return i=yield by(n),r=t,void it(i).Tu.delete(r);var i,r}))}}(tr(n=sn(n,ui)),WF(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Cy(this,o3(this._delegate,e))}catch(t){throw io(t,"collection()","Firestore.collection()")}}doc(e){try{return new sl(this,jI(this._delegate,e))}catch(t){throw io(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ro(this,function see(n,e){if(n=sn(n,Q0),qF("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new As(n,null,(t=e,new hd(ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw io(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Zee(n,e,t){n=sn(n,ui);const i=Object.assign(Object.assign({},Fee),t);return function(r){if(r.maxAttempts<1)throw new ke(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function tee(n,e,t){const i=new Fr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const r=yield(s=n,VI(s).then(l=>l.datastore));var s;new ZJ(n.asyncQueue,r,t,e,i).run()})),i.promise}(tr(n),r=>e(new Wee(n,r)),i)}(this._delegate,t=>e(new F3(this,t)))}batch(){return tr(this._delegate),new L3(new A3(this._delegate,e=>wy(this._delegate,e)))}loadBundle(e){return function gee(n,e){const t=tr(n=sn(n,ui)),i=new aee;return function nee(n,e,t,i){const r=function(s,l){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return q$(p,y);if(p instanceof ArrayBuffer)return q$(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new qJ(p,l);var p}(t,Z0(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function zJ(n,e,t){const i=it(n);var r;(r=(0,Ce.Z)(function*(s,l,d){try{const p=yield l.getMetadata();if(yield function(x,O){const L=it(x),Y=Lr(O.createTime);return L.persistence.runTransaction("hasNewerBundle","readonly",re=>L.Ds.getBundleMetadata(re,O.id)).then(re=>!!re&&re.createTime.compareTo(Y)>=0)}(s.localStore,p))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(x=p).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);d._updateProgress(N$(p));const y=new EJ(p,s.localStore,l.wt);let w=yield l.fc();for(;w;){const x=yield y.Nu(w);x&&d._updateProgress(x),w=yield l.fc()}const D=yield y.complete();return yield pd(s,D.Mu,void 0),yield function(x,O){const L=it(x);return L.persistence.runTransaction("Save bundle","readwrite",Y=>L.Ds.saveBundleMetadata(Y,O))}(s.localStore,p),d._completeWith(D.progress),Promise.resolve(D.Ou)}catch(p){return y0("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var x}),function(s,l,d){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield zF(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function mee(n,e){return function iee(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,i){const r=it(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ds.getNamedQuery(s,i))}(yield GF(n),e)}))}(tr(n=sn(n,ui)),e).then(t=>t?new As(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ro(this,t):null)}}class KI extends JF{constructor(e){super(),this.firestore=e}convertBytes(e){return new nC(new lu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return sl.forKey(t,this.firestore,null)}}class F3{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new KI(e)}get(e){const t=xg(e);return this._delegate.get(t).then(i=>new iC(this._firestore,new md(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=xg(e);return i?(t1("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=xg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=xg(e);return this._delegate.delete(t),this}}class L3{constructor(e){this._delegate=e}set(e,t,i){const r=xg(e);return i?(t1("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=xg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=xg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Mg{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new eC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new rC(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Mg.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Mg(e,new KI(e),t),r.set(t,s)),s}}Mg.INSTANCES=new WeakMap;class sl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new KI(e)}static forPath(e,t,i){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sl(t,new ei(t._delegate,i,new Xe(e)))}static forKey(e,t,i){return new sl(t,new ei(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Cy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Cy(this.firestore,o3(this._delegate,e))}catch(t){throw io(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,N.m9)(e))instanceof ei&&a3(this._delegate,e)}set(e,t){t=t1("DocumentReference.set",t);try{return t?M3(this._delegate,e,t):M3(this._delegate,e)}catch(i){throw io(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?x3(this._delegate,e):x3(this._delegate,e,t,...i)}catch(r){throw io(r,"updateDoc()","DocumentReference.update()")}}delete(){return function zee(n){return wy(sn(n.firestore,ui),[new oy(n._key,yi.none())])}(this._delegate)}onSnapshot(...e){const t=B3(e),i=V3(e,r=>new iC(this.firestore,new md(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return R3(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Vee(n){n=sn(n,ei);const e=sn(n.firestore,ui),t=tr(e),i=new Ag(e);return function XJ(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(i=(0,Ce.Z)(function*(r,s,l){try{const d=yield function(p,y){const w=it(p);return w.persistence.runTransaction("read document","readonly",D=>w.localDocuments.getDocument(D,y))}(r,s);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new ke(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=my(d,`Failed to get document '${s} from cache`);l.reject(p)}}),function(r,s,l){return i.apply(this,arguments)})(yield GF(n),e,t);var i})),t.promise}(t,n._key).then(r=>new md(e,i,n._key,r,new Ig(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Uee(n){n=sn(n,ei);const e=sn(n.firestore,ui);return Q$(tr(e),n._key,{source:"server"}).then(t=>e1(e,n,t))}(this._delegate):function Bee(n){n=sn(n,ei);const e=sn(n.firestore,ui);return Q$(tr(e),n._key).then(t=>e1(e,n,t))}(this._delegate),t.then(i=>new iC(this.firestore,new md(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new sl(this.firestore,this._delegate.withConverter(e?Mg.getInstance(this.firestore,e):null))}}function io(n,e,t){return n.message=n.message.replace(e,t),n}function B3(n){for(const e of n)if("object"==typeof e&&!n1(e))return e;return{}}function V3(n,e){var t,i;let r;return r=n1(n[0])?n[0]:n1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class iC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new sl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return v3(this._delegate,e._delegate)}}class rC extends iC{data(e){const t=this._delegate.data(e);return function r9(n,e){n||lt()}(void 0!==t),t}}class ro{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new KI(e)}where(e,t,i){try{return new ro(this.firestore,Yh(this._delegate,function Iee(n,e,t){const i=e,r=WI("where",n);return new Tee(r,i,t)}(e,t,i)))}catch(r){throw io(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ro(this.firestore,Yh(this._delegate,function Mee(n,e="asc"){const t=e,i=WI("orderBy",n);return new Aee(i,t)}(e,t)))}catch(i){throw io(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ro(this.firestore,Yh(this._delegate,function xee(n){return r3("limit",n),new w3("limit",n,"F")}(e)))}catch(t){throw io(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ro(this.firestore,Yh(this._delegate,function Ree(n){return r3("limitToLast",n),new w3("limitToLast",n,"L")}(e)))}catch(t){throw io(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ro(this.firestore,Yh(this._delegate,function kee(...n){return new C3("startAt",n,!0)}(...e)))}catch(t){throw io(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ro(this.firestore,Yh(this._delegate,function Oee(...n){return new C3("startAfter",n,!1)}(...e)))}catch(t){throw io(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ro(this.firestore,Yh(this._delegate,function Pee(...n){return new E3("endBefore",n,!1)}(...e)))}catch(t){throw io(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ro(this.firestore,Yh(this._delegate,function Nee(...n){return new E3("endAt",n,!0)}(...e)))}catch(t){throw io(t,"endAt()","Query.endAt()")}}isEqual(e){return l3(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Hee(n){n=sn(n,As);const e=sn(n.firestore,ui),t=tr(e),i=new Ag(e);return function JJ(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(i=(0,Ce.Z)(function*(r,s,l){try{const d=yield kI(r,s,!0),p=new B$(s,d.ji),y=p.Ku(d.documents),w=p.applyChanges(y,!1);l.resolve(w.snapshot)}catch(d){const p=my(d,`Failed to execute query '${s} against cache`);l.reject(p)}}),function(r,s,l){return i.apply(this,arguments)})(yield GF(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Kh(e,i,n,r))}(this._delegate):"server"===(null==e?void 0:e.source)?function Gee(n){n=sn(n,As);const e=sn(n.firestore,ui),t=tr(e),i=new Ag(e);return X$(t,n._query,{source:"server"}).then(r=>new Kh(e,i,n,r))}(this._delegate):function jee(n){n=sn(n,As);const e=sn(n.firestore,ui),t=tr(e),i=new Ag(e);return b3(n._query),X$(t,n._query).then(r=>new Kh(e,i,n,r))}(this._delegate),t.then(i=>new r1(this.firestore,new Kh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=B3(e),i=V3(e,r=>new r1(this.firestore,new Kh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return R3(this._delegate,t,i)}withConverter(e){return new ro(this.firestore,this._delegate.withConverter(e?Mg.getInstance(this.firestore,e):null))}}class ste{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new rC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class r1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ro(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new rC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ste(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new rC(this._firestore,i))})}isEqual(e){return v3(this._delegate,e._delegate)}}class Cy extends ro{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sl(this.firestore,e):null}doc(e){try{return new sl(this.firestore,void 0===e?jI(this._delegate):jI(this._delegate,e))}catch(t){throw io(t,"doc()","CollectionReference.doc()")}}add(e){return function $ee(n,e){const t=sn(n.firestore,ui),i=jI(n),r=ZI(n.converter,e);return wy(t,[zI(Sg(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,yi.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new sl(this.firestore,t))}isEqual(e){return a3(this._delegate,e._delegate)}withConverter(e){return new Cy(this.firestore,this._delegate.withConverter(e?Mg.getInstance(this.firestore,e):null))}}function xg(n){return sn(n,ei)}class s1{constructor(...e){this._delegate=new gd(...e)}static documentId(){return new s1(ji.keyField().canonicalString())}isEqual(e){return(e=(0,N.m9)(e))instanceof gd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Rg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Yee(){return new ZF("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Rg(e)}static delete(){const e=function Kee(){return new X0("deleteField")}();return e._methodName="FieldValue.delete",new Rg(e)}static arrayUnion(...e){const t=function Qee(...n){return new bee("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Rg(t)}static arrayRemove(...e){const t=function Xee(...n){return new wee("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Rg(t)}static increment(e){const t=function Jee(n){return new Cee("increment",n)}(e);return t._methodName="FieldValue.increment",new Rg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ote={Firestore:N3,GeoPoint:HI,Timestamp:ci,Blob:nC,Transaction:F3,WriteBatch:L3,DocumentReference:sl,DocumentSnapshot:iC,Query:ro,QueryDocumentSnapshot:rC,QuerySnapshot:r1,CollectionReference:Cy,FieldPath:s1,FieldValue:Rg,setLogLevel:function rte(n){!function i9(n){Fh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function U3(n,e){return function cte(n,e=jf.z){return new tn.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=i&&i()}})}(n,e)}function o1(n,e){return U3(n,e).pipe((0,st.U)(t=>({payload:t,type:"query"})))}function YI(n,e){return o1(n,e).pipe(Qn(void 0),dP(),(0,st.U)(([t,i])=>{const r=i.payload.docChanges(),s=r.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((l,d)=>{const p=r.find(w=>w.doc.ref.isEqual(l.ref)),y=null==t?void 0:t.payload.docs.find(w=>w.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),s}))}function j3(n,e,t){return YI(n,t).pipe(Zi((i,r)=>function dte(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function hte(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return a1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return a1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return a1(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),Hu(),(0,st.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function a1(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function H3(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function lte(n){(function ate(n,e){n.INTERNAL.registerComponent(new Jl.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},ote)))})(n,(e,t)=>new N3(e,t,new ite)),n.registerVersion("@firebase/firestore-compat","0.1.21")}(dk.Z);class G3{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=YI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,st.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Qn(void 0),dP(),an(([i,r])=>r.length>0||!i),(0,st.U)(([i,r])=>r),vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zi((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=H3(e);return j3(this.query,t,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return o1(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),vn.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(vn.iC)}add(e){return this.ref.add(e)}doc(e){return new z3(this.ref.doc(e),this.afs)}}class z3{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=W3(i,t);return new G3(r,s,this.afs)}snapshotChanges(){return function ute(n,e){return U3(n,e).pipe(Qn(void 0),dP(),(0,st.U)(([t,i])=>i.exists?(null==t?void 0:t.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,st.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,_n.D)(this.ref.get(e)).pipe(vn.iC)}}class fte{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?YI(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),an(t=>t.length>0),vn.iC):YI(this.query,this.afs.schedulers.outsideAngular).pipe(vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zi((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=H3(e);return j3(this.query,t,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return o1(this.query,this.afs.schedulers.outsideAngular).pipe((0,st.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),vn.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(vn.iC)}}const $3=new u.OlP("angularfire2.enableFirestorePersistence"),q3=new u.OlP("angularfire2.firestore.persistenceSettings"),pte=new u.OlP("angularfire2.firestore.settings"),gte=new u.OlP("angularfire2.firestore.use-emulator");function W3(n,e=(t=>t)){return{query:e(n),ref:n}}let mte=(()=>{class n{constructor(t,i,r,s,l,d,p,y,w,D,x,O,L,Y,re,Oe,Ue){this.schedulers=p;const Ve=(0,ur.on)(t,d,i),Ge=w;D&&$O(Ve,d,x,L,Y,re,O,Oe),[this.firestore,this.persistenceEnabled$]=(0,ur.cc)(`${Ve.name}.firestore`,"AngularFirestore",Ve.name,()=>{const Dt=d.runOutsideAngular(()=>Ve.firestore());if(s&&Dt.settings(s),Ge&&Dt.useEmulator(...Ge),r&&!xa(l)){const Mt=()=>{try{return(0,_n.D)(Dt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(nn){return"undefined"!=typeof console&&console.warn(nn),Ke(!1)}};return[Dt,d.runOutsideAngular(Mt)]}return[Dt,Ke(!1)]},[s,Ge,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=W3(r,i),d=this.schedulers.ngZone.run(()=>s);return new G3(d,l,this)}collectionGroup(t,i){const r=i||(l=>l),s=this.firestore.collectionGroup(t);return new fte(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new z3(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ur.Dh),u.LFG(ur.xv,8),u.LFG($3,8),u.LFG(pte,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(vn.HU),u.LFG(q3,8),u.LFG(gte,8),u.LFG(ST,8),u.LFG(VO,8),u.LFG(UO,8),u.LFG(jO,8),u.LFG(HO,8),u.LFG(GO,8),u.LFG(zO,8),u.LFG($w,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_te=(()=>{class n{constructor(){DT.Z.registerVersion("angularfire",vn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:$3,useValue:!0},{provide:q3,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[mte]}),n})();const Z3_firebase={apiKey:"AIzaSyBGHediN0LEzQ1RRGUniMvHxqMh-gpPHQQ",authDomain:"ngrx-90cb3.firebaseapp.com",projectId:"ngrx-90cb3",storageBucket:"ngrx-90cb3.appspot.com",messagingSenderId:"695015993755",appId:"1:695015993755:web:6fb3273dcac03c2359713e",measurementId:"G-5ME8MCBC62"};let kte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[b_]]}),n})(),sq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[kte,In],In]}),n})(),oq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[In],In]}),n})();function Yte(n,e){}class y1{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const Qte={dialogContainer:hh("dialogContainer",[da("void, exit",oi({opacity:0,transform:"scale(0.7)"})),da("enter",oi({transform:"none"})),Qa("* => enter",Yv([Wl("150ms cubic-bezier(0, 0, 0.2, 1)",oi({transform:"none",opacity:1})),qm("@*",$m(),{optional:!0})])),Qa("* => void, * => exit",Yv([Wl("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",oi({opacity:0})),qm("@*",$m(),{optional:!0})]))])};let Xte=(()=>{class n extends w_{constructor(t,i,r,s,l,d,p,y){super(),this._elementRef=t,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=l,this._interactivityChecker=d,this._ngZone=p,this._focusMonitor=y,this._animationStateChanged=new u.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=w=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(w)),this._ariaLabelledBy=l.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Gf())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const i=Gf(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=Gf();return t===i||t.contains(i)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(pE),u.Y36(u.sBO),u.Y36(ie,8),u.Y36(y1),u.Y36(TM),u.Y36(u.R0b),u.Y36(sp))},n.\u0275dir=u.lG2({type:n,viewQuery:function(t,i){if(1&t&&u.Gf(Xb,7),2&t){let r;u.iGM(r=u.CRH())&&(i._portalOutlet=r.first)}},features:[u.qOj]}),n})(),Jte=(()=>{class n extends Xte{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,i){1&t&&u.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(u.Ikx("id",i._id),u.uIk("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),u.d8E("@dialogContainer",i._state))},features:[u.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&u.YNc(0,Yte,0,0,"ng-template",0)},directives:[Xb],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Qte.dialogContainer]}}),n})(),ene=0;class tne{constructor(e,t,i="mat-dialog-"+ene++){this._overlayRef=e,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new It.x,this._afterClosed=new It.x,this._beforeClosed=new It.x,this._state=0,t._id=i,t._animationStateChanged.pipe(an(r=>"opened"===r.state),(0,ri.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(an(r=>"closed"===r.state),(0,ri.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(an(r=>27===r.keyCode&&!this.disableClose&&!dh(r))).subscribe(r=>{r.preventDefault(),aq(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():aq(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(an(t=>"closing"===t.state),(0,ri.q)(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function aq(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const nne=new u.OlP("MatDialogData"),ine=new u.OlP("mat-dialog-default-options"),lq=new u.OlP("mat-dialog-scroll-strategy"),sne={provide:lq,deps:[Ql],useFactory:function rne(n){return()=>n.scrollStrategies.block()}};let one=(()=>{class n{constructor(t,i,r,s,l,d,p,y,w,D){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=l,this._dialogRefConstructor=p,this._dialogContainerType=y,this._dialogDataToken=w,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new It.x,this._afterOpenedAtThisLevel=new It.x,this._ariaHiddenElements=new Map,this.afterAllClosed=Co(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Qn(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){i=function lne(n,e){return Object.assign(Object.assign({},e),n)}(i,this._defaultOptions||new y1),i.id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),l=this._attachDialogContent(t,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.afterClosed().subscribe(()=>this._removeOpenDialog(l)),this.afterOpened.next(l),s._initializeWithAttachedContent(),l}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const i=this._getOverlayConfig(t);return this._overlay.create(i)}_getOverlayConfig(t){const i=new hS({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachDialogContainer(t,i){const s=u.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:y1,useValue:i}]}),l=new Qb(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,i,r,s){const l=new this._dialogRefConstructor(r,i,s.id);if(t instanceof u.Rgc)i.attachTemplatePortal(new cS(t,null,{$implicit:s.data,dialogRef:l}));else{const d=this._createInjector(s,l,i),p=i.attachComponentPortal(new Qb(t,s.viewContainerRef,d,s.componentFactoryResolver));l.componentInstance=p.instance}return l.updateSize(s.width,s.height).updatePosition(s.position),l}_createInjector(t,i,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,l=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:i}];return t.direction&&(!s||!s.get(zl,null,u.XFs.Optional))&&l.push({provide:zl,useValue:{value:t.direction,change:Ke()}}),u.zs3.create({parent:s||this._injector,providers:l})}_removeOpenDialog(t){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275dir=u.lG2({type:n}),n})(),ane=(()=>{class n extends one{constructor(t,i,r,s,l,d,p,y){super(t,i,s,d,p,l,tne,Jte,nne,y)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ql),u.LFG(u.zs3),u.LFG(Ee,8),u.LFG(ine,8),u.LFG(lq),u.LFG(n,12),u.LFG(fS),u.LFG(Kl,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),cq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[ane,sne],imports:[[T_,Jb,In],In]}),n})(),pq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[In,Nb],In]}),n})(),gq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),mq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[gq,Nb,In,Mv],gq,In]}),n})();const Rne={provide:new u.OlP("mat-tooltip-scroll-strategy"),deps:[Ql],useFactory:function xne(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let One=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Rne],imports:[[TE,go,T_,In],In,Np]}),n})(),v1=(()=>{class n{constructor(){this.changes=new It.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,i,r)=>{if(0==r||0==i)return`0 of ${r}`;const s=t*i;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+i,r):s+i} of ${r}`}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bne={provide:v1,deps:[[new u.FiY,new u.tp0,v1]],useFactory:function Lne(n){return n||new v1}};let _q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Bne],imports:[[go,kS,ck,One,In]]}),n})(),yq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[T_,Jb,go,kS,In],In]}),n})(),Hne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[sq,oq,y_,uV,Dj,kS,cq,pq,mq,_q,yq,Op,ck],sq,oq,y_,uV,Dj,kS,cq,pq,mq,_q,yq,Op,ck]}),n})(),Gne=(()=>{class n{static Reduce(t=n.state,i){let r={};switch(r.user=t.user,r.product=t.product,i.type){case lr.addFullTradeInData:return null!=i.payload&&(n.state=i.payload),n.state;case lr.addTradeInUserData:return r.user=i.payload,n.state=r,n.save(),n.state;case lr.addTradeInProductData:return r.product=i.payload,n.state=r,n.save(),n.state;case lr.deleteFullTradeInData:return n.state=i.payload,n.save(),n.state;case lr.deleteTradeInUserData:return r.user=i.payload,n.state=r,n.save(),n.state;case lr.deleteTradeInProductData:return r.product=i.payload,n.state=r,n.save(),n.state;default:return t}}static save(){localStorage.tradeInData=JSON.stringify(n.state)}}return n.state={},n})(),zne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[sY]}),n.\u0275inj=u.cJS({providers:[],imports:[[Na,rY,ur.hO.initializeApp(Z3_firebase),Hne,f5,_te,K7,I5,V6,U6,RA.forRoot({tradein:Gne.Reduce}),j5,Hx]]}),n})();(0,u.G48)(),_c().bootstrapModule(zne).catch(n=>console.error(n))},5867:(et,ve,F)=>{F.d(ve,{Mq:()=>u.getApp,C6:()=>u.getApps});var u=F(9681);(0,u.registerVersion)("firebase","9.9.0","app")},127:(et,ve,F)=>{F.d(ve,{Z:()=>u.Z});var u=F(3942);u.Z.registerVersion("firebase","9.9.0","app-compat")},1451:(et,ve,F)=>{F.r(ve);var u=F(5861),ne=F(3942),B=F(2090),he=F(9681),ae=F(655),_e=F(1877),ie=F(4859);const Pe=function Ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},je=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new _e.Yd("@firebase/auth");function tt(v,...g){Ye.logLevel<=_e.in.ERROR&&Ye.error(`Auth (${he.SDK_VERSION}): ${v}`,...g)}function Ie(v,...g){throw $e(v,...g)}function Ee(v,...g){return $e(v,...g)}function Se(v,g,_){const C=Object.assign(Object.assign({},je()),{[g]:_});return new B.LL("auth","Firebase",C).create(g,{appName:v.name})}function ze(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Ie(v,"argument-error"),Se(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(v,...g){if("string"!=typeof v){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(_,...C)}return me.create(v,...g)}function W(v,g,..._){if(!v)throw $e(g,..._)}function De(v){const g="INTERNAL ASSERTION FAILED: "+v;throw tt(g),new Error(g)}function X(v,g){v||De(g)}const ce=new Map;function se(v){X(v instanceof Function,"Expected a class definition");let g=ce.get(v);return g?(X(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,ce.set(v,g),g)}function Ne(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ft(){return"http:"===$t()||"https:"===$t()}function $t(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class on{constructor(g,_){this.shortDelay=g,this.longDelay=_,X(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Vt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ft()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Un(v,g){X(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class un{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void De("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void De("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void De("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const en={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Gi=new on(3e4,6e4);function Yt(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function Ut(v,g,_,C){return ns.apply(this,arguments)}function ns(){return(ns=(0,u.Z)(function*(v,g,_,C,A={}){return hr(v,A,(0,u.Z)(function*(){let P={},Q={};C&&("GET"===g?Q=C:P={body:JSON.stringify(C)});const pe=(0,B.xO)(Object.assign({key:v.config.apiKey},Q)).slice(1),Le=yield v._getAdditionalHeaders();return Le["Content-Type"]="application/json",v.languageCode&&(Le["X-Firebase-Locale"]=v.languageCode),un.fetch()(oo(v,v.config.apiHost,_,pe),Object.assign({method:g,headers:Le,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function hr(v,g,_){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,u.Z)(function*(v,g,_){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},en),g);try{const A=new ir(v),P=yield Promise.race([_(),A.promise]);A.clearNetworkTimeout();const Q=yield P.json();if("needConfirmation"in Q)throw jr(v,"account-exists-with-different-credential",Q);if(P.ok&&!("errorMessage"in Q))return Q;{const pe=P.ok?Q.errorMessage:Q.error.message,[Le,Je]=pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw jr(v,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Le)throw jr(v,"email-already-in-use",Q);if("USER_DISABLED"===Le)throw jr(v,"user-disabled",Q);const bt=C[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw Se(v,bt,Je);Ie(v,bt)}}catch(A){if(A instanceof B.ZR)throw A;Ie(v,"network-request-failed")}})).apply(this,arguments)}function nr(v,g,_,C){return is.apply(this,arguments)}function is(){return(is=(0,u.Z)(function*(v,g,_,C,A={}){const P=yield Ut(v,g,_,C,A);return"mfaPendingCredential"in P&&Ie(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function oo(v,g,_,C){const A=`${g}${_}?${C}`;return v.config.emulator?Un(v.config,A):`${v.config.apiScheme}://${A}`}class ir{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Ee(this.auth,"network-request-failed")),Gi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jr(v,g,_){const C={appName:v.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const A=Ee(v,g,C);return A.customData._tokenResponse=_,A}function rr(){return(rr=(0,u.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function jn(v,g){return ti.apply(this,arguments)}function ti(){return(ti=(0,u.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function rs(v,g){return ss.apply(this,arguments)}function ss(){return(ss=(0,u.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Pn(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Lo(){return(Lo=(0,u.Z)(function*(v,g=!1){const _=(0,B.m9)(v),C=yield _.getIdToken(g),A=ct(C);W(A&&A.exp&&A.auth_time&&A.iat,_.auth,"internal-error");const P="object"==typeof A.firebase?A.firebase:void 0,Q=null==P?void 0:P.sign_in_provider;return{claims:A,token:C,authTime:Pn(qt(A.auth_time)),issuedAtTime:Pn(qt(A.iat)),expirationTime:Pn(qt(A.exp)),signInProvider:Q||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function qt(v){return 1e3*Number(v)}function ct(v){var g;const[_,C,A]=v.split(".");if(void 0===_||void 0===C||void 0===A)return tt("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,B.tV)(C);return P?JSON.parse(P):(tt("Failed to decode base64 JWT payload"),null)}catch(P){return tt("Caught error parsing JWT payload as JSON",null===(g=P)||void 0===g?void 0:g.toString()),null}}function ki(v,g){return pr.apply(this,arguments)}function pr(){return(pr=(0,u.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof B.ZR&&Ht(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}function Ht({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class ao{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const A=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,u.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(_=C)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class Oi{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pn(this.lastLoginAt),this.creationTime=Pn(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zi(v){return pt.apply(this,arguments)}function pt(){return(pt=(0,u.Z)(function*(v){var g;const _=v.auth,C=yield v.getIdToken(),A=yield ki(v,rs(_,{idToken:C}));W(null==A?void 0:A.users.length,_,"internal-error");const P=A.users[0];v._notifyReloadListener(P);const Q=(null===(g=P.providerUserInfo)||void 0===g?void 0:g.length)?j(P.providerUserInfo):[],pe=Z(v.providerData,Q),bt=!!v.isAnonymous&&!(v.email&&P.passwordHash||(null==pe?void 0:pe.length)),mt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:pe,metadata:new Oi(P.createdAt,P.lastLoginAt),isAnonymous:bt};Object.assign(v,mt)})).apply(this,arguments)}function H(){return(H=(0,u.Z)(function*(v){const g=(0,B.m9)(v);yield zi(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Z(v,g){return[...v.filter(C=>!g.some(A=>A.providerId===C.providerId)),...g]}function j(v){return v.map(g=>{var{providerId:_}=g,C=(0,ae._T)(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function K(){return(K=(0,u.Z)(function*(v,g){const _=yield hr(v,{},(0,u.Z)(function*(){const C=(0,B.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:A,apiKey:P}=v.config,Q=oo(v,A,"/v1/token",`key=${P}`),pe=yield v._getAdditionalHeaders();return pe["Content-Type"]="application/x-www-form-urlencoded",un.fetch()(Q,{method:"POST",headers:pe,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Re{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){W(g.idToken,"internal-error"),W(void 0!==g.idToken,"internal-error"),W(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function Ct(v){const g=ct(v);return W(g,"internal-error"),W(void 0!==g.exp,"internal-error"),W(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,u.Z)(function*(){return W(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,u.Z)(function*(){const{accessToken:A,refreshToken:P,expiresIn:Q}=yield function $(v,g){return K.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(A,P,Number(Q))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:A,expirationTime:P}=_,Q=new Re;return C&&(W("string"==typeof C,"internal-error",{appName:g}),Q.refreshToken=C),A&&(W("string"==typeof A,"internal-error",{appName:g}),Q.accessToken=A),P&&(W("number"==typeof P,"internal-error",{appName:g}),Q.expirationTime=P),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Re,this.toJSON())}_performRefresh(){return De("not implemented")}}function He(v,g){W("string"==typeof v||void 0===v,"internal-error",{appName:g})}class dt{constructor(g){var{uid:_,auth:C,stsTokenManager:A}=g,P=(0,ae._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ao(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Oi(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,u.Z)(function*(){const C=yield ki(_,_.stsTokenManager.getToken(_.auth,g));return W(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function fr(v){return Lo.apply(this,arguments)}(this,g)}reload(){return function lo(v){return H.apply(this,arguments)}(this)}_assign(g){this!==g&&(W(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new dt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,u.Z)(function*(){let A=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),A=!0),_&&(yield zi(C)),yield C.auth._persistUserIfCurrent(C),A&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,u.Z)(function*(){const _=yield g.getIdToken();return yield ki(g,function vt(v,g){return rr.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,A,P,Q,pe,Le,Je,bt;const mt=null!==(C=_.displayName)&&void 0!==C?C:void 0,Bn=null!==(A=_.email)&&void 0!==A?A:void 0,Ir=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,ju=null!==(Q=_.photoURL)&&void 0!==Q?Q:void 0,Wy=null!==(pe=_.tenantId)&&void 0!==pe?pe:void 0,qa=null!==(Le=_._redirectEventId)&&void 0!==Le?Le:void 0,Xd=null!==(Je=_.createdAt)&&void 0!==Je?Je:void 0,Jd=null!==(bt=_.lastLoginAt)&&void 0!==bt?bt:void 0,{uid:xf,emailVerified:eh,isAnonymous:Ii,providerData:Rf,stsTokenManager:kf}=_;W(xf&&kf,g,"internal-error");const Of=Re.fromJSON(this.name,kf);W("string"==typeof xf,g,"internal-error"),He(mt,g.name),He(Bn,g.name),W("boolean"==typeof eh,g,"internal-error"),W("boolean"==typeof Ii,g,"internal-error"),He(Ir,g.name),He(ju,g.name),He(Wy,g.name),He(qa,g.name),He(Xd,g.name),He(Jd,g.name);const Fc=new dt({uid:xf,auth:g,email:Bn,emailVerified:eh,displayName:mt,isAnonymous:Ii,photoURL:ju,phoneNumber:Ir,tenantId:Wy,stsTokenManager:Of,createdAt:Xd,lastLoginAt:Jd});return Rf&&Array.isArray(Rf)&&(Fc.providerData=Rf.map(Lc=>Object.assign({},Lc))),qa&&(Fc._redirectEventId=qa),Fc}static _fromIdTokenResponse(g,_,C=!1){return(0,u.Z)(function*(){const A=new Re;A.updateFromServerResponse(_);const P=new dt({uid:_.localId,auth:g,stsTokenManager:A,isAnonymous:C});return yield zi(P),P})()}}const Qt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,C){var A=this;return(0,u.Z)(function*(){A.storage[_]=C})()}_get(_){var C=this;return(0,u.Z)(function*(){const A=C.storage[_];return void 0===A?null:A})()}_remove(_){var C=this;return(0,u.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return v.type="NONE",v})();function di(v,g,_){return`firebase:${v}:${g}:${_}`}class Ft{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:A,name:P}=this.auth;this.fullUserKey=di(this.userKey,A.apiKey,P),this.fullPersistenceKey=di("persistence",A.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,u.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?dt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,u.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,u.Z)(function*(){if(!_.length)return new Ft(se(Qt),g,C);const A=(yield Promise.all(_.map(function(){var Je=(0,u.Z)(function*(bt){if(yield bt._isAvailable())return bt});return function(bt){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let P=A[0]||se(Qt);const Q=di(C,g.config.apiKey,g.name);let pe=null;for(const Je of _)try{const bt=yield Je._get(Q);if(bt){const mt=dt._fromJSON(g,bt);Je!==P&&(pe=mt),P=Je;break}}catch(bt){}const Le=A.filter(Je=>Je._shouldAllowMigration);return P._shouldAllowMigration&&Le.length?(P=Le[0],pe&&(yield P._set(Q,pe.toJSON())),yield Promise.all(_.map(function(){var Je=(0,u.Z)(function*(bt){if(bt!==P)try{yield bt._remove(Q)}catch(mt){}});return function(bt){return Je.apply(this,arguments)}}())),new Ft(P,g,C)):new Ft(P,g,C)})()}}function gr(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(ni(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(os(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Ms(g))return"Blackberry";if(ii(g))return"Webos";if(Da(g))return"Safari";if((g.includes("chrome/")||ol(g))&&!g.includes("edge/"))return"Chrome";if($i(g))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function os(v=(0,B.z$)()){return/firefox\//i.test(v)}function Da(v=(0,B.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ol(v=(0,B.z$)()){return/crios\//i.test(v)}function ni(v=(0,B.z$)()){return/iemobile/i.test(v)}function $i(v=(0,B.z$)()){return/android/i.test(v)}function Ms(v=(0,B.z$)()){return/blackberry/i.test(v)}function ii(v=(0,B.z$)()){return/webos/i.test(v)}function sr(v=(0,B.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function co(v=(0,B.z$)()){return sr(v)||$i(v)||ii(v)||Ms(v)||/windows phone/i.test(v)||ni(v)}function Sa(v,g=[]){let _;switch(v){case"Browser":_=gr((0,B.z$)());break;case"Worker":_=`${gr((0,B.z$)())}-${v}`;break;default:_=v}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${he.SDK_VERSION}/${C}`}class or{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const C=P=>new Promise((Q,pe)=>{try{Q(g(P))}catch(Le){pe(Le)}});C.onAbort=_,this.queue.push(C);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,u.Z)(function*(){var C;if(_.auth.currentUser===g)return;const A=[];try{for(const P of _.queue)yield P(g),P.onAbort&&A.push(P.onAbort)}catch(P){A.reverse();for(const Q of A)try{Q()}catch(pe){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=P)||void 0===C?void 0:C.message})}})()}}class Qe{constructor(g,_,C){this.app=g,this.heartbeatServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hn(this),this.idTokenSubscription=new hn(this),this.beforeStateQueue=new or(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=se(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var A,P;if(!C._deleted&&(C.persistenceManager=yield Ft.create(C,g),!C._deleted)){if(null===(A=C._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch(Q){}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(P=C.currentUser)||void 0===P?void 0:P.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,u.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,u.Z)(function*(){var C;const A=yield _.assertedPersistence.getCurrentUser();let P=A,Q=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const pe=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,Le=null==P?void 0:P._redirectEventId,Je=yield _.tryRedirectSignIn(g);(!pe||pe===Le)&&(null==Je?void 0:Je.user)&&(P=Je.user,Q=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(Q)try{yield _.beforeStateQueue.runMiddleware(P)}catch(pe){P=A,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(pe))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return W(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(g){var _=this;return(0,u.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(A){yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,u.Z)(function*(){var C;try{yield zi(g)}catch(A){if("auth/network-request-failed"!==(null===(C=A)||void 0===C?void 0:C.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function nt(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,u.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,u.Z)(function*(){const C=g?(0,B.m9)(g):null;return C&&W(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g,_=!1){var C=this;return(0,u.Z)(function*(){if(!C._deleted)return g&&W(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,u.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,u.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(se(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new B.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,u.Z)(function*(){const A=yield C.getOrInitRedirectPersistenceManager(_);return null===g?A.removeCurrentUser():A.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&se(g)||_._popupRedirectResolver;W(C,_,"argument-error"),_.redirectPersistenceManager=yield Ft.create(_,[se(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,u.Z)(function*(){var C,A;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,u.Z)(function*(){if(g===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,A){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return W(Q,this,"internal-error"),Q.then(()=>P(this.currentUser)),"function"==typeof _?g.addObserver(_,C,A):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Sa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,u.Z)(function*(){var _;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const A=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return A&&(C["X-Firebase-Client"]=A),C})()}}function ht(v){return(0,B.m9)(v)}class hn{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,B.ne)(_=>this.observer=_)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function as(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function ls(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class Hr{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return De("not implemented")}_getIdTokenResponse(g){return De("not implemented")}_linkToIdToken(g,_){return De("not implemented")}_getReauthenticationResolver(g){return De("not implemented")}}function Hn(v,g){return xt.apply(this,arguments)}function xt(){return(xt=(0,u.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:resetPassword",Yt(v,g))})).apply(this,arguments)}function Ta(v,g){return xs.apply(this,arguments)}function xs(){return(xs=(0,u.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function lc(v,g){return uo.apply(this,arguments)}function uo(){return(uo=(0,u.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:update",Yt(v,g))})).apply(this,arguments)}function Vo(){return(Vo=(0,u.Z)(function*(v,g){return nr(v,"POST","/v1/accounts:signInWithPassword",Yt(v,g))})).apply(this,arguments)}function ho(v,g){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,u.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:sendOobCode",Yt(v,g))})).apply(this,arguments)}function mn(v,g){return cc.apply(this,arguments)}function cc(){return(cc=(0,u.Z)(function*(v,g){return ho(v,g)})).apply(this,arguments)}function ll(v,g){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,u.Z)(function*(v,g){return ho(v,g)})).apply(this,arguments)}function mr(v,g){return cl.apply(this,arguments)}function cl(){return(cl=(0,u.Z)(function*(v,g){return ho(v,g)})).apply(this,arguments)}function wd(v,g){return cs.apply(this,arguments)}function cs(){return(cs=(0,u.Z)(function*(v,g){return ho(v,g)})).apply(this,arguments)}function uu(){return(uu=(0,u.Z)(function*(v,g){return nr(v,"POST","/v1/accounts:signInWithEmailLink",Yt(v,g))})).apply(this,arguments)}function Cd(){return(Cd=(0,u.Z)(function*(v,g){return nr(v,"POST","/v1/accounts:signInWithEmailLink",Yt(v,g))})).apply(this,arguments)}class Ni extends Hr{constructor(g,_,C,A=null){super("password",C),this._email=g,this._password=_,this._tenantId=A}static _fromEmailAndPassword(g,_){return new Ni(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new Ni(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,u.Z)(function*(){switch(_.signInMethod){case"password":return function wi(v,g){return Vo.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function us(v,g){return uu.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Ie(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,u.Z)(function*(){switch(C.signInMethod){case"password":return Ta(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function Ng(v,g){return Cd.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:Ie(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function fo(v,g){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,u.Z)(function*(v,g){return nr(v,"POST","/v1/accounts:signInWithIdp",Yt(v,g))})).apply(this,arguments)}class Rs extends Hr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Rs(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Ie("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:A}=_,P=(0,ae._T)(_,["providerId","signInMethod"]);if(!C||!A)return null;const Q=new Rs(C,A);return Q.idToken=P.idToken||void 0,Q.accessToken=P.accessToken||void 0,Q.secret=P.secret,Q.nonce=P.nonce,Q.pendingToken=P.pendingToken||null,Q}_getIdTokenResponse(g){return fo(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,fo(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,fo(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,B.xO)(_)}return g}}function Lg(v,g){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,u.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:sendVerificationCode",Yt(v,g))})).apply(this,arguments)}function po(){return(po=(0,u.Z)(function*(v,g){return nr(v,"POST","/v1/accounts:signInWithPhoneNumber",Yt(v,g))})).apply(this,arguments)}function Sd(){return(Sd=(0,u.Z)(function*(v,g){const _=yield nr(v,"POST","/v1/accounts:signInWithPhoneNumber",Yt(v,g));if(_.temporaryProof)throw jr(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Vg={USER_NOT_FOUND:"user-not-found"};function Td(){return(Td=(0,u.Z)(function*(v,g){return nr(v,"POST","/v1/accounts:signInWithPhoneNumber",Yt(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Vg)})).apply(this,arguments)}class Ia extends Hr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Ia({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Ia({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function du(v,g){return po.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Bg(v,g){return Sd.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Ug(v,g){return Td.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:A}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:A}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:A,temporaryProof:P}=g;return C||_||A||P?new Ia({verificationId:_,verificationCode:C,phoneNumber:A,temporaryProof:P}):null}}class uc{constructor(g){var _,C,A,P,Q,pe;const Le=(0,B.zd)((0,B.pd)(g)),Je=null!==(_=Le.apiKey)&&void 0!==_?_:null,bt=null!==(C=Le.oobCode)&&void 0!==C?C:null,mt=function ef(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Le.mode)&&void 0!==A?A:null);W(Je&&bt&&mt,"argument-error"),this.apiKey=Je,this.operation=mt,this.code=bt,this.continueUrl=null!==(P=Le.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Q=Le.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(pe=Le.tenantId)&&void 0!==pe?pe:null}static parseLink(g){const _=function ul(v){const g=(0,B.zd)((0,B.pd)(v)).link,_=g?(0,B.zd)((0,B.pd)(g)).deep_link_id:null,C=(0,B.zd)((0,B.pd)(v)).deep_link_id;return(C?(0,B.zd)((0,B.pd)(C)).link:null)||C||_||g||v}(g);try{return new uc(_)}catch(C){return null}}}let Ad=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,C){return Ni._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const A=uc.parseLink(C);return W(A,"argument-error"),Ni._fromEmailAndCode(_,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Fi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Uo extends Fi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ds extends Uo{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return W("providerId"in _&&"signInMethod"in _,"argument-error"),Rs._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return W(g.idToken||g.accessToken,"argument-error"),Rs._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ds.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ds.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:A,pendingToken:P,nonce:Q,providerId:pe}=g;if(!C&&!A&&!_&&!P||!pe)return null;try{return new ds(pe)._credential({idToken:_,accessToken:C,nonce:Q,pendingToken:P})}catch(Le){return null}}}let Aa=(()=>{class v extends Uo{constructor(){super("facebook.com")}static credential(_){return Rs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(C){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Md=(()=>{class v extends Uo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return Rs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:A}=_;if(!C&&!A)return null;try{return v.credential(C,A)}catch(P){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),tf=(()=>{class v extends Uo{constructor(){super("github.com")}static credential(_){return Rs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(C){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class jo extends Hr{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return fo(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,fo(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,fo(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:A,pendingToken:P}=_;return C&&A&&P&&C===A?new jo(C,P):null}static _create(g,_){return new jo(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class qi extends Fi{constructor(g){W(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return qi.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return qi.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=jo.fromJSON(g);return W(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return jo._create(C,_)}catch(A){return null}}}let xd=(()=>{class v extends Uo{constructor(){super("twitter.com")}static credential(_,C){return Rs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:A}=_;if(!C||!A)return null;try{return v.credential(C,A)}catch(P){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Li(v,g){return xa.apply(this,arguments)}function xa(){return(xa=(0,u.Z)(function*(v,g){return nr(v,"POST","/v1/accounts:signUp",Yt(v,g))})).apply(this,arguments)}class _r{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,A=!1){return(0,u.Z)(function*(){const P=yield dt._fromIdTokenResponse(g,C,A),Q=hu(C);return new _r({user:P,providerId:Q,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,u.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const A=hu(C);return new _r({user:g,providerId:A,_tokenResponse:C,operationType:_})})()}}function hu(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function fu(){return(fu=(0,u.Z)(function*(v){var g;const _=ht(v);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new _r({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield Li(_,{returnSecureToken:!0}),A=yield _r._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ra extends B.ZR{constructor(g,_,C,A){var P;super(_.code,_.message),this.operationType=C,this.user=A,Object.setPrototypeOf(this,Ra.prototype),this.customData={appName:g.name,tenantId:null!==(P=g.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,A){return new Ra(g,_,C,A)}}function pu(v,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Ra._fromErrorAndOperation(v,P,g,C):P})}function hs(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function fn(){return(fn=(0,u.Z)(function*(v,g){const _=(0,B.m9)(v);yield rn(!0,_,g);const{providerUserInfo:C}=yield jn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),A=hs(C||[]);return _.providerData=_.providerData.filter(P=>A.has(P.providerId)),A.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function dl(v,g){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,u.Z)(function*(v,g,_=!1){const C=yield ki(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return _r._forOperation(v,"link",C)})).apply(this,arguments)}function rn(v,g,_){return hl.apply(this,arguments)}function hl(){return(hl=(0,u.Z)(function*(v,g,_){yield zi(g);const A=!1===v?"provider-already-linked":"no-such-provider";W(hs(g.providerData).has(_)===v,g.auth,A)})).apply(this,arguments)}function dc(v,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,u.Z)(function*(v,g,_=!1){var C;const{auth:A}=v,P="reauthenticate";try{const Q=yield ki(v,pu(A,P,g,v),_);W(Q.idToken,A,"internal-error");const pe=ct(Q.idToken);W(pe,A,"internal-error");const{sub:Le}=pe;return W(v.uid===Le,A,"user-mismatch"),_r._forOperation(v,P,Q)}catch(Q){throw"auth/user-not-found"===(null===(C=Q)||void 0===C?void 0:C.code)&&Ie(A,"user-mismatch"),Q}})).apply(this,arguments)}function Ci(v,g){return gu.apply(this,arguments)}function gu(){return(gu=(0,u.Z)(function*(v,g,_=!1){const C="signIn",A=yield pu(v,C,g),P=yield _r._fromIdTokenResponse(v,C,A);return _||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Rn(v,g){return fs.apply(this,arguments)}function fs(){return(fs=(0,u.Z)(function*(v,g){return Ci(ht(v),g)})).apply(this,arguments)}function Ei(v,g){return Go.apply(this,arguments)}function Go(){return(Go=(0,u.Z)(function*(v,g){const _=(0,B.m9)(v);return yield rn(!1,_,g.providerId),dl(_,g)})).apply(this,arguments)}function ks(v,g){return fl.apply(this,arguments)}function fl(){return(fl=(0,u.Z)(function*(v,g){return dc((0,B.m9)(v),g)})).apply(this,arguments)}function Gr(v,g){return ps.apply(this,arguments)}function ps(){return(ps=(0,u.Z)(function*(v,g){return nr(v,"POST","/v1/accounts:signInWithCustomToken",Yt(v,g))})).apply(this,arguments)}function yt(){return(yt=(0,u.Z)(function*(v,g){const _=ht(v),C=yield Gr(_,{token:g,returnSecureToken:!0}),A=yield _r._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class Oa{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?hc._fromServerResponse(g,_):Ie(g,"internal-error")}}class hc extends Oa{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new hc(_)}}function pl(v,g,_){var C;W((null===(C=_.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),W(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(W(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(W(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function gl(){return(gl=(0,u.Z)(function*(v,g,_){const C=(0,B.m9)(v),A={requestType:"PASSWORD_RESET",email:g};_&&pl(C,A,_),yield ll(C,A)})).apply(this,arguments)}function yu(){return(yu=(0,u.Z)(function*(v,g,_){yield Hn((0,B.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Lt(){return(Lt=(0,u.Z)(function*(v,g){yield lc((0,B.m9)(v),{oobCode:g})})).apply(this,arguments)}function fc(v,g){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,u.Z)(function*(v,g){const _=(0,B.m9)(v),C=yield Hn(_,{oobCode:g}),A=C.requestType;switch(W(A,_,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":W(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":W(C.mfaInfo,_,"internal-error");default:W(C.email,_,"internal-error")}let P=null;return C.mfaInfo&&(P=Oa._fromServerResponse(ht(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:P},operation:A}})).apply(this,arguments)}function zo(){return(zo=(0,u.Z)(function*(v,g){const{data:_}=yield fc((0,B.m9)(v),g);return _.email})).apply(this,arguments)}function ml(){return(ml=(0,u.Z)(function*(v,g,_){const C=ht(v),A=yield Li(C,{returnSecureToken:!0,email:g,password:_}),P=yield _r._fromIdTokenResponse(C,"signIn",A);return yield C._updateCurrentUser(P.user),P})).apply(this,arguments)}function pc(){return(pc=(0,u.Z)(function*(v,g,_){const C=(0,B.m9)(v),A={requestType:"EMAIL_SIGNIN",email:g};W(_.handleCodeInApp,C,"argument-error"),_&&pl(C,A,_),yield mr(C,A)})).apply(this,arguments)}function Gn(){return(Gn=(0,u.Z)(function*(v,g,_){const C=(0,B.m9)(v),A=Ad.credentialWithLink(g,_||Ne());return W(A._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Rn(C,A)})).apply(this,arguments)}function Os(v,g){return yl.apply(this,arguments)}function yl(){return(yl=(0,u.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:createAuthUri",Yt(v,g))})).apply(this,arguments)}function zr(){return(zr=(0,u.Z)(function*(v,g){const C={identifier:g,continueUri:ft()?Ne():"http://localhost"},{signinMethods:A}=yield Os((0,B.m9)(v),C);return A||[]})).apply(this,arguments)}function mc(){return(mc=(0,u.Z)(function*(v,g){const _=(0,B.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&pl(_.auth,A,g);const{email:P}=yield mn(_.auth,A);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function _c(){return(_c=(0,u.Z)(function*(v,g,_){const C=(0,B.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&pl(C.auth,P,_);const{email:Q}=yield wd(C.auth,P);Q!==v.email&&(yield v.reload())})).apply(this,arguments)}function vl(v,g){return Na.apply(this,arguments)}function Na(){return(Na=(0,u.Z)(function*(v,g){return Ut(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function bl(){return(bl=(0,u.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,B.m9)(v),P={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},Q=yield ki(C,vl(C.auth,P));C.displayName=Q.displayName||null,C.photoURL=Q.photoUrl||null;const pe=C.providerData.find(({providerId:Le})=>"password"===Le);pe&&(pe.displayName=C.displayName,pe.photoURL=C.photoURL),yield C._updateTokensIfNecessary(Q)})).apply(this,arguments)}function Fa(v,g,_){return wl.apply(this,arguments)}function wl(){return(wl=(0,u.Z)(function*(v,g,_){const{auth:C}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(P.email=g),_&&(P.password=_);const Q=yield ki(v,Ta(C,P));yield v._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class La{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class Od extends La{constructor(g,_,C,A){super(g,_,C),this.username=A}}class Ba extends La{constructor(g,_){super(g,"facebook.com",_)}}class gs extends Od{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class rf extends La{constructor(g,_){super(g,"google.com",_)}}class hi extends Od{constructor(g,_,C){super(g,"twitter.com",_,C)}}function ms(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function kd(v){var g,_;if(!v)return null;const{providerId:C}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&(null==v?void 0:v.idToken)){const Q=null===(_=null===(g=ct(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(Q)return new La(P,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!C)return null;switch(C){case"facebook.com":return new Ba(P,A);case"github.com":return new gs(P,A);case"google.com":return new rf(P,A);case"twitter.com":return new hi(P,A,v.screenName||null);case"custom":case"anonymous":return new La(P,null);default:return new La(P,C,A)}}(_)}class Ps{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Ps("enroll",g)}static _fromMfaPendingCredential(g){return new Ps("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Ps._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(C=g.multiFactorSession)||void 0===C?void 0:C.idToken)return Ps._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Va{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=ht(g),A=_.customData._serverResponse,P=(A.mfaInfo||[]).map(pe=>Oa._fromServerResponse(C,pe));W(A.mfaPendingCredential,C,"internal-error");const Q=Ps._fromMfaPendingCredential(A.mfaPendingCredential);return new Va(Q,P,function(){var pe=(0,u.Z)(function*(Le){const Je=yield Le._process(C,Q);delete A.mfaInfo,delete A.mfaPendingCredential;const bt=Object.assign(Object.assign({},A),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(_.operationType){case"signIn":const mt=yield _r._fromIdTokenResponse(C,_.operationType,bt);return yield C._updateCurrentUser(mt.user),mt;case"reauthenticate":return W(_.user,C,"internal-error"),_r._forOperation(_.user,_.operationType,bt);default:Ie(C,"internal-error")}});return function(Le){return pe.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,u.Z)(function*(){return _.signInResolver(g)})()}}function af(v,g){return Ut(v,"POST","/v2/accounts/mfaEnrollment:start",Yt(v,g))}class Fd{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>Oa._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new Fd(g)}getSession(){var g=this;return(0,u.Z)(function*(){return Ps._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var C=this;return(0,u.Z)(function*(){const A=g,P=yield C.getSession(),Q=yield ki(C.user,A._process(C.user.auth,P,_));return yield C.user._updateTokensIfNecessary(Q),C.user.reload()})()}unenroll(g){var _=this;return(0,u.Z)(function*(){var C;const A="string"==typeof g?g:g.uid,P=yield _.user.getIdToken(),Q=yield ki(_.user,function yc(v,g){return Ut(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Yt(v,g))}(_.user.auth,{idToken:P,mfaEnrollmentId:A}));_.enrolledFactors=_.enrolledFactors.filter(({uid:pe})=>pe!==A),yield _.user._updateTokensIfNecessary(Q);try{yield _.user.reload()}catch(pe){if("auth/user-token-expired"!==(null===(C=pe)||void 0===C?void 0:C.code))throw pe}})()}}const vc=new WeakMap,yo="__sak";class Du{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(yo,"1"),this.storage.removeItem(yo),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const It=(()=>{class v extends Du{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function zg(){const v=(0,B.z$)();return Da(v)||sr(v)}()&&function bi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=co(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const A=this.storage.getItem(C),P=this.localCache[C];A!==P&&_(C,P,A)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((pe,Le,Je)=>{this.notifyListeners(pe,Je)});const A=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pe=this.storage.getItem(A);if(_.newValue!==pe)null!==_.newValue?this.storage.setItem(A,_.newValue):this.storage.removeItem(A);else if(this.localCache[A]===_.newValue&&!C)return}const P=()=>{const pe=this.storage.getItem(A);!C&&this.localCache[A]===pe||this.notifyListeners(A,pe)},Q=this.storage.getItem(A);!function al(){return(0,B.w1)()&&10===document.documentMode}()||Q===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,C){this.localCache[_]=C;const A=this.listeners[_];if(A)for(const P of Array.from(A))P(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var A=()=>super._set,P=this;return(0,u.Z)(function*(){yield A().call(P,_,C),P.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,A=this;return(0,u.Z)(function*(){const P=yield C().call(A,_);return A.localCache[_]=JSON.stringify(P),P})()}_remove(_){var C=()=>super._remove,A=this;return(0,u.Z)(function*(){yield C().call(A,_),delete A.localCache[_]})()}}return v.type="LOCAL",v})(),tn=(()=>{class v extends Du{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return v.type="SESSION",v})();let Ld=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(P=>P.isListeningto(_));if(C)return C;const A=new v(_);return this.receivers.push(A),A}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,u.Z)(function*(){const A=_,{eventId:P,eventType:Q,data:pe}=A.data,Le=C.handlersMap[Q];if(!(null==Le?void 0:Le.size))return;A.ports[0].postMessage({status:"ack",eventId:P,eventType:Q});const Je=Array.from(Le).map(function(){var mt=(0,u.Z)(function*(Bn){return Bn(A.origin,pe)});return function(Bn){return mt.apply(this,arguments)}}()),bt=yield function Su(v){return Promise.all(v.map(function(){var g=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(Je);A.ports[0].postMessage({status:"done",eventId:P,eventType:Q,response:bt})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function _s(v="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return v+_}class Tu{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var A=this;return(0,u.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Q,pe;return new Promise((Le,Je)=>{const bt=_s("",20);P.port1.start();const mt=setTimeout(()=>{Je(new Error("unsupported_event"))},C);pe={messageChannel:P,onMessage(Bn){const Ir=Bn;if(Ir.data.eventId===bt)switch(Ir.data.status){case"ack":clearTimeout(mt),Q=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Le(Ir.data.response);break;default:clearTimeout(mt),clearTimeout(Q),Je(new Error("invalid_response"))}}},A.handlers.add(pe),P.port1.addEventListener("message",pe.onMessage),A.target.postMessage({eventType:g,eventId:bt,data:_},[P.port2])}).finally(()=>{pe&&A.removeMessageHandler(pe)})})()}}function wn(){return window}function vr(){return void 0!==wn().WorkerGlobalScope&&"function"==typeof wn().importScripts}function bc(){return(bc=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Dl="firebaseLocalStorageDb",vo="firebaseLocalStorage",wc="fbase_key";class ys{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function bo(v,g){return v.transaction([vo],g?"readwrite":"readonly").objectStore(vo)}function wo(){const v=indexedDB.open(Dl,1);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(vo,{keyPath:wc})}catch(A){_(A)}}),v.addEventListener("success",(0,u.Z)(function*(){const C=v.result;C.objectStoreNames.contains(vo)?g(C):(C.close(),yield function Wi(){const v=indexedDB.deleteDatabase(Dl);return new ys(v).toPromise()}(),g(yield wo()))}))})}function Sl(v,g,_){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,u.Z)(function*(v,g,_){const C=bo(v,!0).put({[wc]:g,value:_});return new ys(C).toPromise()})).apply(this,arguments)}function Tl(){return(Tl=(0,u.Z)(function*(v,g){const _=bo(v,!1).get(g),C=yield new ys(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Il(v,g){const _=bo(v,!0).delete(g);return new ys(_).toPromise()}const gi=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield wo()),_.db})()}_withRetries(_){var C=this;return(0,u.Z)(function*(){let A=0;for(;;)try{const P=yield C._openDb();return yield _(P)}catch(P){if(A++>3)throw P;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return vr()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=Ld._getInstance(function Iu(){return vr()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,u.Z)(function*(A,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(A,P){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,u.Z)(function*(A,P){return["keyChanged"]});return function(A,P){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var C,A;if(_.activeServiceWorker=yield function st(){return bc.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Tu(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);!P||(null===(C=P[0])||void 0===C?void 0:C.fulfilled)&&(null===(A=P[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,u.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Bd(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield wo();return yield Sl(_,yo,"1"),yield Il(_,yo),!0}catch(_){}return!1})()}_withPendingWrite(_){var C=this;return(0,u.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var A=this;return(0,u.Z)(function*(){return A._withPendingWrite((0,u.Z)(function*(){return yield A._withRetries(P=>Sl(P,_,C)),A.localCache[_]=C,A.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,u.Z)(function*(){const A=yield C._withRetries(P=>function Zo(v,g){return Tl.apply(this,arguments)}(P,_));return C.localCache[_]=A,A})()}_remove(_){var C=this;return(0,u.Z)(function*(){return C._withPendingWrite((0,u.Z)(function*(){return yield C._withRetries(A=>Il(A,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const C=yield _._withRetries(Q=>{const pe=bo(Q,!1).getAll();return new ys(pe).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const A=[],P=new Set;for(const{fbase_key:Q,value:pe}of C)P.add(Q),JSON.stringify(_.localCache[Q])!==JSON.stringify(pe)&&(_.notifyListeners(Q,pe),A.push(Q));for(const Q of Object.keys(_.localCache))_.localCache[Q]&&!P.has(Q)&&(_.notifyListeners(Q,null),A.push(Q));return A})()}notifyListeners(_,C){this.localCache[_]=C;const A=this.listeners[_];if(A)for(const P of Array.from(A))P(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function kn(v,g){return Ut(v,"POST","/v2/accounts/mfaSignIn:start",Yt(v,g))}function Cn(){return(Cn=(0,u.Z)(function*(v){return(yield Ut(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Qn(v){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=g,C.onerror=A=>{const P=Ee("internal-error");P.customData=A,_(P)},C.type="text/javascript",C.charset="UTF-8",function ri(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(C)})}function Do(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Di=1e12;class Fn{constructor(g){this.auth=g,this.counter=Di,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new Al(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||Di;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Di))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,u.Z)(function*(){var C;return null===(C=_._widgets.get(g||Di))||void 0===C||C.execute(),""})()}}class Al{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof g?document.getElementById(g):g;W(A,"argument-error",{appName:_}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Au(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<v;C++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Mn=Do("rcb"),lf=new on(3e4,6e4);class Vd{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=wn().grecaptcha)||void 0===g?void 0:g.render)}load(g,_=""){return W(function Ml(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(wn().grecaptcha):new Promise((C,A)=>{const P=wn().setTimeout(()=>{A(Ee(g,"network-request-failed"))},lf.get());wn()[Mn]=()=>{wn().clearTimeout(P),delete wn()[Mn];const pe=wn().grecaptcha;if(!pe)return void A(Ee(g,"internal-error"));const Le=pe.render;pe.render=(Je,bt)=>{const mt=Le(Je,bt);return this.counter++,mt},this.hostLanguage=_,C(pe)},Qn(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Mn,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),A(Ee(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!!(null===(_=wn().grecaptcha)||void 0===_?void 0:_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bi{load(g){return(0,u.Z)(function*(){return new Fn(g)})()}clearedOneInstance(){}}const uf="recaptcha",Yo={theme:"light",type:"image"};class ja{constructor(g,_=Object.assign({},Yo),C){this.parameters=_,this.type=uf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ht(C),this.isInvisible="invisible"===this.parameters.size,W("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof g?document.getElementById(g):g;W(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bi:new Vd,this.validateStartingState()}verify(){var g=this;return(0,u.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(P=>{const Q=pe=>{!pe||(g.tokenChangeListeners.delete(Q),P(pe))};g.tokenChangeListeners.add(Q),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){W(!this.parameters.sitekey,this.auth,"argument-error"),W(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),W("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=wn()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){W(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,u.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,u.Z)(function*(){W(ft()&&!vr(),g.auth,"internal-error"),yield function Cc(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function vs(v){return Cn.apply(this,arguments)}(g.auth);W(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return W(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ln{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Ia._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function So(){return(So=(0,u.Z)(function*(v,g,_){const C=ht(v),A=yield Qo(C,g,(0,B.m9)(_));return new Ln(A,P=>Rn(C,P))})).apply(this,arguments)}function Mu(){return(Mu=(0,u.Z)(function*(v,g,_){const C=(0,B.m9)(v);yield rn(!1,C,"phone");const A=yield Qo(C.auth,g,(0,B.m9)(_));return new Ln(A,P=>Ei(C,P))})).apply(this,arguments)}function Cr(){return(Cr=(0,u.Z)(function*(v,g,_){const C=(0,B.m9)(v),A=yield Qo(C.auth,g,(0,B.m9)(_));return new Ln(A,P=>ks(C,P))})).apply(this,arguments)}function Qo(v,g,_){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,u.Z)(function*(v,g,_){var C;const A=yield _.verify();try{let P;if(W("string"==typeof A,v,"argument-error"),W(_.type===uf,v,"argument-error"),P="string"==typeof g?{phoneNumber:g}:g,"session"in P){const Q=P.session;if("phoneNumber"in P)return W("enroll"===Q.type,v,"internal-error"),(yield af(v,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{W("signin"===Q.type,v,"internal-error");const pe=(null===(C=P.multiFactorHint)||void 0===C?void 0:C.uid)||P.multiFactorUid;return W(pe,v,"missing-multi-factor-info"),(yield kn(v,{mfaPendingCredential:Q.credential,mfaEnrollmentId:pe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield Lg(v,{phoneNumber:P.phoneNumber,recaptchaToken:A});return Q}}finally{_._reset()}})).apply(this,arguments)}function Ha(){return(Ha=(0,u.Z)(function*(v,g){yield dl((0,B.m9)(v),g)})).apply(this,arguments)}let Jo=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=ht(_)}verifyPhoneNumber(_,C){return Qo(this.auth,_,(0,B.m9)(C))}static credential(_,C){return Ia._fromVerification(_,C)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:A}=_;return C&&A?Ia._fromTokenResponse(C,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ns(v,g){return g?se(g):(W(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Rl extends Hr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return fo(g,this._buildIdpRequest())}_linkToIdToken(g,_){return fo(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return fo(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Pt(v){return Ci(v.auth,new Rl(v),v.bypassAuthState)}function Dc(v){const{auth:g,user:_}=v;return W(_,g,"internal-error"),dc(_,new Rl(v),v.bypassAuthState)}function zn(v){return kl.apply(this,arguments)}function kl(){return(kl=(0,u.Z)(function*(v){const{auth:g,user:_}=v;return W(_,g,"internal-error"),dl(_,new Rl(v),v.bypassAuthState)})).apply(this,arguments)}class To{constructor(g,_,C,A,P=!1){this.auth=g,this.resolver=C,this.user=A,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,u.Z)(function*(C,A){g.pendingPromise={resolve:C,reject:A};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(P){g.reject(P)}});return function(C,A){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,u.Z)(function*(){const{urlResponse:C,sessionId:A,postBody:P,tenantId:Q,error:pe,type:Le}=g;if(pe)return void _.reject(pe);const Je={auth:_.auth,requestUri:C,sessionId:A,tenantId:Q||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Le)(Je))}catch(bt){_.reject(bt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Pt;case"linkViaPopup":case"linkViaRedirect":return zn;case"reauthViaPopup":case"reauthViaRedirect":return Dc;default:Ie(this.auth,"internal-error")}}resolve(g){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Iy=new on(2e3,1e4);function xu(){return(xu=(0,u.Z)(function*(v,g,_){const C=ht(v);ze(v,g,Fi);const A=Ns(C,_);return new Fs(C,"signInViaPopup",g,A).executeNotNull()})).apply(this,arguments)}function Ol(){return(Ol=(0,u.Z)(function*(v,g,_){const C=(0,B.m9)(v);ze(C.auth,g,Fi);const A=Ns(C.auth,_);return new Fs(C.auth,"reauthViaPopup",g,A,C).executeNotNull()})).apply(this,arguments)}function Sc(){return(Sc=(0,u.Z)(function*(v,g,_){const C=(0,B.m9)(v);ze(C.auth,g,Fi);const A=Ns(C.auth,_);return new Fs(C.auth,"linkViaPopup",g,A,C).executeNotNull()})).apply(this,arguments)}let Fs=(()=>{class v extends To{constructor(_,C,A,P,Q){super(_,C,P,Q),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const C=yield _.execute();return W(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,u.Z)(function*(){X(1===_.filter.length,"Popup operations only handle one event");const C=_s();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(A=>{_.reject(A)}),_.resolver._isIframeWebStorageSupported(_.auth,A=>{A||_.reject(Ee(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,A;this.pollId=(null===(A=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Iy.get())};_()}}return v.currentPopupAction=null,v})();const xn=new Map;class qg extends To{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,u.Z)(function*(){let C=xn.get(_.auth._key());if(!C){try{const P=(yield function Tc(v,g){return ea.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(P)}catch(A){C=()=>Promise.reject(A)}xn.set(_.auth._key(),C)}return _.bypassAuthState||xn.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,u.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const A=yield C.auth._redirectUserForId(g.eventId);if(A)return C.user=A,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function ea(){return(ea=(0,u.Z)(function*(v,g){const _=k(g),C=I(v);if(!(yield C._isAvailable()))return!1;const A="true"===(yield C._get(_));return yield C._remove(_),A})).apply(this,arguments)}function ta(v,g){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,u.Z)(function*(v,g){return I(v)._set(k(g),"true")})).apply(this,arguments)}function T(v,g){xn.set(v._key(),g)}function I(v){return se(v._redirectPersistence)}function k(v){return di("pendingRedirect",v.config.apiKey,v.name)}function ee(){return(ee=(0,u.Z)(function*(v,g,_){const C=ht(v);ze(v,g,Fi);const A=Ns(C,_);return yield ta(A,C),A._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function ot(){return(ot=(0,u.Z)(function*(v,g,_){const C=(0,B.m9)(v);ze(C.auth,g,Fi);const A=Ns(C.auth,_);yield ta(A,C.auth);const P=yield $r(C);return A._openRedirect(C.auth,g,"reauthViaRedirect",P)})).apply(this,arguments)}function gt(){return(gt=(0,u.Z)(function*(v,g,_){const C=(0,B.m9)(v);ze(C.auth,g,Fi);const A=Ns(C.auth,_);yield rn(!1,C,g.providerId),yield ta(A,C.auth);const P=yield $r(C);return A._openRedirect(C.auth,g,"linkViaRedirect",P)})).apply(this,arguments)}function si(){return(si=(0,u.Z)(function*(v,g){return yield ht(v)._initializationPromise,Ki(v,g,!1)})).apply(this,arguments)}function Ki(v,g){return Er.apply(this,arguments)}function Er(){return(Er=(0,u.Z)(function*(v,g,_=!1){const C=ht(v),A=Ns(C,g),Q=yield new qg(C,A,_).execute();return Q&&!_&&(delete Q.user._redirectEventId,yield C._persistUserIfCurrent(Q.user),yield C._setRedirectUser(null,g)),Q})).apply(this,arguments)}function $r(v){return na.apply(this,arguments)}function na(){return(na=(0,u.Z)(function*(v){const g=_s(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class bs{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function ku(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wr(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!Wr(g)){const A=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Ee(this.auth,A))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qr(g))}saveEventToCache(g){this.cachedEventUids.add(qr(g)),this.lastProcessedEventTime=Date.now()}}function qr(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function Wr({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Wg(v){return hf.apply(this,arguments)}function hf(){return(hf=(0,u.Z)(function*(v,g={}){return Ut(v,"GET","/v1/projects",g)})).apply(this,arguments)}const ia=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ou=/^https?/;function Zg(){return(Zg=(0,u.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield Wg(v);for(const _ of g)try{if(Kg(_))return}catch(C){}Ie(v,"unauthorized-domain")})).apply(this,arguments)}function Kg(v){const g=Ne(),{protocol:_,hostname:C}=new URL(g);if(v.startsWith("chrome-extension://")){const Q=new URL(v);return""===Q.hostname&&""===C?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&Q.hostname===C}if(!Ou.test(_))return!1;if(ia.test(v))return C===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(C)}const My=new on(3e4,6e4);function Yg(){const v=wn().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let Ic=null;function ra(v){return Ic=Ic||function ff(v){return new Promise((g,_)=>{var C,A,P;function Q(){Yg(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Yg(),_(Ee(v,"network-request-failed"))},timeout:My.get()})}if(null===(A=null===(C=wn().gapi)||void 0===C?void 0:C.iframes)||void 0===A?void 0:A.Iframe)g(gapi.iframes.getContext());else{if(!(null===(P=wn().gapi)||void 0===P?void 0:P.load)){const pe=Do("iframefcb");return wn()[pe]=()=>{gapi.load?Q():_(Ee(v,"network-request-failed"))},Qn(`https://apis.google.com/js/api.js?onload=${pe}`).catch(Le=>_(Le))}Q()}}).catch(g=>{throw Ic=null,g})}(v),Ic}const sa=new on(5e3,15e3),xy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ac=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ry(v){const g=v.config;W(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?Un(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,C={apiKey:g.apiKey,appName:v.name,v:he.SDK_VERSION},A=Ac.get(v.config.apiHost);A&&(C.eid=A);const P=v._getFrameworks();return P.length&&(C.fw=P.join(",")),`${_}?${(0,B.xO)(C).slice(1)}`}function Ga(){return Ga=(0,u.Z)(function*(v){const g=yield ra(v),_=wn().gapi;return W(_,v,"internal-error"),g.open({where:document.body,url:Ry(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xy,dontclear:!0},C=>new Promise(function(){var A=(0,u.Z)(function*(P,Q){yield C.restyle({setHideOnLeave:!1});const pe=Ee(v,"network-request-failed"),Le=wn().setTimeout(()=>{Q(pe)},sa.get());function Je(){wn().clearTimeout(Le),P(C)}C.ping(Je).then(Je,()=>{Q(pe)})});return function(P,Q){return A.apply(this,arguments)}}()))}),Ga.apply(this,arguments)}const pf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qg{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Ls(v,g,_,C,A,P){W(v.config.authDomain,v,"auth-domain-config-required"),W(v.config.apiKey,v,"invalid-api-key");const Q={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:C,v:he.SDK_VERSION,eventId:A};if(g instanceof Fi){g.setDefaultLanguage(v.languageCode),Q.providerId=g.providerId||"",(0,B.xb)(g.getCustomParameters())||(Q.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Le,Je]of Object.entries(P||{}))Q[Le]=Je}if(g instanceof Uo){const Le=g.getScopes().filter(Je=>""!==Je);Le.length>0&&(Q.scopes=Le.join(","))}v.tenantId&&(Q.tid=v.tenantId);const pe=Q;for(const Le of Object.keys(pe))void 0===pe[Le]&&delete pe[Le];return`${function Mc({config:v}){return v.emulator?Un(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,B.xO)(pe).slice(1)}`}const Nu="webStorageSupport";class Fu extends class Py{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return De("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Fu(g)}_finalizeEnroll(g,_,C){return function $o(v,g){return Ut(v,"POST","/v2/accounts/mfaEnrollment:finalize",Yt(v,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Ko(v,g){return Ut(v,"POST","/v2/accounts/mfaSignIn:finalize",Yt(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Jg=(()=>{class v{constructor(){}static assertion(_){return Fu._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var em="@firebase/auth";class nm{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{var A;g((null===(A=C)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Bs(){return window}function Fl(){return(Fl=(0,u.Z)(function*(v,g,_){var C;const{BuildInfo:A}=Bs();X(g.sessionId,"AuthEvent did not contain a session ID");const P=yield vf(g.sessionId),Q={};return sr()?Q.ibi=A.packageName:$i()?Q.apn=A.packageName:Ie(v,"operation-not-supported-in-this-environment"),A.displayName&&(Q.appDisplayName=A.displayName),Q.sessionId=P,Ls(v,_,g.type,void 0,null!==(C=g.eventId)&&void 0!==C?C:void 0,Q)})).apply(this,arguments)}function qd(){return(qd=(0,u.Z)(function*(v){const{BuildInfo:g}=Bs(),_={};sr()?_.iosBundleId=g.packageName:$i()?_.androidPackageName=g.packageName:Ie(v,"operation-not-supported-in-this-environment"),yield Wg(v,_)})).apply(this,arguments)}function sm(){return(sm=(0,u.Z)(function*(v,g,_){const{cordova:C}=Bs();let A=()=>{};try{yield new Promise((P,Q)=>{let pe=null;function Le(){var mt;P();const Bn=null===(mt=C.plugins.browsertab)||void 0===mt?void 0:mt.close;"function"==typeof Bn&&Bn(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function Je(){pe||(pe=window.setTimeout(()=>{Q(Ee(v,"redirect-cancelled-by-user"))},2e3))}function bt(){"visible"===(null==document?void 0:document.visibilityState)&&Je()}g.addPassiveListener(Le),document.addEventListener("resume",Je,!1),$i()&&document.addEventListener("visibilitychange",bt,!1),A=()=>{g.removePassiveListener(Le),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",bt,!1),pe&&window.clearTimeout(pe)}})}finally{A()}})).apply(this,arguments)}function vf(v){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,u.Z)(function*(v){const g=bf(v),_=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(_)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function bf(v){if(X(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),_=new Uint8Array(g);for(let C=0;C<v.length;C++)_[C]=v.charCodeAt(C);return _}!function uC(v){(0,he._registerComponent)(new ie.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),A=g.getProvider("heartbeat"),{apiKey:P,authDomain:Q}=C.options;return((pe,Le)=>{W(P&&!P.includes(":"),"invalid-api-key",{appName:pe.name}),W(!(null==Q?void 0:Q.includes(":")),"argument-error",{appName:pe.name});const Je={apiKey:P,authDomain:Q,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sa(v)},bt=new Qe(pe,Le,Je);return function fe(v,g){const _=(null==g?void 0:g.persistence)||[],C=(Array.isArray(_)?_:[_]).map(se);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(C,null==g?void 0:g.popupRedirectResolver)}(bt,_),bt})(C,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,he._registerComponent)(new ie.wA("auth-internal",g=>{const _=ht(g.getProvider("auth").getImmediate());return new nm(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,he.registerVersion)(em,"0.20.5",function $d(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,he.registerVersion)(em,"0.20.5","esm2017")}("Browser");class Zd extends bs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(g)),super.onEvent(g)}initialized(){var g=this;return(0,u.Z)(function*(){yield g.initPromise})()}}function kc(v){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,u.Z)(function*(v){const g=yield Bl()._get(Kd(v));return g&&(yield Bl()._remove(Kd(v))),g})).apply(this,arguments)}function wf(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const C=Math.floor(Math.random()*g.length);v.push(g.charAt(C))}return v.join("")}function Bl(){return se(It)}function Kd(v){return di("authEvent",v.config.apiKey,v.name)}function Wt(v){if(!(null==v?void 0:v.includes("?")))return{};const[g,..._]=v.split("?");return(0,B.zd)(_.join("?"))}function Pc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function za(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function lm(v=(0,B.z$)()){return!("file:"!==za()&&"ionic:"!==za()&&"capacitor:"!==za()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sf(){try{const v=self.localStorage,g=_s();if(v)return v.setItem(g,"1"),v.removeItem(g),!function Df(v=(0,B.z$)()){return function Yi(){return(0,B.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Vl(v=(0,B.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,B.hl)()}catch(v){return Ti()&&(0,B.hl)()}return!1}function Ti(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ul(){return(function jy(){return"http:"===za()||"https:"===za()}()||(0,B.ru)()||lm())&&!function $a(){return(0,B.b$)()||(0,B.UG)()}()&&Sf()&&!Ti()}function Yd(){return lm()&&"undefined"!=typeof document}function Vu(){return(Vu=(0,u.Z)(function*(){return!!Yd()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const Dr={LOCAL:"local",NONE:"none",SESSION:"session"},la=W,um="persistence";function Nc(v){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,u.Z)(function*(v){yield v._initializationPromise;const g=hm(),_=di(um,v.config.apiKey,v.name);g&&g.setItem(_,v._getPersistence())})).apply(this,arguments)}function hm(){var v;try{return(null===(v=function cm(){return"undefined"!=typeof window?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch(g){return null}}const Gy=W;class Sr{constructor(){this.browserResolver=se(class Xg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tn,this._completeRedirectFn=Ki,this._overrideRedirectResult=T}_openPopup(g,_,C,A){var P=this;return(0,u.Z)(function*(){var Q;X(null===(Q=P.eventManagers[g._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const pe=Ls(g,_,C,Ne(),A);return function Pu(v,g,_,C=500,A=600){const P=Math.max((window.screen.availHeight-A)/2,0).toString(),Q=Math.max((window.screen.availWidth-C)/2,0).toString();let pe="";const Le=Object.assign(Object.assign({},pf),{width:C.toString(),height:A.toString(),top:P,left:Q}),Je=(0,B.z$)().toLowerCase();_&&(pe=ol(Je)?"_blank":_),os(Je)&&(g=g||"http://localhost",Le.scrollbars="yes");const bt=Object.entries(Le).reduce((Bn,[Ir,ju])=>`${Bn}${Ir}=${ju},`,"");if(function Bo(v=(0,B.z$)()){var g;return sr(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Je)&&"_self"!==pe)return function ky(v,g){const _=document.createElement("a");_.href=v,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",pe),new Qg(null);const mt=window.open(g||"",pe,bt);W(mt,v,"popup-blocked");try{mt.focus()}catch(Bn){}return new Qg(mt)}(g,pe,_s())})()}_openRedirect(g,_,C,A){var P=this;return(0,u.Z)(function*(){return yield P._originValidation(g),function El(v){wn().location.href=v}(Ls(g,_,C,Ne(),A)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:A,promise:P}=this.eventManagers[_];return A?Promise.resolve(A):(X(P,"If manager is not set, promise should be"),P)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(g){var _=this;return(0,u.Z)(function*(){const C=yield function Gd(v){return Ga.apply(this,arguments)}(g),A=new bs(g);return C.register("authEvent",P=>(W(null==P?void 0:P.authEvent,g,"invalid-auth-event"),{status:A.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:A},_.iframes[g._key()]=C,A})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Nu,{type:Nu},A=>{var P;const Q=null===(P=null==A?void 0:A[0])||void 0===P?void 0:P[Nu];void 0!==Q&&_(!!Q),Ie(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ay(v){return Zg.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return co()||Da()||sr()}}),this.cordovaResolver=se(class am{constructor(){this._redirectPersistence=tn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ki,this._overrideRedirectResult=T}_initialize(g){var _=this;return(0,u.Z)(function*(){const C=g._key();let A=_.eventManagers.get(C);return A||(A=new Zd(g),_.eventManagers.set(C,A),_.attachCallbackListeners(g,A)),A})()}_openPopup(g){Ie(g,"operation-not-supported-in-this-environment")}_openRedirect(g,_,C,A){var P=this;return(0,u.Z)(function*(){!function xc(v){var g,_,C,A,P,Q,pe,Le,Je,bt;const mt=Bs();W("function"==typeof(null===(g=null==mt?void 0:mt.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),W(void 0!==(null===(_=null==mt?void 0:mt.BuildInfo)||void 0===_?void 0:_.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),W("function"==typeof(null===(P=null===(A=null===(C=null==mt?void 0:mt.cordova)||void 0===C?void 0:C.plugins)||void 0===A?void 0:A.browsertab)||void 0===P?void 0:P.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),W("function"==typeof(null===(Le=null===(pe=null===(Q=null==mt?void 0:mt.cordova)||void 0===Q?void 0:Q.plugins)||void 0===pe?void 0:pe.browsertab)||void 0===Le?void 0:Le.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),W("function"==typeof(null===(bt=null===(Je=null==mt?void 0:mt.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===bt?void 0:bt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Q=yield P._initialize(g);yield Q.initialized(),Q.resetRedirect(),function df(){xn.clear()}(),yield P._originValidation(g);const pe=function Rc(v,g,_=null){return{type:g,eventId:_,urlResponse:null,sessionId:wf(),postBody:null,tenantId:v.tenantId,error:Ee(v,"no-auth-event")}}(g,C,A);yield function Ny(v,g){return Bl()._set(Kd(v),g)}(g,pe);const Le=yield function Vs(v,g,_){return Fl.apply(this,arguments)}(g,pe,_),Je=yield function Wd(v){const{cordova:g}=Bs();return new Promise(_=>{g.plugins.browsertab.isAvailable(C=>{let A=null;C?g.plugins.browsertab.openUrl(v):A=g.InAppBrowser.open(v,function bd(v=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(A)})})}(Le);return function Ll(v,g,_){return sm.apply(this,arguments)}(g,Q,Je)})()}_isIframeWebStorageSupported(g,_){throw new Error("Method not implemented.")}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function rm(v){return qd.apply(this,arguments)}(g)),this.originValidationPromises[_]}attachCallbackListeners(g,_){const{universalLinks:C,handleOpenURL:A,BuildInfo:P}=Bs(),Q=setTimeout((0,u.Z)(function*(){yield kc(g),_.onEvent(Pc())}),500),pe=function(){var bt=(0,u.Z)(function*(mt){clearTimeout(Q);const Bn=yield kc(g);let Ir=null;Bn&&(null==mt?void 0:mt.url)&&(Ir=function Fy(v,g){var _,C;const A=function Ef(v){const g=Wt(v),_=g.link?decodeURIComponent(g.link):void 0,C=Wt(_).link,A=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Wt(A).link||A||C||_||v}(g);if(A.includes("/__/auth/callback")){const P=Wt(A),Q=P.firebaseError?function Cf(v){try{return JSON.parse(v)}catch(g){return null}}(decodeURIComponent(P.firebaseError)):null,pe=null===(C=null===(_=null==Q?void 0:Q.code)||void 0===_?void 0:_.split("auth/"))||void 0===C?void 0:C[1],Le=pe?Ee(pe):null;return Le?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:A,postBody:null}}return null}(Bn,mt.url)),_.onEvent(Ir||Pc())});return function(Bn){return bt.apply(this,arguments)}}();void 0!==C&&"function"==typeof C.subscribe&&C.subscribe(null,pe);const Le=A,Je=`${P.packageName.toLowerCase()}://`;Bs().handleOpenURL=function(){var bt=(0,u.Z)(function*(mt){if(mt.toLowerCase().startsWith(Je)&&pe({url:mt}),"function"==typeof Le)try{Le(mt)}catch(Bn){console.error(Bn)}});return function(mt){return bt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=tn,this._completeRedirectFn=Ki,this._overrideRedirectResult=T}_initialize(g){var _=this;return(0,u.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,_,C,A){var P=this;return(0,u.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(g,_,C,A)})()}_openRedirect(g,_,C,A){var P=this;return(0,u.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(g,_,C,A)})()}_isIframeWebStorageSupported(g,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,_)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return Yd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,u.Z)(function*(){if(g.underlyingResolver)return;const _=yield function Hy(){return Vu.apply(this,arguments)}();g.underlyingResolver=_?g.cordovaResolver:g.browserResolver})()}}function fm(v){return v.unwrap()}function Qd(v){return pm(v)}function pm(v){const{_tokenResponse:g}=v instanceof B.ZR?v.customData:v;if(!g)return null;if(!(v instanceof B.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Jo.credentialFromResult(v);const _=g.providerId;if(!_||"password"===_)return null;let C;switch(_){case"google.com":C=Md;break;case"facebook.com":C=Aa;break;case"github.com":C=tf;break;case"twitter.com":C=xd;break;default:const{oauthIdToken:A,oauthAccessToken:P,oauthTokenSecret:Q,pendingToken:pe,nonce:Le}=g;return P||Q||A||pe?pe?_.startsWith("saml.")?jo._create(_,pe):Rs._fromParams({providerId:_,signInMethod:_,pendingToken:pe,idToken:A,accessToken:P}):new ds(_).credential({idToken:A,accessToken:P,rawNonce:Le}):null}return v instanceof B.ZR?C.credentialFromError(v):C.credentialFromResult(v)}function Tr(v,g){return g.catch(_=>{throw _ instanceof B.ZR&&function $y(v,g){var _,C;const A=null===(_=g.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(C=g)||void 0===C?void 0:C.code))g.resolver=new gm(v,function fi(v,g){var _;const C=(0,B.m9)(v),A=g;return W(g.customData.operationType,C,"argument-error"),W(null===(_=A.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),Va._fromError(C,A)}(v,g));else if(A){const P=pm(g),Q=g;P&&(Q.credential=P,Q.tenantId=A.tenantId||void 0,Q.email=A.email||void 0,Q.phoneNumber=A.phoneNumber||void 0)}}(v,_),_}).then(_=>{const A=_.user;return{operationType:_.operationType,credential:Qd(_),additionalUserInfo:ms(_),user:Io.getOrCreate(A)}})}function If(v,g){return Af.apply(this,arguments)}function Af(){return(Af=(0,u.Z)(function*(v,g){const _=yield g;return{verificationId:_.verificationId,confirm:C=>Tr(v,_.confirm(C))}})).apply(this,arguments)}class gm{constructor(g,_){this.resolver=_,this.auth=function zy(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Tr(fm(this.auth),this.resolver.resolveSignIn(g))}}class Io{constructor(g){this._delegate=g,this.multiFactor=function qo(v){const g=(0,B.m9)(v);return vc.has(g)||vc.set(g,Fd._fromUser(g)),vc.get(g)}(g)}static getOrCreate(g){return Io.USER_MAP.has(g)||Io.USER_MAP.set(g,new Io(g)),Io.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var _=this;return(0,u.Z)(function*(){return Tr(_.auth,Ei(_._delegate,g))})()}linkWithPhoneNumber(g,_){var C=this;return(0,u.Z)(function*(){return If(C.auth,function $g(v,g,_){return Mu.apply(this,arguments)}(C._delegate,g,_))})()}linkWithPopup(g){var _=this;return(0,u.Z)(function*(){return Tr(_.auth,function jd(v,g,_){return Sc.apply(this,arguments)}(_._delegate,g,Sr))})()}linkWithRedirect(g){var _=this;return(0,u.Z)(function*(){return yield Nc(ht(_.auth)),function St(v,g,_){return function Tt(v,g,_){return gt.apply(this,arguments)}(v,g,_)}(_._delegate,g,Sr)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var _=this;return(0,u.Z)(function*(){return Tr(_.auth,ks(_._delegate,g))})()}reauthenticateWithPhoneNumber(g,_){return If(this.auth,function wr(v,g,_){return Cr.apply(this,arguments)}(this._delegate,g,_))}reauthenticateWithPopup(g){return Tr(this.auth,function Vi(v,g,_){return Ol.apply(this,arguments)}(this._delegate,g,Sr))}reauthenticateWithRedirect(g){var _=this;return(0,u.Z)(function*(){return yield Nc(ht(_.auth)),function be(v,g,_){return function qe(v,g,_){return ot.apply(this,arguments)}(v,g,_)}(_._delegate,g,Sr)})()}sendEmailVerification(g){return function bu(v,g){return mc.apply(this,arguments)}(this._delegate,g)}unlink(g){var _=this;return(0,u.Z)(function*(){return yield function nf(v,g){return fn.apply(this,arguments)}(_._delegate,g),_})()}updateEmail(g){return function Hg(v,g){return Fa((0,B.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function Eu(v,g){return Fa((0,B.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function xl(v,g){return Ha.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Cu(v,g){return bl.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,_){return function wu(v,g,_){return _c.apply(this,arguments)}(this._delegate,g,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Io.USER_MAP=new WeakMap;const Uu=W;let mm=(()=>{class v{constructor(_,C){if(this.app=_,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=_.options;Uu(A,"invalid-api-key",{appName:_.name}),Uu(A,"invalid-api-key",{appName:_.name});const P="undefined"!=typeof window?Sr:void 0;this._delegate=C.initialize({options:{persistence:qy(A,_.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Pe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Io.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,C){!function ar(v,g,_){const C=ht(v);W(C._canInitEmulator,C,"emulator-config-failed"),W(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const A=!!(null==_?void 0:_.disableWarnings),P=as(g),{host:Q,port:pe}=function Kn(v){const g=as(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(C);if(A){const P=A[1];return{host:P,port:ls(C.substr(P.length+1))}}{const[P,Q]=C.split(":");return{host:P,port:ls(Q)}}}(g);C.config.emulator={url:`${P}//${Q}${null===pe?"":`:${pe}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:Q,port:pe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Dn(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,C)}applyActionCode(_){return function Me(v,g){return Lt.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return fc(this._delegate,_)}confirmPasswordReset(_,C){return function _u(v,g,_){return yu.apply(this,arguments)}(this._delegate,_,C)}createUserWithEmailAndPassword(_,C){var A=this;return(0,u.Z)(function*(){return Tr(A._delegate,function yr(v,g,_){return ml.apply(this,arguments)}(A._delegate,_,C))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function _o(v,g){return zr.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function _l(v,g){const _=uc.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,u.Z)(function*(){Uu(Ul(),_._delegate,"operation-not-supported-in-this-environment");const C=yield function Si(v,g){return si.apply(this,arguments)}(_._delegate,Sr);return C?Tr(_._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Ly(v,g){ht(v)._logFramework(g)}(this._delegate,_)}onAuthStateChanged(_,C,A){const{next:P,error:Q,complete:pe}=_m(_,C,A);return this._delegate.onAuthStateChanged(P,Q,pe)}onIdTokenChanged(_,C,A){const{next:P,error:Q,complete:pe}=_m(_,C,A);return this._delegate.onIdTokenChanged(P,Q,pe)}sendSignInLinkToEmail(_,C){return function jg(v,g,_){return pc.apply(this,arguments)}(this._delegate,_,C)}sendPasswordResetEmail(_,C){return function mu(v,g,_){return gl.apply(this,arguments)}(this._delegate,_,C||void 0)}setPersistence(_){var C=this;return(0,u.Z)(function*(){let A;switch(function dm(v,g){la(Object.values(Dr).includes(g),v,"invalid-persistence-type"),(0,B.b$)()?la(g!==Dr.SESSION,v,"unsupported-persistence-type"):(0,B.UG)()?la(g===Dr.NONE,v,"unsupported-persistence-type"):Ti()?la(g===Dr.NONE||g===Dr.LOCAL&&(0,B.hl)(),v,"unsupported-persistence-type"):la(g===Dr.NONE||Sf(),v,"unsupported-persistence-type")}(C._delegate,_),_){case Dr.SESSION:A=tn;break;case Dr.LOCAL:A=(yield se(gi)._isAvailable())?gi:It;break;case Dr.NONE:A=Qt;break;default:return Ie("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Tr(this._delegate,function Rd(v){return fu.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Tr(this._delegate,Rn(this._delegate,_))}signInWithCustomToken(_){return Tr(this._delegate,function ka(v,g){return yt.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,C){return Tr(this._delegate,function vu(v,g,_){return Rn((0,B.m9)(v),Ad.credential(g,_))}(this._delegate,_,C))}signInWithEmailLink(_,C){return Tr(this._delegate,function gc(v,g,_){return Gn.apply(this,arguments)}(this._delegate,_,C))}signInWithPhoneNumber(_,C){return If(this._delegate,function Ec(v,g,_){return So.apply(this,arguments)}(this._delegate,_,C))}signInWithPopup(_){var C=this;return(0,u.Z)(function*(){return Uu(Ul(),C._delegate,"operation-not-supported-in-this-environment"),Tr(C._delegate,function Ud(v,g,_){return xu.apply(this,arguments)}(C._delegate,_,Sr))})()}signInWithRedirect(_){var C=this;return(0,u.Z)(function*(){return Uu(Ul(),C._delegate,"operation-not-supported-in-this-environment"),yield Nc(C._delegate),function U(v,g,_){return function J(v,g,_){return ee.apply(this,arguments)}(v,g,_)}(C._delegate,_,Sr)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Pa(v,g){return zo.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Dr,v})();function _m(v,g,_){let C=v;"function"!=typeof v&&({next:C,error:g,complete:_}=v);const A=C;return{next:Q=>A(Q&&Io.getOrCreate(Q)),error:g,complete:_}}function qy(v,g){const _=function jl(v,g){const _=hm();if(!_)return[];const C=di(um,v,g);switch(_.getItem(C)){case Dr.NONE:return[Qt];case Dr.LOCAL:return[gi,tn];case Dr.SESSION:return[tn];default:return[]}}(v,g);if("undefined"!=typeof self&&!_.includes(gi)&&_.push(gi),"undefined"!=typeof window)for(const C of[It,tn])_.includes(C)||_.push(C);return _.includes(Qt)||_.push(Qt),_}class Mf{constructor(){this.providerId="phone",this._delegate=new Jo(fm(ne.Z.auth()))}static credential(g,_){return Jo.credential(g,_)}verifyPhoneNumber(g,_){return this._delegate.verifyPhoneNumber(g,_)}unwrap(){return this._delegate}}Mf.PHONE_SIGN_IN_METHOD=Jo.PHONE_SIGN_IN_METHOD,Mf.PROVIDER_ID=Jo.PROVIDER_ID;const ym=W;class hC{constructor(g,_,C=ne.Z.app()){var A;ym(null===(A=C.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new ja(g,_,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Us(v){v.INTERNAL.registerComponent(new ie.wA("auth-compat",g=>{const _=g.getProvider("app-compat").getImmediate(),C=g.getProvider("auth");return new mm(_,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ad,FacebookAuthProvider:Aa,GithubAuthProvider:tf,GoogleAuthProvider:Md,OAuthProvider:ds,SAMLAuthProvider:qi,PhoneAuthProvider:Mf,PhoneMultiFactorGenerator:Jg,RecaptchaVerifier:hC,TwitterAuthProvider:xd,Auth:mm,AuthCredential:Hr,Error:B.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.18")}(ne.Z)},8306:(et,ve,F)=>{F.d(ve,{y:()=>G});var u=F(930),ne=F(727),B=F(8822),he=F(4671);var ie=F(2416),le=F(576),ue=F(2806);let G=(()=>{class xe{constructor(je){je&&(this._subscribe=je)}lift(je){const me=new xe;return me.source=this,me.operator=je,me}subscribe(je,me,Te){const Ye=function Ze(xe){return xe&&xe instanceof u.Lv||function oe(xe){return xe&&(0,le.m)(xe.next)&&(0,le.m)(xe.error)&&(0,le.m)(xe.complete)}(xe)&&(0,ne.Nn)(xe)}(je)?je:new u.Hp(je,me,Te);return(0,ue.x)(()=>{const{operator:tt,source:Ie}=this;Ye.add(tt?tt.call(Ye,Ie):Ie?this._subscribe(Ye):this._trySubscribe(Ye))}),Ye}_trySubscribe(je){try{return this._subscribe(je)}catch(me){je.error(me)}}forEach(je,me){return new(me=q(me))((Te,Ye)=>{const tt=new u.Hp({next:Ie=>{try{je(Ie)}catch(Ee){Ye(Ee),tt.unsubscribe()}},error:Ye,complete:Te});this.subscribe(tt)})}_subscribe(je){var me;return null===(me=this.source)||void 0===me?void 0:me.subscribe(je)}[B.L](){return this}pipe(...je){return function _e(xe){return 0===xe.length?he.y:1===xe.length?xe[0]:function(je){return xe.reduce((me,Te)=>Te(me),je)}}(je)(this)}toPromise(je){return new(je=q(je))((me,Te)=>{let Ye;this.subscribe(tt=>Ye=tt,tt=>Te(tt),()=>me(Ye))})}}return xe.create=Pe=>new xe(Pe),xe})();function q(xe){var Pe;return null!==(Pe=null!=xe?xe:ie.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(et,ve,F)=>{F.d(ve,{x:()=>ie});var u=F(8306),ne=F(727);const he=(0,F(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=F(8737),_e=F(2806);let ie=(()=>{class ue extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const oe=new le(this,this);return oe.operator=q,oe}_throwIfClosed(){if(this.closed)throw new he}next(q){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const oe of this.currentObservers)oe.next(q)}})}error(q){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:oe}=this;for(;oe.length;)oe.shift().error(q)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:oe,isStopped:Ze,observers:xe}=this;return oe||Ze?ne.Lc:(this.currentObservers=null,xe.push(q),new ne.w0(()=>{this.currentObservers=null,(0,ae.P)(xe,q)}))}_checkFinalizedStatuses(q){const{hasError:oe,thrownError:Ze,isStopped:xe}=this;oe?q.error(Ze):xe&&q.complete()}asObservable(){const q=new u.y;return q.source=this,q}}return ue.create=(G,q)=>new le(G,q),ue})();class le extends ie{constructor(G,q){super(),this.destination=G,this.source=q}next(G){var q,oe;null===(oe=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===oe||oe.call(q,G)}error(G){var q,oe;null===(oe=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===oe||oe.call(q,G)}complete(){var G,q;null===(q=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===q||q.call(G)}_subscribe(G){var q,oe;return null!==(oe=null===(q=this.source)||void 0===q?void 0:q.subscribe(G))&&void 0!==oe?oe:ne.Lc}}},930:(et,ve,F)=>{F.d(ve,{Hp:()=>je,Lv:()=>oe});var u=F(576),ne=F(727),B=F(2416),he=F(7849),ae=F(5032);const _e=ue("C",void 0,void 0);function ue(Ie,Ee,Se){return{kind:Ie,value:Ee,error:Se}}var G=F(3410),q=F(2806);class oe extends ne.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,ne.Nn)(Ee)&&Ee.add(this)):this.destination=tt}static create(Ee,Se,ze){return new je(Ee,Se,ze)}next(Ee){this.isStopped?Ye(function le(Ie){return ue("N",Ie,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Ye(function ie(Ie){return ue("E",void 0,Ie)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Ye(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ze=Function.prototype.bind;function xe(Ie,Ee){return Ze.call(Ie,Ee)}class Pe{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Ee)}catch(ze){me(ze)}}error(Ee){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Ee)}catch(ze){me(ze)}else me(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Se){me(Se)}}}class je extends oe{constructor(Ee,Se,ze){let $e;if(super(),(0,u.m)(Ee)||!Ee)$e={next:null!=Ee?Ee:void 0,error:null!=Se?Se:void 0,complete:null!=ze?ze:void 0};else{let W;this&&B.v.useDeprecatedNextContext?(W=Object.create(Ee),W.unsubscribe=()=>this.unsubscribe(),$e={next:Ee.next&&xe(Ee.next,W),error:Ee.error&&xe(Ee.error,W),complete:Ee.complete&&xe(Ee.complete,W)}):$e=Ee}this.destination=new Pe($e)}}function me(Ie){B.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Ie):(0,he.h)(Ie)}function Ye(Ie,Ee){const{onStoppedNotification:Se}=B.v;Se&&G.z.setTimeout(()=>Se(Ie,Ee))}const tt={closed:!0,next:ae.Z,error:function Te(Ie){throw Ie},complete:ae.Z}},727:(et,ve,F)=>{F.d(ve,{Lc:()=>_e,w0:()=>ae,Nn:()=>ie});var u=F(576);const B=(0,F(3888).d)(ue=>function(q){ue(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((oe,Ze)=>`${Ze+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var he=F(8737);class ae{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const xe of q)xe.remove(this);else q.remove(this);const{initialTeardown:oe}=this;if((0,u.m)(oe))try{oe()}catch(xe){G=xe instanceof B?xe.errors:[xe]}const{_finalizers:Ze}=this;if(Ze){this._finalizers=null;for(const xe of Ze)try{le(xe)}catch(Pe){G=null!=G?G:[],Pe instanceof B?G=[...G,...Pe.errors]:G.push(Pe)}}if(G)throw new B(G)}}add(G){var q;if(G&&G!==this)if(this.closed)le(G);else{if(G instanceof ae){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(G)}}_hasParent(G){const{_parentage:q}=this;return q===G||Array.isArray(q)&&q.includes(G)}_addParent(G){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(G),q):q?[q,G]:G}_removeParent(G){const{_parentage:q}=this;q===G?this._parentage=null:Array.isArray(q)&&(0,he.P)(q,G)}remove(G){const{_finalizers:q}=this;q&&(0,he.P)(q,G),G instanceof ae&&G._removeParent(this)}}ae.EMPTY=(()=>{const ue=new ae;return ue.closed=!0,ue})();const _e=ae.EMPTY;function ie(ue){return ue instanceof ae||ue&&"closed"in ue&&(0,u.m)(ue.remove)&&(0,u.m)(ue.add)&&(0,u.m)(ue.unsubscribe)}function le(ue){(0,u.m)(ue)?ue():ue.unsubscribe()}},2416:(et,ve,F)=>{F.d(ve,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(et,ve,F)=>{F.d(ve,{E:()=>ne});const ne=new(F(8306).y)(ae=>ae.complete())},8996:(et,ve,F)=>{F.d(ve,{D:()=>Ee});var u=F(8421),ne=F(5363),B=F(9468),_e=F(8306),le=F(2202),ue=F(576),G=F(9672);function oe(Se,ze){if(!Se)throw new Error("Iterable cannot be null");return new _e.y($e=>{(0,G.f)($e,ze,()=>{const W=Se[Symbol.asyncIterator]();(0,G.f)($e,ze,()=>{W.next().then(De=>{De.done?$e.complete():$e.next(De.value)})},0,!0)})})}var Ze=F(3670),xe=F(8239),Pe=F(1144),je=F(6495),me=F(2206),Te=F(4532),Ye=F(3260);function Ee(Se,ze){return ze?function Ie(Se,ze){if(null!=Se){if((0,Ze.c)(Se))return function he(Se,ze){return(0,u.Xf)(Se).pipe((0,B.R)(ze),(0,ne.Q)(ze))}(Se,ze);if((0,Pe.z)(Se))return function ie(Se,ze){return new _e.y($e=>{let W=0;return ze.schedule(function(){W===Se.length?$e.complete():($e.next(Se[W++]),$e.closed||this.schedule())})})}(Se,ze);if((0,xe.t)(Se))return function ae(Se,ze){return(0,u.Xf)(Se).pipe((0,B.R)(ze),(0,ne.Q)(ze))}(Se,ze);if((0,me.D)(Se))return oe(Se,ze);if((0,je.T)(Se))return function q(Se,ze){return new _e.y($e=>{let W;return(0,G.f)($e,ze,()=>{W=Se[le.h](),(0,G.f)($e,ze,()=>{let De,X;try{({value:De,done:X}=W.next())}catch(ce){return void $e.error(ce)}X?$e.complete():$e.next(De)},0,!0)}),()=>(0,ue.m)(null==W?void 0:W.return)&&W.return()})}(Se,ze);if((0,Ye.L)(Se))return function tt(Se,ze){return oe((0,Ye.Q)(Se),ze)}(Se,ze)}throw(0,Te.z)(Se)}(Se,ze):(0,u.Xf)(Se)}},8421:(et,ve,F)=>{F.d(ve,{Xf:()=>Ze});var u=F(655),ne=F(1144),B=F(8239),he=F(8306),ae=F(3670),_e=F(2206),ie=F(4532),le=F(6495),ue=F(3260),G=F(576),q=F(7849),oe=F(8822);function Ze(Ie){if(Ie instanceof he.y)return Ie;if(null!=Ie){if((0,ae.c)(Ie))return function xe(Ie){return new he.y(Ee=>{const Se=Ie[oe.L]();if((0,G.m)(Se.subscribe))return Se.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,ne.z)(Ie))return function Pe(Ie){return new he.y(Ee=>{for(let Se=0;Se<Ie.length&&!Ee.closed;Se++)Ee.next(Ie[Se]);Ee.complete()})}(Ie);if((0,B.t)(Ie))return function je(Ie){return new he.y(Ee=>{Ie.then(Se=>{Ee.closed||(Ee.next(Se),Ee.complete())},Se=>Ee.error(Se)).then(null,q.h)})}(Ie);if((0,_e.D)(Ie))return Te(Ie);if((0,le.T)(Ie))return function me(Ie){return new he.y(Ee=>{for(const Se of Ie)if(Ee.next(Se),Ee.closed)return;Ee.complete()})}(Ie);if((0,ue.L)(Ie))return function Ye(Ie){return Te((0,ue.Q)(Ie))}(Ie)}throw(0,ie.z)(Ie)}function Te(Ie){return new he.y(Ee=>{(function tt(Ie,Ee){var Se,ze,$e,W;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Se=(0,u.KL)(Ie);!(ze=yield Se.next()).done;)if(Ee.next(ze.value),Ee.closed)return}catch(De){$e={error:De}}finally{try{ze&&!ze.done&&(W=Se.return)&&(yield W.call(Se))}finally{if($e)throw $e.error}}Ee.complete()})})(Ie,Ee).catch(Se=>Ee.error(Se))})}},6451:(et,ve,F)=>{F.d(ve,{T:()=>_e});var u=F(8189),ne=F(8421),B=F(515),he=F(3269),ae=F(8996);function _e(...ie){const le=(0,he.yG)(ie),ue=(0,he._6)(ie,1/0),G=ie;return G.length?1===G.length?(0,ne.Xf)(G[0]):(0,u.J)(ue)((0,ae.D)(G,le)):B.E}},5403:(et,ve,F)=>{F.d(ve,{x:()=>ne});var u=F(930);function ne(he,ae,_e,ie,le){return new B(he,ae,_e,ie,le)}class B extends u.Lv{constructor(ae,_e,ie,le,ue,G){super(ae),this.onFinalize=ue,this.shouldUnsubscribe=G,this._next=_e?function(q){try{_e(q)}catch(oe){ae.error(oe)}}:super._next,this._error=le?function(q){try{le(q)}catch(oe){ae.error(oe)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(q){ae.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(et,ve,F)=>{F.d(ve,{U:()=>B});var u=F(4482),ne=F(5403);function B(he,ae){return(0,u.e)((_e,ie)=>{let le=0;_e.subscribe((0,ne.x)(ie,ue=>{ie.next(he.call(ae,ue,le++))}))})}},8189:(et,ve,F)=>{F.d(ve,{J:()=>B});var u=F(5577),ne=F(4671);function B(he=1/0){return(0,u.z)(ne.y,he)}},5577:(et,ve,F)=>{F.d(ve,{z:()=>le});var u=F(4004),ne=F(8421),B=F(4482),he=F(9672),ae=F(5403),ie=F(576);function le(ue,G,q=1/0){return(0,ie.m)(G)?le((oe,Ze)=>(0,u.U)((xe,Pe)=>G(oe,xe,Ze,Pe))((0,ne.Xf)(ue(oe,Ze))),q):("number"==typeof G&&(q=G),(0,B.e)((oe,Ze)=>function _e(ue,G,q,oe,Ze,xe,Pe,je){const me=[];let Te=0,Ye=0,tt=!1;const Ie=()=>{tt&&!me.length&&!Te&&G.complete()},Ee=ze=>Te<oe?Se(ze):me.push(ze),Se=ze=>{xe&&G.next(ze),Te++;let $e=!1;(0,ne.Xf)(q(ze,Ye++)).subscribe((0,ae.x)(G,W=>{null==Ze||Ze(W),xe?Ee(W):G.next(W)},()=>{$e=!0},void 0,()=>{if($e)try{for(Te--;me.length&&Te<oe;){const W=me.shift();Pe?(0,he.f)(G,Pe,()=>Se(W)):Se(W)}Ie()}catch(W){G.error(W)}}))};return ue.subscribe((0,ae.x)(G,Ee,()=>{tt=!0,Ie()})),()=>{null==je||je()}}(oe,Ze,ue,q)))}},5363:(et,ve,F)=>{F.d(ve,{Q:()=>he});var u=F(9672),ne=F(4482),B=F(5403);function he(ae,_e=0){return(0,ne.e)((ie,le)=>{ie.subscribe((0,B.x)(le,ue=>(0,u.f)(le,ae,()=>le.next(ue),_e),()=>(0,u.f)(le,ae,()=>le.complete(),_e),ue=>(0,u.f)(le,ae,()=>le.error(ue),_e)))})}},3099:(et,ve,F)=>{F.d(ve,{B:()=>_e});var u=F(8996),ne=F(5698),B=F(7579),he=F(930),ae=F(4482);function _e(le={}){const{connector:ue=(()=>new B.x),resetOnError:G=!0,resetOnComplete:q=!0,resetOnRefCountZero:oe=!0}=le;return Ze=>{let xe=null,Pe=null,je=null,me=0,Te=!1,Ye=!1;const tt=()=>{null==Pe||Pe.unsubscribe(),Pe=null},Ie=()=>{tt(),xe=je=null,Te=Ye=!1},Ee=()=>{const Se=xe;Ie(),null==Se||Se.unsubscribe()};return(0,ae.e)((Se,ze)=>{me++,!Ye&&!Te&&tt();const $e=je=null!=je?je:ue();ze.add(()=>{me--,0===me&&!Ye&&!Te&&(Pe=ie(Ee,oe))}),$e.subscribe(ze),xe||(xe=new he.Hp({next:W=>$e.next(W),error:W=>{Ye=!0,tt(),Pe=ie(Ie,G,W),$e.error(W)},complete:()=>{Te=!0,tt(),Pe=ie(Ie,q),$e.complete()}}),(0,u.D)(Se).subscribe(xe))})(Ze)}}function ie(le,ue,...G){return!0===ue?(le(),null):!1===ue?null:ue(...G).pipe((0,ne.q)(1)).subscribe(()=>le())}},9468:(et,ve,F)=>{F.d(ve,{R:()=>ne});var u=F(4482);function ne(B,he=0){return(0,u.e)((ae,_e)=>{_e.add(B.schedule(()=>ae.subscribe(_e),he))})}},5698:(et,ve,F)=>{F.d(ve,{q:()=>he});var u=F(515),ne=F(4482),B=F(5403);function he(ae){return ae<=0?()=>u.E:(0,ne.e)((_e,ie)=>{let le=0;_e.subscribe((0,B.x)(ie,ue=>{++le<=ae&&(ie.next(ue),ae<=le&&ie.complete())}))})}},8505:(et,ve,F)=>{F.d(ve,{b:()=>ae});var u=F(576),ne=F(4482),B=F(5403),he=F(4671);function ae(_e,ie,le){const ue=(0,u.m)(_e)||ie||le?{next:_e,error:ie,complete:le}:_e;return ue?(0,ne.e)((G,q)=>{var oe;null===(oe=ue.subscribe)||void 0===oe||oe.call(ue);let Ze=!0;G.subscribe((0,B.x)(q,xe=>{var Pe;null===(Pe=ue.next)||void 0===Pe||Pe.call(ue,xe),q.next(xe)},()=>{var xe;Ze=!1,null===(xe=ue.complete)||void 0===xe||xe.call(ue),q.complete()},xe=>{var Pe;Ze=!1,null===(Pe=ue.error)||void 0===Pe||Pe.call(ue,xe),q.error(xe)},()=>{var xe,Pe;Ze&&(null===(xe=ue.unsubscribe)||void 0===xe||xe.call(ue)),null===(Pe=ue.finalize)||void 0===Pe||Pe.call(ue)}))}):he.y}},4408:(et,ve,F)=>{F.d(ve,{o:()=>ae});var u=F(727);class ne extends u.w0{constructor(ie,le){super()}schedule(ie,le=0){return this}}const B={setInterval(_e,ie,...le){const{delegate:ue}=B;return(null==ue?void 0:ue.setInterval)?ue.setInterval(_e,ie,...le):setInterval(_e,ie,...le)},clearInterval(_e){const{delegate:ie}=B;return((null==ie?void 0:ie.clearInterval)||clearInterval)(_e)},delegate:void 0};var he=F(8737);class ae extends ne{constructor(ie,le){super(ie,le),this.scheduler=ie,this.work=le,this.pending=!1}schedule(ie,le=0){if(this.closed)return this;this.state=ie;const ue=this.id,G=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(G,ue,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(G,this.id,le),this}requestAsyncId(ie,le,ue=0){return B.setInterval(ie.flush.bind(ie,this),ue)}recycleAsyncId(ie,le,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return le;B.clearInterval(le)}execute(ie,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(ie,le);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,le){let G,ue=!1;try{this.work(ie)}catch(q){ue=!0,G=q||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ie,scheduler:le}=this,{actions:ue}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(ue,this),null!=ie&&(this.id=this.recycleAsyncId(le,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(et,ve,F)=>{F.d(ve,{v:()=>B});var u=F(6063);class ne{constructor(ae,_e=ne.now){this.schedulerActionCtor=ae,this.now=_e}schedule(ae,_e=0,ie){return new this.schedulerActionCtor(this,ae).schedule(ie,_e)}}ne.now=u.l.now;class B extends ne{constructor(ae,_e=ne.now){super(ae,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ae){const{actions:_e}=this;if(this._active)return void _e.push(ae);let ie;this._active=!0;do{if(ie=ae.execute(ae.state,ae.delay))break}while(ae=_e.shift());if(this._active=!1,ie){for(;ae=_e.shift();)ae.unsubscribe();throw ie}}}},4986:(et,ve,F)=>{F.d(ve,{z:()=>B,P:()=>he});var u=F(4408);const B=new(F(7565).v)(u.o),he=B},6063:(et,ve,F)=>{F.d(ve,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},233:(et,ve,F)=>{F.d(ve,{N:()=>ae});var u=F(4408),B=F(7565);const ae=new class he extends B.v{}(class ne extends u.o{constructor(le,ue){super(le,ue),this.scheduler=le,this.work=ue}schedule(le,ue=0){return ue>0?super.schedule(le,ue):(this.delay=ue,this.state=le,this.scheduler.flush(this),this)}execute(le,ue){return ue>0||this.closed?super.execute(le,ue):this._execute(le,ue)}requestAsyncId(le,ue,G=0){return null!=G&&G>0||null==G&&this.delay>0?super.requestAsyncId(le,ue,G):le.flush(this)}})},3410:(et,ve,F)=>{F.d(ve,{z:()=>u});const u={setTimeout(ne,B,...he){const{delegate:ae}=u;return(null==ae?void 0:ae.setTimeout)?ae.setTimeout(ne,B,...he):setTimeout(ne,B,...he)},clearTimeout(ne){const{delegate:B}=u;return((null==B?void 0:B.clearTimeout)||clearTimeout)(ne)},delegate:void 0}},2202:(et,ve,F)=>{F.d(ve,{h:()=>ne});const ne=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(et,ve,F)=>{F.d(ve,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(et,ve,F)=>{F.d(ve,{jO:()=>he,yG:()=>ae,_6:()=>_e});var u=F(576),ne=F(3532);function B(ie){return ie[ie.length-1]}function he(ie){return(0,u.m)(B(ie))?ie.pop():void 0}function ae(ie){return(0,ne.K)(B(ie))?ie.pop():void 0}function _e(ie,le){return"number"==typeof B(ie)?ie.pop():le}},8737:(et,ve,F)=>{function u(ne,B){if(ne){const he=ne.indexOf(B);0<=he&&ne.splice(he,1)}}F.d(ve,{P:()=>u})},3888:(et,ve,F)=>{function u(ne){const he=ne(ae=>{Error.call(ae),ae.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}F.d(ve,{d:()=>u})},2806:(et,ve,F)=>{F.d(ve,{x:()=>B,O:()=>he});var u=F(2416);let ne=null;function B(ae){if(u.v.useDeprecatedSynchronousErrorHandling){const _e=!ne;if(_e&&(ne={errorThrown:!1,error:null}),ae(),_e){const{errorThrown:ie,error:le}=ne;if(ne=null,ie)throw le}}else ae()}function he(ae){u.v.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=ae)}},9672:(et,ve,F)=>{function u(ne,B,he,ae=0,_e=!1){const ie=B.schedule(function(){he(),_e?ne.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(ne.add(ie),!_e)return ie}F.d(ve,{f:()=>u})},4671:(et,ve,F)=>{function u(ne){return ne}F.d(ve,{y:()=>u})},1144:(et,ve,F)=>{F.d(ve,{z:()=>u});const u=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},2206:(et,ve,F)=>{F.d(ve,{D:()=>ne});var u=F(576);function ne(B){return Symbol.asyncIterator&&(0,u.m)(null==B?void 0:B[Symbol.asyncIterator])}},576:(et,ve,F)=>{function u(ne){return"function"==typeof ne}F.d(ve,{m:()=>u})},3670:(et,ve,F)=>{F.d(ve,{c:()=>B});var u=F(8822),ne=F(576);function B(he){return(0,ne.m)(he[u.L])}},6495:(et,ve,F)=>{F.d(ve,{T:()=>B});var u=F(2202),ne=F(576);function B(he){return(0,ne.m)(null==he?void 0:he[u.h])}},8239:(et,ve,F)=>{F.d(ve,{t:()=>ne});var u=F(576);function ne(B){return(0,u.m)(null==B?void 0:B.then)}},3260:(et,ve,F)=>{F.d(ve,{Q:()=>B,L:()=>he});var u=F(655),ne=F(576);function B(ae){return(0,u.FC)(this,arguments,function*(){const ie=ae.getReader();try{for(;;){const{value:le,done:ue}=yield(0,u.qq)(ie.read());if(ue)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(le)}}finally{ie.releaseLock()}})}function he(ae){return(0,ne.m)(null==ae?void 0:ae.getReader)}},3532:(et,ve,F)=>{F.d(ve,{K:()=>ne});var u=F(576);function ne(B){return B&&(0,u.m)(B.schedule)}},4482:(et,ve,F)=>{F.d(ve,{A:()=>ne,e:()=>B});var u=F(576);function ne(he){return(0,u.m)(null==he?void 0:he.lift)}function B(he){return ae=>{if(ne(ae))return ae.lift(function(_e){try{return he(_e,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(et,ve,F)=>{function u(){}F.d(ve,{Z:()=>u})},7849:(et,ve,F)=>{F.d(ve,{h:()=>B});var u=F(2416),ne=F(3410);function B(he){ne.z.setTimeout(()=>{const{onUnhandledError:ae}=u.v;if(!ae)throw he;ae(he)})}},4532:(et,ve,F)=>{function u(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(ve,{z:()=>u})},655:(et,ve,F)=>{function he(X,ce){var se={};for(var ye in X)Object.prototype.hasOwnProperty.call(X,ye)&&ce.indexOf(ye)<0&&(se[ye]=X[ye]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var fe=0;for(ye=Object.getOwnPropertySymbols(X);fe<ye.length;fe++)ce.indexOf(ye[fe])<0&&Object.prototype.propertyIsEnumerable.call(X,ye[fe])&&(se[ye[fe]]=X[ye[fe]])}return se}function le(X,ce,se,ye){return new(se||(se=Promise))(function(Ne,ft){function $t(on){try{nt(ye.next(on))}catch(Un){ft(Un)}}function Vt(on){try{nt(ye.throw(on))}catch(Un){ft(Un)}}function nt(on){on.done?Ne(on.value):function fe(Ne){return Ne instanceof se?Ne:new se(function(ft){ft(Ne)})}(on.value).then($t,Vt)}nt((ye=ye.apply(X,ce||[])).next())})}function me(X){return this instanceof me?(this.v=X,this):new me(X)}function Te(X,ce,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,ye=se.apply(X,ce||[]),Ne=[];return fe={},ft("next"),ft("throw"),ft("return"),fe[Symbol.asyncIterator]=function(){return this},fe;function ft(un){ye[un]&&(fe[un]=function(en){return new Promise(function(Gi,Yt){Ne.push([un,en,Gi,Yt])>1||$t(un,en)})})}function $t(un,en){try{!function Vt(un){un.value instanceof me?Promise.resolve(un.value.v).then(nt,on):Un(Ne[0][2],un)}(ye[un](en))}catch(Gi){Un(Ne[0][3],Gi)}}function nt(un){$t("next",un)}function on(un){$t("throw",un)}function Un(un,en){un(en),Ne.shift(),Ne.length&&$t(Ne[0][0],Ne[0][1])}}function tt(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,ce=X[Symbol.asyncIterator];return ce?ce.call(X):(X=function oe(X){var ce="function"==typeof Symbol&&Symbol.iterator,se=ce&&X[ce],ye=0;if(se)return se.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&ye>=X.length&&(X=void 0),{value:X&&X[ye++],done:!X}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),se={},ye("next"),ye("throw"),ye("return"),se[Symbol.asyncIterator]=function(){return this},se);function ye(Ne){se[Ne]=X[Ne]&&function(ft){return new Promise(function($t,Vt){!function fe(Ne,ft,$t,Vt){Promise.resolve(Vt).then(function(nt){Ne({value:nt,done:$t})},ft)}($t,Vt,(ft=X[Ne](ft)).done,ft.value)})}}}F.d(ve,{_T:()=>he,mG:()=>le,qq:()=>me,FC:()=>Te,KL:()=>tt})},5e3:(et,ve,F)=>{F.d(ve,{deG:()=>lf,tb:()=>hR,AFp:()=>JD,ip1:()=>QD,CZH:()=>XD,hGG:()=>Fp,z2F:()=>C_,sBO:()=>pB,Sil:()=>tB,_Vd:()=>Zl,EJc:()=>rS,SBq:()=>_h,qLn:()=>Qd,vpe:()=>Yl,tBr:()=>Ki,XFs:()=>vt,OlP:()=>Mn,zs3:()=>Za,ZZ4:()=>ed,aQg:()=>Xl,soG:()=>Yb,YKP:()=>Kl,h0i:()=>yh,PXZ:()=>uB,R0b:()=>Es,FiY:()=>Er,Lbi:()=>nS,g9A:()=>tS,n_E:()=>Rb,Qsj:()=>Px,FYo:()=>Sp,JOm:()=>A,q3G:()=>Wt,tp0:()=>na,Rgc:()=>h_,dDg:()=>mR,q4F:()=>yD,GfV:()=>Cb,s_b:()=>f_,ifc:()=>qt,eFA:()=>bR,G48:()=>DR,Gpc:()=>q,f3M:()=>ot,X6Q:()=>dS,_c5:()=>BR,VLi:()=>cB,c2e:()=>iS,zSh:()=>zf,wAp:()=>wt,vHH:()=>Pe,EiD:()=>Kd,mCW:()=>Bs,qzn:()=>Ls,JVY:()=>Nu,pB0:()=>Fu,eBb:()=>_f,L6k:()=>Xg,LAX:()=>Py,cg1:()=>ap,kL8:()=>lp,yhl:()=>Mc,dqk:()=>Ht,sIi:()=>qf,CqO:()=>RM,QGY:()=>gE,F4k:()=>xM,RDi:()=>pu,AaK:()=>le,z3N:()=>aa,qOj:()=>tE,TTD:()=>ds,_Bn:()=>gD,xp6:()=>sv,uIk:()=>rE,Gre:()=>GE,ekj:()=>qu,Suo:()=>RD,Xpm:()=>He,lG2:()=>Da,Yz7:()=>en,cJS:()=>Yt,oAB:()=>Ft,Yjl:()=>ol,Y36:()=>ip,_UZ:()=>Hm,GkF:()=>Gv,BQk:()=>zm,ynx:()=>Gm,qZA:()=>jm,TgZ:()=>Um,EpF:()=>pE,n5z:()=>vs,Ikx:()=>Qm,LFG:()=>be,$8M:()=>ri,$Z:()=>fE,NdJ:()=>mE,CRH:()=>Op,oxw:()=>yE,Hsn:()=>bE,F$t:()=>$u,Q6J:()=>jv,VKq:()=>Ib,iGM:()=>Ub,MAs:()=>_M,CHM:()=>fc,LSH:()=>Oc,Udp:()=>Wm,WFA:()=>_E,d8E:()=>KE,YNc:()=>mM,_uU:()=>PE,Oqu:()=>Jv,hij:()=>Km,Gf:()=>jb});var u=F(7579),ne=F(727),B=F(8306),he=F(6451),ae=F(3099);function _e(o){for(let a in o)if(o[a]===_e)return a;throw Error("Could not find renamed property on target object.")}function ie(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function le(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(le).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function ue(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const G=_e({__forward_ref__:_e});function q(o){return o.__forward_ref__=q,o.toString=function(){return le(this())},o}function oe(o){return Ze(o)?o():o}function Ze(o){return"function"==typeof o&&o.hasOwnProperty(G)&&o.__forward_ref__===q}class Pe extends Error{constructor(a,c){super(function je(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,c)),this.code=a}}function me(o){return"string"==typeof o?o:null==o?"":String(o)}function Te(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():me(o)}function Ee(o,a){const c=a?` in ${a}`:"";throw new Pe(-201,`No provider for ${Te(o)} found${c}`)}function Vt(o,a){null==o&&function nt(o,a,c,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${c} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function en(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Yt(o){return{providers:o.providers||[],imports:o.imports||[]}}function Ut(o){return ns(o,is)||ns(o,ir)}function ns(o,a){return o.hasOwnProperty(a)?o[a]:null}function nr(o){return o&&(o.hasOwnProperty(oo)||o.hasOwnProperty(jr))?o[oo]:null}const is=_e({\u0275prov:_e}),oo=_e({\u0275inj:_e}),ir=_e({ngInjectableDef:_e}),jr=_e({ngInjectorDef:_e});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let rr;function ti(o){const a=rr;return rr=o,a}function rs(o,a,c){const h=Ut(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:c&vt.Optional?null:void 0!==a?a:void Ee(le(o),"Injector")}function Pn(o){return{toString:o}.toString()}var Zn=(()=>((Zn=Zn||{})[Zn.OnPush=0]="OnPush",Zn[Zn.Default=1]="Default",Zn))(),qt=(()=>{return(o=qt||(qt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",qt;var o})();const ct="undefined"!=typeof globalThis&&globalThis,Ct="undefined"!=typeof window&&window,ki="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht=ct||"undefined"!=typeof global&&global||Ct||ki,zi={},pt=[],lo=_e({\u0275cmp:_e}),H=_e({\u0275dir:_e}),Z=_e({\u0275pipe:_e}),j=_e({\u0275mod:_e}),$=_e({\u0275fac:_e}),K=_e({__NG_ELEMENT_ID__:_e});let Re=0;function He(o){return Pn(()=>{const c={},h={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Zn.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||pt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||qt.Emulated,id:"c",styles:o.styles||pt,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,m=o.features,b=o.pipes;return h.id+=Re++,h.inputs=os(o.inputs,c),h.outputs=os(o.outputs),m&&m.forEach(E=>E(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(dn):null,h.pipeDefs=b?()=>("function"==typeof b?b():b).map(Qt):null,h})}function dn(o){return ni(o)||function $i(o){return o[H]||null}(o)}function Qt(o){return function Ms(o){return o[Z]||null}(o)}const di={};function Ft(o){return Pn(()=>{const a={type:o.type,bootstrap:o.bootstrap||pt,declarations:o.declarations||pt,imports:o.imports||pt,exports:o.exports||pt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(di[o.id]=o.type),a})}function os(o,a){if(null==o)return zi;const c={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),c[f]=h,a&&(a[f]=m)}return c}const Da=He;function ol(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function ni(o){return o[lo]||null}function ii(o,a){const c=o[j]||null;if(!c&&!0===a)throw new Error(`Type ${le(o)} does not have '\u0275mod' property.`);return c}function Pi(o){return Array.isArray(o)&&"object"==typeof o[1]}function mr(o){return Array.isArray(o)&&!0===o[1]}function cl(o){return 0!=(8&o.flags)}function wd(o){return 2==(2&o.flags)}function cs(o){return 1==(1&o.flags)}function us(o){return null!==o.template}function uu(o){return 0!=(512&o[2])}function Fi(o,a){return o.hasOwnProperty($)?o[$]:null}class Uo{constructor(a,c,h){this.previousValue=a,this.currentValue=c,this.firstChange=h}isFirstChange(){return this.firstChange}}function ds(){return Aa}function Aa(o){return o.type.prototype.ngOnChanges&&(o.setInput=tf),Md}function Md(){const o=jo(this),a=null==o?void 0:o.current;if(a){const c=o.previous;if(c===zi)o.previous=a;else for(let h in a)c[h]=a[h];o.current=null,this.ngOnChanges(a)}}function tf(o,a,c,h){const f=jo(o)||function Ma(o,a){return o[go]=a}(o,{previous:zi,current:null}),m=f.current||(f.current={}),b=f.previous,E=this.declaredInputs[c],S=b[E];m[E]=new Uo(S&&S.currentValue,a,b===zi),o[h]=a}ds.ngInherit=!0;const go="__ngSimpleChanges__";function jo(o){return o[go]||null}let Ra;function pu(o){Ra=o}function fn(o){return!!o.listen}const dl={createRenderer:(o,a)=>function hs(){return void 0!==Ra?Ra:"undefined"!=typeof document?document:void 0}()};function rn(o){for(;Array.isArray(o);)o=o[0];return o}function mo(o,a){return rn(a[o])}function Ci(o,a){return rn(a[o.index])}function Rn(o,a){return o.data[a]}function Ei(o,a){const c=a[o];return Pi(c)?c:c[0]}function Go(o){return 4==(4&o[2])}function ks(o){return 128==(128&o[2])}function Gr(o,a){return null==a?null:o[a]}function ps(o){o[18]=0}function ka(o,a){o[5]+=a;let c=o,h=o[3];for(;null!==h&&(1===a&&1===c[5]||-1===a&&0===c[5]);)h[5]+=a,c=h,h=h[3]}const yt={lFrame:kd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function gl(){return yt.bindingsEnabled}function Me(){return yt.lFrame.lView}function Lt(){return yt.lFrame.tView}function fc(o){return yt.lFrame.contextLView=o,o[8]}function Sn(){let o=Pa();for(;null!==o&&64===o.type;)o=o.parent;return o}function Pa(){return yt.lFrame.currentTNode}function yr(o,a){const c=yt.lFrame;c.currentTNode=o,c.isParent=a}function ml(){return yt.lFrame.isParent}function vu(){yt.lFrame.isParent=!1}function _l(){return yt.isInCheckNoChangesMode}function gc(o){yt.isInCheckNoChangesMode=o}function _o(){return yt.lFrame.bindingIndex++}function zr(o){const a=yt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}function wu(o,a){const c=yt.lFrame;c.bindingIndex=c.bindingRootIndex=o,vl(a)}function vl(o){yt.lFrame.currentDirectiveIndex=o}function Na(o){const a=yt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function Cu(){return yt.lFrame.currentQueryIndex}function bl(o){yt.lFrame.currentQueryIndex=o}function Hg(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Eu(o,a,c){if(c&vt.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||c&vt.Host||(f=Hg(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const h=yt.lFrame=wl();return h.currentTNode=a,h.lView=o,!0}function Fa(o){const a=wl(),c=o[1];yt.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function wl(){const o=yt.lFrame,a=null===o?null:o.child;return null===a?kd(o):a}function kd(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function La(){const o=yt.lFrame;return yt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Od=La;function Ba(){const o=La();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function hi(){return yt.lFrame.selectedIndex}function ms(o){yt.lFrame.selectedIndex=o}function Nn(){const o=yt.lFrame;return Rn(o.tView,o.selectedIndex)}function Nd(o,a){for(let c=a.directiveStart,h=a.directiveEnd;c<h;c++){const m=o.data[c].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:S,ngAfterViewChecked:M,ngOnDestroy:R}=m;b&&(o.contentHooks||(o.contentHooks=[])).push(-c,b),E&&((o.contentHooks||(o.contentHooks=[])).push(c,E),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(c,E)),S&&(o.viewHooks||(o.viewHooks=[])).push(-c,S),M&&((o.viewHooks||(o.viewHooks=[])).push(c,M),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(c,M)),null!=R&&(o.destroyHooks||(o.destroyHooks=[])).push(c,R)}}function Cl(o,a,c){fi(o,a,3,c)}function Ps(o,a,c,h){(3&o[2])===c&&fi(o,a,c,h)}function Va(o,a){let c=o[2];(3&c)===a&&(c&=2047,c+=1,o[2]=c)}function fi(o,a,c,h){const m=null!=h?h:-1,b=a.length-1;let E=0;for(let S=void 0!==h?65535&o[18]:0;S<b;S++)if("number"==typeof a[S+1]){if(E=a[S],null!=h&&E>=h)break}else a[S]<0&&(o[18]+=65536),(E<m||-1==m)&&(af(o,c,a,S),o[18]=(4294901760&o[18])+S+2),S++}function af(o,a,c,h){const f=c[h]<0,m=c[h+1],E=o[f?-c[h]:c[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(E)}finally{}}}else try{m.call(E)}finally{}}class yc{constructor(a,c,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=h}}function Ke(o,a,c){const h=fn(o);let f=0;for(;f<c.length;){const m=c[f];if("number"==typeof m){if(0!==m)break;f++;const b=c[f++],E=c[f++],S=c[f++];h?o.setAttribute(a,E,S,b):a.setAttributeNS(b,E,S)}else{const b=m,E=c[++f];pi(b)?h&&o.setProperty(a,b,E):h?o.setAttribute(a,b,E):a.setAttribute(b,E),f++}}return f}function It(o){return 3===o||4===o||6===o}function pi(o){return 64===o.charCodeAt(0)}function tn(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?c=f:0===c||Su(o,c,f,null,-1===c||2===c?a[++h]:null)}}return o}function Su(o,a,c,h,f){let m=0,b=o.length;if(-1===a)b=-1;else for(;m<o.length;){const E=o[m++];if("number"==typeof E){if(E===a){b=-1;break}if(E>a){b=m-1;break}}}for(;m<o.length;){const E=o[m];if("number"==typeof E)break;if(E===c){if(null===h)return void(null!==f&&(o[m+1]=f));if(h===o[m+1])return void(o[m+2]=f)}m++,null!==h&&m++,null!==f&&m++}-1!==b&&(o.splice(b,0,a),m=b+1),o.splice(m++,0,c),null!==h&&o.splice(m++,0,h),null!==f&&o.splice(m++,0,f)}function Ld(o){return-1!==o}function _s(o){return 32767&o}function wn(o,a){let c=function Tu(o){return o>>16}(o),h=a;for(;c>0;)h=h[15],c--;return h}let El=!0;function vr(o){const a=El;return El=o,a}let Iu=0;function yn(o,a){const c=wc(o,a);if(-1!==c)return c;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,vo(h.data,o),vo(a,null),vo(h.blueprint,null));const f=ys(o,a),m=o.injectorIndex;if(Ld(f)){const b=_s(f),E=wn(f,a),S=E[1].data;for(let M=0;M<8;M++)a[m+M]=E[b+M]|S[b+M]}return a[m+8]=f,m}function vo(o,a){o.push(0,0,0,0,0,0,0,0,a)}function wc(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function ys(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,h=null,f=a;for(;null!==f;){const m=f[1],b=m.type;if(h=2===b?m.declTNode:1===b?f[6]:null,null===h)return-1;if(c++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|c<<16}return-1}function bo(o,a,c){!function Dl(o,a,c){let h;"string"==typeof c?h=c.charCodeAt(0)||0:c.hasOwnProperty(K)&&(h=c[K]),null==h&&(h=c[K]=Iu++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,c)}function wo(o,a,c){if(c&vt.Optional)return o;Ee(a,"NodeInjector")}function Sl(o,a,c,h){if(c&vt.Optional&&void 0===h&&(h=null),0==(c&(vt.Self|vt.Host))){const f=o[9],m=ti(void 0);try{return f?f.get(a,h,c&vt.Optional):rs(a,h,c&vt.Optional)}finally{ti(m)}}return wo(h,a,c)}function Wo(o,a,c,h=vt.Default,f){if(null!==o){const m=function Eo(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(K)?o[K]:void 0;return"number"==typeof a?a>=0?255&a:Tl:a}(c);if("function"==typeof m){if(!Eu(a,o,h))return h&vt.Host?wo(f,c,h):Sl(a,c,h,f);try{const b=m(h);if(null!=b||h&vt.Optional)return b;Ee(c)}finally{Od()}}else if("number"==typeof m){let b=null,E=wc(o,a),S=-1,M=h&vt.Host?a[16][6]:null;for((-1===E||h&vt.SkipSelf)&&(S=-1===E?ys(o,a):a[E+8],-1!==S&&kn(h,!1)?(b=a[1],E=_s(S),a=wn(S,a)):E=-1);-1!==E;){const R=a[1];if(gi(m,E,R.data)){const V=Il(E,a,c,b,h,M);if(V!==Zo)return V}S=a[E+8],-1!==S&&kn(h,a[1].data[E+8]===M)&&gi(m,E,a)?(b=R,E=_s(S),a=wn(S,a)):E=-1}}}return Sl(a,c,h,f)}const Zo={};function Tl(){return new Ko(Sn(),Me())}function Il(o,a,c,h,f,m){const b=a[1],E=b.data[o+8],R=br(E,b,c,null==h?wd(E)&&El:h!=b&&0!=(3&E.type),f&vt.Host&&m===E);return null!==R?Co(a,b,R,E):Zo}function br(o,a,c,h,f){const m=o.providerIndexes,b=a.data,E=1048575&m,S=o.directiveStart,R=m>>20,z=f?E+R:o.directiveEnd;for(let te=h?E:E+R;te<z;te++){const we=b[te];if(te<S&&c===we||te>=S&&we.type===c)return te}if(f){const te=b[S];if(te&&us(te)&&te.type===c)return S}return null}function Co(o,a,c,h){let f=o[c];const m=a.data;if(function Fd(o){return o instanceof yc}(f)){const b=f;b.resolving&&function Ye(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${o}${c}`)}(Te(m[c]));const E=vr(b.canSeeViewProviders);b.resolving=!0;const S=b.injectImpl?ti(b.injectImpl):null;Eu(o,h,vt.Default);try{f=o[c]=b.factory(void 0,m,o,h),a.firstCreatePass&&c>=h.directiveStart&&function Gg(o,a,c){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(h){const b=Aa(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(o,b),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,b)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-o,f),m&&((c.preOrderHooks||(c.preOrderHooks=[])).push(o,m),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,m))}(c,m[c],a)}finally{null!==S&&ti(S),vr(E),b.resolving=!1,Od()}}return f}function gi(o,a,c){return!!(c[a+(o>>5)]&1<<o)}function kn(o,a){return!(o&vt.Self||o&vt.Host&&a)}class Ko{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,h){return Wo(this._tNode,this._lView,a,h,c)}}function vs(o){return Pn(()=>{const a=o.prototype.constructor,c=a[$]||Cn(a),h=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==h;){const m=f[$]||Cn(f);if(m&&m!==c)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Cn(o){return Ze(o)?()=>{const a=Cn(oe(o));return a&&a()}:Fi(o)}function ri(o){return function Wi(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const h=c.length;let f=0;for(;f<h;){const m=c[f];if(It(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<h&&"string"==typeof c[f];)f++;else{if(m===a)return c[f+1];f+=2}}}return null}(Sn(),o)}const Do="__parameters__";function Fn(o,a,c){return Pn(()=>{const h=function Di(o){return function(...c){if(o){const h=o(...c);for(const f in h)this[f]=h[f]}}}(a);function f(...m){if(this instanceof f)return h.apply(this,m),this;const b=new f(...m);return E.annotation=b,E;function E(S,M,R){const V=S.hasOwnProperty(Do)?S[Do]:Object.defineProperty(S,Do,{value:[]})[Do];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(b),S}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Mn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=en({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const lf=new Mn("AnalyzeForEntryComponents");function wr(o,a){void 0===a&&(a=o);for(let c=0;c<o.length;c++){let h=o[c];Array.isArray(h)?(a===o&&(a=o.slice(0,c)),wr(h,a)):a!==o&&a.push(h)}return a}function Cr(o,a){o.forEach(c=>Array.isArray(c)?Cr(c,a):a(c))}function Qo(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function Xo(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function xl(o,a){const c=[];for(let h=0;h<o;h++)c.push(a);return c}function zn(o,a,c){let h=To(o,a);return h>=0?o[1|h]=c:(h=~h,function Ns(o,a,c,h){let f=o.length;if(f==a)o.push(c,h);else if(1===f)o.push(h,o[0]),o[0]=c;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=c,o[a+1]=h}}(o,h,a,c)),h}function kl(o,a){const c=To(o,a);if(c>=0)return o[1|c]}function To(o,a){return function Ud(o,a,c){let h=0,f=o.length>>c;for(;f!==h;){const m=h+(f-h>>1),b=o[m<<c];if(a===b)return m<<c;b>a?f=m:h=m+1}return~(f<<c)}(o,a,1)}const Tc={},ea="__NG_DI_FLAG__",ta="ngTempTokenPath",df=/\n/gm,I="__source",k=_e({provide:String,useValue:_e});let U;function J(o){const a=U;return U=o,a}function ee(o,a=vt.Default){if(void 0===U)throw new Pe(203,"");return null===U?rs(o,void 0,a):U.get(o,a&vt.Optional?null:void 0,a)}function be(o,a=vt.Default){return(function jn(){return rr}()||ee)(oe(o),a)}const ot=be;function St(o){const a=[];for(let c=0;c<o.length;c++){const h=oe(o[c]);if(Array.isArray(h)){if(0===h.length)throw new Pe(900,"");let f,m=vt.Default;for(let b=0;b<h.length;b++){const E=h[b],S=gt(E);"number"==typeof S?-1===S?f=E.token:m|=S:f=E}a.push(be(f,m))}else a.push(be(h))}return a}function Tt(o,a){return o[ea]=a,o.prototype[ea]=a,o}function gt(o){return o[ea]}const Ki=Tt(Fn("Inject",o=>({token:o})),-1),Er=Tt(Fn("Optional"),8),na=Tt(Fn("SkipSelf"),4);let sa;function Nl(o){var a;return(null===(a=function Hd(){if(void 0===sa&&(sa=null,Ht.trustedTypes))try{sa=Ht.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return sa}())||void 0===a?void 0:a.createHTML(o))||o}class oa{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class mf extends oa{getTypeName(){return"HTML"}}class Qg extends oa{getTypeName(){return"Style"}}class Pu extends oa{getTypeName(){return"Script"}}class ky extends oa{getTypeName(){return"URL"}}class Oy extends oa{getTypeName(){return"ResourceURL"}}function aa(o){return o instanceof oa?o.changingThisBreaksApplicationSecurity:o}function Ls(o,a){const c=Mc(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===a}function Mc(o){return o instanceof oa&&o.getTypeName()||null}function Nu(o){return new mf(o)}function Xg(o){return new Qg(o)}function _f(o){return new Pu(o)}function Py(o){return new ky(o)}function Fu(o){return new Oy(o)}class em{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(Nl(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch(c){return null}}}class tm{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const h=this.inertDocument.createElement("body");c.appendChild(h)}}getInertBodyElement(a){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=Nl(a),c;const h=this.inertDocument.createElement("body");return h.innerHTML=Nl(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const c=a.attributes;for(let f=c.length-1;0<f;f--){const b=c.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const $d=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,im=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Bs(o){return(o=String(o)).match($d)||o.match(im)?o:"unsafe:"+o}function Vs(o){const a={};for(const c of o.split(","))a[c]=!0;return a}function Fl(...o){const a={};for(const c of o)for(const h in c)c.hasOwnProperty(h)&&(a[h]=!0);return a}const rm=Vs("area,br,col,hr,img,wbr"),qd=Vs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Wd=Vs("rp,rt"),vf=Fl(rm,Fl(qd,Vs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Fl(Wd,Vs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Fl(Wd,qd)),Lu=Vs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bf=Vs("srcset"),Rc=Fl(Lu,bf,Vs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ny=Vs("script,style,template");class kc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let c=a.firstChild,h=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?h=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,h&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let f=this.checkClobberedElement(c,c.nextSibling);if(f){c=f;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(a){const c=a.nodeName.toLowerCase();if(!vf.hasOwnProperty(c))return this.sanitizedSomething=!0,!Ny.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const h=a.attributes;for(let f=0;f<h.length;f++){const m=h.item(f),b=m.name,E=b.toLowerCase();if(!Rc.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let S=m.value;Lu[E]&&(S=Bs(S)),bf[E]&&(o=S,S=(o=String(o)).split(",").map(a=>Bs(a.trim())).join(", ")),this.buf.push(" ",b,'="',wf(S),'"')}var o;return this.buf.push(">"),!0}endElement(a){const c=a.nodeName.toLowerCase();vf.hasOwnProperty(c)&&!rm.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(a){this.buf.push(wf(a))}checkClobberedElement(a,c){if(c&&(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return c}}const Bu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fy=/([^\#-~ |!])/g;function wf(o){return o.replace(/&/g,"&amp;").replace(Bu,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Fy,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Bl;function Kd(o,a){let c=null;try{Bl=Bl||function Jg(o){const a=new tm(o);return function nm(){try{return!!(new window.DOMParser).parseFromString(Nl(""),"text/html")}catch(o){return!1}}()?new em(a):a}(o);let h=a?String(a):"";c=Bl.getInertBodyElement(h);let f=5,m=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=m,m=c.innerHTML,c=Bl.getInertBodyElement(h)}while(h!==m);return Nl((new kc).sanitizeChildren(Cf(c)||c))}finally{if(c){const h=Cf(c)||c;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function Cf(o){return"content"in o&&function Ef(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Wt=(()=>((Wt=Wt||{})[Wt.NONE=0]="NONE",Wt[Wt.HTML=1]="HTML",Wt[Wt.STYLE=2]="STYLE",Wt[Wt.SCRIPT=3]="SCRIPT",Wt[Wt.URL=4]="URL",Wt[Wt.RESOURCE_URL=5]="RESOURCE_URL",Wt))();function Oc(o){const a=function $a(){const o=Me();return o&&o[12]}();return a?a.sanitize(Wt.URL,o)||"":Ls(o,"URL")?aa(o):Bs(me(o))}const Sf="__ngContext__";function Ti(o,a){o[Sf]=a}function Yd(o){const a=function Ul(o){return o[Sf]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function Sr(o){return o.ngOriginalError}function zy(o,...a){o.error(...a)}class Qd{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a),h=function fm(o){return o&&o.ngErrorLogger||zy}(a);h(this._console,"ERROR",a),c&&h(this._console,"ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&Sr(a);for(;c&&Sr(c);)c=Sr(c);return c||null}}const qy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function Us(o){return o instanceof Function?o():o}var A=(()=>((A=A||{})[A.Important=1]="Important",A[A.DashCase=2]="DashCase",A))();function Q(o,a){return undefined(o,a)}function Je(o){const a=o[3];return mr(a)?a[3]:a}function Bn(o){return ju(o[13])}function Ir(o){return ju(o[4])}function ju(o){for(;null!==o&&!mr(o);)o=o[4];return o}function qa(o,a,c,h,f){if(null!=h){let m,b=!1;mr(h)?m=h:Pi(h)&&(b=!0,h=h[0]);const E=rn(h);0===o&&null!==c?null==f?Qy(a,c,E):js(a,c,E,f||null,!0):1===o&&null!==c?js(a,c,E,f||null,!0):2===o?function tv(o,a,c){const h=Pf(o,a);h&&function aA(o,a,c,h){fn(o)?o.removeChild(a,c,h):a.removeChild(c)}(o,h,a,c)}(a,E,b):3===o&&a.destroyNode(E),null!=m&&function wC(o,a,c,h,f){const m=c[7];m!==rn(c)&&qa(a,o,h,m,f);for(let E=10;E<c.length;E++){const S=c[E];wm(S[1],S,o,a,h,m)}}(a,o,m,c,f)}}function eh(o,a,c){if(fn(o))return o.createElement(a,c);{const h=null!==c?function fu(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(c):null;return null===h?o.createElement(a):o.createElementNS(h,a)}}function fC(o,a){const c=o[9],h=c.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,ka(f,-1)),c.splice(h,1)}function Zy(o,a){if(o.length<=10)return;const c=10+a,h=o[c];if(h){const f=h[17];null!==f&&f!==o&&fC(f,h),a>0&&(o[c-1][4]=h[4]);const m=Xo(o,10+a);!function Ii(o,a){wm(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const b=m[19];null!==b&&b.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function Ky(o,a){if(!(256&a[2])){const c=a[11];fn(c)&&c.destroyNode&&wm(o,a,c,3,null,null),function Of(o){let a=o[13];if(!a)return Yy(o[1],o);for(;a;){let c=null;if(Pi(a))c=a[13];else{const h=a[10];h&&(c=h)}if(!c){for(;a&&!a[4]&&a!==o;)Pi(a)&&Yy(a[1],a),a=a[3];null===a&&(a=o),Pi(a)&&Yy(a[1],a),c=a&&a[4]}a=c}}(a)}}function Yy(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function gC(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let h=0;h<c.length;h+=2){const f=a[c[h]];if(!(f instanceof yc)){const m=c[h+1];if(Array.isArray(m))for(let b=0;b<m.length;b+=2){const E=f[m[b]],S=m[b+1];try{S.call(E)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function pC(o,a){const c=o.cleanup,h=a[7];let f=-1;if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const b=c[m+1],E="function"==typeof b?b(a):rn(a[b]),S=h[f=c[m+2]],M=c[m+3];"boolean"==typeof M?E.removeEventListener(c[m],S,M):M>=0?h[f=M]():h[f=-M].unsubscribe(),m+=2}else{const b=h[f=c[m+1]];c[m].call(b)}if(null!==h){for(let m=f+1;m<h.length;m++)h[m]();a[7]=null}}(o,a),1===a[1].type&&fn(a[11])&&a[11].destroy();const c=a[17];if(null!==c&&mr(a[3])){c!==a[3]&&fC(c,a);const h=a[19];null!==h&&h.detachView(o)}}}function vm(o,a,c){return function oA(o,a,c){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return c[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===qt.None||f===qt.Emulated)return null}return Ci(h,c)}(o,a.parent,c)}function js(o,a,c,h,f){fn(o)?o.insertBefore(a,c,h,f):a.insertBefore(c,h,f)}function Qy(o,a,c){fn(o)?o.appendChild(a,c):a.appendChild(c)}function mC(o,a,c,h,f){null!==h?js(o,a,c,h,f):Qy(o,a,c)}function Pf(o,a){return fn(o)?o.parentNode(a):a.parentNode}function _C(o,a,c){return Xy(o,a,c)}let Xy=function yC(o,a,c){return 40&o.type?Ci(o,c):null};function bm(o,a,c,h){const f=vm(o,h,a),m=a[11],E=_C(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(c))for(let S=0;S<c.length;S++)mC(m,f,c[S],E,!1);else mC(m,f,c,E,!1)}function th(o,a){if(null!==a){const c=a.type;if(3&c)return Ci(a,o);if(4&c)return ev(-1,o[a.index]);if(8&c){const h=a.child;if(null!==h)return th(o,h);{const f=o[a.index];return mr(f)?ev(-1,f):rn(f)}}if(32&c)return Q(a,o)()||rn(o[a.index]);{const h=bC(o,a);return null!==h?Array.isArray(h)?h[0]:th(Je(o[16]),h):th(o,a.next)}}return null}function bC(o,a){return null!==a?o[16][6].projection[a.projection]:null}function ev(o,a){const c=10+o+1;if(c<a.length){const h=a[c],f=h[1].firstChild;if(null!==f)return th(h,f)}return a[7]}function nv(o,a,c,h,f,m,b){for(;null!=c;){const E=h[c.index],S=c.type;if(b&&0===a&&(E&&Ti(rn(E),h),c.flags|=4),64!=(64&c.flags))if(8&S)nv(o,a,c.child,h,f,m,!1),qa(a,o,f,E,m);else if(32&S){const M=Q(c,h);let R;for(;R=M();)qa(a,o,f,R,m);qa(a,o,f,E,m)}else 16&S?nh(o,a,h,c,f,m):qa(a,o,f,E,m);c=b?c.projectionNext:c.next}}function wm(o,a,c,h,f,m){nv(c,h,o.firstChild,a,f,m,!1)}function nh(o,a,c,h,f,m){const b=c[16],S=b[6].projection[h.projection];if(Array.isArray(S))for(let M=0;M<S.length;M++)qa(a,o,f,S[M],m);else nv(o,a,S,b[3],f,m,!0)}function EC(o,a,c){fn(o)?o.setAttribute(a,"style",c):a.style.cssText=c}function Hu(o,a,c){fn(o)?""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c):a.className=c}function DC(o,a,c){let h=o.length;for(;;){const f=o.indexOf(a,c);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===h||o.charCodeAt(f+m)<=32)return f}c=f+1}}const uA="ng-template";function dA(o,a,c){let h=0;for(;h<o.length;){let f=o[h++];if(c&&"class"===f){if(f=o[h],-1!==DC(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function SC(o){return 4===o.type&&o.value!==uA}function w1(o,a,c){return a===(4!==o.type||c?o.value:uA)}function iv(o,a,c){let h=4;const f=o.attrs||[],m=function pA(o){for(let a=0;a<o.length;a++)if(It(o[a]))return a;return o.length}(f);let b=!1;for(let E=0;E<a.length;E++){const S=a[E];if("number"!=typeof S){if(!b)if(4&h){if(h=2|1&h,""!==S&&!w1(o,S,c)||""===S&&1===a.length){if(Hs(h))return!1;b=!0}}else{const M=8&h?S:a[++E];if(8&h&&null!==o.attrs){if(!dA(o.attrs,M,c)){if(Hs(h))return!1;b=!0}continue}const V=C1(8&h?"class":S,f,SC(o),c);if(-1===V){if(Hs(h))return!1;b=!0;continue}if(""!==M){let z;z=V>m?"":f[V+1].toLowerCase();const te=8&h?z:null;if(te&&-1!==DC(te,M,0)||2&h&&M!==z){if(Hs(h))return!1;b=!0}}}}else{if(!b&&!Hs(h)&&!Hs(S))return!1;if(b&&Hs(S))continue;b=!1,h=S|1&h}}return Hs(h)||b}function Hs(o){return 0==(1&o)}function C1(o,a,c,h){if(null===a)return-1;let f=0;if(h||!c){let m=!1;for(;f<a.length;){const b=a[f];if(b===o)return f;if(3===b||6===b)m=!0;else{if(1===b||2===b){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=m?1:2}return-1}return function TC(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const h=o[c];if("number"==typeof h)return-1;if(h===a)return c;c++}return-1}(a,o)}function hA(o,a,c=!1){for(let h=0;h<a.length;h++)if(iv(o,a[h],c))return!0;return!1}function ih(o,a){e:for(let c=0;c<a.length;c++){const h=a[c];if(o.length===h.length){for(let f=0;f<o.length;f++)if(o[f]!==h[f])continue e;return!0}}return!1}function IC(o,a){return o?":not("+a.trim()+")":a}function AC(o){let a=o[0],c=1,h=2,f="",m=!1;for(;c<o.length;){let b=o[c];if("string"==typeof b)if(2&h){const E=o[++c];f+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&h?f+="."+b:4&h&&(f+=" "+b);else""!==f&&!Hs(b)&&(a+=IC(m,f),f=""),h=b,m=m||!Hs(h);c++}return""!==f&&(a+=IC(m,f)),a}const Ot={};function sv(o){ov(Lt(),Me(),hi()+o,_l())}function ov(o,a,c,h){if(!h)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&Cl(a,m,c)}else{const m=o.preOrderHooks;null!==m&&Ps(a,m,0,c)}ms(c)}function Nf(o,a){return o<<17|a<<2}function Ao(o){return o>>17&32767}function Sm(o){return 2|o}function Wa(o){return(131068&o)>>2}function Tm(o,a){return-131069&o|a<<2}function rh(o){return 1|o}function vv(o,a){const c=o.contentQueries;if(null!==c)for(let h=0;h<c.length;h+=2){const f=c[h],m=c[h+1];if(-1!==m){const b=o.data[m];bl(f),b.contentQueries(2,a[m],m)}}}function Bf(o,a,c,h,f,m,b,E,S,M){const R=a.blueprint.slice();return R[0]=f,R[2]=140|h,ps(R),R[3]=R[15]=o,R[8]=c,R[10]=b||o&&o[10],R[11]=E||o&&o[11],R[12]=S||o&&o[12]||null,R[9]=M||o&&o[9]||null,R[6]=m,R[16]=2==a.type?o[16]:R,R}function Vf(o,a,c,h,f){let m=o.data[a];if(null===m)m=function bv(o,a,c,h,f){const m=Pa(),b=ml(),S=o.data[a]=function MA(o,a,c,h,f,m){return{type:c,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?m:m&&m.parent,c,a,h,f);return null===o.firstChild&&(o.firstChild=S),null!==m&&(b?null==m.child&&null!==S.parent&&(m.child=S):null===m.next&&(m.next=S)),S}(o,a,c,h,f),function bu(){return yt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=c,m.value=h,m.attrs=f;const b=function zo(){const o=yt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===b?-1:b.injectorIndex}return yr(m,!0),m}function oh(o,a,c,h){if(0===c)return-1;const f=a.length;for(let m=0;m<c;m++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function Uf(o,a,c){Fa(a);try{const h=o.viewQuery;null!==h&&jc(1,h,c);const f=o.template;null!==f&&Rm(o,a,f,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&vv(o,a),o.staticViewQueries&&jc(2,o.viewQuery,c);const m=o.components;null!==m&&function IA(o,a){for(let c=0;c<a.length;c++)UA(o,a[c])}(a,m)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Ba()}}function Uc(o,a,c,h){const f=a[2];if(256==(256&f))return;Fa(a);const m=_l();try{ps(a),function yl(o){return yt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&Rm(o,a,c,2,h);const b=3==(3&f);if(!m)if(b){const M=o.preOrderCheckHooks;null!==M&&Cl(a,M,null)}else{const M=o.preOrderHooks;null!==M&&Ps(a,M,0,null),Va(a,0)}if(function $C(o){for(let a=Bn(o);null!==a;a=Ir(a)){if(!a[2])continue;const c=a[9];for(let h=0;h<c.length;h++){const f=c[h],m=f[3];0==(1024&f[2])&&ka(m,1),f[2]|=1024}}}(a),function VA(o){for(let a=Bn(o);null!==a;a=Ir(a))for(let c=10;c<a.length;c++){const h=a[c],f=h[1];ks(h)&&Uc(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&vv(o,a),!m)if(b){const M=o.contentCheckHooks;null!==M&&Cl(a,M)}else{const M=o.contentHooks;null!==M&&Ps(a,M,1),Va(a,1)}!function yv(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let h=0;h<c.length;h++){const f=c[h];if(f<0)ms(~f);else{const m=f,b=c[++h],E=c[++h];wu(b,m),E(2,a[m])}}}finally{ms(-1)}}(o,a);const E=o.components;null!==E&&function TA(o,a){for(let c=0;c<a.length;c++)Mv(o,a[c])}(a,E);const S=o.viewQuery;if(null!==S&&jc(2,S,h),!m)if(b){const M=o.viewCheckHooks;null!==M&&Cl(a,M)}else{const M=o.viewHooks;null!==M&&Ps(a,M,2),Va(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),m||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,ka(a[3],-1))}finally{Ba()}}function AA(o,a,c,h){const f=a[10],m=!_l(),b=Go(a);try{m&&!b&&f.begin&&f.begin(),b&&Uf(o,a,h),Uc(o,a,c,h)}finally{m&&!b&&f.end&&f.end()}}function Rm(o,a,c,h,f){const m=hi(),b=2&h;try{ms(-1),b&&a.length>20&&ov(o,a,20,_l()),c(h,f)}finally{ms(m)}}function wv(o,a,c){if(cl(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const b=o.data[m];b.contentQueries&&b.contentQueries(1,c[m],m)}}}function Cv(o,a,c){!gl()||(function FA(o,a,c,h){const f=c.directiveStart,m=c.directiveEnd;o.firstCreatePass||yn(c,a),Ti(h,a);const b=c.initialInputs;for(let E=f;E<m;E++){const S=o.data[E],M=us(S);M&&GC(a,c,S);const R=Co(a,o,E,c);Ti(R,a),null!==b&&O1(0,E-f,R,S,0,b),M&&(Ei(c.index,a)[8]=R)}}(o,a,c,Ci(c,a)),128==(128&c.flags)&&function LA(o,a,c){const h=c.directiveStart,f=c.directiveEnd,b=c.index,E=function _c(){return yt.lFrame.currentDirectiveIndex}();try{ms(b);for(let S=h;S<f;S++){const M=o.data[S],R=a[S];vl(S),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&UC(M,R)}}finally{ms(-1),vl(E)}}(o,a,c))}function Ev(o,a,c=Ci){const h=a.localNames;if(null!==h){let f=a.index+1;for(let m=0;m<h.length;m+=2){const b=h[m+1],E=-1===b?c(a,o):o[b];o[f++]=E}}}function FC(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=km(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function km(o,a,c,h,f,m,b,E,S,M){const R=20+h,V=R+f,z=function Dv(o,a){const c=[];for(let h=0;h<a;h++)c.push(h<o?null:Ot);return c}(R,V),te="function"==typeof M?M():M;return z[1]={type:o,blueprint:z,template:c,queries:null,viewQuery:E,declTNode:a,data:z.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:S,consts:te,incompleteFirstPass:!1}}function BC(o,a,c,h){const f=ah(a);null===c?f.push(h):(f.push(c),o.firstCreatePass&&WC(o).push(h,f.length-1))}function Tv(o,a,c){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(c=null===c?{}:c).hasOwnProperty(h)?c[h].push(a,f):c[h]=[a,f]}return c}function Gs(o,a,c,h,f,m,b,E){const S=Ci(a,c);let R,M=a.inputs;!E&&null!=M&&(R=M[h])?(Hc(o,c,R,h,f),wd(a)&&function kA(o,a){const c=Ei(a,o);16&c[2]||(c[2]|=64)}(c,a.index)):3&a.type&&(h=function RA(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=b?b(f,a.value||"",h):f,fn(m)?m.setProperty(S,h,f):pi(h)||(S.setProperty?S.setProperty(h,f):S[h]=f))}function lr(o,a,c,h){let f=!1;if(gl()){const m=function BA(o,a,c){const h=o.directiveRegistry;let f=null;if(h)for(let m=0;m<h.length;m++){const b=h[m];hA(c,b.selectors,!1)&&(f||(f=[]),bo(yn(c,a),o,b.type),us(b)?(jC(o,c),f.unshift(b)):f.push(b))}return f}(o,a,c),b=null===h?null:{"":-1};if(null!==m){f=!0,Om(c,o.data.length,m.length);for(let R=0;R<m.length;R++){const V=m[R];V.providersResolver&&V.providersResolver(V)}let E=!1,S=!1,M=oh(o,a,m.length,null);for(let R=0;R<m.length;R++){const V=m[R];c.mergedAttrs=tn(c.mergedAttrs,V.hostAttrs),HC(o,c,a,M,V),Tn(M,V,b),null!==V.contentQueries&&(c.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(c.flags|=128);const z=V.type.prototype;!E&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(c.index),E=!0),!S&&(z.ngOnChanges||z.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(c.index),S=!0),M++}!function xA(o,a){const h=a.directiveEnd,f=o.data,m=a.attrs,b=[];let E=null,S=null;for(let M=a.directiveStart;M<h;M++){const R=f[M],V=R.inputs,z=null===m||SC(a)?null:jf(V,m);b.push(z),E=Tv(V,M,E),S=Tv(R.outputs,M,S)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=E,a.outputs=S}(o,c)}b&&function Iv(o,a,c){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=c[a[f+1]];if(null==m)throw new Pe(-301,!1);h.push(a[f],m)}}}(c,h,b)}return c.mergedAttrs=tn(c.mergedAttrs,c.attrs),f}function Gu(o,a,c,h,f,m){const b=m.hostBindings;if(b){let E=o.hostBindingOpCodes;null===E&&(E=o.hostBindingOpCodes=[]);const S=~a.index;(function NA(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(E)!=S&&E.push(S),E.push(h,f,b)}}function UC(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function jC(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function Tn(o,a,c){if(c){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)c[a.exportAs[h]]=o;us(a)&&(c[""]=o)}}function Om(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}function HC(o,a,c,h,f){o.data[h]=f;const m=f.factory||(f.factory=Fi(f.type)),b=new yc(m,us(f),null);o.blueprint[h]=b,c[h]=b,Gu(o,a,0,h,oh(o,c,f.hostVars,Ot),f)}function GC(o,a,c){const h=Ci(a,o),f=FC(c),m=o[10],b=Pm(o,Bf(o,f,null,c.onPush?64:16,h,a,m,m.createRenderer(h,c),null,null));o[a.index]=b}function En(o,a,c,h,f,m){const b=Ci(o,a);!function ca(o,a,c,h,f,m,b){if(null==m)fn(o)?o.removeAttribute(a,f,c):a.removeAttribute(f);else{const E=null==b?me(m):b(m,h||"",f);fn(o)?o.setAttribute(a,f,E,c):c?a.setAttributeNS(c,f,E):a.setAttribute(f,E)}}(a[11],b,m,o.value,c,h,f)}function O1(o,a,c,h,f,m){const b=m[a];if(null!==b){const E=h.setInput;for(let S=0;S<b.length;){const M=b[S++],R=b[S++],V=b[S++];null!==E?h.setInput(c,V,M,R):c[R]=V}}}function jf(o,a){let c=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return c}function Av(o,a,c,h){return new Array(o,!0,!1,a,null,0,h,c,null,null)}function Mv(o,a){const c=Ei(a,o);if(ks(c)){const h=c[1];80&c[2]?Uc(h,c,h.template,c[8]):c[5]>0&&xv(c)}}function xv(o){for(let h=Bn(o);null!==h;h=Ir(h))for(let f=10;f<h.length;f++){const m=h[f];if(1024&m[2]){const b=m[1];Uc(b,m,b.template,m[8])}else m[5]>0&&xv(m)}const c=o[1].components;if(null!==c)for(let h=0;h<c.length;h++){const f=Ei(c[h],o);ks(f)&&f[5]>0&&xv(f)}}function UA(o,a){const c=Ei(a,o),h=c[1];(function jA(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(h,c),Uf(h,c,c[8])}function Pm(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function zl(o){for(;o;){o[2]|=64;const a=Je(o);if(uu(o)&&!a)return o;o=a}return null}function Nm(o,a,c){const h=a[10];h.begin&&h.begin();try{Uc(o,a,o.template,c)}catch(f){throw Hf(a,f),f}finally{h.end&&h.end()}}function Fm(o){!function zu(o){for(let a=0;a<o.components.length;a++){const c=o.components[a],h=Yd(c),f=h[1];AA(f,h,f.template,c)}}(o[8])}function jc(o,a,c){bl(0),a(o,c)}const qC=(()=>Promise.resolve(null))();function ah(o){return o[7]||(o[7]=[])}function WC(o){return o.cleanup||(o.cleanup=[])}function lh(o,a,c){return(null===o||us(o))&&(c=function hl(o){for(;Array.isArray(o);){if("object"==typeof o[1])return o;o=o[0]}return null}(c[a.index])),c[11]}function Hf(o,a){const c=o[9],h=c?c.get(Qd,null):null;h&&h.handleError(a)}function Hc(o,a,c,h,f){for(let m=0;m<c.length;){const b=c[m++],E=c[m++],S=a[b],M=o.data[b];null!==M.setInput?M.setInput(S,f,h,E):S[E]=f}}function $l(o,a,c){const h=mo(a,o);!function Jd(o,a,c){fn(o)?o.setValue(a,c):a.textContent=c}(o[11],h,c)}function Rv(o,a,c){let h=c?o.styles:null,f=c?o.classes:null,m=0;if(null!==a)for(let b=0;b<a.length;b++){const E=a[b];"number"==typeof E?m=E:1==m?f=ue(f,E):2==m&&(h=ue(h,E+": "+a[++b]+";"))}c?o.styles=h:o.stylesWithoutHost=h,c?o.classes=f:o.classesWithoutHost=f}const Gf=new Mn("INJECTOR",-1);class Gc{get(a,c=Tc){if(c===Tc){const h=new Error(`NullInjectorError: No provider for ${le(a)}!`);throw h.name="NullInjectorError",h}return c}}const zf=new Mn("Set Injector scope."),Lm={},L1={};let Ov;function zA(){return void 0===Ov&&(Ov=new Gc),Ov}function Bm(o,a=null,c=null,h){const f=ZC(o,a,c,h);return f._resolveInjectorDefTypes(),f}function ZC(o,a=null,c=null,h){return new $A(o,c,a||zA(),h)}class $A{constructor(a,c,h,f=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];c&&Cr(c,E=>this.processProvider(E,a,c)),Cr([a],E=>this.processInjectorType(E,[],m)),this.records.set(Gf,zc(void 0,this));const b=this.records.get(zf);this.scope=null!=b?b.value:null,this.source=f||("object"==typeof a?null:le(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,c=Tc,h=vt.Default){this.assertNotDestroyed();const f=J(this),m=ti(void 0);try{if(!(h&vt.SkipSelf)){let E=this.records.get(a);if(void 0===E){const S=function Lv(o){return"function"==typeof o||"object"==typeof o&&o instanceof Mn}(a)&&Ut(a);E=S&&this.injectableDefInScope(S)?zc(Pv(a),Lm):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(h&vt.Self?zA():this.parent).get(a,c=h&vt.Optional&&c===Tc?null:c)}catch(b){if("NullInjectorError"===b.name){if((b[ta]=b[ta]||[]).unshift(le(a)),f)throw b;return function Si(o,a,c,h){const f=o[ta];throw a[I]&&f.unshift(a[I]),o.message=function si(o,a,c,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=le(a);if(Array.isArray(a))f=a.map(le).join(" -> ");else if("object"==typeof a){let m=[];for(let b in a)if(a.hasOwnProperty(b)){let E=a[b];m.push(b+":"+("string"==typeof E?JSON.stringify(E):le(E)))}f=`{${m.join(", ")}}`}return`${c}${h?"("+h+")":""}[${f}]: ${o.replace(df,"\n  ")}`}("\n"+o.message,f,c,h),o.ngTokenPath=f,o[ta]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{ti(m),J(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((h,f)=>a.push(le(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,!1)}processInjectorType(a,c,h){if(!(a=oe(a)))return!1;let f=nr(a);const m=null==f&&a.ngModule||void 0,b=void 0===m?a:m,E=-1!==h.indexOf(b);if(void 0!==m&&(f=nr(m)),null==f)return!1;if(null!=f.imports&&!E){let R;h.push(b);try{Cr(f.imports,V=>{this.processInjectorType(V,c,h)&&(void 0===R&&(R=[]),R.push(V))})}finally{}if(void 0!==R)for(let V=0;V<R.length;V++){const{ngModule:z,providers:te}=R[V];Cr(te,we=>this.processProvider(we,z,te||pt))}}this.injectorDefTypes.add(b);const S=Fi(b)||(()=>new b);this.records.set(b,zc(S,Lm));const M=f.providers;if(null!=M&&!E){const R=a;Cr(M,V=>this.processProvider(V,R,M))}return void 0!==m&&void 0!==a.providers}processProvider(a,c,h){let f=ch(a=oe(a))?a:oe(a&&a.provide);const m=function V1(o,a,c){return qA(o)?zc(void 0,o.useValue):zc(Nv(o),Lm)}(a);if(ch(a)||!0!==a.multi)this.records.get(f);else{let b=this.records.get(f);b||(b=zc(void 0,Lm,!0),b.factory=()=>St(b.multi),this.records.set(f,b)),f=a,b.multi.push(a)}this.records.set(f,m)}hydrate(a,c){return c.value===Lm&&(c.value=L1,c.value=c.factory()),"object"==typeof c.value&&c.value&&function YC(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this.onDestroy.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=oe(a.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function Pv(o){const a=Ut(o),c=null!==a?a.factory:Fi(o);if(null!==c)return c;if(o instanceof Mn)throw new Pe(204,!1);if(o instanceof Function)return function B1(o){const a=o.length;if(a>0)throw xl(a,"?"),new Pe(204,!1);const c=function hr(o){const a=o&&(o[is]||o[ir]);if(a){const c=function Ri(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),a}return null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new Pe(204,!1)}function Nv(o,a,c){let h;if(ch(o)){const f=oe(o);return Fi(f)||Pv(f)}if(qA(o))h=()=>oe(o.useValue);else if(function WA(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...St(o.deps||[]));else if(function U1(o){return!(!o||!o.useExisting)}(o))h=()=>be(oe(o.useExisting));else{const f=oe(o&&(o.useClass||o.provide));if(!function Fv(o){return!!o.deps}(o))return Fi(f)||Pv(f);h=()=>new f(...St(o.deps))}return h}function zc(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function qA(o){return null!==o&&"object"==typeof o&&k in o}function ch(o){return"function"==typeof o}let Za=(()=>{class o{static create(c,h){var f;if(Array.isArray(c))return Bm({name:""},h,c,"");{const m=null!==(f=c.name)&&void 0!==f?f:"";return Bm({name:m},c.parent,c.providers,m)}}}return o.THROW_IF_NOT_FOUND=Tc,o.NULL=new Gc,o.\u0275prov=en({token:o,providedIn:"any",factory:()=>be(Gf)}),o.__NG_ELEMENT_ID__=-1,o})();function q1(o,a){Nd(Yd(o)[1],Sn())}function tE(o){let a=function sM(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const h=[o];for(;a;){let f;if(us(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Pe(903,"");f=a.\u0275dir}if(f){if(c){h.push(f);const b=o;b.inputs=nE(o.inputs),b.declaredInputs=nE(o.declaredInputs),b.outputs=nE(o.outputs);const E=f.hostBindings;E&&Y1(o,E);const S=f.viewQuery,M=f.contentQueries;if(S&&Z1(o,S),M&&K1(o,M),ie(o.inputs,f.inputs),ie(o.declaredInputs,f.declaredInputs),ie(o.outputs,f.outputs),us(f)&&f.data.animation){const R=o.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let b=0;b<m.length;b++){const E=m[b];E&&E.ngInherit&&E(o),E===tE&&(c=!1)}}a=Object.getPrototypeOf(a)}!function W1(o){let a=0,c=null;for(let h=o.length-1;h>=0;h--){const f=o[h];f.hostVars=a+=f.hostVars,f.hostAttrs=tn(f.hostAttrs,c=tn(c,f.hostAttrs))}}(h)}function nE(o){return o===zi?{}:o===pt?[]:o}function Z1(o,a){const c=o.viewQuery;o.viewQuery=c?(h,f)=>{a(h,f),c(h,f)}:a}function K1(o,a){const c=o.contentQueries;o.contentQueries=c?(h,f,m)=>{a(h,f,m),c(h,f,m)}:a}function Y1(o,a){const c=o.hostBindings;o.hostBindings=c?(h,f)=>{a(h,f),c(h,f)}:a}let Bv=null;function $f(){if(!Bv){const o=Ht.Symbol;if(o&&o.iterator)Bv=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<a.length;++c){const h=a[c];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Bv=h)}}}return Bv}function qf(o){return!!iE(o)&&(Array.isArray(o)||!(o instanceof Map)&&$f()in o)}function iE(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Zr(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function rE(o,a,c,h){const f=Me();return Zr(f,_o(),a)&&(Lt(),En(Nn(),f,o,a,c,h)),rE}function Zf(o,a,c,h){return Zr(o,_o(),c)?a+me(c)+h:Ot}function mM(o,a,c,h,f,m,b,E){const S=Me(),M=Lt(),R=o+20,V=M.firstCreatePass?function nL(o,a,c,h,f,m,b,E,S){const M=a.consts,R=Vf(a,o,4,b||null,Gr(M,E));lr(a,c,R,Gr(M,S)),Nd(a,R);const V=R.tViews=km(2,R,h,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M);return null!==a.queries&&(a.queries.template(a,R),V.queries=a.queries.embeddedTView(R)),R}(R,M,S,a,c,h,f,m,b):M.data[R];yr(V,!1);const z=S[11].createComment("");bm(M,S,z,V),Ti(z,S),Pm(S,S[R]=Av(z,S,z,V)),cs(V)&&Cv(M,S,V),null!=b&&Ev(S,V,E)}function _M(o){return function fs(o,a){return o[a]}(function pc(){return yt.lFrame.contextLView}(),20+o)}function ip(o,a=vt.Default){const c=Me();return null===c?be(o,a):Wo(Sn(),c,oe(o),a)}function fE(){throw new Error("invalid")}function jv(o,a,c){const h=Me();return Zr(h,_o(),a)&&Gs(Lt(),Nn(),h,o,a,h[11],c,!1),jv}function Hv(o,a,c,h,f){const b=f?"class":"style";Hc(o,c,a.inputs[b],b,h)}function Um(o,a,c,h){const f=Me(),m=Lt(),b=20+o,E=f[11],S=f[b]=eh(E,a,function Pd(){return yt.lFrame.currentNamespace}()),M=m.firstCreatePass?function IM(o,a,c,h,f,m,b){const E=a.consts,M=Vf(a,o,2,f,Gr(E,m));return lr(a,c,M,Gr(E,b)),null!==M.attrs&&Rv(M,M.attrs,!1),null!==M.mergedAttrs&&Rv(M,M.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,M),M}(b,m,f,0,a,c,h):m.data[b];yr(M,!0);const R=M.mergedAttrs;null!==R&&Ke(E,S,R);const V=M.classes;null!==V&&Hu(E,S,V);const z=M.styles;return null!==z&&EC(E,S,z),64!=(64&M.flags)&&bm(m,f,S,M),0===function hc(){return yt.lFrame.elementDepthCount}()&&Ti(S,f),function pl(){yt.lFrame.elementDepthCount++}(),cs(M)&&(Cv(m,f,M),wv(m,M,f)),null!==h&&Ev(f,M),Um}function jm(){let o=Sn();ml()?vu():(o=o.parent,yr(o,!1));const a=o;!function mu(){yt.lFrame.elementDepthCount--}();const c=Lt();return c.firstCreatePass&&(Nd(c,o),cl(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Du(o){return 0!=(16&o.flags)}(a)&&Hv(c,a,Me(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function zg(o){return 0!=(32&o.flags)}(a)&&Hv(c,a,Me(),a.stylesWithoutHost,!1),jm}function Hm(o,a,c,h){return Um(o,a,c,h),jm(),Hm}function Gm(o,a,c){const h=Me(),f=Lt(),m=o+20,b=f.firstCreatePass?function MM(o,a,c,h,f){const m=a.consts,b=Gr(m,h),E=Vf(a,o,8,"ng-container",b);return null!==b&&Rv(E,b,!0),lr(a,c,E,Gr(m,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(m,f,h,a,c):f.data[m];yr(b,!0);const E=h[m]=h[11].createComment("");return bm(f,h,E,b),Ti(E,h),cs(b)&&(Cv(f,h,b),wv(f,b,h)),null!=c&&Ev(h,b),Gm}function zm(){let o=Sn();const a=Lt();return ml()?vu():(o=o.parent,yr(o,!1)),a.firstCreatePass&&(Nd(a,o),cl(o)&&a.queries.elementEnd(o)),zm}function Gv(o,a,c){return Gm(o,a,c),zm(),Gv}function pE(){return Me()}function gE(o){return!!o&&"function"==typeof o.then}function xM(o){return!!o&&"function"==typeof o.subscribe}const RM=xM;function mE(o,a,c,h){const f=Me(),m=Lt(),b=Sn();return zv(m,f,f[11],b,o,a,!!c,h),mE}function _E(o,a){const c=Sn(),h=Me(),f=Lt();return zv(f,h,lh(Na(f.data),c,h),c,o,a,!1),_E}function zv(o,a,c,h,f,m,b,E){const S=cs(h),R=o.firstCreatePass&&WC(o),V=a[8],z=ah(a);let te=!0;if(3&h.type||E){const We=Ci(h,a),rt=E?E(We):We,Ae=z.length,_t=E?zt=>E(rn(zt[h.index])):h.index;if(fn(c)){let zt=null;if(!E&&S&&(zt=function bL(o,a,c,h){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const b=f[m];if(b===c&&f[m+1]===h){const E=a[7],S=f[m+2];return E.length>S?E[S]:null}"string"==typeof b&&(m+=2)}return null}(o,a,f,h.index)),null!==zt)(zt.__ngLastListenerFn__||zt).__ngNextListenerFn__=m,zt.__ngLastListenerFn__=m,te=!1;else{m=qv(h,a,V,m,!1);const pn=c.listen(rt,f,m);z.push(m,pn),R&&R.push(f,_t,Ae,Ae+1)}}else m=qv(h,a,V,m,!0),rt.addEventListener(f,m,b),z.push(m),R&&R.push(f,_t,Ae,b)}else m=qv(h,a,V,m,!1);const we=h.outputs;let Be;if(te&&null!==we&&(Be=we[f])){const We=Be.length;if(We)for(let rt=0;rt<We;rt+=2){const Ds=a[Be[rt]][Be[rt+1]].subscribe(m),xr=z.length;z.push(m,Ds),R&&R.push(f,h.index,xr,-(xr+1))}}}function $v(o,a,c,h){try{return!1!==c(h)}catch(f){return Hf(o,f),!1}}function qv(o,a,c,h,f){return function m(b){if(b===Function)return h;const E=2&o.flags?Ei(o.index,a):a;0==(32&a[2])&&zl(E);let S=$v(a,0,h,b),M=m.__ngNextListenerFn__;for(;M;)S=$v(a,0,M,b)&&S,M=M.__ngNextListenerFn__;return f&&!1===S&&(b.preventDefault(),b.returnValue=!1),S}}function yE(o=1){return function gs(o){return(yt.lFrame.contextLView=function rf(o,a){for(;o>0;)a=a[15],o--;return a}(o,yt.lFrame.contextLView))[8]}(o)}function vE(o,a){let c=null;const h=function fA(o){const a=o.attrs;if(null!=a){const c=a.indexOf(5);if(0==(1&c))return a[c+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===h?hA(o,m,!0):ih(h,m))return f}else c=f}return c}function $u(o){const a=Me()[16][6];if(!a.projection){const h=a.projection=xl(o?o.length:1,null),f=h.slice();let m=a.child;for(;null!==m;){const b=o?vE(m,o):0;null!==b&&(f[b]?f[b].projectionNext=m:h[b]=m,f[b]=m),m=m.next}}}function bE(o,a=0,c){const h=Me(),f=Lt(),m=Vf(f,20+o,16,null,c||null);null===m.projection&&(m.projection=a),vu(),64!=(64&m.flags)&&function cA(o,a,c){nh(a[11],0,a,c,vm(o,c,a),_C(c.parent||a[6],c,a))}(f,h,m)}function TE(o,a,c,h,f){const m=o[c+1],b=null===a;let E=h?Ao(m):Wa(m),S=!1;for(;0!==E&&(!1===S||b);){const R=o[E+1];IE(o[E],a)&&(S=!0,o[E+1]=h?rh(R):Sm(R)),E=h?Ao(R):Wa(R)}S&&(o[c+1]=h?Sm(m):rh(m))}function IE(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&To(o,a)>=0}const Ui={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ya(o){return o.substring(Ui.key,Ui.keyEnd)}function Yv(o,a){const c=Ui.textEnd;return c===a?-1:(a=Ui.keyEnd=function Qa(o,a,c){for(;a<c&&o.charCodeAt(a)>32;)a++;return a}(o,Ui.key=a,c),fh(o,a,c))}function fh(o,a,c){for(;a<c&&o.charCodeAt(a)<=32;)a++;return a}function Wm(o,a,c){return Mo(o,a,c,!1),Wm}function qu(o,a){return Mo(o,a,null,!0),qu}function zs(o,a){for(let c=function Wl(o){return function da(o){Ui.key=0,Ui.keyEnd=0,Ui.value=0,Ui.valueEnd=0,Ui.textEnd=o.length}(o),Yv(o,fh(o,0,Ui.textEnd))}(a);c>=0;c=Yv(a,c))zn(o,Ya(a),!0)}function Mo(o,a,c,h){const f=Me(),m=Lt(),b=zr(2);m.firstUpdatePass&&xE(m,o,b,h),a!==Ot&&Zr(f,b,a)&&RE(m,m.data[hi()],f,f[11],o,f[b+1]=function HM(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=le(aa(o)))),o}(a,c),h,b)}function ME(o,a){return a>=o.expandoStartIndex}function xE(o,a,c,h){const f=o.data;if(null===f[c+1]){const m=f[hi()],b=ME(o,c);OE(m,h)&&null===a&&!b&&(a=!1),a=function NM(o,a,c,h){const f=Na(o);let m=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(c=op(c=Xv(null,o,a,c,h),a.attrs,h),m=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==f)if(c=Xv(f,o,a,c,h),null===m){let S=function FM(o,a,c){const h=c?a.classBindings:a.styleBindings;if(0!==Wa(h))return o[Ao(h)]}(o,a,h);void 0!==S&&Array.isArray(S)&&(S=Xv(null,o,a,S[1],h),S=op(S,a.attrs,h),function LM(o,a,c,h){o[Ao(c?a.classBindings:a.styleBindings)]=h}(o,a,h,S))}else m=function BM(o,a,c){let h;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)h=op(h,o[m].hostAttrs,c);return op(h,a.attrs,c)}(o,a,h)}return void 0!==m&&(h?a.residualClasses=m:a.residualStyles=m),c}(f,m,a,h),function Kv(o,a,c,h,f,m){let b=m?a.classBindings:a.styleBindings,E=Ao(b),S=Wa(b);o[h]=c;let R,M=!1;if(Array.isArray(c)){const V=c;R=V[1],(null===R||To(V,R)>0)&&(M=!0)}else R=c;if(f)if(0!==S){const z=Ao(o[E+1]);o[h+1]=Nf(z,E),0!==z&&(o[z+1]=Tm(o[z+1],h)),o[E+1]=function xC(o,a){return 131071&o|a<<17}(o[E+1],h)}else o[h+1]=Nf(E,0),0!==E&&(o[E+1]=Tm(o[E+1],h)),E=h;else o[h+1]=Nf(S,0),0===E?E=h:o[S+1]=Tm(o[S+1],h),S=h;M&&(o[h+1]=Sm(o[h+1])),TE(o,R,h,!0),TE(o,R,h,!1),function SE(o,a,c,h,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&To(m,a)>=0&&(c[h+1]=rh(c[h+1]))}(a,R,o,h,m),b=Nf(E,S),m?a.classBindings=b:a.styleBindings=b}(f,m,a,c,b,h)}}function Xv(o,a,c,h,f){let m=null;const b=c.directiveEnd;let E=c.directiveStylingLast;for(-1===E?E=c.directiveStart:E++;E<b&&(m=a[E],h=op(h,m.hostAttrs,f),m!==o);)E++;return null!==o&&(c.directiveStylingLast=E),h}function op(o,a,c){const h=c?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const b=a[m];"number"==typeof b?f=b:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),zn(o,b,!!c||a[++m]))}return void 0===o?null:o}function RE(o,a,c,h,f,m,b,E){if(!(3&a.type))return;const S=o.data,M=S[E+1];Zm(function av(o){return 1==(1&o)}(M)?kE(S,a,c,f,Wa(M),b):void 0)||(Zm(m)||function Dm(o){return 2==(2&o)}(M)&&(m=kE(S,null,c,f,E,b)),function CC(o,a,c,h,f){const m=fn(o);if(a)f?m?o.addClass(c,h):c.classList.add(h):m?o.removeClass(c,h):c.classList.remove(h);else{let b=-1===h.indexOf("-")?void 0:A.DashCase;if(null==f)m?o.removeStyle(c,h,b):c.style.removeProperty(h);else{const E="string"==typeof f&&f.endsWith("!important");E&&(f=f.slice(0,-10),b|=A.Important),m?o.setStyle(c,h,f,b):c.style.setProperty(h,f,E?"important":"")}}}(h,b,mo(hi(),c),f,m))}function kE(o,a,c,h,f,m){const b=null===a;let E;for(;f>0;){const S=o[f],M=Array.isArray(S),R=M?S[1]:S,V=null===R;let z=c[f+1];z===Ot&&(z=V?pt:void 0);let te=V?kl(z,h):R===h?z:void 0;if(M&&!Zm(te)&&(te=kl(S,h)),Zm(te)&&(E=te,b))return E;const we=o[f+1];f=b?Ao(we):Wa(we)}if(null!==a){let S=m?a.residualClasses:a.residualStyles;null!=S&&(E=kl(S,h))}return E}function Zm(o){return void 0!==o}function OE(o,a){return 0!=(o.flags&(a?16:32))}function PE(o,a=""){const c=Me(),h=Lt(),f=o+20,m=h.firstCreatePass?Vf(h,f,1,a,null):h.data[f],b=c[f]=function Xd(o,a){return fn(o)?o.createText(a):o.createTextNode(a)}(c[11],a);bm(h,c,b,m),yr(m,!1)}function Jv(o){return Km("",o,""),Jv}function Km(o,a,c){const h=Me(),f=Zf(h,o,a,c);return f!==Ot&&$l(h,hi(),f),Km}function GE(o,a,c){!function fa(o,a,c,h){const f=Lt(),m=zr(2);f.firstUpdatePass&&xE(f,null,m,h);const b=Me();if(c!==Ot&&Zr(b,m,c)){const E=f.data[hi()];if(OE(E,h)&&!ME(f,m)){let S=h?E.classesWithoutHost:E.stylesWithoutHost;null!==S&&(c=ue(S,c||"")),Hv(f,E,b,c,h)}else!function jM(o,a,c,h,f,m,b,E){f===Ot&&(f=pt);let S=0,M=0,R=0<f.length?f[0]:null,V=0<m.length?m[0]:null;for(;null!==R||null!==V;){const z=S<f.length?f[S+1]:void 0,te=M<m.length?m[M+1]:void 0;let Be,we=null;R===V?(S+=2,M+=2,z!==te&&(we=V,Be=te)):null===V||null!==R&&R<V?(S+=2,we=R):(M+=2,we=V,Be=te),null!==we&&RE(o,a,c,h,we,Be,b,E),R=S<f.length?f[S]:null,V=M<m.length?m[M]:null}}(f,E,b,b[11],b[m+1],b[m+1]=function VM(o,a,c){if(null==c||""===c)return pt;const h=[],f=aa(c);if(Array.isArray(f))for(let m=0;m<f.length;m++)o(h,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&o(h,m,f[m]);else"string"==typeof f&&a(h,f);return h}(o,a,c),h,m)}}(zn,zs,Zf(Me(),o,a,c),!0)}function Qm(o,a,c){const h=Me();return Zr(h,_o(),a)&&Gs(Lt(),Nn(),h,o,a,h[11],c,!0),Qm}function KE(o,a,c){const h=Me();if(Zr(h,_o(),a)){const m=Lt(),b=Nn();Gs(m,b,h,o,a,lh(Na(m.data),b,h),c,!0)}return KE}const Wc=void 0;var YM=["en",[["a","p"],["AM","PM"],Wc],[["AM","PM"],Wc,Wc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wc,"{1} 'at' {0}",Wc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function cb(o){const c=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===h?1:5}];let Wu={};function ap(o){const a=function Zu(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=cp(a);if(c)return c;const h=a.split("-")[0];if(c=cp(h),c)return c;if("en"===h)return YM;throw new Error(`Missing locale data for the locale "${o}".`)}function lp(o){return ap(o)[wt.PluralCase]}function cp(o){return o in Wu||(Wu[o]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[o]),Wu[o]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const Jm="en-US";let ga=Jm;function Cs(o,a,c,h,f){if(o=oe(o),Array.isArray(o))for(let m=0;m<o.length;m++)Cs(o[m],a,c,h,f);else{const m=Lt(),b=Me();let E=ch(o)?o:oe(o.provide),S=Nv(o);const M=Sn(),R=1048575&M.providerIndexes,V=M.directiveStart,z=M.providerIndexes>>20;if(ch(o)||!o.multi){const te=new yc(S,f,ip),we=Ep(E,a,f?R:R+z,V);-1===we?(bo(yn(M,b),m,E),Cp(m,o,a.length),a.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),c.push(te),b.push(te)):(c[we]=te,b[we]=te)}else{const te=Ep(E,a,R+z,V),we=Ep(E,a,R,R+z),Be=te>=0&&c[te],We=we>=0&&c[we];if(f&&!We||!f&&!Be){bo(yn(M,b),m,E);const rt=function Mx(o,a,c,h,f){const m=new yc(o,c,ip);return m.multi=[],m.index=a,m.componentProviders=0,gh(m,f,h&&!c),m}(f?Ax:Ix,c.length,f,h,S);!f&&We&&(c[we].providerFactory=rt),Cp(m,o,a.length,0),a.push(E),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),c.push(rt),b.push(rt)}else Cp(m,o,te>-1?te:we,gh(c[f?we:te],S,!f&&h));!f&&h&&We&&c[we].componentProviders++}}}function Cp(o,a,c,h){const f=ch(a),m=function KC(o){return!!o.useClass}(a);if(f||m){const S=(m?oe(a.useClass):a).prototype.ngOnDestroy;if(S){const M=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const R=M.indexOf(c);-1===R?M.push(c,[h,S]):M[R+1].push(h,S)}else M.push(c,S)}}}function gh(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function Ep(o,a,c,h){for(let f=c;f<h;f++)if(a[f]===o)return f;return-1}function Ix(o,a,c,h){return Dp(this.multi,[])}function Ax(o,a,c,h){const f=this.multi;let m;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=Co(c,c[1],this.providerFactory.index,h);m=E.slice(0,b),Dp(f,m);for(let S=b;S<E.length;S++)m.push(E[S])}else m=[],Dp(f,m);return m}function Dp(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function gD(o,a=[]){return c=>{c.providersResolver=(h,f)=>function Tx(o,a,c){const h=Lt();if(h.firstCreatePass){const f=us(o);Cs(c,h.data,h.blueprint,f,!0),Cs(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class mD{}class xo{resolveComponentFactory(a){throw function _D(o){const a=Error(`No component factory found for ${le(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Zl=(()=>{class o{}return o.NULL=new xo,o})();function Rx(){return mh(Sn(),Me())}function mh(o,a){return new _h(Ci(o,a))}let _h=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=Rx,o})();function kx(o){return o instanceof _h?o.nativeElement:o}class Sp{}let Px=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function wb(){const o=Me(),c=Ei(Sn().index,o);return function Nx(o){return o[11]}(Pi(c)?c:o)}(),o})(),Fx=(()=>{class o{}return o.\u0275prov=en({token:o,providedIn:"root",factory:()=>null}),o})();class Cb{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const yD=new Cb("13.2.7"),Eb={};function u_(o,a,c,h,f=!1){for(;null!==c;){const m=a[c.index];if(null!==m&&h.push(rn(m)),mr(m))for(let E=10;E<m.length;E++){const S=m[E],M=S[1].firstChild;null!==M&&u_(S[1],S,M,h)}const b=c.type;if(8&b)u_(o,a,c.child,h);else if(32&b){const E=Q(c,a);let S;for(;S=E();)h.push(S)}else if(16&b){const E=bC(a,c);if(Array.isArray(E))h.push(...E);else{const S=Je(a[16]);u_(S[1],S,E,h,!0)}}c=f?c.projectionNext:c.next}return h}class Tp{constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,c=a[1];return u_(c,a,c.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(mr(a)){const c=a[8],h=c?c.indexOf(this):-1;h>-1&&(Zy(a,h),Xo(c,h))}this._attachedToViewContainer=!1}Ky(this._lView[1],this._lView)}onDestroy(a){BC(this._lView[1],this._lView,null,a)}markForCheck(){zl(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Nm(this._lView[1],this._lView,this.context)}checkNoChanges(){!function ws(o,a,c){gc(!0);try{Nm(o,a,c)}finally{gc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kf(o,a){wm(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=a}}class vD extends Tp{constructor(a){super(a),this._view=a}detectChanges(){Fm(this._view)}checkNoChanges(){!function N1(o){gc(!0);try{Fm(o)}finally{gc(!1)}}(this._view)}get context(){return null}}class Ip extends Zl{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=ni(a);return new Sb(c,this.ngModule)}}function Db(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class Sb extends mD{constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function MC(o){return o.map(AC).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return Db(this.componentDef.inputs)}get outputs(){return Db(this.componentDef.outputs)}create(a,c,h,f){const m=(f=f||this.ngModule)?function bD(o,a){return{get:(c,h,f)=>{const m=o.get(c,Eb,f);return m!==Eb||h===Eb?m:a.get(c,h,f)}}}(a,f.injector):a,b=m.get(Sp,dl),E=m.get(Fx,null),S=b.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",R=h?function Sv(o,a,c){if(fn(o))return o.selectRootElement(a,c===qt.ShadowDom);let h="string"==typeof a?o.querySelector(a):a;return h.textContent="",h}(S,h,this.componentDef.encapsulation):eh(b.createRenderer(null,this.componentDef),M,function Lx(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(M)),V=this.componentDef.onPush?576:528,z=function rM(o,a){return{components:[],scheduler:o||qy,clean:qC,playerHandler:a||null,flags:0}}(),te=km(0,null,null,1,0,null,null,null,null,null),we=Bf(null,te,z,V,null,null,b,S,E,m);let Be,We;Fa(we);try{const rt=function nM(o,a,c,h,f,m){const b=c[1];c[20]=o;const S=Vf(b,20,2,"#host",null),M=S.mergedAttrs=a.hostAttrs;null!==M&&(Rv(S,M,!0),null!==o&&(Ke(f,o,M),null!==S.classes&&Hu(f,o,S.classes),null!==S.styles&&EC(f,o,S.styles)));const R=h.createRenderer(o,a),V=Bf(c,FC(a),null,a.onPush?64:16,c[20],S,h,R,m||null,null);return b.firstCreatePass&&(bo(yn(S,c),b,a.type),jC(b,S),Om(S,c.length,1)),Pm(c,V),c[20]=V}(R,this.componentDef,we,b,S);if(R)if(h)Ke(S,R,["ng-version",yD.full]);else{const{attrs:Ae,classes:_t}=function rv(o){const a=[],c=[];let h=1,f=2;for(;h<o.length;){let m=o[h];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++h]):8===f&&c.push(m);else{if(!Hs(f))break;f=m}h++}return{attrs:a,classes:c}}(this.componentDef.selectors[0]);Ae&&Ke(S,R,Ae),_t&&_t.length>0&&Hu(S,R,_t.join(" "))}if(We=Rn(te,20),void 0!==c){const Ae=We.projection=[];for(let _t=0;_t<this.ngContentSelectors.length;_t++){const zt=c[_t];Ae.push(null!=zt?Array.from(zt):null)}}Be=function iM(o,a,c,h,f){const m=c[1],b=function k1(o,a,c){const h=Sn();o.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),HC(o,h,a,oh(o,a,1,null),c));const f=Co(a,o,h.directiveStart,h);Ti(f,a);const m=Ci(h,a);return m&&Ti(m,a),f}(m,c,a);if(h.components.push(b),o[8]=b,f&&f.forEach(S=>S(b,a)),a.contentQueries){const S=Sn();a.contentQueries(1,b,S.directiveStart)}const E=Sn();return!m.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ms(E.index),Gu(c[1],E,0,E.directiveStart,E.directiveEnd,a),UC(a,b)),b}(rt,this.componentDef,we,z,[q1]),Uf(te,we,null)}finally{Ba()}return new Vx(this.componentType,Be,mh(We,we),we,We)}}class Vx extends class c_{}{constructor(a,c,h,f,m){super(),this.location=h,this._rootLView=f,this._tNode=m,this.instance=c,this.hostView=this.changeDetectorRef=new vD(f),this.componentType=a}get injector(){return new Ko(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class yh{}class Kl{}const Yu=new Map;class CD extends yh{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ip(this);const h=ii(a);this._bootstrapComponents=Us(h.bootstrap),this._r3Injector=ZC(a,c,[{provide:yh,useValue:this},{provide:Zl,useValue:this.componentFactoryResolver}],le(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,c=Za.THROW_IF_NOT_FOUND,h=vt.Default){return a===Za||a===yh||a===Gf?this:this._r3Injector.get(a,c,h)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Tb extends Kl{constructor(a){super(),this.moduleType=a,null!==ii(a)&&function Hx(o){const a=new Set;!function c(h){const f=ii(h,!0),m=f.id;null!==m&&(function wD(o,a,c){if(a&&a!==c)throw new Error(`Duplicate module registered for ${o} - ${le(a)} vs ${le(a.name)}`)}(m,Yu.get(m),h),Yu.set(m,h));const b=Us(f.imports);for(const E of b)a.has(E)||(a.add(E),c(E))}(o)}(a)}create(a){return new CD(this.moduleType,a)}}function Ib(o,a,c,h){return function Ap(o,a,c,h,f,m){const b=a+c;return Zr(o,b,f)?function ql(o,a,c){return o[a]=c}(o,b+1,m?h.call(m,f):h(f)):function Qu(o,a){const c=o[a];return c===Ot?void 0:c}(o,b+1)}(Me(),function Gn(){const o=yt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}(),o,a,c,h)}function ED(o){return a=>{setTimeout(o,void 0,a)}}const Yl=class UL extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,h){var f,m,b;let E=a,S=c||(()=>null),M=h;if(a&&"object"==typeof a){const V=a;E=null===(f=V.next)||void 0===f?void 0:f.bind(V),S=null===(m=V.error)||void 0===m?void 0:m.bind(V),M=null===(b=V.complete)||void 0===b?void 0:b.bind(V)}this.__isAsync&&(S=ED(S),E&&(E=ED(E)),M&&(M=ED(M)));const R=super.subscribe({next:E,error:S,complete:M});return a instanceof ne.w0&&a.add(R),R}};function xb(){return this._results[$f()]()}class Rb{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=$f(),h=Rb.prototype;h[c]||(h[c]=xb)}get changes(){return this._changes||(this._changes=new Yl)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const h=this;h.dirty=!1;const f=wr(a);(this._changesDetected=!function Mu(o,a,c){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],m=a[h];if(c&&(f=c(f),m=c(m)),m!==f)return!1}return!0}(h._results,f,c))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let h_=(()=>{class o{}return o.__NG_ELEMENT_ID__=Kx,o})();const xp=h_,jL=class extends xp{constructor(a,c,h){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=h}createEmbeddedView(a){const c=this._declarationTContainer.tViews,h=Bf(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(h[19]=m.createEmbeddedView(c)),Uf(c,h,a),new Tp(h)}};function Kx(){return Rp(Sn(),Me())}function Rp(o,a){return 4&o.type?new jL(a,o,mh(o,a)):null}let f_=(()=>{class o{}return o.__NG_ELEMENT_ID__=kb,o})();function kb(){return TD(Sn(),Me())}const DD=f_,Ob=class extends DD{constructor(a,c,h){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=h}get element(){return mh(this._hostTNode,this._hostLView)}get injector(){return new Ko(this._hostTNode,this._hostLView)}get parentInjector(){const a=ys(this._hostTNode,this._hostLView);if(Ld(a)){const c=wn(a,this._hostLView),h=_s(a);return new Ko(c[1].data[h+8],c)}return new Ko(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=SD(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,c,h){const f=a.createEmbeddedView(c||{});return this.insert(f,h),f}createComponent(a,c,h,f,m){const b=a&&!function So(o){return"function"==typeof o}(a);let E;if(b)E=c;else{const V=c||{};E=V.index,h=V.injector,f=V.projectableNodes,m=V.ngModuleRef}const S=b?a:new Sb(ni(a)),M=h||this.parentInjector;if(!m&&null==S.ngModule){const z=(b?M:this.parentInjector).get(yh,null);z&&(m=z)}const R=S.create(M,f,void 0,m);return this.insert(R.hostView,E),R}insert(a,c){const h=a._lView,f=h[1];if(function fl(o){return mr(o[3])}(h)){const R=this.indexOf(a);if(-1!==R)this.detach(R);else{const V=h[3],z=new Ob(V,V[6],V[3]);z.detach(z.indexOf(a))}}const m=this._adjustIndex(c),b=this._lContainer;!function Fc(o,a,c,h){const f=10+h,m=c.length;h>0&&(c[f-1][4]=a),h<m-10?(a[4]=c[f],Qo(c,10+h,a)):(c.push(a),a[4]=null),a[3]=c;const b=a[17];null!==b&&c!==b&&function Lc(o,a){const c=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===c?o[9]=[a]:c.push(a)}(b,a);const E=a[19];null!==E&&E.insertView(o),a[2]|=128}(f,h,b,m);const E=ev(m,b),S=h[11],M=Pf(S,b[7]);return null!==M&&function Rf(o,a,c,h,f,m){h[0]=f,h[6]=a,wm(o,h,c,1,f,m)}(f,b[6],S,h,M,E),a.attachToViewContainerRef(),Qo(Pb(b),m,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=SD(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),h=Zy(this._lContainer,c);h&&(Xo(Pb(this._lContainer),c),Ky(h[1],h))}detach(a){const c=this._adjustIndex(a,-1),h=Zy(this._lContainer,c);return h&&null!=Xo(Pb(this._lContainer),c)?new Tp(h):null}_adjustIndex(a,c=0){return null==a?this.length+c:a}};function SD(o){return o[8]}function Pb(o){return o[8]||(o[8]=[])}function TD(o,a){let c;const h=a[o.index];if(mr(h))c=h;else{let f;if(8&o.type)f=rn(h);else{const m=a[11];f=m.createComment("");const b=Ci(o,a);js(m,Pf(m,b),f,function lA(o,a){return fn(o)?o.nextSibling(a):a.nextSibling}(m,b),!1)}a[o.index]=c=Av(h,a,f,o),Pm(a,c)}return new Ob(c,o,a)}class Fb{constructor(a){this.queryList=a,this.matches=null}clone(){return new Fb(this.queryList)}setDirty(){this.queryList.setDirty()}}class Lb{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const h=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let m=0;m<h;m++){const b=c.getByIndex(m);f.push(this.queries[b.indexInDeclarationView].clone())}return new Lb(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==PD(a,c).matches&&this.queries[c].setDirty()}}class Bb{constructor(a,c,h=null){this.predicate=a,this.flags=c,this.read=h}}class ID{constructor(a=[]){this.queries=a}elementStart(a,c){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let h=0;h<this.length;h++){const f=null!==c?c.length:0,m=this.getByIndex(h).embeddedTView(a,f);m&&(m.indexInDeclarationView=h,null!==c?c.push(m):c=[m])}return null!==c?new ID(c):null}template(a,c){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class AD{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new AD(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==c;)h=h.parent;return c===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const m=h[f];this.matchTNodeWithReadOption(a,c,HL(c,m)),this.matchTNodeWithReadOption(a,c,br(c,a,m,!1,!1))}else h===h_?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,br(c,a,h,!1,!1))}matchTNodeWithReadOption(a,c,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===_h||f===f_||f===h_&&4&c.type)this.addMatch(c.index,-2);else{const m=br(c,a,f,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,h)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function HL(o,a){const c=o.localNames;if(null!==c)for(let h=0;h<c.length;h+=2)if(c[h]===a)return c[h+1];return null}function GL(o,a,c,h){return-1===c?function MD(o,a){return 11&o.type?mh(o,a):4&o.type?Rp(o,a):null}(a,o):-2===c?function Qx(o,a,c){return c===_h?mh(a,o):c===h_?Rp(a,o):c===f_?TD(a,o):void 0}(o,a,h):Co(o,o[1],c,a)}function xD(o,a,c,h){const f=a[19].queries[h];if(null===f.matches){const m=o.data,b=c.matches,E=[];for(let S=0;S<b.length;S+=2){const M=b[S];E.push(M<0?null:GL(a,m[M],b[S+1],c.metadata.read))}f.matches=E}return f.matches}function Vb(o,a,c,h){const f=o.queries.getByIndex(c),m=f.matches;if(null!==m){const b=xD(o,a,f,c);for(let E=0;E<m.length;E+=2){const S=m[E];if(S>0)h.push(b[E/2]);else{const M=m[E+1],R=a[-S];for(let V=10;V<R.length;V++){const z=R[V];z[17]===z[3]&&Vb(z[1],z,M,h)}if(null!==R[9]){const V=R[9];for(let z=0;z<V.length;z++){const te=V[z];Vb(te[1],te,M,h)}}}}}return h}function Ub(o){const a=Me(),c=Lt(),h=Cu();bl(h+1);const f=PD(c,h);if(o.dirty&&Go(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?Vb(c,a,h,[]):xD(c,a,f,h);o.reset(m,kx),o.notifyOnChanges()}return!0}return!1}function jb(o,a,c){const h=Lt();h.firstCreatePass&&(OD(h,new Bb(o,a,c),-1),2==(2&a)&&(h.staticViewQueries=!0)),kD(h,Me(),a)}function RD(o,a,c,h){const f=Lt();if(f.firstCreatePass){const m=Sn();OD(f,new Bb(a,c,h),m.index),function Xx(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(f,o),2==(2&c)&&(f.staticContentQueries=!0)}kD(f,Me(),c)}function Op(){return function Kc(o,a){return o[19].queries[a].queryList}(Me(),Cu())}function kD(o,a,c){const h=new Rb(4==(4&c));BC(o,a,h,h.destroy),null===a[19]&&(a[19]=new Lb),a[19].queries.push(new Fb(h))}function OD(o,a,c){null===o.queries&&(o.queries=new ID),o.queries.track(new AD(a,c))}function PD(o,a){return o.queries.getByIndex(a)}function Xu(...o){}const QD=new Mn("Application Initializer");let XD=(()=>{class o{constructor(c){this.appInits=c,this.resolve=Xu,this.reject=Xu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(gE(m))c.push(m);else if(RM(m)){const b=new Promise((E,S)=>{m.subscribe({complete:E,error:S})});c.push(b)}}Promise.all(c).then(()=>{h()}).catch(f=>{this.reject(f)}),0===c.length&&h(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(be(QD,8))},o.\u0275prov=en({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const JD=new Mn("AppId",{providedIn:"root",factory:function eS(){return`${Kb()}${Kb()}${Kb()}`}});function Kb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const tS=new Mn("Platform Initializer"),nS=new Mn("Platform ID"),hR=new Mn("appBootstrapListener");let iS=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=en({token:o,factory:o.\u0275fac}),o})();const Yb=new Mn("LocaleId",{providedIn:"root",factory:()=>ot(Yb,vt.Optional|vt.SkipSelf)||function fR(){return"undefined"!=typeof $localize&&$localize.locale||Jm}()}),rS=new Mn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class eB{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let tB=(()=>{class o{compileModuleSync(c){return new Tb(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const h=this.compileModuleSync(c),m=Us(ii(c).declarations).reduce((b,E)=>{const S=ni(E);return S&&b.push(new Sb(S)),b},[]);return new eB(h,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=en({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const pR=(()=>Promise.resolve(0))();function sS(o){"undefined"==typeof Zone?pR.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Es{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yl(!1),this.onMicrotaskEmpty=new Yl(!1),this.onStable=new Yl(!1),this.onError=new Yl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&c,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function gR(){let o=Ht.requestAnimationFrame,a=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function oB(o){const a=()=>{!function sB(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Ht,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,aS(o),o.isCheckStableRunning=!0,oS(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),aS(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,h,f,m,b,E)=>{try{return Np(o),c.invokeTask(f,m,b,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),b_(o)}},onInvoke:(c,h,f,m,b,E,S)=>{try{return Np(o),c.invoke(f,m,b,E,S)}finally{o.shouldCoalesceRunChangeDetection&&a(),b_(o)}},onHasTask:(c,h,f,m)=>{c.hasTask(f,m),h===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,aS(o),oS(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,h,f,m)=>(c.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Es.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Es.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,c,h){return this._inner.run(a,c,h)}runTask(a,c,h,f){const m=this._inner,b=m.scheduleEventTask("NgZoneEvent: "+f,a,rB,Xu,Xu);try{return m.runTask(b,c,h)}finally{m.cancelTask(b)}}runGuarded(a,c,h){return this._inner.runGuarded(a,c,h)}runOutsideAngular(a){return this._outer.run(a)}}const rB={};function oS(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function aS(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Np(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function b_(o){o._nesting--,oS(o)}class aB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yl,this.onMicrotaskEmpty=new Yl,this.onStable=new Yl,this.onError=new Yl}run(a,c,h){return a.apply(c,h)}runGuarded(a,c,h){return a.apply(c,h)}runOutsideAngular(a){return a()}runTask(a,c,h,f){return a.apply(c,h)}}let mR=(()=>{class o{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Es.assertNotInAngularZone(),sS(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sS(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(c)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,h,f){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==m),c(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,h,f){return[]}}return o.\u0275fac=function(c){return new(c||o)(be(Es))},o.\u0275prov=en({token:o,factory:o.\u0275fac}),o})(),_R=(()=>{class o{constructor(){this._applications=new Map,lS.addToWindow(this)}registerApplication(c,h){this._applications.set(c,h)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,h=!0){return lS.findTestabilityInTree(this,c,h)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=en({token:o,factory:o.\u0275fac}),o})();class lB{addToWindow(a){}findTestabilityInTree(a,c,h){return null}}function cB(o){lS=o}let Ws,lS=new lB;const w_=new Mn("AllowMultipleToken");class uB{constructor(a,c){this.name=a,this.token=c}}function bR(o,a,c=[]){const h=`Platform: ${a}`,f=new Mn(h);return(m=[])=>{let b=Xb();if(!b||b.injector.get(w_,!1))if(o)o(c.concat(m).concat({provide:f,useValue:!0}));else{const E=c.concat(m).concat({provide:f,useValue:!0},{provide:zf,useValue:"platform"});!function vR(o){if(Ws&&!Ws.destroyed&&!Ws.injector.get(w_,!1))throw new Pe(400,"");Ws=o.get(wR);const a=o.get(tS,null);a&&a.forEach(c=>c())}(Za.create({providers:E,name:h}))}return function dB(o){const a=Xb();if(!a)throw new Pe(401,"");return a}()}}function Xb(){return Ws&&!Ws.destroyed?Ws:null}let wR=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,h){const E=function Jb(o,a){let c;return c="noop"===o?new aB:("zone.js"===o?void 0:o)||new Es({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),c}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),S=[{provide:Es,useValue:E}];return E.run(()=>{const M=Za.create({providers:S,parent:this.injector,name:c.moduleType.name}),R=c.create(M),V=R.injector.get(Qd,null);if(!V)throw new Pe(402,"");return E.runOutsideAngular(()=>{const z=E.onError.subscribe({next:te=>{V.handleError(te)}});R.onDestroy(()=>{ew(this._modules,R),z.unsubscribe()})}),function hB(o,a,c){try{const h=c();return gE(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(V,E,()=>{const z=R.injector.get(XD);return z.runInitializers(),z.donePromise.then(()=>(function Ku(o){Vt(o,"Expected localeId to be defined"),"string"==typeof o&&(ga=o.toLowerCase().replace(/_/g,"-"))}(R.injector.get(Yb,Jm)||Jm),this._moduleDoBootstrap(R),R))})})}bootstrapModule(c,h=[]){const f=uS({},h);return function Qb(o,a,c){const h=new Tb(c);return Promise.resolve(h)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const h=c.injector.get(C_);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new Pe(403,"");c.instance.ngDoBootstrap(h)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(be(Za))},o.\u0275prov=en({token:o,factory:o.\u0275fac}),o})();function uS(o,a){return Array.isArray(a)?a.reduce(uS,o):Object.assign(Object.assign({},o),a)}let C_=(()=>{class o{constructor(c,h,f,m,b){this._zone=c,this._injector=h,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=b,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new B.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),S=new B.y(M=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Es.assertNotInAngularZone(),sS(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{Es.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{R.unsubscribe(),V.unsubscribe()}});this.isStable=(0,he.T)(E,S.pipe((0,ae.B)()))}bootstrap(c,h){if(!this._initStatus.done)throw new Pe(405,"");let f;f=c instanceof mD?c:this._componentFactoryResolver.resolveComponentFactory(c),this.componentTypes.push(f.componentType);const m=function yR(o){return o.isBoundToModule}(f)?void 0:this._injector.get(yh),E=f.create(Za.NULL,[],h||f.selector,m),S=E.location.nativeElement,M=E.injector.get(mR,null),R=M&&E.injector.get(_R);return M&&R&&R.registerApplication(S,M),E.onDestroy(()=>{this.detachView(E.hostView),ew(this.components,E),R&&R.unregisterApplication(S)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const h=c;this._views.push(h),h.attachToAppRef(this)}detachView(c){const h=c;ew(this._views,h),h.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(hR,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(c){return new(c||o)(be(Es),be(Za),be(Qd),be(Zl),be(XD))},o.\u0275prov=en({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function ew(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}let tw=!0,E_=!1;function dS(){return E_=!0,tw}function DR(){if(E_)throw new Error("Cannot enable prod mode after platform setup.");tw=!1}let pB=(()=>{class o{}return o.__NG_ELEMENT_ID__=TR,o})();function TR(o){return function gB(o,a,c){if(wd(o)&&!c){const h=Ei(o.index,a);return new Tp(h,h)}return 47&o.type?new Tp(a[16],a):null}(Sn(),Me(),16==(16&o))}class _S{constructor(){}supports(a){return qf(a)}create(a){return new vB(a)}}const T_=(o,a)=>a;class vB{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||T_}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,h=this._removalsHead,f=0,m=null;for(;c||h;){const b=!h||c&&c.currentIndex<ow(h,f,m)?c:h,E=ow(b,f,m),S=b.currentIndex;if(b===h)f--,h=h._nextRemoved;else if(c=c._next,null==b.previousIndex)f++;else{m||(m=[]);const M=E-f,R=S-f;if(M!=R){for(let z=0;z<M;z++){const te=z<m.length?m[z]:m[z]=0,we=te+z;R<=we&&we<M&&(m[z]=te+1)}m[b.previousIndex]=R-M}}E!==S&&a(b,E,S)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!qf(a))throw new Pe(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,b,c=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)m=a[E],b=this._trackByFn(E,m),null!==c&&Object.is(c.trackById,b)?(h&&(c=this._verifyReinsertion(c,m,b,E)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,b,E),h=!0),c=c._next}else f=0,function tL(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[$f()]();let h;for(;!(h=c.next()).done;)a(h.value)}}(a,E=>{b=this._trackByFn(f,E),null!==c&&Object.is(c.trackById,b)?(h&&(c=this._verifyReinsertion(c,E,b,f)),Object.is(c.item,E)||this._addIdentityChange(c,E)):(c=this._mismatch(c,E,b,f),h=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,h,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,m,f)):a=this._addAfter(new bB(c,h),m,f),a}_verifyReinsertion(a,c,h,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,c,h),this._addToMoves(a,h),a}_moveAfter(a,c,h){return this._unlink(a),this._insertAfter(a,c,h),this._addToMoves(a,h),a}_addAfter(a,c,h){return this._insertAfter(a,c,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,h){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new OR),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,h=a._next;return null===c?this._itHead=h:c._next=h,null===h?this._itTail=c:h._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new OR),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class bB{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sw{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===c||c<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const c=a._prevDup,h=a._nextDup;return null===c?this._head=h:c._nextDup=h,null===h?this._tail=c:h._prevDup=c,null===this._head}}class OR{constructor(){this.map=new Map}put(a){const c=a.trackById;let h=this.map.get(c);h||(h=new sw,this.map.set(c,h)),h.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ow(o,a,c){const h=o.previousIndex;if(null===h)return h;let f=0;return c&&h<c.length&&(f=c[h]),h+a+f}class aw{constructor(){}supports(a){return a instanceof Map||iE(a)}create(){return new yS}}class yS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||iE(a)))throw new Pe(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,h),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(f,h);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let h=c;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const h=a._prev;return c._next=a,c._prev=h,a._prev=c,h&&(h._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const m=f._prev,b=f._next;return m&&(m._next=b),b&&(b._prev=m),f._next=null,f._prev=null,f}const h=new wB(a);return this._records.set(a,h),h.currentValue=c,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(h=>c(a[h],h))}}class wB{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function PR(){return new ed([new _S])}let ed=(()=>{class o{constructor(c){this.factories=c}static create(c,h){if(null!=h){const f=h.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:h=>o.create(c,h||PR()),deps:[[o,new na,new Er]]}}find(c){const h=this.factories.find(f=>f.supports(c));if(null!=h)return h;throw new Pe(901,"")}}return o.\u0275prov=en({token:o,providedIn:"root",factory:PR}),o})();function lw(){return new Xl([new aw])}let Xl=(()=>{class o{constructor(c){this.factories=c}static create(c,h){if(h){const f=h.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:h=>o.create(c,h||lw()),deps:[[o,new na,new Er]]}}find(c){const h=this.factories.find(m=>m.supports(c));if(h)return h;throw new Pe(901,"")}}return o.\u0275prov=en({token:o,providedIn:"root",factory:lw}),o})();const BR=bR(null,"core",[{provide:nS,useValue:"unknown"},{provide:wR,deps:[Za]},{provide:_R,deps:[]},{provide:iS,deps:[]}]);let Fp=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(be(C_))},o.\u0275mod=Ft({type:o}),o.\u0275inj=Yt({}),o})()},3942:(et,ve,F)=>{F.d(ve,{Z:()=>Pe});var u=F(2090),ne=F(4859),B=F(9681),he=F(1877);class ae{constructor(me,Te){this._delegate=me,this.firebase=Te,(0,B._addComponent)(me,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(me,Te=B._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const tt=this._delegate.container.getProvider(me);return!tt.isInitialized()&&"EXPLICIT"===(null===(Ye=tt.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&tt.initialize(),tt.getImmediate({identifier:Te})}_removeServiceInstance(me,Te=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(Te)}_addComponent(me){(0,B._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,B._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function ue(){const je=function le(je){const me={},Te={__esModule:!0,initializeApp:function Ie($e,W={}){const De=B.initializeApp($e,W);if((0,u.r3)(me,De.name))return me[De.name];const X=new je(De,Te);return me[De.name]=X,X},app:tt,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function Se($e){const W=$e.name,De=W.replace("-compat","");if(B._registerComponent($e)&&"PUBLIC"===$e.type){const X=(ce=tt())=>{if("function"!=typeof ce[De])throw ie.create("invalid-app-argument",{appName:W});return ce[De]()};void 0!==$e.serviceProps&&(0,u.ZB)(X,$e.serviceProps),Te[De]=X,je.prototype[De]=function(...ce){return this._getService.bind(this,W).apply(this,$e.multipleInstances?ce:[])}}return"PUBLIC"===$e.type?Te[De]:null},removeApp:function Ye($e){delete me[$e]},useAsService:function ze($e,W){return"serverAuth"===W?null:W},modularAPIs:B}};function tt($e){if(!(0,u.r3)(me,$e=$e||B._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:$e});return me[$e]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function Ee(){return Object.keys(me).map($e=>me[$e])}}),tt.App=je,Te}(ae);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function me(Te){(0,u.ZB)(je,Te)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),je}(),q=new he.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=G;!function xe(je){(0,B.registerVersion)("@firebase/app-compat","0.1.29",je)}()},9681:(et,ve,F)=>{F.r(ve),F.d(ve,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>is,_DEFAULT_ENTRY_NAME:()=>Vt,_addComponent:()=>un,_addOrOverwriteComponent:()=>en,_apps:()=>on,_clearComponents:()=>ns,_components:()=>Un,_getProvider:()=>Yt,_registerComponent:()=>Gi,_removeServiceInstance:()=>Ut,deleteApp:()=>vt,getApp:()=>ir,getApps:()=>jr,initializeApp:()=>oo,onLog:()=>ti,registerVersion:()=>jn,setLogLevel:()=>rs});var u=F(5861),ne=F(4859),B=F(1877),he=F(2090),ae=F(8766);class _e{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(K=>{if(function ie(j){const $=j.getComponent();return"VERSION"===(null==$?void 0:$.type)}(K)){const Re=K.getImmediate();return`${Re.library}/${Re.version}`}return null}).filter(K=>K).join(" ")}}const le="@firebase/app",G=new B.Yd("@firebase/app"),Vt="[DEFAULT]",nt={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},on=new Map,Un=new Map;function un(j,$){try{j.container.addComponent($)}catch(K){G.debug(`Component ${$.name} failed to register with FirebaseApp ${j.name}`,K)}}function en(j,$){j.container.addOrOverwriteComponent($)}function Gi(j){const $=j.name;if(Un.has($))return G.debug(`There were multiple attempts to register component ${$}.`),!1;Un.set($,j);for(const K of on.values())un(K,j);return!0}function Yt(j,$){const K=j.container.getProvider("heartbeat").getImmediate({optional:!0});return K&&K.triggerHeartbeat(),j.container.getProvider($)}function Ut(j,$,K=Vt){Yt(j,$).clearInstance(K)}function ns(){Un.clear()}const Ri=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class nr{constructor($,K,Re){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},K),this._name=K.name,this._automaticDataCollectionEnabled=K.automaticDataCollectionEnabled,this._container=Re,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw Ri.create("app-deleted",{appName:this._name})}}const is="9.9.0";function oo(j,$={}){"object"!=typeof $&&($={name:$});const K=Object.assign({name:Vt,automaticDataCollectionEnabled:!1},$),Re=K.name;if("string"!=typeof Re||!Re)throw Ri.create("bad-app-name",{appName:String(Re)});const He=on.get(Re);if(He){if((0,he.vZ)(j,He.options)&&(0,he.vZ)(K,He.config))return He;throw Ri.create("duplicate-app",{appName:Re})}const dt=new ne.H0(Re);for(const Qt of Un.values())dt.addComponent(Qt);const dn=new nr(j,K,dt);return on.set(Re,dn),dn}function ir(j=Vt){const $=on.get(j);if(!$)throw Ri.create("no-app",{appName:j});return $}function jr(){return Array.from(on.values())}function vt(j){return rr.apply(this,arguments)}function rr(){return(rr=(0,u.Z)(function*(j){const $=j.name;on.has($)&&(on.delete($),yield Promise.all(j.container.getProviders().map(K=>K.delete())),j.isDeleted=!0)})).apply(this,arguments)}function jn(j,$,K){var Re;let He=null!==(Re=nt[j])&&void 0!==Re?Re:j;K&&(He+=`-${K}`);const dt=He.match(/\s|\//),dn=$.match(/\s|\//);if(dt||dn){const Qt=[`Unable to register library "${He}" with version "${$}":`];return dt&&Qt.push(`library name "${He}" contains illegal characters (whitespace or "/")`),dt&&dn&&Qt.push("and"),dn&&Qt.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void G.warn(Qt.join(" "))}Gi(new ne.wA(`${He}-version`,()=>({library:He,version:$}),"VERSION"))}function ti(j,$){if(null!==j&&"function"!=typeof j)throw Ri.create("invalid-log-argument");(0,B.Am)(j,$)}function rs(j){(0,B.Ub)(j)}const Zn="firebase-heartbeat-store";let fr=null;function Lo(){return fr||(fr=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:(j,$)=>{0===$&&j.createObjectStore(Zn)}}).catch(j=>{throw Ri.create("storage-open",{originalErrorMessage:j.message})})),fr}function ct(){return(ct=(0,u.Z)(function*(j){var $;try{return(yield Lo()).transaction(Zn).objectStore(Zn).get(pr(j))}catch(K){throw Ri.create("storage-get",{originalErrorMessage:null===($=K)||void 0===$?void 0:$.message})}})).apply(this,arguments)}function Ct(j,$){return ki.apply(this,arguments)}function ki(){return(ki=(0,u.Z)(function*(j,$){var K;try{const He=(yield Lo()).transaction(Zn,"readwrite");return yield He.objectStore(Zn).put($,pr(j)),He.done}catch(Re){throw Ri.create("storage-set",{originalErrorMessage:null===(K=Re)||void 0===K?void 0:K.message})}})).apply(this,arguments)}function pr(j){return`${j.name}!${j.options.appId}`}class Oi{constructor($){this.container=$,this._heartbeatsCache=null;const K=this.container.getProvider("app").getImmediate();this._storage=new lo(K),this._heartbeatsCachePromise=this._storage.read().then(Re=>(this._heartbeatsCache=Re,Re))}triggerHeartbeat(){var $=this;return(0,u.Z)(function*(){const Re=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),He=zi();if(null===$._heartbeatsCache&&($._heartbeatsCache=yield $._heartbeatsCachePromise),$._heartbeatsCache.lastSentHeartbeatDate!==He&&!$._heartbeatsCache.heartbeats.some(dt=>dt.date===He))return $._heartbeatsCache.heartbeats.push({date:He,agent:Re}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(dt=>{const dn=new Date(dt.date).valueOf();return Date.now()-dn<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,u.Z)(function*(){if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null===$._heartbeatsCache||0===$._heartbeatsCache.heartbeats.length)return"";const K=zi(),{heartbeatsToSend:Re,unsentEntries:He}=function pt(j,$=1024){const K=[];let Re=j.slice();for(const He of j){const dt=K.find(dn=>dn.agent===He.agent);if(dt){if(dt.dates.push(He.date),H(K)>$){dt.dates.pop();break}}else if(K.push({agent:He.agent,dates:[He.date]}),H(K)>$){K.pop();break}Re=Re.slice(1)}return{heartbeatsToSend:K,unsentEntries:Re}}($._heartbeatsCache.heartbeats),dt=(0,he.L)(JSON.stringify({version:2,heartbeats:Re}));return $._heartbeatsCache.lastSentHeartbeatDate=K,He.length>0?($._heartbeatsCache.heartbeats=He,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),dt})()}}function zi(){return(new Date).toISOString().substring(0,10)}class lo{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,u.Z)(function*(){return(yield $._canUseIndexedDBPromise)&&(yield function qt(j){return ct.apply(this,arguments)}($.app))||{heartbeats:[]}})()}overwrite($){var K=this;return(0,u.Z)(function*(){var Re;if(yield K._canUseIndexedDBPromise){const dt=yield K.read();return Ct(K.app,{lastSentHeartbeatDate:null!==(Re=$.lastSentHeartbeatDate)&&void 0!==Re?Re:dt.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var K=this;return(0,u.Z)(function*(){var Re;if(yield K._canUseIndexedDBPromise){const dt=yield K.read();return Ct(K.app,{lastSentHeartbeatDate:null!==(Re=$.lastSentHeartbeatDate)&&void 0!==Re?Re:dt.lastSentHeartbeatDate,heartbeats:[...dt.heartbeats,...$.heartbeats]})}})()}}function H(j){return(0,he.L)(JSON.stringify({version:2,heartbeats:j})).length}!function Z(j){Gi(new ne.wA("platform-logger",$=>new _e($),"PRIVATE")),Gi(new ne.wA("heartbeat",$=>new Oi($),"PRIVATE")),jn(le,"0.7.28",j),jn(le,"0.7.28","esm2017"),jn("fire-js","")}("")},4859:(et,ve,F)=>{F.d(ve,{wA:()=>B,H0:()=>le,zt:()=>ae});var u=F(5861),ne=F(2090);class B{constructor(G,q,oe){this.name=G,this.instanceFactory=q,this.type=oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const he="[DEFAULT]";class ae{constructor(G,q){this.name=G,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const q=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(q)){const oe=new ne.BH;if(this.instancesDeferred.set(q,oe),this.isInitialized(q)||this.shouldAutoInitialize())try{const Ze=this.getOrInitializeService({instanceIdentifier:q});Ze&&oe.resolve(Ze)}catch(Ze){}}return this.instancesDeferred.get(q).promise}getImmediate(G){var q;const oe=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),Ze=null!==(q=null==G?void 0:G.optional)&&void 0!==q&&q;if(!this.isInitialized(oe)&&!this.shouldAutoInitialize()){if(Ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:oe})}catch(xe){if(Ze)return null;throw xe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ie(ue){return"EAGER"===ue.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:he})}catch(q){}for(const[q,oe]of this.instancesDeferred.entries()){const Ze=this.normalizeInstanceIdentifier(q);try{const xe=this.getOrInitializeService({instanceIdentifier:Ze});oe.resolve(xe)}catch(xe){}}}}clearInstance(G=he){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,u.Z)(function*(){const q=Array.from(G.instances.values());yield Promise.all([...q.filter(oe=>"INTERNAL"in oe).map(oe=>oe.INTERNAL.delete()),...q.filter(oe=>"_delete"in oe).map(oe=>oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=he){return this.instances.has(G)}getOptions(G=he){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:q={}}=G,oe=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(oe))throw Error(`${this.name}(${oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ze=this.getOrInitializeService({instanceIdentifier:oe,options:q});for(const[xe,Pe]of this.instancesDeferred.entries())oe===this.normalizeInstanceIdentifier(xe)&&Pe.resolve(Ze);return Ze}onInit(G,q){var oe;const Ze=this.normalizeInstanceIdentifier(q),xe=null!==(oe=this.onInitCallbacks.get(Ze))&&void 0!==oe?oe:new Set;xe.add(G),this.onInitCallbacks.set(Ze,xe);const Pe=this.instances.get(Ze);return Pe&&G(Pe,Ze),()=>{xe.delete(G)}}invokeOnInitCallbacks(G,q){const oe=this.onInitCallbacks.get(q);if(oe)for(const Ze of oe)try{Ze(G,q)}catch(xe){}}getOrInitializeService({instanceIdentifier:G,options:q={}}){let oe=this.instances.get(G);if(!oe&&this.component&&(oe=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=G,ue===he?void 0:ue),options:q}),this.instances.set(G,oe),this.instancesOptions.set(G,q),this.invokeOnInitCallbacks(oe,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,oe)}catch(Ze){}var ue;return oe||null}normalizeInstanceIdentifier(G=he){return this.component?this.component.multipleInstances?G:he:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const q=this.getProvider(G.name);if(q.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);q.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const q=new ae(G,this);return this.providers.set(G,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(et,ve,F)=>{F.d(ve,{in:()=>ne,Yd:()=>ie,Ub:()=>le,Am:()=>ue});const u=[];var ne=(()=>{return(G=ne||(ne={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",ne;var G})();const B={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},he=ne.INFO,ae={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},_e=(G,q,...oe)=>{if(q<G.logLevel)return;const Ze=(new Date).toISOString(),xe=ae[q];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[xe](`[${Ze}]  ${G.name}:`,...oe)};class ie{constructor(q){this.name=q,this._logLevel=he,this._logHandler=_e,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in ne))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?B[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...q),this._logHandler(this,ne.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...q),this._logHandler(this,ne.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...q),this._logHandler(this,ne.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...q),this._logHandler(this,ne.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...q),this._logHandler(this,ne.ERROR,...q)}}function le(G){u.forEach(q=>{q.setLogLevel(G)})}function ue(G,q){for(const oe of u){let Ze=null;q&&q.level&&(Ze=B[q.level]),oe.userLogHandler=null===G?null:(xe,Pe,...je)=>{const me=je.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch(Ye){return null}}).filter(Te=>Te).join(" ");Pe>=(null!=Ze?Ze:xe.logLevel)&&G({level:ne[Pe].toLowerCase(),message:me,args:je,type:xe.name})}}}},8766:(et,ve,F)=>{F.d(ve,{Lj:()=>Ie,X3:()=>tt});var u=F(5861);let B,he;const ie=new WeakMap,le=new WeakMap,ue=new WeakMap,G=new WeakMap,q=new WeakMap;let xe={get(W,De,X){if(W instanceof IDBTransaction){if("done"===De)return le.get(W);if("objectStoreNames"===De)return W.objectStoreNames||ue.get(W);if("store"===De)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return Te(W[De])},set:(W,De,X)=>(W[De]=X,!0),has:(W,De)=>W instanceof IDBTransaction&&("done"===De||"store"===De)||De in W};function me(W){return"function"==typeof W?function je(W){return W!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(W)?function(...De){return W.apply(Ye(this),De),Te(ie.get(this))}:function(...De){return Te(W.apply(Ye(this),De))}:function(De,...X){const ce=W.call(Ye(this),De,...X);return ue.set(ce,De.sort?De.sort():[De]),Te(ce)}}(W):(W instanceof IDBTransaction&&function Ze(W){if(le.has(W))return;const De=new Promise((X,ce)=>{const se=()=>{W.removeEventListener("complete",ye),W.removeEventListener("error",fe),W.removeEventListener("abort",fe)},ye=()=>{X(),se()},fe=()=>{ce(W.error||new DOMException("AbortError","AbortError")),se()};W.addEventListener("complete",ye),W.addEventListener("error",fe),W.addEventListener("abort",fe)});le.set(W,De)}(W),((W,De)=>De.some(X=>W instanceof X))(W,function ae(){return B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(W,xe):W)}function Te(W){if(W instanceof IDBRequest)return function oe(W){const De=new Promise((X,ce)=>{const se=()=>{W.removeEventListener("success",ye),W.removeEventListener("error",fe)},ye=()=>{X(Te(W.result)),se()},fe=()=>{ce(W.error),se()};W.addEventListener("success",ye),W.addEventListener("error",fe)});return De.then(X=>{X instanceof IDBCursor&&ie.set(X,W)}).catch(()=>{}),q.set(De,W),De}(W);if(G.has(W))return G.get(W);const De=me(W);return De!==W&&(G.set(W,De),q.set(De,W)),De}const Ye=W=>q.get(W);function tt(W,De,{blocked:X,upgrade:ce,blocking:se,terminated:ye}={}){const fe=indexedDB.open(W,De),Ne=Te(fe);return ce&&fe.addEventListener("upgradeneeded",ft=>{ce(Te(fe.result),ft.oldVersion,ft.newVersion,Te(fe.transaction))}),X&&fe.addEventListener("blocked",()=>X()),Ne.then(ft=>{ye&&ft.addEventListener("close",()=>ye()),se&&ft.addEventListener("versionchange",()=>se())}).catch(()=>{}),Ne}function Ie(W,{blocked:De}={}){const X=indexedDB.deleteDatabase(W);return De&&X.addEventListener("blocked",()=>De()),Te(X).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],ze=new Map;function $e(W,De){if(!(W instanceof IDBDatabase)||De in W||"string"!=typeof De)return;if(ze.get(De))return ze.get(De);const X=De.replace(/FromIndex$/,""),ce=De!==X,se=Se.includes(X);if(!(X in(ce?IDBIndex:IDBObjectStore).prototype)||!se&&!Ee.includes(X))return;const ye=function(){var fe=(0,u.Z)(function*(Ne,...ft){const $t=this.transaction(Ne,se?"readwrite":"readonly");let Vt=$t.store;return ce&&(Vt=Vt.index(ft.shift())),(yield Promise.all([Vt[X](...ft),se&&$t.done]))[0]});return function(ft){return fe.apply(this,arguments)}}();return ze.set(De,ye),ye}!function Pe(W){xe=W(xe)}(W=>Tq(Sq({},W),{get:(De,X,ce)=>$e(De,X)||W.get(De,X,ce),has:(De,X)=>!!$e(De,X)||W.has(De,X)}))},5861:(et,ve,F)=>{function u(B,he,ae,_e,ie,le,ue){try{var G=B[le](ue),q=G.value}catch(oe){return void ae(oe)}G.done?he(q):Promise.resolve(q).then(_e,ie)}function ne(B){return function(){var he=this,ae=arguments;return new Promise(function(_e,ie){var le=B.apply(he,ae);function ue(q){u(le,_e,ie,ue,G,"next",q)}function G(q){u(le,_e,ie,ue,G,"throw",q)}ue(void 0)})}}F.d(ve,{Z:()=>ne})}},et=>{et(et.s=7015)}]);